<refentry id="pango-OpenType-Font-Handling">
<refmeta>
<refentrytitle>OpenType Font Handling</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>PANGO Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>OpenType Font Handling</refname><refpurpose>Obtaining information from OpenType tables</refpurpose>
</refnamediv>

<refsynopsisdiv><title>Synopsis</title>

<synopsis>



typedef     <link linkend="PangoOTTag">PangoOTTag</link>;
struct      <link linkend="PangoOTInfo">PangoOTInfo</link>;
struct      <link linkend="PangoOTRuleset">PangoOTRuleset</link>;
enum        <link linkend="PangoOTTableType">PangoOTTableType</link>;
<link linkend="PangoOTInfo">PangoOTInfo</link>* <link linkend="pango-ot-info-get">pango_ot_info_get</link>              (<link linkend="FT-Face">FT_Face</link> face);
<link linkend="gboolean">gboolean</link>    <link linkend="pango-ot-info-find-script">pango_ot_info_find_script</link>       (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> script_tag,
                                             <link linkend="guint">guint</link> *script_index);
<link linkend="gboolean">gboolean</link>    <link linkend="pango-ot-info-find-language">pango_ot_info_find_language</link>     (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="PangoOTTag">PangoOTTag</link> language_tag,
                                             <link linkend="guint">guint</link> *language_index,
                                             <link linkend="guint">guint</link> *required_feature_index);
<link linkend="gboolean">gboolean</link>    <link linkend="pango-ot-info-find-feature">pango_ot_info_find_feature</link>      (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> feature_tag,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="guint">guint</link> language_index,
                                             <link linkend="guint">guint</link> *feature_index);
<link linkend="PangoOTTag">PangoOTTag</link>* <link linkend="pango-ot-info-list-scripts">pango_ot_info_list_scripts</link>      (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type);
<link linkend="PangoOTTag">PangoOTTag</link>* <link linkend="pango-ot-info-list-languages">pango_ot_info_list_languages</link>    (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="PangoOTTag">PangoOTTag</link> language_tag);
<link linkend="PangoOTTag">PangoOTTag</link>* <link linkend="pango-ot-info-list-features">pango_ot_info_list_features</link>     (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> tag,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="guint">guint</link> language_index);
<link linkend="PangoOTRuleset">PangoOTRuleset</link>* <link linkend="pango-ot-ruleset-new">pango_ot_ruleset_new</link>        (<link linkend="PangoOTInfo">PangoOTInfo</link> *info);
void        <link linkend="pango-ot-ruleset-add-feature">pango_ot_ruleset_add_feature</link>    (<link linkend="PangoOTRuleset">PangoOTRuleset</link> *ruleset,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> feature_index,
                                             <link linkend="gulong">gulong</link> property_bit);
void        <link linkend="pango-ot-ruleset-shape">pango_ot_ruleset_shape</link>          (<link linkend="PangoOTRuleset">PangoOTRuleset</link> *ruleset,
                                             <link linkend="PangoGlyphString">PangoGlyphString</link> *glyphs,
                                             <link linkend="gulong">gulong</link> *properties);
</synopsis>
</refsynopsisdiv>







<refsect1>
<title>Description</title>
<para>

</para>
</refsect1>

<refsect1>
<title>Details</title>
<refsect2>
<title><anchor id="PangoOTTag"/>PangoOTTag</title>
<programlisting>typedef guint32  PangoOTTag;
</programlisting>
<para>
The <type>PangoOTTag</type> typedef is used to represent TrueType and OpenType
four letter tags inside Pango. Use the <function><link linkend="FT-MAKE-TAG-CAPS">FT_MAKE_TAG</link>()</function> macro
defined in the FreeType2 header <filename>freetype/freetype.h</filename> to 
create <type>PangoOTTag</type>s manually.
</para></refsect2>
<refsect2>
<title><anchor id="PangoOTInfo"/>struct PangoOTInfo</title>
<programlisting>struct PangoOTInfo;</programlisting>
<para>
The <structname>PangoOTInfo</structname> struct contains the various 
tables associated with an OpenType font. It contains only private fields and
should only be accessed via the <function>pango_ot_info_*</function> functions
which are documented below. To obtain a <structname>PangoOTInfo</structname>,
use <link linkend="pango-ot-info-new">pango_ot_info_new</link>().
</para></refsect2>
<refsect2>
<title><anchor id="PangoOTRuleset"/>struct PangoOTRuleset</title>
<programlisting>struct PangoOTRuleset;</programlisting>
<para>
The <structname>PangoOTRuleSet</structname> structure holds a
set of features selected from the tables in an OpenType font.
(A feature is an operation such as adjusting glyph positioning
that should be applied to a text feature such as a certain
type of accent.) A <structname>PangoOTRuleSet</structname>
is created with <link linkend="pango-ot-ruleset-new">pango_ot_ruleset_new</link>(), features are addded
to it with <link linkend="pango-ot-ruleset-add-feature">pango_ot_ruleset_add_feature</link>(), then it is
applied to a <link linkend="PangoGlyphString">PangoGlyphString</link> with <link linkend="pango-ot-ruleset-shape">pango_ot_ruleset_shape</link>().
</para></refsect2>
<refsect2>
<title><anchor id="PangoOTTableType"/>enum PangoOTTableType</title>
<programlisting>typedef enum 
{
  PANGO_OT_TABLE_GSUB,
  PANGO_OT_TABLE_GPOS
} PangoOTTableType;
</programlisting>
<para>
The <type>PangoOTTableType</type> enumeration values are used to
identify the various OpenType tables in the
<function>pango_ot_info_*</function> functions.
</para><variablelist role="enum">
<varlistentry>
<term><literal>PANGO_OT_TABLE_GSUB</literal></term>
<listitem><simpara>The GSUB table.
</simpara></listitem>
</varlistentry>
<varlistentry>
<term><literal>PANGO_OT_TABLE_GPOS</literal></term>
<listitem><simpara>The GPOS table.

</simpara></listitem>
</varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-get"/>pango_ot_info_get ()</title>
<programlisting><link linkend="PangoOTInfo">PangoOTInfo</link>* pango_ot_info_get              (<link linkend="FT-Face">FT_Face</link> face);</programlisting>
<para>
Returns the <link linkend="PangoOTInfo">PangoOTInfo</link> structure for the given FreeType font.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>face</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="FT-Face">FT_Face</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> the <link linkend="PangoOTInfo">PangoOTInfo</link> for <parameter>face</parameter>. This object will
  have the same lifetime as FT_Face.
</simpara></listitem></varlistentry>
</variablelist><para>Since  1.2
</para></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-find-script"/>pango_ot_info_find_script ()</title>
<programlisting><link linkend="gboolean">gboolean</link>    pango_ot_info_find_script       (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> script_tag,
                                             <link linkend="guint">guint</link> *script_index);</programlisting>
<para>
Finds the index of a script.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_tag</parameter>&nbsp;:</term>
<listitem><simpara> the tag of the script to find.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_index</parameter>&nbsp;:</term>
<listitem><simpara> location to store the index of the script, or <literal>NULL</literal>.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> <literal>TRUE</literal> if the script was found.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-find-language"/>pango_ot_info_find_language ()</title>
<programlisting><link linkend="gboolean">gboolean</link>    pango_ot_info_find_language     (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="PangoOTTag">PangoOTTag</link> language_tag,
                                             <link linkend="guint">guint</link> *language_index,
                                             <link linkend="guint">guint</link> *required_feature_index);</programlisting>
<para>
Finds the index of a language and its required feature index.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the script whose languages are searched.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>language_tag</parameter>&nbsp;:</term>
<listitem><simpara> the tag of the language to find.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>language_index</parameter>&nbsp;:</term>
<listitem><simpara> location to store the index of the language, or <literal>NULL</literal>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>required_feature_index</parameter>&nbsp;:</term>
<listitem><simpara> location to store the required feature index of 
   the language, or <literal>NULL</literal>.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> <literal>TRUE</literal> if the language was found.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-find-feature"/>pango_ot_info_find_feature ()</title>
<programlisting><link linkend="gboolean">gboolean</link>    pango_ot_info_find_feature      (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> feature_tag,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="guint">guint</link> language_index,
                                             <link linkend="guint">guint</link> *feature_index);</programlisting>
<para>
Finds the index of a feature.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>feature_tag</parameter>&nbsp;:</term>
<listitem><simpara> the tag of the feature to find.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the script.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>language_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the language whose features are searched,
    or 0xffff to use the default language of the script.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>feature_index</parameter>&nbsp;:</term>
<listitem><simpara> location to store the index of the feature, or <literal>NULL</literal>. 
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> <literal>TRUE</literal> if the feature was found.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-list-scripts"/>pango_ot_info_list_scripts ()</title>
<programlisting><link linkend="PangoOTTag">PangoOTTag</link>* pango_ot_info_list_scripts      (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type);</programlisting>
<para>
Obtains the list of available scripts.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> a newly-allocated array containing the tags of the
  available scripts.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-list-languages"/>pango_ot_info_list_languages ()</title>
<programlisting><link linkend="PangoOTTag">PangoOTTag</link>* pango_ot_info_list_languages    (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="PangoOTTag">PangoOTTag</link> language_tag);</programlisting>
<para>
Obtains the list of available languages for a given script.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the script to list languages for.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>language_tag</parameter>&nbsp;:</term>
<listitem><simpara> unused parameter.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> a newly-allocated array containing the tags of the
  available languages.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-info-list-features"/>pango_ot_info_list_features ()</title>
<programlisting><link linkend="PangoOTTag">PangoOTTag</link>* pango_ot_info_list_features     (<link linkend="PangoOTInfo">PangoOTInfo</link> *info,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="PangoOTTag">PangoOTTag</link> tag,
                                             <link linkend="guint">guint</link> script_index,
                                             <link linkend="guint">guint</link> language_index);</programlisting>
<para>
Obtains the list of features for the given language of the given script.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to obtain information about.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>tag</parameter>&nbsp;:</term>
<listitem><simpara> unused parameter.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>script_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the script to obtain information about. 
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>language_index</parameter>&nbsp;:</term>
<listitem><simpara> the indes of the language to list features for, or
    0xffff, to list features for the default language of the script.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> a newly-allocated array containing the tags of the available
   features. 
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-ruleset-new"/>pango_ot_ruleset_new ()</title>
<programlisting><link linkend="PangoOTRuleset">PangoOTRuleset</link>* pango_ot_ruleset_new        (<link linkend="PangoOTInfo">PangoOTInfo</link> *info);</programlisting>
<para>
Creates a new <link linkend="PangoOTRuleset">PangoOTRuleset</link> for the given OpenType info.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>info</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTInfo">PangoOTInfo</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis> :</term><listitem><simpara> a new <link linkend="PangoOTRuleset">PangoOTRuleset</link>.
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-ruleset-add-feature"/>pango_ot_ruleset_add_feature ()</title>
<programlisting>void        pango_ot_ruleset_add_feature    (<link linkend="PangoOTRuleset">PangoOTRuleset</link> *ruleset,
                                             <link linkend="PangoOTTableType">PangoOTTableType</link> table_type,
                                             <link linkend="guint">guint</link> feature_index,
                                             <link linkend="gulong">gulong</link> property_bit);</programlisting>
<para>
Adds a feature to the ruleset. See <link linkend="pango-ot-ruleset-shape">pango_ot_ruleset_shape</link>()
for an explanation of <parameter>property_bit</parameter>.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>ruleset</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTRuleset">PangoOTRuleset</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>table_type</parameter>&nbsp;:</term>
<listitem><simpara> the table type to add a feature to.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>feature_index</parameter>&nbsp;:</term>
<listitem><simpara> the index of the feature to add.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>property_bit</parameter>&nbsp;:</term>
<listitem><simpara> the property bit to use for this feature. 
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2>
<title><anchor id="pango-ot-ruleset-shape"/>pango_ot_ruleset_shape ()</title>
<programlisting>void        pango_ot_ruleset_shape          (<link linkend="PangoOTRuleset">PangoOTRuleset</link> *ruleset,
                                             <link linkend="PangoGlyphString">PangoGlyphString</link> *glyphs,
                                             <link linkend="gulong">gulong</link> *properties);</programlisting>
<para>
Shapes a string of glyphs with the given properties according to <parameter>ruleset</parameter>.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>ruleset</parameter>&nbsp;:</term>
<listitem><simpara> a <link linkend="PangoOTRuleset">PangoOTRuleset</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>glyphs</parameter>&nbsp;:</term>
<listitem><simpara> a pointer to a <link linkend="PangoGlyphString">PangoGlyphString</link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>properties</parameter>&nbsp;:</term>
<listitem><simpara> an array containing one <link linkend="gulong">gulong</link> bitfield for each glyph,
  which gives the glyph's properties: If a certain bit is set for a glyph, 
  the feature which has the same bit set in its property value is applied.
</simpara></listitem></varlistentry>
</variablelist></refsect2>

</refsect1>




</refentry>
