#!/bin/sh
# $Id: athstatic,v 1.1 2002-04-16 06:02:34 ghudson Exp $

# Usage: athstatic progname options ...

# Replaces -lfoo options with /usr/athena/lib/libfoo.a if it exists,
# thus preferring static libraries to shared libraries for stuff in
# /usr/athena/lib.  Same for the Kerberos libraries in ../../lib.

progname=$1
shift

options=
for arg do
  case $arg in
  -l*)
    # Chop off the first two characters to get the library name.
    lib=`expr "$arg" : '..\(.*\)$'`
    if [ -f ../../lib/lib${lib}.a ]; then
      options="$options ../../lib/lib${lib}.a"
    elif [ -f /usr/athena/lib/lib${lib}.a ]; then
      options="$options /usr/athena/lib/lib${lib}.a"
    else
      options="$options $arg"
    fi
    ;;
  *)
    options="$options $arg"
    ;;
  esac
done

exec "$progname" $options
