<refentry id="bonobo-activation-Query-and-Activation">
<refmeta>
<refentrytitle>Query and Activation</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>BONOBO-ACTIVATION Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>Query and Activation</refname><refpurpose>Querying for components and Activating them</refpurpose>
</refnamediv>

<refsynopsisdiv><title>Synopsis</title>
<synopsis>

#include &lt;bonobo-activation/bonobo-activation.h&gt;


typedef     <link linkend="Bonobo-ImplementationID">Bonobo_ImplementationID</link>;
typedef     <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link>;
typedef     <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link>;
<link linkend="Bonobo-ServerInfoList">Bonobo_ServerInfoList</link>* <link linkend="bonobo-activation-query">bonobo_activation_query</link>
                                            (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);
<link linkend="CORBA-Object">CORBA_Object</link> <link linkend="bonobo-activation-activate">bonobo_activation_activate</link>     (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> *ret_aid,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);
<link linkend="CORBA-Object">CORBA_Object</link> <link linkend="bonobo-activation-activate-from-id">bonobo_activation_activate_from_id</link>
                                            (const <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> aid,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> *ret_aid,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);
void        (<link linkend="BonoboActivationCallback">*BonoboActivationCallback</link>)     (<link linkend="CORBA-Object">CORBA_Object</link> activated_object,
                                             const char *error_reason,
                                             <link linkend="gpointer">gpointer</link> user_data);
void        <link linkend="bonobo-activation-activate-async">bonobo_activation_activate_async</link>
                                            (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="BonoboActivationCallback">BonoboActivationCallback</link> callback,
                                             <link linkend="gpointer">gpointer</link> user_data,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);
void        <link linkend="bonobo-activation-activate-from-id-async">bonobo_activation_activate_from_id_async</link>
                                            (const <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> aid,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="BonoboActivationCallback">BonoboActivationCallback</link> callback,
                                             <link linkend="gpointer">gpointer</link> user_data,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);
</synopsis>
</refsynopsisdiv>





<refsect1>
<title>Description</title>
<para>
This section describes how you can query for components
and activate them.
</para>

<para>
Two set of functions are described: synchronous and 
asynchronous ones. The asynchronous version of the functions
allow you to avoid blocking your application while the CORBA
servers are started.
</para>
</refsect1>

<refsect1>
<title>Details</title>
<refsect2>
<title><anchor id="Bonobo-ImplementationID">Bonobo_ImplementationID</title>
<programlisting>   typedef CORBA_string Bonobo_ImplementationID;
</programlisting>
<para>

</para></refsect2>
<refsect2>
<title><anchor id="Bonobo-ActivationID">Bonobo_ActivationID</title>
<programlisting>   typedef CORBA_string Bonobo_ActivationID;
</programlisting>
<para>

</para></refsect2>
<refsect2>
<title><anchor id="Bonobo-ActivationFlags">Bonobo_ActivationFlags</title>
<programlisting>   typedef CORBA_long Bonobo_ActivationFlags;
</programlisting>
<para>

</para></refsect2>
<refsect2>
<title><anchor id="bonobo-activation-query">bonobo_activation_query ()</title>
<programlisting><link linkend="Bonobo-ServerInfoList">Bonobo_ServerInfoList</link>* bonobo_activation_query
                                            (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);</programlisting>
<para>
Executes the <parameter>requirements</parameter> query on the bonobo-activation-server.
The result is sorted according to <parameter>selection_order</parameter>. 
<parameter>selection_order</parameter> can safely be NULL as well as <parameter>ev</parameter>.
The returned list has to be freed with CORBA_free.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>requirements</parameter>&nbsp;:</entry>
<entry> query string.
</entry></row>
<row><entry align="right"><parameter>selection_order</parameter>&nbsp;:</entry>
<entry> sort criterion for returned list.
</entry></row>
<row><entry align="right"><parameter>ev</parameter>&nbsp;:</entry>
<entry> a <literal>CORBA_Environment</literal> structure which will contain 
     the CORBA exception status of the operation, or NULL
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> the list of servers matching the requirements.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="bonobo-activation-activate">bonobo_activation_activate ()</title>
<programlisting><link linkend="CORBA-Object">CORBA_Object</link> bonobo_activation_activate     (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> *ret_aid,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);</programlisting>
<para>
Activates a given object. <parameter>ret_aid</parameter> can be safely NULLed as well
as <parameter>ev</parameter> and <parameter>selection_order</parameter>. <parameter>flags</parameter> can be set to zero if you do 
not what to use.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>requirements</parameter>&nbsp;:</entry>
<entry> query string.
</entry></row>
<row><entry align="right"><parameter>selection_order</parameter>&nbsp;:</entry>
<entry> sort criterion for returned list.
</entry></row>
<row><entry align="right"><parameter>flags</parameter>&nbsp;:</entry>
<entry> how to activate the object.
</entry></row>
<row><entry align="right"><parameter>ret_aid</parameter>&nbsp;:</entry>
<entry> AID of the activated object.
</entry></row>
<row><entry align="right"><parameter>ev</parameter>&nbsp;:</entry>
<entry> <literal>CORBA_Environment</literal> structure which will contain 
     the CORBA exception status of the operation. 
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> the CORBA object reference of the activated object.
              This value can be CORBA_OBJECT_NIL: you are supposed 
              to check <parameter>ev</parameter> for success.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="bonobo-activation-activate-from-id">bonobo_activation_activate_from_id ()</title>
<programlisting><link linkend="CORBA-Object">CORBA_Object</link> bonobo_activation_activate_from_id
                                            (const <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> aid,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> *ret_aid,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);</programlisting>
<para>
Activates the server corresponding to <parameter>aid</parameter>. <parameter>ret_aid</parameter> can be safely 
NULLed as well as <parameter>ev</parameter>. <parameter>flags</parameter> can be zero if you do not know what 
to do.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>aid</parameter>&nbsp;:</entry>
<entry> AID or IID of the object to activate.
</entry></row>
<row><entry align="right"><parameter>flags</parameter>&nbsp;:</entry>
<entry> activation flag.
</entry></row>
<row><entry align="right"><parameter>ret_aid</parameter>&nbsp;:</entry>
<entry> AID of the activated server.
</entry></row>
<row><entry align="right"><parameter>ev</parameter>&nbsp;:</entry>
<entry> <literal>CORBA_Environment</literal> structure which will contain 
     the CORBA exception status of the operation. 
</entry></row>
<row><entry align="right"><emphasis>Returns</emphasis> :</entry><entry> a CORBA object reference to the newly activated 
              server. Do not forget to check <parameter>ev</parameter> for failure!!
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="BonoboActivationCallback">BonoboActivationCallback ()</title>
<programlisting>void        (*BonoboActivationCallback)     (<link linkend="CORBA-Object">CORBA_Object</link> activated_object,
                                             const char *error_reason,
                                             <link linkend="gpointer">gpointer</link> user_data);</programlisting>
<para>
This is the signature of the function which you must pass
as a callback to the asynchrounous activation functions.
</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>activated_object</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>error_reason</parameter>&nbsp;:</entry>
<entry>
</entry></row>
<row><entry align="right"><parameter>user_data</parameter>&nbsp;:</entry>
<entry>


</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="bonobo-activation-activate-async">bonobo_activation_activate_async ()</title>
<programlisting>void        bonobo_activation_activate_async
                                            (const char *requirements,
                                             char *const *selection_order,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="BonoboActivationCallback">BonoboActivationCallback</link> callback,
                                             <link linkend="gpointer">gpointer</link> user_data,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);</programlisting>
<para>
This function will asynchronously try to activate a component 
given the <parameter>requirements</parameter> query string. When the component is 
activated or when the activation fails, it will call <parameter>callback</parameter> 
with the given <parameter>user_data</parameter> data as parameter.
callback will be called with a CORBA_OBJECT_NIL object if the 
activation fails. If the activation fails, the callback will be 
given a human-readable string containing a description of the 
error. In case of sucess, the error string value is undefined.
</para>
<para>
<parameter>selection_order</parameter> can be safely NULLed as well as <parameter>ev</parameter> and 
<parameter>user_data</parameter>. <parameter>flags</parameter> can be set to 0 if you do not know what to 
use.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>requirements</parameter>&nbsp;:</entry>
<entry> the bonobo-activation query string.
</entry></row>
<row><entry align="right"><parameter>selection_order</parameter>&nbsp;:</entry>
<entry> preference array.
</entry></row>
<row><entry align="right"><parameter>flags</parameter>&nbsp;:</entry>
<entry> activation flags.
</entry></row>
<row><entry align="right"><parameter>callback</parameter>&nbsp;:</entry>
<entry> callback function.
</entry></row>
<row><entry align="right"><parameter>user_data</parameter>&nbsp;:</entry>
<entry> data to be poassed to the callback function.
</entry></row>
<row><entry align="right"><parameter>ev</parameter>&nbsp;:</entry>
<entry> exception structure.
</entry></row>
</tbody></tgroup></informaltable></refsect2>
<refsect2>
<title><anchor id="bonobo-activation-activate-from-id-async">bonobo_activation_activate_from_id_async ()</title>
<programlisting>void        bonobo_activation_activate_from_id_async
                                            (const <link linkend="Bonobo-ActivationID">Bonobo_ActivationID</link> aid,
                                             <link linkend="Bonobo-ActivationFlags">Bonobo_ActivationFlags</link> flags,
                                             <link linkend="BonoboActivationCallback">BonoboActivationCallback</link> callback,
                                             <link linkend="gpointer">gpointer</link> user_data,
                                             <link linkend="CORBA-Environment">CORBA_Environment</link> *ev);</programlisting>
<para>
This function will asynchronously try to activate a component 
with the given <parameter>aid</parameter>. When the component is 
activated or when the activation fails, it will call <parameter>callback</parameter> 
with the given <parameter>user_data</parameter> data as parameter.
callback will be called with a CORBA_OBJECT_NIL object if the 
activation fails. If the activation fails, the callback will be 
given a human-readable string containing a description of the 
error. In case of sucess, the error string value is undefined.
</para>
<para>
<parameter>flags</parameter> can be 0 if you do not know what to set it to and 
<parameter>ev</parameter> can be safely set to NULL.</para>
<para>

</para><informaltable pgwide="1" frame="none" role="params">
<tgroup cols="2">
<colspec colwidth="2*">
<colspec colwidth="8*">
<tbody>
<row><entry align="right"><parameter>aid</parameter>&nbsp;:</entry>
<entry> the AID or IID of the component to activate.
</entry></row>
<row><entry align="right"><parameter>flags</parameter>&nbsp;:</entry>
<entry> activation flags.
</entry></row>
<row><entry align="right"><parameter>callback</parameter>&nbsp;:</entry>
<entry> callback function.
</entry></row>
<row><entry align="right"><parameter>user_data</parameter>&nbsp;:</entry>
<entry> data to be poassed to the callback function.
</entry></row>
<row><entry align="right"><parameter>ev</parameter>&nbsp;:</entry>
<entry> exception structure.
</entry></row>
</tbody></tgroup></informaltable></refsect2>

</refsect1>




</refentry>
