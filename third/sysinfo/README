
			    SYSINFO 3.3.1

			  Michael A. Cooper
			  MagniComp Systems
			MCooper@MagniComp.Com

	 $Id: README,v 1.1.1.2 1998-02-12 21:31:49 ghudson Exp $

			 GENERAL INFORMATION

Sysinfo is a program which shows various pieces of information about
the hardware and operating system software configuration of the host
it's run on.  The original version was written to simply determine the
model name of a system for use in /etc/motd.  It also supported a few
other pieces of information that were simple to obtain, but the method
used to obtain the information on various different OS's varied.  The
current version shows many different "general" bits of system
information as well as fairly detailed information about system
hardware devices (disk drives, frame buffers, tape drives, etc.),
kernel variables, and system configuration information.  A lot of the
information Sysinfo displays is difficult, if not impossible, to
determine by normal OS commands and/or files after boot time on many
OS's.

Most of the OS specific information was determined by groveling
/usr/include/{sys,machine,*dev}/*.h files, section 4 man pages, and
reverse engineering the output from various commands like devinfo
(SunOS) and using the trace(2) facility.  Some of the network (netif)
code was inspired by the sources to the 4.3BSD netstat and ifconfig
commands.


			 SUPPORTTED PLATFORMS

Sysinfo has been tested on the platforms listed below.  Sysinfo
may work under OS versions or platforms not listed below.

				 INFORMATION CLASSES SUPPORTED
PLATFORM			General	Device	Kernel	SysConf
==============================	=======	======	======	=======
Sun SPARC / SunOS 4.1.4		   X	   X	   X	   X
(SunOS 4.1.4 /usr/ucb/cc)
---------------------------------------------------------------
Sun SPARC / SunOS 5.5, 5.5.1,	   X	   X	   X	   X
5.6beta (SunC 3.0.1)
---------------------------------------------------------------
x86 / SunOS 5.4			   X	   X	   X	   X
(SunC 3.0.1)
---------------------------------------------------------------
IBM RS6000 / AIX 3.2.5, 4.1	   X	   X		   X
(XLC ??)
---------------------------------------------------------------
SGI IRIX 5.3, 6.1, 6.2		   X	   X	   X	   X
---------------------------------------------------------------
HP 9000/700 / HP-UX 10.20	   X		   X	   X
(HP-UX C)
---------------------------------------------------------------
Convex SPP / SPP-UX 3.1		   X			   X
(Convex C ?)


			 RELEASE INFORMATION

A list of major changes from version to version is listed below.
For more details, please read the `CHANGES' file.

CHANGES FROM 3.3 to 3.3.1

Updates for new Sun hardware.  Floppies on Sun's now appear again.
CDROM drives on Suns are now identified.  Updated and slightly
improved SGI hardware information, including another (hopefully final)
fix for compiling on IRIX 6.2.  Fixes for HPUX 10.20.

CHANGES FROM 3.2.2 to 3.3

Bug fixes especially for "-format report" and IRIX 6.2 compile time support.

Now shows info for removable media devices when available (i.e. not
under control of Volume Manager) and no media is loaded.

Add support for direct SCSI device inquiries under Solaris.

CHANGES FROM 3.2.1 to 3.2.2

Compile time fixes for SunOS 4.1.x and some other minor bug fixes.

CHANGES FROM 3.2 to 3.2.1

Fixed several bugs that caused the wrong system model name to be
displayed on many Solaris OBP system types.  Also fixed a problem with
some OBP properties not being displayed.

CHANGES FROM 3.1.2 to 3.2

The OBP and kernel routines for Solaris 2.x have been revamped to add
support for non-SPARC Solaris platforms.  Currently only x86 under
Solaris 2.4 has been tested.  Due to the large variety of x86
hardware, there's bound to be lots of devices missing from
config/sunos.cf.  This version has some chance of working on Solaris
2.x PowerPC machines, but I don't have access to any to test.

Most newer types of Sun systems will now show more specific system model
names.  i.e. We can now say "Ultra 1 Model 170" instead of just "Ultra 1".
This functionality is customizable via cf files (see config/sunos.cf).

Support for most current Sun hardware has been added.  This includes the
Ultra Enterprise x000 servers as well as some new peripherials and cards.

Memory allocation for Solaris OBP (SPARC) machines has greatly been
reduced.

CHANGES FROM 3.1.1 to 3.1.2

Fix core dump when "-level all -format report" is used on some platforms.

CHANGES FROM 3.1 to 3.1.1

Minor bug fixes to the source code as well as some additions to the
irix and sunos config files.

CHANGES FROM 3.0.6 to 3.1

The 3.1 release features support for new platforms (IRIX 5.x and 6.x),
a new parsable report format (-format report), and various bug fixes.
It also phases out support for Ultrix and NeXT machines (version 3.0.6
is the last release to support these platforms - see "Ultrix, NeXT"
NOTES below).

The output format has been changed to be more consistant (for default
output) and more readable (-level all).

The -list and -class options have been cleaned up and made much more
consistant.

Add new options -format and -type.

The Makefile has been enhanced to allow SYSINFO to be installed more easily
using a different program name.

CHANGES FROM 3.0.3 to 3.0.5

Bug fixes.  Fixes include support for SunOS 5.5 and new Sun hardware
like the Ultra-1 and other peripherials.

CHANGES FROM 3.0 to 3.0.2

Most changes are small bug fixes that won't affect most users.  Various
bugs in installing sysinfo of been fixed.  HP-UX and Solaris 2.x users
may want to upgrade.

CHANGES FROM 2.1.3 TO 3.0

The 3.0 release features a number of major changes in platform support
and in additional classes of information that are shown.  I would
really like to do device support for HPUX 9.x, but 9.x is such a mess
that device support is difficult and ugly.  I'm not sure whether I
will go ahead with device support for 9.x or wait for and hope that
10.x improves things.

The information shown for the Kernel class is not very complete and
may be inaccurate in some cases.  I'm open to input as to what kernel
variable info is important enough that Sysinfo should check for it.

This may be the last release that supports Ultrix and NeXTStep.  I
probably won't support those platforms after summer, 1995.

A number of major changes have been made between 2.1.3 and 3.0:

 	Almost all configuration information is now read from externel 
	configuration files at runtime.  This allows easier modifications
	and greatly simplified end-user customization.

	Add support for showing simple arbitrary kernel information.

	Add support for showing system configuration information.

	Revamp -show option to work in conjuction with new -class option
	to specify specific classes (General, Kernel, Device).

	Add ability to show information about a specific list of items
	for each class of informatin (Device, Kernel, General, SysConf).

	Major cleanup of internal code and instructions.

	Add basic support for HP-UX 9.x and Convex SPP-UX 2.x.

	Update device information for Sun hardware.

	Modify device information on AIX hosts to show better hardware info.

	Miscellaneous bug fixes.

CHANGES FROM 2.0 to 2.1.3

The major changes between version 2.0 and 2.1 include showing the
number of CPU's on systems supporting sysconf(_SC_NPROCESSORS_CONF)
(currently Solaris 2.2 and later) and showing the type of keyboard
present for Sun systems.  Also, when running external programs,
sysinfo now sets the effective uid to the user running sysinfo and
uses execve() directly, instead of calling system().

Sysinfo should also be much more reliable on SunOS 4.1.x machines.  A
number of problems in SunOS 4.1.x exist that cause system crashes that
earlier versions of SYSINFO tweaked.  Mostly these problems have to do
with CDROM's and floppy disk drives.

The Alliant and Sun-386i platforms have also been dropped starting with
version 2.1.  This is due to those platforms being phased out here at USC.

CHANGES SINCE VERSION 1.x

The major changes since version 1.x include adding support for getting
device information from the Open Boot PROM (OBP) on Sun-like machines
and support for SunOS 5.x (Solaris 2.x).  The OBP interface provides
more information than ever.  The OBP interface also gives sysinfo the
ability to provide detailed information on what types of CPUs are
available.

SunOS 5.x comes with a number of features which makes SYSINFO much
more portable across different manufacturer's hardware running SunOS
5.x.  This includes the ability to determine the label on a disk drive
in a device driver independent fashion.  This ability alone should
eliminate most of the problems with SYSINFO causing certain systems
with certain system configurations to crash.  (Which I still maintain
is the fault of SunOS and not SYSINFO.)  The OBP kernel interface in
SunOS 5.x also adds the ability to associate nodes found by looking
through the kernel with those nodes found by querying the OBP
directly.  This means SYSINFO can extract and assign much more
information found by direct OBP queries than is possible with SunOS
4.x.


			   WHERE TO GET IT

The latest/greatest version of sysinfo is available via anonymous ftp as

	ftp://usc.edu/pub/sysinfo/sysinfo.tar.gz

If you did not obtain sysinfo from this location, then it's always a
good idea to check to see if there's a newer version available before
proceeding.


			     INSTALLATION

1) Read the comments in `Makefile' and make any necessary changes.
   You probably will want to change the PREFIX and/or CONFDIR variables.

2) Run `make'.  Here are some important notes you should read:

      - You will almost always need to compile SYSINFO on _EACH_
	version of your operating system (OS).
      - Under SunOS 4.x, you must compile SYSINFO for each kernel architecture
	(karch) and each OS version.  i.e. "sun4c SunOS 4.1.4", "sun4m SunOS
	4.1.4", etc.

3) Run `make test' to run sysinfo right now as a test.

4) To install the sysinfo program, you can either use `make installmeta' 
   (read the file `metasysinfo' for details) or you can run `make install'.

5) Run `make install.man' to install the man page.


			      BUG FIXES

Please send bug fixes, suggestions, and comments to the EMail address
at the top of this README.  When reporting bugs, please include output
from "sysinfo -level all -debug +unknown" whenever possible.


		       PLATFORM SPECIFIC NOTES

The following are notes regarding specific platforms:

SunOS 4.x
	SYSINFO should be compiled for each kernel architecture machine
	you wish to run it on.  This is only needed for SunOS 4.x.  It
	is _NOT_ required for Solaris 2.x/SunOS 5.x.  (SYSINFO is
	normally installed into /usr/kvm and symlinked into something like 
	/usr/local/bin.)  This is necessary if you wish to be able to get 
	the PROM version information.  The SunOS 4.x interface to the PROM 
	information does not permit having one binary that can determine the 
	PROM information on all the different kernel architectures.  This 
	interface problem is fixed in Solaris 2.x/SunOS 5.x.

	Your kernel must have NIT (Network Interface Tap) compiled into it
	in order to determine the Ethernet MAC address under SunOS 4.x.

Solaris 2.4/SunOS 5.4
	Due to a change in SunOS 5.4, "ROM Version" information is not
	shown unless Sun patch 102555-01 or later is installed.  This 
	problem does not exist in SunOS 5.5 because Sun added a new
	interface to get this information.

Solaris 2.x/SunOS 5.x
	Unlike SunOS 4.x, you only need one SYSINFO binary for each Solaris 
	2.x release.  You do not need one for each kernel architecture.  
	i.e. SYSINFO compiled under Solaris 2.2 on a SPARC machine will 
	run on any Solaris 2.2 SPARC machine of any kernel architecture.

	Under Solaris 2.2 FCS on sun4d hosts (like the SPARCcenter-2000), the
	kernel has an empty value for the system "root nexus".  This means
	that you will not see a proper device tree on such systems.
	Various nodes will not be attached where they should be.
	This bug cropped up between Solaris 2.2 ER2 and FCS and is
	fixed in Solaris 2.3.

HP	HP 9000 800 series machines are not supported.

IRIX	The IRIX OS comes with a command called "sysinfo" (/sbin/sysinfo)
	that shows a system's serial number. This normally should not
	present a problem since this program is not normally used by
	users (/sbin should not be in a normal user's $PATH) and is
	normally only run by programs using the explicit path of
	/sbin/sysinfo.  However, if you do wish to install sysinfo
	using another name you may do so by setting the ${PROG}
	variable in Makefile.

AIX	When looking up device information, SYSINFO uses the AIX "National 
	Language Catalogs".  This means that your $LANG environment 
	variable must be set correctly.  If it is not, SYSINFO may fail 
	to find most device information.

	Support for AIX 4.* is not yet availible.  I don't have access to
	such a machine yet.  From what I can tell, though, it should be a
	very straight forward port - probably just modifying the Makefile.

SPP-UX	In SPP-UX 2.0.2 you may see these errors at compile-time::

		cc: Warning on line 109 of /usr/include/sys/wait.h: a \
			bit field must have type int or unsigned int

	These errors are due to a bug in <sys/wait.h> and/or Convex C.
	Convex is aware of the problem and promises a fix at some point.
	The errors can safely be ignored.

Ultrix, NeXT
	Support for these platforms has been phased out.  The last version
	of sysinfo with support for these platforms is version 3.0.6 which
	is availible in ftp://usc.edu/pub/sysinfo/obsolete.
