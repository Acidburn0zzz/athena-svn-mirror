<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>gnome-triggers</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="GNOME Library Reference Manual"><link rel="up" href="ch01s04.html" title="Miscellaneous"><link rel="previous" href="libgnome-gnome-sound.html" title="gnome-sound"><link rel="next" href="ch01s05.html" title="Lower level interactions"><link rel="chapter" href="libgnome.html" title="GNOME Library (libgnome)"><link rel="refentry" href="libgnome-gnome-program.html" title="gnome-program"><link rel="refentry" href="libgnome-gnome-init.html" title="gnome-init"><link rel="refentry" href="libgnome-gnome-exec.html" title="gnome-exec"><link rel="refentry" href="libgnome-gnome-gconf.html" title="gnome-gconf"><link rel="refentry" href="libgnome-gnome-config.html" title="gnome-config"><link rel="refentry" href="libgnome-gnome-i18n.html" title="gnome-i18n"><link rel="refentry" href="libgnome-gnome-help.html" title="gnome-help"><link rel="refentry" href="libgnome-gnome-url.html" title="gnome-url"><link rel="refentry" href="libgnome-gnome-score.html" title="gnome-score"><link rel="refentry" href="libgnome-gnome-util.html" title="gnome-util"><link rel="refentry" href="libgnome-gnome-sound.html" title="gnome-sound"><link rel="refentry" href="libgnome-gnome-triggers.html" title="gnome-triggers"><link rel="refentry" href="libgnome-libgnometypebuiltins.html" title="libgnometypebuiltins"><link rel="section" href="libgnome-gnome-triggers.html#id2950738" title="Description"><link rel="section" href="libgnome-gnome-triggers.html#id2950780" title="Details"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><link rel="stylesheet" href="style.css" type="text/css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="libgnome-gnome-sound.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="ch01s04.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">GNOME Library Reference Manual</th><td><a accesskey="n" href="ch01s05.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="libgnome-gnome-triggers"></a><div class="titlepage"><div></div><div></div></div><div class="refnamediv"><h2><span class="refentrytitle">gnome-triggers</span></h2><p>gnome-triggers &#8212; Hierarchical signal mechanism for GNOME events.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">

#include &lt;libgnome/libgnome.h&gt;


enum        <a href="libgnome-gnome-triggers.html#GnomeTriggerType">GnomeTriggerType</a>;
void        (<a href="libgnome-gnome-triggers.html#GnomeTriggerActionFunction">*GnomeTriggerActionFunction</a>)   (char *msg,
                                             char *level,
                                             char *supinfo[]);
struct      <a href="libgnome-gnome-triggers.html#GnomeTrigger">GnomeTrigger</a>;
void        <a href="libgnome-gnome-triggers.html#gnome-triggers-add-trigger">gnome_triggers_add_trigger</a>      (<a href="libgnome-gnome-triggers.html#GnomeTrigger">GnomeTrigger</a> *nt,
                                             ...);
void        <a href="libgnome-gnome-triggers.html#gnome-triggers-vadd-trigger">gnome_triggers_vadd_trigger</a>     (<a href="libgnome-gnome-triggers.html#GnomeTrigger">GnomeTrigger</a> *nt,
                                             char *supinfo[]);
void        <a href="libgnome-gnome-triggers.html#gnome-triggers-do">gnome_triggers_do</a>               (const char *msg,
                                             const char *level,
                                             ...);
void        <a href="libgnome-gnome-triggers.html#gnome-triggers-vdo">gnome_triggers_vdo</a>              (const char *msg,
                                             const char *level,
                                             const char *supinfo[]);
</pre></div><div class="refsect1" lang="en"><a name="id2950738"></a><h2>Description</h2><p>
The triggers API provides a way for applications to tell GNOME about
interesting events that then cause something to happen (for example, playing a
sound). An event can either be a function that is called, a sound that is
played or an external command that is run.
</p><p>
Each trigger can optionally have a <i class="wordasword">level</i> associated
with it and a <i class="wordasword">section</i>. The
<i class="wordasword">section</i> is a list of strings that help to classify the
event, which imposes a hierarchy on the trigger system. For example, messages
about the hard drive partition /dev/hda1 may come under the section ("system",
"device", "disk", "/dev/hda1"). This means that an application could trigger
all events for the ("system", "device") sections and include those events, or
be more specific and just trigger those for ("system", "device", "disk",
"/dev/hda1").
</p><p>
At the present time, triggers are not widely used in GNOME, being mostly used
to play sound events in response to certain actions.
</p></div><div class="refsect1" lang="en"><a name="id2950780"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id2950786"></a><h3><a name="GnomeTriggerType"></a>enum GnomeTriggerType</h3><a class="indexterm" name="id2950798"></a><pre class="programlisting">typedef enum {
	GTRIG_NONE,
	GTRIG_FUNCTION,
	GTRIG_COMMAND,
	GTRIG_MEDIAPLAY
} GnomeTriggerType;
</pre><p>
These are the different types of triggers that can be activated by an
application.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><tt class="literal">GTRIG_NONE</tt></span></td><td>A null trigger type. Should never be used.
</td></tr><tr><td><span class="term"><tt class="literal">GTRIG_FUNCTION</tt></span></td><td>The trigger causes a function to be executed.
</td></tr><tr><td><span class="term"><tt class="literal">GTRIG_COMMAND</tt></span></td><td>The trigger causes a command to be executed (using <tt class="function">execv()</tt>).
</td></tr><tr><td><span class="term"><tt class="literal">GTRIG_MEDIAPLAY</tt></span></td><td>The trigger causes a sound to be played.

</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2950892"></a><h3><a name="GnomeTriggerActionFunction"></a>GnomeTriggerActionFunction ()</h3><a class="indexterm" name="id2950904"></a><pre class="programlisting">void        (*GnomeTriggerActionFunction)   (char *msg,
                                             char *level,
                                             char *supinfo[]);</pre><p>
The signature of a function that can used as a target for <span class="type">GTRIG_FUNCTION</span>
types of <a href="libgnome-gnome-triggers.html#GnomeTrigger"><span class="type">GnomeTrigger</span></a> instances.
</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>msg</tt></i> :</span></td><td>The human-readable message that was passed to <a href="libgnome-gnome-triggers.html#gnome-triggers-do"><tt class="function">gnome_triggers_do()</tt></a>. May be
<tt class="literal">NULL</tt>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>level</tt></i> :</span></td><td>The severity level of the event. May be <tt class="literal">NULL</tt>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>supinfo</tt></i> :</span></td><td>The section in which the event belongs. This is a <tt class="literal">NULL</tt> terminated
array.


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2951042"></a><h3><a name="GnomeTrigger"></a>struct GnomeTrigger</h3><a class="indexterm" name="id2951053"></a><pre class="programlisting">struct GnomeTrigger {

	GnomeTriggerType type;
	union {
		/*
		 * These will be passed the same info as
		 * gnome_triggers_do was given.
		 */
		GnomeTriggerActionFunction function;
		gchar *command;
		struct {
			gchar *file;
			int cache_id;
		} media;
	} u;
        gchar *level;
};
</pre><p>
This structure stores the information about an action that is triggered for
a particular event. A filled in instance of this structure is passed to
<a href="libgnome-gnome-triggers.html#gnome-triggers-add-trigger"><tt class="function">gnome_triggers_add_trigger()</tt></a> and <a href="libgnome-gnome-triggers.html#gnome-triggers-vadd-trigger"><tt class="function">gnome_triggers_vadd_trigger()</tt></a>.
</p></div><hr><div class="refsect2" lang="en"><a name="id2951098"></a><h3><a name="gnome-triggers-add-trigger"></a>gnome_triggers_add_trigger ()</h3><a class="indexterm" name="id2951109"></a><pre class="programlisting">void        gnome_triggers_add_trigger      (<a href="libgnome-gnome-triggers.html#GnomeTrigger">GnomeTrigger</a> *nt,
                                             ...);</pre><p>
Adds a new <a href="libgnome-gnome-triggers.html#GnomeTrigger"><span class="type">GnomeTrigger</span></a> instance to the event hierarchy.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>nt</tt></i> :</span></td><td> Information on the new trigger to be added.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>...</tt></i> :</span></td><td> The section to add the trigger under.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2951183"></a><h3><a name="gnome-triggers-vadd-trigger"></a>gnome_triggers_vadd_trigger ()</h3><a class="indexterm" name="id2951196"></a><pre class="programlisting">void        gnome_triggers_vadd_trigger     (<a href="libgnome-gnome-triggers.html#GnomeTrigger">GnomeTrigger</a> *nt,
                                             char *supinfo[]);</pre><p>
This does the same as <a href="libgnome-gnome-triggers.html#gnome-triggers-add-trigger"><tt class="function">gnome_triggers_add_trigger()</tt></a>, except the section is
stored in the <tt class="literal">NULL</tt> terminated array <i class="parameter"><tt>supinfo</tt></i> instead of as a variable
length argument list.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>nt</tt></i> :</span></td><td> Information on the new trigger to be added.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>supinfo</tt></i> :</span></td><td> The section to add the trigger under.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2951293"></a><h3><a name="gnome-triggers-do"></a>gnome_triggers_do ()</h3><a class="indexterm" name="id2951304"></a><pre class="programlisting">void        gnome_triggers_do               (const char *msg,
                                             const char *level,
                                             ...);</pre><p>
Notifies GNOME about an event happening, so that any appropriate handlers
can be run.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>msg</tt></i> :</span></td><td> The human-readable message describing the event (can be <tt class="literal">NULL</tt>).
</td></tr><tr><td><span class="term"><i class="parameter"><tt>level</tt></i> :</span></td><td> The level of severity of the event, or <tt class="literal">NULL</tt>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>...</tt></i> :</span></td><td> The classification of the event.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2951403"></a><h3><a name="gnome-triggers-vdo"></a>gnome_triggers_vdo ()</h3><a class="indexterm" name="id2951414"></a><pre class="programlisting">void        gnome_triggers_vdo              (const char *msg,
                                             const char *level,
                                             const char *supinfo[]);</pre><p>
Notifies GNOME about an event happening, so that any appropriate handlers
can be run. This does the same as <tt class="function">gnome_trigger_do()</tt> except that it takes a
<tt class="literal">NULL</tt> terminated array instead of a varargs list.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>msg</tt></i> :</span></td><td> The human-readable message describing the event (can be <tt class="literal">NULL</tt>).
</td></tr><tr><td><span class="term"><i class="parameter"><tt>level</tt></i> :</span></td><td> The level of severity of the event, or <tt class="literal">NULL</tt>.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>supinfo</tt></i> :</span></td><td> The classification of the event (<tt class="literal">NULL</tt> terminated array).
</td></tr></tbody></table></div></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="libgnome-gnome-sound.html"><b>&lt;&lt; gnome-sound</b></a></td><td align="right"><a accesskey="n" href="ch01s05.html"><b>Lower level interactions &gt;&gt;</b></a></td></tr></table></body></html>
