<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>gnome-exec</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="GNOME Library Reference Manual"><link rel="up" href="libgnome.html#id2641131" title="Initializing applications and starting programs"><link rel="previous" href="libgnome-gnome-init.html" title="gnome-init"><link rel="next" href="ch01s02.html" title="Configuration"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><style type="text/css">
        .synopsis, .classsynopsis {
            background: #eeeeee;
            border: solid 1px #aaaaaa;
            padding: 0.5em;
        }
        .programlisting {
            background: #eeeeff;
            border: solid 1px #aaaaff;
            padding: 0.5em;
        }
        .variablelist {
            padding: 4px;
            margin-left: 3em;
        }
        .navigation {
            background: #ffeeee;
            border: solid 1px #ffaaaa;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }
        .navigation a {
            color: #770000;
        }
        .navigation a:visited {
            color: #550000;
        }
        .navigation .title {
            font-size: 200%;
        }
      </style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="libgnome-gnome-init.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="libgnome.html#id2641131"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">GNOME Library Reference Manual</th><td><a accesskey="n" href="ch01s02.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="libgnome-gnome-exec"></a><div class="titlepage"><div></div><div></div></div><div class="refnamediv"><h2><span class="refentrytitle">gnome-exec</span></h2><p>gnome-exec &#8212; Execution of programs from within GNOME applications.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">

#include &lt;libgnome/libgnome.h&gt;


int         <a href="libgnome-gnome-exec.html#gnome-execute-async">gnome_execute_async</a>             (const char *dir,
                                             int argc,
                                             char *const argv[]);
int         <a href="libgnome-gnome-exec.html#gnome-execute-async-fds">gnome_execute_async_fds</a>         (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             gboolean close_fds);
int         <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env">gnome_execute_async_with_env</a>    (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             int envc,
                                             char *const envv[]);
int         <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env-fds">gnome_execute_async_with_env_fds</a>
                                            (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             int envc,
                                             char *const envv[],
                                             gboolean close_fds);
int         <a href="libgnome-gnome-exec.html#gnome-execute-shell">gnome_execute_shell</a>             (const char *dir,
                                             const char *commandline);
int         <a href="libgnome-gnome-exec.html#gnome-execute-shell-fds">gnome_execute_shell_fds</a>         (const char *dir,
                                             const char *commandline,
                                             gboolean close_fds);
void        <a href="libgnome-gnome-exec.html#gnome-prepend-terminal-to-vector">gnome_prepend_terminal_to_vector</a>
                                            (int *argc,
                                             char ***argv);
int         <a href="libgnome-gnome-exec.html#gnome-execute-terminal-shell">gnome_execute_terminal_shell</a>    (const char *dir,
                                             const char *commandline);
int         <a href="libgnome-gnome-exec.html#gnome-execute-terminal-shell-fds">gnome_execute_terminal_shell_fds</a>
                                            (const char *dir,
                                             const char *commandline,
                                             gboolean close_fds);
</pre></div><div class="refsect1" lang="en"><a name="id2700514"></a><h2>Description</h2><p>
The gnome-execute family of functions are provided to simplify execution of
programs from withing GNOME applications.  These routines are required to avoid
passing opened file descriptors to a child process (like the X11 sockets and
CORBA sockets). They will also make sure to terminate properly.
</p><p>
The range of possibilities goes from the most simple use to the most
specialized ones.
</p></div><div class="refsect1" lang="en"><a name="id2700533"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id2700539"></a><h3><a name="gnome-execute-async"></a>gnome_execute_async ()</h3><a class="indexterm" name="id2700550"></a><pre class="programlisting">int         gnome_execute_async             (const char *dir,
                                             int argc,
                                             char *const argv[]);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env"><tt class="function">gnome_execute_async_with_env()</tt></a>, but doesn't add anything
to child's environment.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executesd, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argc</tt></i> :</span></td><td> Number of arguments
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argv</tt></i> :</span></td><td> Argument vector to exec child
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of child, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2700678"></a><h3><a name="gnome-execute-async-fds"></a>gnome_execute_async_fds ()</h3><a class="indexterm" name="id2700689"></a><pre class="programlisting">int         gnome_execute_async_fds         (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             gboolean close_fds);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env-fds"><tt class="function">gnome_execute_async_with_env_fds()</tt></a>, but doesn't add
anything to child's environment.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argc</tt></i> :</span></td><td> Number of arguments
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argv</tt></i> :</span></td><td> Argument vector to exec child
</td></tr><tr><td><span class="term"><i class="parameter"><tt>close_fds</tt></i> :</span></td><td> If <tt class="literal">TRUE</tt>, will close all but file descriptors 0, 1 and 2.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of child, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2700844"></a><h3><a name="gnome-execute-async-with-env"></a>gnome_execute_async_with_env ()</h3><a class="indexterm" name="id2700856"></a><pre class="programlisting">int         gnome_execute_async_with_env    (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             int envc,
                                             char *const envv[]);</pre><p>
This function forks and executes some program in the
background.  On error, returns <tt class="literal">-1</tt>; in this case, <span class="type">errno</span> should hold a useful
value.  Searches the path to find the child.  Environment settings in <i class="parameter"><tt>envv</tt></i>
are added to the existing environment -- they do not completely replace it.
This function closes all fds besides 0, 1, and 2 for the child</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or NULL for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argc</tt></i> :</span></td><td> Number of arguments
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argv</tt></i> :</span></td><td> Argument vector to exec child
</td></tr><tr><td><span class="term"><i class="parameter"><tt>envc</tt></i> :</span></td><td> Number of environment slots
</td></tr><tr><td><span class="term"><i class="parameter"><tt>envv</tt></i> :</span></td><td> Environment vector
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the process id, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701035"></a><h3><a name="gnome-execute-async-with-env-fds"></a>gnome_execute_async_with_env_fds ()</h3><a class="indexterm" name="id2701047"></a><pre class="programlisting">int         gnome_execute_async_with_env_fds
                                            (const char *dir,
                                             int argc,
                                             char *const argv[],
                                             int envc,
                                             char *const envv[],
                                             gboolean close_fds);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env"><tt class="function">gnome_execute_async_with_env()</tt></a> but has a flag to
decide whether or not to close fd's</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argc</tt></i> :</span></td><td> Number of arguments
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argv</tt></i> :</span></td><td> Argument vector to exec child
</td></tr><tr><td><span class="term"><i class="parameter"><tt>envc</tt></i> :</span></td><td> Number of environment slots
</td></tr><tr><td><span class="term"><i class="parameter"><tt>envv</tt></i> :</span></td><td> Environment vector
</td></tr><tr><td><span class="term"><i class="parameter"><tt>close_fds</tt></i> :</span></td><td> If <tt class="literal">TRUE</tt> will close all fds but 0,1, and 2
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> the process id, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701247"></a><h3><a name="gnome-execute-shell"></a>gnome_execute_shell ()</h3><a class="indexterm" name="id2701258"></a><pre class="programlisting">int         gnome_execute_shell             (const char *dir,
                                             const char *commandline);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env"><tt class="function">gnome_execute_async_with_env()</tt></a>, but uses the user's shell
to run the desired program.  Note that the pid of the shell is returned, not
the pid of the user's program.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>commandline</tt></i> :</span></td><td> Shell command to execute
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of shell, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701365"></a><h3><a name="gnome-execute-shell-fds"></a>gnome_execute_shell_fds ()</h3><a class="indexterm" name="id2701376"></a><pre class="programlisting">int         gnome_execute_shell_fds         (const char *dir,
                                             const char *commandline,
                                             gboolean close_fds);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env-fds"><tt class="function">gnome_execute_async_with_env_fds()</tt></a>, but uses the user's
shell to run the desired program.  Note that the pid of the shell is
returned, not the pid of the user's program.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>commandline</tt></i> :</span></td><td> Shell command to execute
</td></tr><tr><td><span class="term"><i class="parameter"><tt>close_fds</tt></i> :</span></td><td> Like close_fds in <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env-fds"><tt class="function">gnome_execute_async_with_env_fds()</tt></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of shell, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701517"></a><h3><a name="gnome-prepend-terminal-to-vector"></a>gnome_prepend_terminal_to_vector ()</h3><a class="indexterm" name="id2701529"></a><pre class="programlisting">void        gnome_prepend_terminal_to_vector
                                            (int *argc,
                                             char ***argv);</pre><p>
Prepends a terminal (either the one configured as default in
the user's GNOME setup, or one of the common xterm emulators) to the passed
in vector, modifying it in the process.  The vector should be allocated with
<span class="type">g_malloc</span>, as this will <span class="type">g_free</span> the original vector.  Also all elements must
have been allocated separately.  That is the standard glib/GNOME way of
doing vectors however.  If the integer that <i class="parameter"><tt>argc</tt></i> points to is negative, the
size will first be computed.  Also note that passing in pointers to a vector
that is empty, will just create a new vector for you.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>argc</tt></i> :</span></td><td> a pointer to the vector size
</td></tr><tr><td><span class="term"><i class="parameter"><tt>argv</tt></i> :</span></td><td> a pointer to the vector
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701633"></a><h3><a name="gnome-execute-terminal-shell"></a>gnome_execute_terminal_shell ()</h3><a class="indexterm" name="id2701645"></a><pre class="programlisting">int         gnome_execute_terminal_shell    (const char *dir,
                                             const char *commandline);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-async"><span class="type">gnome_execute_async</span></a>, except that it runs the
terminal as well.  Note that the pid of the terminal is
returned, not the pid of the user's program.
If commandline is <tt class="literal">NULL</tt>, just the shell is run.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or NULL for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>commandline</tt></i> :</span></td><td> Shell command to execute
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of terminal, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2701750"></a><h3><a name="gnome-execute-terminal-shell-fds"></a>gnome_execute_terminal_shell_fds ()</h3><a class="indexterm" name="id2701762"></a><pre class="programlisting">int         gnome_execute_terminal_shell_fds
                                            (const char *dir,
                                             const char *commandline,
                                             gboolean close_fds);</pre><p>
Like <a href="libgnome-gnome-exec.html#gnome-execute-shell-fds"><tt class="function">gnome_execute_shell_fds()</tt></a>, except that it runs the
terminal as well.  Note that the pid of the terminal is
returned, not the pid of the user's program.
If commandline is <tt class="literal">NULL</tt>, just the shell is run.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>dir</tt></i> :</span></td><td> Directory in which child should be executed, or <tt class="literal">NULL</tt> for current
      directory
</td></tr><tr><td><span class="term"><i class="parameter"><tt>commandline</tt></i> :</span></td><td> Shell command to execute
</td></tr><tr><td><span class="term"><i class="parameter"><tt>close_fds</tt></i> :</span></td><td> Like close_fds in <a href="libgnome-gnome-exec.html#gnome-execute-async-with-env-fds"><tt class="function">gnome_execute_async_with_env_fds()</tt></a>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> process id of terminal, or <tt class="literal">-1</tt> on error.
</td></tr></tbody></table></div></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="libgnome-gnome-init.html"><b>&lt;&lt; gnome-init</b></a></td><td align="right"><a accesskey="n" href="ch01s02.html"><b>Configuration &gt;&gt;</b></a></td></tr></table></body></html>
