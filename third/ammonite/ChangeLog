2000-11-01  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: updated version 0.8.1

2000-11-01  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_proxy_request_cb):
	* src/request.c: (proxy_do_connect), (proxy_get_headers):
	Force a "Conenction: close" header on all upstream requests,
	so Mozilla doesn't try to use persistant connections through
	ammonite

2000-10-30  Robey Pointer  <robey@eazel.com>

	* libammonite-gtk/libammonite-gtk.c:
	(prompter_cb_prompt_authenticate):
	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback):
	* src/impl-eazelproxy.c:
	(impl_EazelProxy_UserControl_prompt_authenticate_user):

	Things I forgot to check in last week, because I'm a dork.  Remove
	one of the evil PR2 hacks (the java side isn't crashing anymore)
	and let a Nautilus user set their username when logging in
	(instead of forcing them to always use whatever's in gconf).

2000-10-30  Robin * Slomkowski  <rslomkow@eazel.com>

	* Makefile.am: added acconfig.h to EXTRA_DISTS

2000-10-30  Mike Fleming  <mfleming@eazel.com>

	* AUTHORS:
	* MAINTAINERS:
	* NEWS:
	* README:
	* TODO:
	* configure.in:
	* src/TODO:
	* src/http-connection.c: (http_connection_connect),
	(http_connection_connect_submit):
	* src/http-connection.h:
	* src/proxy.c: (main):
	* src/proxy.h:
	* src/request.c: (proxy_handle_connect_method), (proxy_do_connect),
	(proxy_new_connection):
	* src/sock.c: (sockbuf_write), (sockbuf_read), (socket_destroy),
	(socket_write):
	* src/sock.h:
	* src/util/eazel-proxy-util.c:

	Fix up for 0.8.0 release

2000-10-30  Fatih Demir	<kabalak@gmx.net>

	* src/eazelproxy-change-password.c: Test if libxml
		is using xmlBufferPtrs and then get the content
		 via the xmlNodeGetContent function(because the
		  content pointer isn't available in this case).

2000-10-29  Mike Fleming  <mfleming@eazel.com>

	* libammonite/ammonite-general.c:
	(ammonite_get_default_user_username):
	* libammonite/libammonite.h:
	Rename/considate am_i_logged_in and who_is_logged_in into
	ammonite_get_default_user_username

2000-10-28  Ramiro Estrugo  <ramiro@eazel.com>

	* ammonite.spec.in:
	* configure.in:
	Link with ssl statically and remove the rpm dependency on ssl.
	
2000-10-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/sock-ssl.c: moved the defines to disable crypto
	* src/sock-ssl.h: into the c file from .h file since
	I was foolish and didn't notice that the crypto was
	included before the sock-ssl.h file.

2000-10-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/sock-ssl.h: OK now the changes for the 
	* src/sock.h:     crypto should be present in both
	headers and everything should be happy.

2000-10-27  Robin * Slomkowski  <rslomkow@eazel.com>

	* src/sock.h: used defines to disable idea and rsa
	from being included from openssl.h so ammonite
	can build with a "scrubbed" openssl

2000-10-26  Robey Pointer  <robey@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback):

	Evil evil hacks for PR2 to make eazel-proxy behave until Mike gets
	back.  Avoids any XML stuff and just searches for "known strings"
	since eazel-proxy was expecting completely different XML output
	than the server is sending.

2000-10-26  Robey Pointer  <robey@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback),
	(set_user_password_http_callback),
	(set_user_password_submit_request):
	* src/utils.c: (util_url_encode):

	Fixed util_url_encode to add the trailing null to encoded strings
	(oops).  Add more debugging logs to the change-pw round trip to
	see what's going on.  Change form encoding type to match what
	apache expects.

2000-10-26  Robin * Slomkowski  <rslomkow@eazel.com>

	* ammonite.spec.in: changed the requriment of ssl to have
	no version, so the installer will not break people who
	have ssh installed with an older version of openssl.  This
	does mean ammonite will be broke, but that is the decision 
	Bud made.

2000-10-26  J Shane Culpepper  <pepper@eazel.com>

	* libammonite/ammonite-general.c: (ammonite_who_is_logged_in),
	(ammonite_am_i_logged_in):
	* libammonite/libammonite.h:
	Fixing naming of exported functions.

2000-10-25  Mike Fleming  <mfleming@eazel.com>

	* libammonite/ammonite-general.c:
	(ammonite_http_url_for_eazel_url), (is_http_localhost),
	(ammonite_eazel_url_for_http_url):
	* libammonite/libammonite.h:

	Added "ammonite_eazel_url_for_http_url" for
	nautilus-mozilla-content-view

2000-10-25  J Shane Culpepper  <pepper@eazel.com>

	* libammonite/ammonite-general.c: (who_is_logged_in),
	(am_i_logged_in):
	* libammonite/libammonite.h:

	Adding useful functions to libammonite for services menu.

2000-10-24  Mike Fleming  <mfleming@eazel.com>

	* libammonite-gtk/libammonite-gtk.c:
	Add "Forgot PW" uri.  Close bug 3525

2000-10-23  Mike Fleming  <mfleming@eazel.com>

	Load previously used Eazel Service User from GConf
	
	Re-do buttons in dialog
		- First dialog always has register button
		- Second button has "I forgot"
		- Error dialog has both "Forgot" and "Register"

	Semi-resolved 3525 (still missing "Forgot" URI)

	* libammonite-gtk/Makefile.am:
	* libammonite-gtk/ammonite-login-dialog.c:
	(ammonite_login_dialog_new), (ammonite_login_dialog_run_and_block):
	* libammonite-gtk/ammonite-login-dialog.h:
	* libammonite-gtk/libammonite-gtk.c:
	(prompter_cb_prompt_authenticate), (evil_init_gconf),
	(get_default_username), (ammonite_do_prompt_login_async),
	(ammonite_do_prompt_dialog), (ammonite_do_authn_error_dialog):
	* libammonite-gtk/libammonite-gtk.h:
	* src/util/Makefile.am:

	* src/util-gconf.c: (util_gconf_init):
	Add FIXME

2000-10-23  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (watch_gconf_services_uri_cb):
	Services Host without port defaults to port 443 if in
	SSL mode (bug 3877)

2000-10-20  Mike Fleming  <mfleming@eazel.com>

	* libammonite-gtk/copy-paste.c: (ammonite_gtk_label_make_bold),
	(ammonite_gtk_widget_set_font), (ammonite_gdk_font_get_bold),
	(ammonite_gtk_style_set_font):
	* libammonite-gtk/copy-paste.h:

	Oops.  Forgot to add file

2000-10-20  Mike Fleming  <mfleming@eazel.com>

	* libammonite-gtk/libammonite-gtk.c: (ammonite_do_prompt_dialog),
	(ammonite_do_authn_error_dialog):

	Use the proper URI for register

2000-10-20  Mike Fleming  <mfleming@eazel.com>

	* ammonite.spec.in:

	I always forget the spec file...

2000-10-20  Mike Fleming  <mfleming@eazel.com>

	New Arlo-ified modal Service Login dialog box.  Still imperfect, but....
	Closes bugs 2326 and 3744, and son will close 3525

	* data/Makefile.am:
	* libammonite-gtk/Makefile.am:
	* libammonite-gtk/ammonite-login-dialog.c:
	(caption_table_activate_callback), (ammonite_login_dialog_new),
	(ammonite_login_dialog_run_and_block),
	(ammonite_login_dialog_set_username),
	(ammonite_login_dialog_set_password),
	(ammonite_login_dialog_set_readonly_username),
	(ammonite_login_dialog_get_username),
	(ammonite_login_dialog_get_password),
	(pixmap_path_for_AuthnPromptKind), (text_for_AuthnPromptKind):
	* libammonite-gtk/ammonite-login-dialog.h:
	* libammonite-gtk/libammonite-gtk.c: (ammonite_do_prompt_login),
	(util_fork_exec), (ammonite_do_prompt_dialog),
	(ammonite_do_authn_error_dialog):
	* libammonite/ammonite-general.c: (ammonite_fail_code_to_string):
	* libammonite/libammonite.h:
	* src/util/eazel-proxy-util.c: (try_init_gnome), (do_login),
	(do_login_prompt), (prompter_cb_prompt_authenticate):

2000-10-18  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_proxy_request_cb):
	* src/proxy.c: (simple_proxy_request_cb), (main):
	* src/utils.c: (util_glist_string_starts_with):
	* src/utils.h:

	Translate DAV "Destination: " header when operating in translate-server mode.
	"Destination" has to contain an absolute URL, which potentially need
	to be translated from the translate-server's URL to the real server.

	This makes "Copy" work in Vault in Nautilus.

2000-10-16  Mike Fleming  <mfleming@eazel.com>

	* src/sock.c: (socket_glib_poll_func):
	Fix bug 3757, a codepath could cause socket list iteration to happen
	incorrectly
	
2000-10-15  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_glist_string_starts_with),
	(user_proxy_request_cb):
	Slam-fix to add field to User-Agent string
	
	* src/sock.c: (socket_glib_poll_func):
	Added FIXME

2000-10-12  Mike Fleming  <mfleming@eazel.com>

	Back and forth: Darin and Maciej convince me to keep libammonite-gtk
	and eazel-proxy-util in ammonite

	* Makefile.am:
	* ammonite.spec.in:
	* configure.in:
	* libammonite-gtk/README.defunct:
	* src/Makefile.am:
	* src/util/README.defunct:

2000-10-12  Mike Fleming  <mfleming@eazel.com>

	* .cvsignore:
	* data/.cvsignore:
	* libammonite-gtk/.cvsignore:
	* libammonite/.cvsignore:
	* po/.cvsignore:
	Updated cvsignore's

2000-10-12  Mike Fleming  <mfleming@eazel.com>

	libammonite-gtk and eazel-proxy-util are now in nautilus

	* Makefile.am:
	* ammonite.spec.in:
	* configure.in:
	* src/Makefile.am:
	* src/util/README.defunct:
	* libammonite-gtk/README.defunct:

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* ammonite.spec.in: added dependecy on openssl

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* ammonite.spec.in: I am faster and got more things.

2000-10-10  Mike Fleming  <mfleming@eazel.com>

	* src/util/eazel-proxy-util.c: (main), (try_init_gnome):
	Disconnect from the GNOME session manager to save people from SaveYourself

2000-10-10  Mike Fleming  <mfleming@eazel.com>

	* libammonite/ammonite-general.c:
	(ammonite_http_url_for_eazel_url):
	make some globals static and add a : to the return for _for_eazel_url 
	* src/request.c: (proxy_response_headers_write):
	Removed useless assert that was firing
	* src/util/eazel-proxy-util.c: (do_translate):
	Reflect change in _url_for_eazel_url

2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* libammonite-gtk/libammonite-gtk.c: (ammonite_do_prompt_login):
	Fix uninitialized variables.

2000-10-10  Mike Fleming  <mfleming@eazel.com>

	* configure.in: switched order of static libraries for ammoniteConf so 
	that dependencies are resolved correctly
	* data/Makefile.am:
	* data/eazel1_dsa_cert.pem: added new cert
	* libammonite-gtk/libammonite-gtk.c: (authn_cb_succeeded),
	(authn_cb_failed), (ammonite_do_prompt_login_async),
	(prompt_login_sync_cb), (ammonite_do_prompt_login):
	* libammonite-gtk/libammonite-gtk.h:
	new ammonite_prompt_login_async call, changed ammonite_prompt_login 
	arguments
	
	* libammonite/ammonite-general.c: (EazelProxy_AuthnFailInfo_copy),
	(EazelProxy_AuthnFailInfo_duplicate), (ammonite_get_user_control),
	(ammonite_get_poa):
	* libammonite/libammonite.h:
	New utility functions

	* src/Makefile.am:
	* src/impl-eazelproxy.c: (get_defaults_from_gconf):
	* src/proxy.c: (load_gconf_defaults), (main):
	Enable SSL by default, added /apps/eazel-trilobite/ssl-cert
	gconf key

	* src/util/eazel-proxy-util.c: (do_login_prompt), (do_translate):
	Changed to new ammonite_prompt_login prototype
	 
2000-10-09  Mike Fleming  <mfleming@eazel.com>

	* libammonite/ammonite-general.c: (usercontrol_find_user),
	(ammonite_http_url_for_eazel_url):
	* libammonite/libammonite.h:
	* src/util/eazel-proxy-util.c: (main), (do_translate):

	remove "EazelProxy_UserControl" from needing to be a parameter to
	libammonite functions.  Also fixed unrelated build problem.

2000-10-09  Mike Fleming  <mfleming@eazel.com>

	Moved functionality from "eazel-proxy-util" to "libammonite"
	and "libammonite-gtk"

	* libammonite-gtk/Makefile.am:
	* libammonite-gtk/libammonite-gtk.c: (my_debug_printf),
	(authn_cb_succeeded), (authn_cb_failed),
	(prompter_cb_prompt_authenticate), (ammonite_do_prompt_login),
	(ammonite_do_prompt_dialog), (ammonite_do_authn_error_dialog),
	(ammonite_do_network_error_dialog):
	* libammonite-gtk/libammonite-gtk.h:
	* libammonite/Makefile.am:
	* libammonite/ammonite-general.c: (my_debug_printf),
	(EazelProxy_User_copy), (EazelProxy_User_duplicate),
	(ammonite_url_free), (ammonite_url_parse), (make_new_uri),
	(usercontrol_find_user), (ammonite_init), (ammonite_shutdown),
	(ammonite_get_user_control), (ammonite_http_url_for_eazel_url):
	* libammonite/libammonite.h:
	* src/Makefile.am:
	* src/impl-eazelproxy.c:
	* src/util/Makefile.am:
	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_login_dialog):
	* src/util/eazel-proxy-util.c: (do_login_prompt), (try_init_gnome),
	(do_translate):

2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* acconfig.h:
	* configure.in:
	Add profiling support via --enable-profiler.

2000-10-03  Mike Fleming  <mfleming@eazel.com>

	* src/sock.c: (socket_destroy), (socket_new):
	Slam-Fix for some odd socket closing behaviour, where a client will get
	a socket close before reading all data.  There's a FIXME attached to
	this for later

	* src/util/eazel-proxy-util-gtk.c:
	(eazel_proxy_util_do_error_dialog),
	(eazel_proxy_util_do_network_error_dialog):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (eazel_proxy_util_do_prompt_login):
	Bug 3292: Login dialog now brings up error dialog when the user can't
	log in due to network problems.

2000-10-03  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	* configure.in:
	* src/impl-eazelproxy.c: (watch_gconf_user_level_cb):
	* src/proxy.c: (watch_gconf_proxy_cb):
	* src/util-gconf.c: (util_gconf_init), (util_gconf_set_watched),
	(util_gconf_notify_cb), (util_gconf_watch_variable):
	Update for GConf HEAD (0.9)

2000-09-29  J Shane Culpepper  <pepper@eazel.com>

	* src/util-gconf.c:
	* src/utils.c:

	Adding <string.h> to fix inlined problems with new compiler.

2000-09-29  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Switch the order of assignment of warnings to CFLAGS so that they
	can be overridden by the user at configure time.

	* src/request.c: (proxy_listen):
	* src/session.c: (session_from_port):
	Fix uninitialized variables.
	
2000-09-27  Mike Fleming  <mfleming@eazel.com>

	Fix obscure proxy core crasher

	eazel-proxy-util -x now has a "time delay" where it doesn't prompt the
	user to log into eazel services for a few seconds after a user hits "cancel"
	on a modal Eazel Service login dialog.  This eliminates the case where
	the dialog was re-appearing due to an additional HTTP request from 
	Nautilus.
	
	* src/request.c: (proxy_do_connect):
	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_login_dialog):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (authn_cb_failed), (do_login),
	(do_login_prompt), (eazel_proxy_util_do_login),
	(eazel_proxy_util_do_prompt_login), (do_translate):

2000-09-27  Mike Fleming  <mfleming@eazel.com>

	Bug fixes, modal dialog improvements.

	* libammonite-gtk/ammonite-login-dialog.c:
	(ammonite_login_dialog_new): Change pixmap path. 
	Pixmap still not included in the RPM
	* libammonite/libammonite.h:
	New Error Codes; descriptions
	* src/impl-eazelproxy.c: (user_authenticate_cb),
	(impl_EazelProxy_UserControl_prompt_authenticate_user):
	"Cancel" didn't work properly on first prompt.  Network failure
	codes now propogated better.	
	* src/util/eazel-proxy-util-gtk.c:
	* src/util/eazel-proxy-util.c: (main):
	Comment out dead code
	
2000-09-23  Mike Fleming  <mfleming@eazel.com>

	* src/util/eazel-proxy-util.c: (do_translate):
	Uncleared exception was forcing more-expensive call to
	prompt_user_authenticate

2000-09-23  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c:
	(impl_EazelProxy_UserControl_prompt_authenticate_user):

	Removed redundant list add that was causing a deadlock on prompted 
	login

2000-09-23  Mike Fleming  <mfleming@eazel.com>

	* src/util/eazel-proxy-util.c: (prompter_cb_prompt_authenticate):

	Fixed crasher when user hits "Cancel".

2000-09-22  Mike Fleming  <mfleming@eazel.com>

	* src/util/eazel-proxy-util.c: (main), (authn_cb_succeeded),
	(authn_cb_failed), (eazel_proxy_util_do_prompt_login),
	(usercontrol_find_user), (do_translate):

	Fixed crasher when OAF can't find EazelProxy

2000-09-22  Mike Fleming  <mfleming@eazel.com>

	* Makefile.am:
	* configure.in:
	* data/Makefile.am:
	* data/eazel_dsa_cert.pem:
	Added Eazel DSA cert

2000-09-21  Mike Fleming  <mfleming@eazel.com>

	* src/gnuregex.c:
	* src/request.c: (proxy_do_connect):
	* src/session.c: (request_parse_internal):

	Fix uninitialized variable warnings exposed when compiling with -O 

2000-09-20  Mathieu Lacage  <mathieu@eazel.com>

	* src/util/eazel-proxy-util.c: (prompter_cb_prompt_authenticate):
	initializing ret to FALSE. I am not too sure if it should not be 
	FALSE. Mike: you should look at it.

2000-09-19  Robey Pointer  <robey@eazel.com>

	* src/sock-ssl.h:
	* src/sock.h:

	Missed two places when I fixed the copyright notices the first time.

2000-09-18  Mike Fleming  <mfleming@eazel.com>

	* CVSVERSION:
	* HACKING:
	* README:
	* TODO:
	* autogen.sh:
	* configure.in:

	Doing my duties as maintainer :)
	configure.in now doesn't generate warnings when compiled outside of CVS

2000-09-18  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c:
	(impl_EazelProxy_UserControl_prompt_authenticate_user):
	* src/util/eazel-proxy-util.c: (do_login_prompt),
	(eazel_proxy_util_do_prompt_login), (do_translate):

	anonymous user is not prompted for password

	explicit usernames provided via URL's that aren't already logged in
	are prompted for passwords	

2000-09-18  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_proxy_request_cb),
	(my_authenticate_user),
	(impl_EazelProxy_UserControl_set_new_user_password),
	(impl_EazelProxy_UserControl_get_authn_header_for_port):
	* src/util/eazel-proxy-util.c: (auth_proxy_uri_parse),
	(do_translate):

	"anonymous" user skips normal login process (bugzilla.eazel.com 3145).
	Secondary username specification through gnome-vfs works.

2000-09-18  Mike Fleming  <mfleming@eazel.com>

	* src/authenticate.c: (authenticate_do_phase_2):
	* src/impl-eazelproxy.c:

	Switched DEFAULT_LOGIN_PATH to "account/login/post"

2000-09-15  Mike Fleming  <mfleming@eazel.com>

	* src/authenticate.c: (authenticate_user): changed log message
	* src/impl-eazelproxy.c: (watch_gconf_services_uri_cb),
	(get_defaults_from_gconf), (user_proxy_response_cb):
	Set default URI's to correct values for ship
	Changed GConf services-host path to match with rest of trilobie 
	* src/util/ammonite-methods.conf.sub:
	Added eazel-services: url scheme
	* src/util/eazel-proxy-util.c: (main), (authn_cb_succeeded),
	(authn_cb_failed), (eazel_proxy_util_do_prompt_login),
	(do_translate):
	Added additional debug messages.

2000-09-13  Mike Fleming  <mfleming@eazel.com>

	Multiple modal login dialog changes.

	* idl/eazelproxy.idl:
	Added "InitialFail" and "ReauthnFail" to AuthnPromptKind so that
	users can be informed when they've failed too many times
	
	* libammonite-gtk/ammonite-login-dialog.c:
	(ammonite_login_dialog_initialize),
	(ammonite_login_dialog_destroy), (dialog_show_callback),
	(ammonite_login_dialog_new):
	Cleaned up dead parameters; Focus correctly defaults to username field
	when approptiate.
	
	* src/impl-eazelproxy.c: (user_authenticate_cb),
	(impl_EazelProxy_UserControl_prompt_authenticate_user):
	Implemented support for InitialFail AuthnPromptKind.  Also blanked username
	on prompt_authenticate callbacks if they were not originally specified.

	* src/proxy.c: (main):
	Changed annoying log message to say "eazel-proxy" instead of ammonite

	* src/util/eazel-proxy-util-gtk.c: (try_init_gnome),
	(eazel_proxy_util_do_prompt_dialog),
	(eazel_proxy_util_do_error_dialog):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (prompter_cb_prompt_authenticate):
	Support for InitialFail AuthnPromptKind--an error dialog

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* libammonite/Makefile.am: put eazelproxy.h back into
	being installed

2000-09-11  Mike Fleming  <mfleming@eazel.com>

	* libammonite-gtk/Makefile.am:
	* libammonite/Makefile.am:
	
	Added (OAF_CFLAGS) to the INCLUDES for these makefiles

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* ammonite.spec.in: forgot %{prefix} ! I am a dummy, also
	made it sysconfdir everywhere

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* Makefile.am: added some extra-dists
	* libammonite/Makefile.am: new idl support so it passes distcheck
	* src/Makefile.am: added forgotten header files.
	* src/util/Makefile.am: new idl support so it passes distcheck

2000-09-11  Mike Fleming  <mfleming@eazel.com>

	* HACKING:
	* ammonite.spec.in:
	misc minor edits
	
	* src/http-connection.c: (http_connection_sock_connect):
	* src/request.c: (proxy_response_headers_write):
	* src/sock.c: (sockbuf_step_size), (sockbuf_getline),
	(sockbuf_append), (sockbuf_append_buffer):
	* src/sock.h:
	Bug 2844--socket buffers now demand-resize

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in: changed name to ammonite instead
	of eazel-proxy
	* HACKING: added this file so it can be filled in the perfect
	future.

2000-09-11  Mathieu Lacage  <mathieu@eazel.com>

	* configure.in: fix the openssl test.

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* ammonite.spec.in: new file so we can build rpms
	Mike should go over the language and licence and 
	dependencies.
	* configure.in: moddified to be easier to read and to
	support the spec file.

2000-09-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* configure.in:

2000-09-08  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_proxy_response_cb),
	(impl_EazelProxy_UserControl_authenticate_user):

	Bug 2150 -- authenticate_user succeeds even if user logged in already
	many misc utility functions ifdefd out

2000-09-08  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (user_proxy_response_cb):
	* src/request.c: (proxy_read_response_headers):
	* src/session.h:

	Bug 2508 -- User is forced to logout if a 401 response is recieved from
	the server
	
2000-09-08  Mike Fleming  <mfleming@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_submit_request):
	* src/utils.c: (uri_strspn_to), (util_url_encode):
	* src/utils.h:

	Bug 2340 -- URL escaping for change password POST 

2000-09-08  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_connect),
	(http_connection_connect_submit), (http_connection_abort):
	* src/http-connection.h:
	Added http_connection_abort
	
	* src/proxy.c: (main):
	* src/impl-eazelproxy.c: (watch_gconf_services_uri_cb),
	(get_defaults_from_gconf), (user_new_no_list_add),
	(user_set_services_strings): Fix bugs related to invalid services URI's
	causing crashes.

	* src/request.c: (proxy_abort_connect),
	(proxy_method_connect_callback), (proxy_http_connect_callback),
	(proxy_handle_connect_method), (proxy_do_connect),
	(proxy_get_request), (proxy_get_request_eof),
	(proxy_new_connection):
	Clean up socket_close issues.  proxy_abort_connect calls 
	http_connection_abort when appropriate.
	
	* src/utils.c: (util_validate_url):
	* src/utils.h:
	add util_validate_url

2000-09-07  Mike Fleming  <mfleming@eazel.com>

	* idl/eazelproxy.idl:

	Fixed bug 2709

2000-09-07  Mike Fleming  <mfleming@eazel.com>

	* src/digest.c: (digest_init):
	* src/impl-eazelproxy.c: (watch_gconf_user_level_cb):
	* src/proxy.c: (watch_gconf_proxy_cb):
	* src/util-gconf.c: (util_gconf_set_watched),
	(util_gconf_notify_cb):
	* src/utils.h:

	Fixed bug 2771, also some gconf bugs

2000-09-06  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_sock_connect):
	* src/proxy.c: (main):
	* src/request.c: (proxy_get_headers):
	* src/utils.c: (eazel_check_connection):

	Fixed some upstream-proxy bugs
	Added SIMPLE_PROXY define's, which aren't used by the current makefiles

2000-09-06  Mike Fleming  <mfleming@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_submit_request), (set_user_password):
	* src/http-connection.c: (http_connection_sock_connect):
	* src/impl-eazelproxy.c: (user_deactivate), (user_authenticate_cb),
	(user_proxy_response_handle_reauthn_cb):
	* src/request.c: (proxy_response_headers_write),
	(proxy_do_connect):
	* src/sock.c: (sockbuf_append_buffer), (socket_finish_connect),
	(socket_begin_ssl):
	* src/util/eazel-proxy-util-gtk.c: (reauthn_handle_signal),
	(reauthenticate_user_cb):
	* src/util/eazel-proxy-util.c: (usercontrol_find_user):
	* check-FIXME.pl
	
	All FIXME's have bug numbers
	added check-FIXME.pl

2000-09-06  Mike Fleming  <mfleming@eazel.com>

	* src/authenticate.c: (authenticate_http_read_callback):
	* src/digest.c: (digest_gen_response_header):
	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback):
	* src/impl-eazelproxy.c:
	* src/util/eazel-proxy-util.c: (main),
	(eazel_proxy_util_change_password), (do_change_password):

	Change misc. defaults so that ammonite works with the servies backend
	by default.

	Added -c "change password" command to eazel-proxy-util.

2000-09-06  Robey Pointer  <robey@eazel.com>

	* src/proxy.c: (main):

	Remove erroneous FIXME 2773 (long since fixed).

2000-09-05  Maciej Stachowiak  <mjs@eazel.com>

	* libammonite-gtk/ammonite-login-dialog.c:
	(ammonite_login_dialog_new):
	* src/authenticate.c: (authenticate_http_read_callback):
	* src/digest.c: (digest_init):
	* src/impl-eazelproxy.c: (user_proxy_response_handle_reauthn_cb):
	* src/proxy.c: (display_version), (main):

	Added bug numbers for some FIXMEs
	
2000-09-01  Robey Pointer  <robey@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback),
	(set_user_password_submit_request):

	Fix a few small bugs to get the password-change piece to work
	(including a workaround for a nasty xml bug).

2000-09-01  Mike Fleming  <mfleming@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_submit_request):
	Change password post now has digest auth header

2000-08-31  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_connect_submit):
	Compiles without -DDEBUG now (Thanks Ali)

2000-08-31  Robey Pointer  <robey@eazel.com>

	* src/eazelproxy-change-password.c:
	(set_user_password_failed_no_thaw),
	(set_user_password_http_read_callback),
	(set_user_password_submit_request), (set_user_password):
	* src/http-connection.h:
	* src/util/eazel-proxy-util.c: (do_status):

	Fix some typos in the change-password codepath.

2000-08-30  Mike Fleming  <mfleming@eazel.com>

	* ammoniteConf.sh.in:
	* src/authenticate.c: (authenticate_http_read_callback),
	(authenticate_user):
	* src/eazelproxy-change-password.c:
	(set_user_password_submit_request):
	* src/http-connection.c: (http_connection_connect_submit):
	* src/session.c:

2000-08-30  Mike Fleming  <mfleming@eazel.com>

	* Makefile.am:
	* ammoniteConf.sh.in:
	* configure.in:

	Added gnome-config script

2000-08-30  Mike Fleming  <mfleming@eazel.com>

	* libammonite/libammonite.h:
	* src/impl-eazelproxy.h:
	* src/util/eazel-proxy-util.c:

	Moved IID_EAZELPROXY to libammonite.h

2000-08-28  Mike Fleming  <mfleming@eazel.com>

	http-connect refactoring applied to proxy core

	* src/authenticate.c: (authenticate_do_phase_2),
	(authenticate_user):
	* src/eazelproxy-change-password.c:
	(set_user_password_submit_request):
	switched to using http_connection_connect_submit function
	
	* src/http-connection.c: (http_connection_connect),
	(http_connection_connect_submit), (http_connection_sock_connect),
	(http_connection_free), (http_connection_finish),
	(connect_submit_http_callback):
	* src/http-connection.h:
	Separated HTTP connection and submission into separate functions
	
	* src/request.c: (http_error_log), (proxy_abort_connect),
	(proxy_method_connect_callback), (proxy_http_connect_callback),
	(proxy_handle_connect_method), (proxy_do_connect),
	(proxy_get_request):
	Refactored code to use http-connection.
	
	* src/session.c: (request_parse_internal): 
	Can once again parse CONNECT requests


2000-08-25  Michael K. Fleming  <mfleming@eazel.com>

	Same refactoring as being applied to change password code

	* idl/eazelproxy.idl:
	* src/eazelproxy-change-password.c:
	(set_user_password_http_read_callback),
	(set_user_password_http_callback),
	(set_user_password_submit_request):
	* src/impl-eazelproxy.c:
	(impl_EazelProxy_UserControl_set_new_user_password):

2000-08-25  Michael K. Fleming  <mfleming@eazel.com>

	Refactored authenticate code; a general HTTP read function now exists

	* libammonite/libammonite.h:
	* src/authenticate.c: (authenticate_state_free),
	(authenticate_finish_failed), (authenticate_finish_success),
	(authenticate_init_digest), (authenticate_do_phase_2),
	(authenticate_http_read_callback), (authenticate_http_callback):
	* src/eazelproxy-change-password.c:
	(set_user_password_sock_read_ReadStatus),
	(set_user_password_sock_eof):
	* src/http-connection.c: (http_connection_read),
	(http_read_state_info_free), (http_read_sock_read),
	(http_read_sock_eof):
	* src/http-connection.h:
	* src/utils.c: (piece_response_combine):
	* src/utils.h:

2000-08-25  Mike Fleming  <mfleming@eazel.com>

	set_new_user_password now correctly implemented.
	Waits for existing HTTP connections on the port to finish up,
	blocks further from being established while the password is changed.

	* src/eazelproxy-change-password.c:
	(set_user_password_failed_no_thaw), (set_user_password_failed),
	(set_user_password_failed_force_logout),
	(set_user_password_success), (frozen_session_cb),
	(set_user_password):
	* src/impl-eazelproxy.c:
	* src/session.c: (session_new), (session_decrement_open),
	(session_schedule_close), (session_is_targeted),
	(session_schedule_freeze), (session_thaw):
	* src/session.h:

2000-08-25  Mike Fleming  <mfleming@eazel.com>

	set_new_user_password now mostly implemented, except for the 
	proxy port barrier sync stuff.

	* RENAMING:
	* libammonite/libammonite.h:
	* src/Makefile.am:
	* src/authenticate.c:
	* src/authenticate.h:
	* src/digest.c: (digest_change_password):
	* src/digest.h:
	* src/eazelproxy-change-password.c:
	(set_user_password_state_info_free),
	(set_user_password_failed_force_logout),
	(set_user_password_failed), (set_user_password_success),
	(set_user_password_sock_read_ReadStatus),
	(set_user_password_sock_read), (set_user_password_sock_eof),
	(set_user_password_http_callback),
	(set_user_password_submit_request),
	(set_user_password_authenticate_callback), (set_user_password):
	* src/eazelproxy-change-password.h:
	* src/impl-eazelproxy.c: (EazelProxy_AuthnInfo_dup),
	(user_set_login_state), (user_get_EazelProxy_User),
	(user_get_digest_state), (user_authenticate_cb),
	(my_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_set_new_user_password):
	* src/impl-eazelproxy.h:

2000-08-23  Mike Fleming  <mfleming@eazel.com>

	Login prompting with eazel-proxy-util -x finally works correctly

	* libammonite/libammonite.h:
	* libammonite/user-prompter-wrapper.c:
	(impl_EazelProxy_UserPrompter_prompt_authenticate),
	(ammonite_userprompter_wrapper_new):
	* src/impl-eazelproxy.c: (user_authenticate_cb),
	(impl_EazelProxy_UserControl_prompt_authenticate_user):
	* src/util/eazel-proxy-util-gtk.c:
	(eazel_proxy_util_do_prompt_dialog):
	* src/util/eazel-proxy-util.c: (do_login_prompt),
	(prompter_cb_prompt_authenticate),
	(eazel_proxy_util_do_prompt_login), (do_translate):

2000-08-23  Mike Fleming  <mfleming@eazel.com>
	prompt_authenticate now works.  Small changes to the idl
	so the prompter can prompt for a username as well

	* idl/eazelproxy.idl:
	* libammonite/libammonite.h:
	* libammonite/user-prompter-wrapper.c:
	(impl_EazelProxy_UserPrompter_prompt_authenticate),
	(ammonite_userprompter_wrapper_new):
	* src/impl-eazelproxy.c: (user_authenticate_cb),
	(impl_EazelProxy_UserControl_prompt_authenticate_user):
	* src/util/eazel-proxy-util-gtk.c:
	(eazel_proxy_util_do_prompt_dialog):
	* src/util/eazel-proxy-util.c: (do_login_prompt),
	(prompter_cb_prompt_authenticate),
	(eazel_proxy_util_do_prompt_login):

2000-08-23  Mike Fleming  <mfleming@eazel.com>

	Build works again.

	* libammonite-gtk/ammonite-login-dialog.h:
	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_login_dialog),
	(eazel_proxy_util_do_prompt_dialog):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (do_login_prompt),
	(prompter_cb_prompt_authenticate),
	(eazel_proxy_util_do_prompt_login):

	Added prompt_authenticate test switch to eazel-proxy-util

2000-08-22  Mike Fleming  <mfleming@eazel.com>

	* libammonite/Makefile.am:
	* libammonite/libammonite.h:
	* libammonite/user-prompter-wrapper.c:
	(impl_EazelProxy_UserPrompter_prompt_authenticate),
	(ammonite_userprompter_wrapper_new),
	(ammonite_userprompter_wrapper_free):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (main), (do_login),
	(do_login_prompt):

	Wrapper for UserPrompter interface

2000-08-22  Mike Fleming  <mfleming@eazel.com>

	Note that eazel-proxy-util -u now takes a port not a username

	* idl/eazelproxy.idl:
	Added get_authn_header_for_port to idl
	Added callback to set_new_user_password
	Added PASSWORD_CHANGING state

	* Makefile.am:
	* libammonite/authn-listener-wrapper.c:
	(impl_EazelProxy_UserListener_authenticated_no_longer):
	* libammonite/libammonite.h:
	* src/Makefile.am:
	* src/util/eazel-proxy-util-gtk.c:
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (main), (eazel_proxy_util_do_login),
	(do_follow), (do_logout):

	libs and utils brought up-to-date with idl changes; re-enabled them in the
	build.  Disabled all the reauthn dialog stuff

	* src/impl-eazelproxy.c: (user_new_no_list_add), (user_free),
	(user_authenticate_cb),
	(impl_EazelProxy_UserControl_prompt_authenticate_user),
	(impl_EazelProxy_UserControl_set_new_user_password),
	(impl_EazelProxy_UserControl_get_authn_header_for_port):

	Complete implementation for prompt_authenticate_user


2000-08-22  Michael K. Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (glist_compare_user_user),
	(user_for_user), (user_new_no_list_add), (user_new),
	(user_set_services_strings), (user_authenticate_cb),
	(my_authenticate_user),
	(impl_EazelProxy_UserControl_prompt_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user):
	Added more of the guts to prompt_authenticate_user

2000-08-21  Michael K. Fleming  <mfleming@eazel.com>

	IDL file changes.
		o ditched UserLister:reauthenticate_user
		o renamed AuthInfo to AuthnInfo
		o Moved is_default/callback out of AuthnInfo
		o Added UserPrompter interface
		o added prompt_authenticate_user, set_new_user_password
		o Fixed logout_user, authenticate_user
		o add_listener, remove_listener no longer user ListenerToken

	libammonite, libammonite-gtk, eazel-proxy-util temp. disables
	until I un-bust them.

	* Makefile.am:
	* idl/eazelproxy.idl:
	* src/Makefile.am:
	* src/impl-eazelproxy.c: (init_impl_eazelproxy),
	(shutdown_impl_eazelproxy), (EazelProxy_UserList_make_from_glist),
	(glist_compare_user_username), (glist_compare_user_proxy_port),
	(user_for_port), (user_callback_list_free), (user_free),
	(user_deactivate), (user_authenticate_cb),
	(user_proxy_response_handle_reauthn_cb),
	(impl_EazelProxy_AuthnCallback_do_fail_authnfailinfo_list),
	(impl_EazelProxy_AuthnCallback_do_fail_list),
	(impl_EazelProxy_AuthnCallback_do_succeeded_list),
	(listener_broadcast_user_authenticated),
	(listener_broadcast_user_authenticated_no_longer),
	(listener_broadcast_user_logout),
	(impl_EazelProxy_UserControl_prompt_authenticate_user),
	(my_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_set_new_user_password),
	(impl_EazelProxy_UserControl_logout_user),
	(impl_EazelProxy_UserControl_add_listener),
	(usercontrol_glist_find_object),
	(impl_EazelProxy_UserControl_remove_listener):
	* src/utils.h:

2000-08-21  Michael K. Fleming  <mfleming@eazel.com>

	* src/Makefile.am:
	* src/authenticate.c: (authenticate_add_default_headers),
	* src/authenticate.h:
	* src/impl-eazelproxy.c: (user_authenticate_cb),
	(impl_EazelProxy_AuthnCallback_do_fail_authnfailinfo),
	(impl_EazelProxy_AuthnCallback_do_fail),
	(impl_EazelProxy_AuthnCallback_do_fail_username),
	(my_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user):
	* src/impl-eazelproxy.h:
	* src/sock.h:

	Moved authenticate functions to their own file

2000-08-14  Mike Fleming  <mfleming@eazel.com>

	* configure.in: Requires GNOME-1.2 insteard of GNOME-1.0
	* idl/eazelproxy.idl: Another method on UserControl; there will be one more
	interface change before final
	* src/http-connection.c: (http_connection_sock_connect): Always sent
	port number in Host:
	* src/impl-eazelproxy.c: (authenticate_add_default_headers),
	(authenticate_user), (EazelProxy_User_copy), (user_new),
	(user_proxy_response_handle_reauthn_cb), (user_proxy_response_cb),
	(impl_EazelProxy_UserControl_get_default_user),
	(impl_EazelProxy_UserControl_prompt_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user):
	Fixed User-Agent, misc null-string bugs, 
	Removed reauthn dialog for now, added empty prompt_authenticate_user

	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_login_dialog):
	* src/util/eazel-proxy-util-gtk.h:	
	* src/util/eazel-proxy-util.c: (EazelProxy_User_copy),
	(EazelProxy_User_duplicate), (authn_cb_succeeded), (do_login),
	(eazel_proxy_util_do_login), (auth_proxy_uri_parse),
	(do_translate):

	Added login dialog.  Initial login dialog still sucks.


2000-08-10  Mike Fleming  <mfleming@eazel.com>

	* src/impl-eazelproxy.c: (shutdown_impl_eazelproxy),
	(user_proxy_response_cb):
	* src/proxy.c: (takesig), (main):
	* src/sock.c: (dispatch_socket_events), (socket_event_pump),
	(socket_glib_poll_func):
	* src/sock.h:
	* src/util/eazel-proxy-util-gtk.c: (reauthn_handle_signal):

	Made socket event callbacks be dispatched from outside
	of the poll wrapper function, so modal glib event loops could
	be done.  Reauthn dialogs now work.

2000-08-10  Mike Fleming  <mfleming@eazel.com>

	* libammonite-gtk/Makefile.am:
	* libammonite-gtk/ammonite-login-dialog.c:
	(ammonite_login_dialog_new):
	* libammonite-gtk/ammonite-login-dialog.h:
	pixmap in login dialog, optional remember box
	
	* src/Makefile.am:
	* src/impl-eazelproxy.c: (authenticate_add_default_headers),
	(authenticate_finished), (init_impl_eazelproxy),
	(shutdown_impl_eazelproxy), (user_new), (user_free),
	(user_proxy_request_cb), (user_reauthenticate_cb),
	(user_proxy_response_cb),
	(listener_broadcast_user_authenticated_no_longer):
	* src/impl-eazelproxy.h:
	* src/proxy.c: (main):
	User-Agent changed, reauthentication dialog support

	* src/session.h:
	* src/request.c: (proxy_read_response_headers), (proxy_do_connect):
	session callbacks can have connection-specific user data
	
	* src/sock.c: (socket_glib_poll_func):
	freezing sockets now works right
	
	* src/test/proxy-test.pl:
	test cases work again

	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_do_dialog),
	(reauthn_handle_signal), (reauthenticate_user_cb),
	(eazel_proxy_util_do_reauthn_listen):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (main):
	--reauthn-listen option, used for reauthentication dialog

	* src/utils.c: (util_fork_exec):
	* src/utils.h: 
	util_fork_exec function

2000-08-10  Michael K. Fleming  <mfleming@eazel.com>

	* idl/eazelproxy.idl:
	* libammonite/authn-listener-wrapper.c:
	(impl_EazelProxy_UserListener_user_authenticated),
	(impl_EazelProxy_UserListener_authenticated_no_longer),
	(impl_EazelProxy_UserListener_reauthenticate_user):
	* libammonite/libammonite.h:
	* src/util/eazel-proxy-util.c: (do_follow):

	renamed user_authenticate_failed->user_authenticated_no_longer
	Added reauthenticate_user
	
	* src/impl-eazelproxy.c: (user_proxy_response_cb),
	(listener_broadcast_user_authenticate_failed):
	* src/request.c: (proxy_read_response_headers), (proxy_do_connect):
	* src/session.h:
	Proxy callbacks now freeze client/server sockets

	* src/sock.c: (socket_glib_poll_func), (socket_listen),
	(socket_freeze), (socket_thaw):
	* src/sock.h:
	Added socket_freeze and socket_thaw


2000-08-09  Mike Fleming  <mfleming@eazel.com>

	* idl/eazelproxy.idl:
	API uglification: changed names of some structure members, removed
	"{set,get}_default_target_path, added login_http_response

	* src/digest.c: (digest_gen_response_header): Still the Apache incompatibilty
	game
	
	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_sock_eof), (authenticate_sock_read_READ0_RESPONSE),
	(authenticate_sock_read_READ0_HEADER),
	(authenticate_sock_read_AUTHN_READ1_RESPONSE),
	(authenticate_sock_read_AUTHN_READ1_HEADER_BODY),
	(authenticate_sock_read), (authenticate_user),
	(EazelProxy_User_copy), (user_activate), (user_free),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_logout_user):

	Some refactoring.  Removed {set,get}_default_target_path.
	Added support for login_http_response
	
	* src/util/eazel-proxy-util.c: (main), (do_login), (do_status),
	Removed {set,get}_default_target_path	

	* src/utils.c: (piece_response_add), (piece_response_combine),
	(piece_response_free):
	* src/utils.h:
	Dumb util func for managing response blocks

2000-08-09  Darin Adler  <darin@eazel.com>

	* src/digest.h:
	* src/util/eazel-proxy-util-gtk.c:
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c:
	Fixed some error that prevent compiling with a new gcc,
	including warnings about lines without newlines at the ends
	of files, and a missing include <stdlib.h>.

2000-08-08  Michael K. Fleming  <mfleming@eazel.com>

	* RENAMING:
	* idl/eazelproxy.idl:
	* src/impl-eazelproxy.c: (get_defaults_from_gconf),
	(authenticate_user), (init_corba_junk),
	(impl_EazelProxy_UserControl_authenticate_user):
	* src/proxy.c: (watch_gconf_proxy_cb):
	* src/utils.h:

	Added more GCONF configurability; made "login_path" a partial
	path.  

2000-08-03  Michael K. Fleming  <mfleming@eazel.com>

	* configure.in:
	ammonite is now dependant on GTK for the login dialog.

	* Makefile.am:
	* libammonite-gtk/.cvsignore:
	* libammonite-gtk/Makefile.am:
	* libammonite-gtk/ammonite-login-dialog.c:
	* libammonite-gtk/ammonite-login-dialog.h:
	* libammonite-gtk/nautilus-caption-table.c:
	* libammonite-gtk/nautilus-caption-table.h:
	* libammonite-gtk/nautilus-gtk-macros.h:

	Beginnings of the login dialog box.  The dialog code was ripped from
	Nautilus.

	* src/digest.c: (digest_gen_cnonce): drudder caught a typo bug

	* src/Makefile.am:
	* src/impl-eazelproxy.c: (authenticate_add_default_headers),
	(watch_gconf_user_level_cb), (userlevel_init_gconf),
	(authenticate_make_body), (init_corba_junk),
	(user_proxy_request_cb):
	* src/impl-eazelproxy.h:
	* src/proxy.c: (watch_gconf_proxy_cb), (load_gconf_defaults),
	(main):
	* src/proxy.h:
	* src/util-gconf.h:
	* src/util-gconf.c:
	Ammonite now gets proxy settings from gconf.  Nautilus user level querying
	improved as well.  X-Eazel-User-Level now posts a string instead of
	an integer.
	
	* src/util/Makefile.am:
	* src/util/eazel-proxy-util-gtk.c: (eazel_proxy_util_do_dialog):
	* src/util/eazel-proxy-util-gtk.h:
	* src/util/eazel-proxy-util.c: (main):
	Beginning of login dialog support.

	* src/utils.c:
	* src/utils.h:
	Dead code removal
	

2000-08-02  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_sock_connect):
	* src/impl-eazelproxy.c: (authenticate_make_body),
	(authenticate_sock_read), (authenticate_user):

	Fixes to authn post; http-request correctly posts port in Host: header

2000-08-01  Michael K. Fleming  <mfleming@eazel.com>

	* configure.in:
	* src/Makefile.am:
	* src/impl-eazelproxy.c: (authenticate_add_default_headers),
	(userlevel_gconf_notify_cb), (userlevel_init_gconf),
	(authenticate_make_body), (authenticate_sock_read),
	(authenticate_user), (init_corba_junk), (user_proxy_request_cb):

	Added Nautilus User Level and Trilobite Config during authn
	process

	Now dependent on gconf and gnome-xml 

2000-08-01  Robey Pointer  <robey@eazel.com>

	* idl/eazelproxy.idl:
	* src/impl-eazelproxy.c: (authenticate_user),
	(EazelProxy_User_copy),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_logout_user),
	(impl_EazelProxy_UserControl_set_default_target_path),
	(impl_EazelProxy_UserControl_get_default_target_path):
	* src/proxy.c: (main):
	* src/util/ammonite-methods.conf.sub:
	* src/util/eazel-proxy-util.c: (main), (do_login), (do_status),
	(do_set_default_target_path):

	Separate target-path from login-path (name of the cgi to post to
	when authenticating).  Add -L arg to eazel-proxy-util for setting
	that during login.  Add ability to set/get the default target path
	on the server (-T in eazel-proxy-util).  Swap -t/-x options in
	eazel-proxy-util, just to cause some confusion.

2000-08-01  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_connect):
	Mirroring backwards
	* src/impl-eazelproxy.c: (authenticate_make_body),
	(authenticate_sock_read):
	authenticate_make_body works now

2000-08-01  Mike Fleming  <mfleming@eazel.com>

	* src/Makefile.am: 
	* configure.in:  added gnome-xml dependency

	* idl/eazelproxy.idl: removed oneway's <sigh>

	* src/digest.c: (digest_gen_response_header): <debug log fix>
	* src/http-connection.c: (http_connection_connect):
	Mirroring for HTTP connections
	* src/impl-eazelproxy.c: (authenticate_add_default_headers),
	(authenticate_make_body), (authenticate_sock_read),
	(authenticate_user), (user_set_default), (user_activate),
	(user_deactivate):
	Posts trilobite config on authn
	* src/utils.h:

2000-07-31  Robey Pointer  <robey@eazel.com>

	* acconfig.h:
	* configure.in:

	Ditch old DEFAULT_HOST thing from tinyproxy.
	
	* idl/eazelproxy.idl:
	* src/impl-eazelproxy.c: (authenticate_user),
	(EazelProxy_User_copy), (user_activate),
	(impl_EazelProxy_UserControl_get_active_users),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_authenticate_user_with_path):
	* src/impl-eazelproxy.h:
	* src/proxy.c: (main):
	* src/proxy.h:
	* src/request.c: (proxy_do_connect), (proxy_get_headers),
	(proxy_get_request), (proxy_listen):
	* src/request.h:

	Set a specific target-path inside proxy session state info, and
	also inside the corba User struct.  This overrides the old -f
	option per session.  The -f option now takes a full url to allow
	path specification (-f http://site:8080/path).  Added corba call
	to authenticate a user AND specify the target path.

	* src/session.c: (request_free), (request_new),
	(request_parse_internal), (request_parse_url), (request_parse),
	(session_new), (session_free), (session_add_open),
	(session_do_close), (session_decrement_open),
	(session_schedule_close), (session_set_target_path),
	(session_get_target_path), (session_is_targeted):
	* src/session.h:

	Generalized the ProxySession and HTTPRequest stuff a bit so I
	could reuse more of it: HTTPRequest will parse urls now too, and
	ProxySession can get/set/check the target path setting.

	* src/util/eazel-proxy-util.c: (main), (do_login), (do_status):

	eazel-proxy-util now displays each session's target path and
	allows you to specify it at login.
	
2000-07-31  Mike Fleming  <mfleming@eazel.com>

	* RENAMING: Robey did one
	* src/digest.c: (digest_gen_response_header): #define change
	* src/http-connection.c: (http_connection_connect),
	(http_connection_sock_connect), (http_connection_finish):
	* src/http-connection.h:
	* src/impl-eazelproxy.c: (authenticate_sock_read),
	(authenticate_user), (impl_EazelProxy_UserControl_remove_listener):

	Better http_connection prototype

2000-07-28  Robey Pointer  <robey@eazel.com>

	* src/Makefile.am:
	* src/request.c: (connection_free), (proxy_read_response_headers),
	(proxy_do_connect), (proxy_listen), (proxy_listen_close),
	(proxy_new_connection):
	* src/request.h:
	* src/session.c: (new)
	* src/session.h: (new)

	Split the HTTPRequest stuff and the session (used to be listener)
	stuff into a new file: session.c

2000-07-28  Mike Fleming  <mfleming@eazel.com>

	* libammonite/Makefile.am:
	* libammonite/libammonite.h:

	Build issues

2000-07-28  Mike Fleming  <mfleming@eazel.com>

	* src/util/Makefile.am:
	* src/util/ammonite-methods.conf.sub:

	Now installs gnome-vfs method

2000-07-28  Mike Fleming  <mfleming@eazel.com>

	* idl/eazelproxy.idl:
	* src/util/eazel-proxy-util.c: (user_listener_user_authenticated),
	(user_listener_user_authenticate_failed), (user_logout),
	(follow_handle_signal), (do_follow):

	Totally removed oneway's, added -f support to eazel-proxy-util

2000-07-28  Mike Fleming  <mfleming@eazel.com>


	NEW:
	* libammonite/authn-callback-wrapper.c:
	* libammonite/authn-listener-wrapper.c: *
	* libammonite/libammonite.h:

	DELETED:
	* libammonite/authn-callback.c:
	* libammonite/authn-callback.h:
	* libammonite/authn-listener.c:
	* libammonite/authn-listener.h:
	* libammonite/utils.h:

	* idl/eazelproxy.idl:

	removed all "oneway"'s, since they clearly don't work as expected
	
	* libammonite/Makefile.am:
	* src/util/Makefile.am:
	* src/util/eazel-proxy-util.c: (main), (authn_cb_succeeded),
	(authn_cb_failed), (do_login):

	Moved more files around.

	- Abandoned the GTK wrappers because they were lame.  Replaced with
	simple bare-C wrappers instead

	- Got rid of "authn-{listener,callback}.h" headers.  Now installs
	 the following into ($inc)/libtrilobite:  (Yes, I think this is
	 the right place):

	o eazelproxy.h, libtrilobite.h

	eazel-proxy-util now waits for callback


2000-07-27  Mike Fleming  <mfleming@eazel.com>

	* Makefile.am:
	* configure.in:
	* libammonite/.cvsignore:
	* libammonite/Makefile.am:
	* libammonite/authn-listener.c:
	* libammonite/authn-listener.h:
	* libammonite/utils.h:

	libammonite contains simple GTK wrapper objects for callback
	interfaces AuthnCallback and UserListener, so that clients
	can implement these easily

	* src/Makefile.am:
	* src/TODO:
	* src/digest.c: (digest_gen_response_header):
	* src/impl-eazelproxy.c: (authenticate_user),
	(impl_EazelProxy_UserControl_get_default_user):

	digest compat issues; misc bugs

	* src/request.c: (proxy_do_connect):
	
	Add port to "Host:" header

	* src/test/Makefile.am:
	* src/test/test-client.c: (main), (corba_round_trip), (do_login),
	(do_translate):
	* src/util/.cvsignore:
	* src/util/Makefile.am:
	* src/util/eazel-proxy-util.c: (illegal_options), (main),

	moved test-client to util/eazel-proxy-util

2000-07-25  Robey Pointer  <robey@eazel.com>

	* src/proxy.c:
	* src/request.c:
	* src/sock-ssl.c:
	* src/sock.c:
	* src/utils.c:

	Fix author attributions.

2000-07-24  Mike Fleming  <mfleming@eazel.com>

	* README:

	Alternate URL to OpenSSL
	
	* RENAMING:
	* src/TODO:

	More

	* src/digest.c: (digest_init), (digest_gen_response_header):

	Extra newline being appended, no longer recognizies "md5-sess"

	* src/impl-eazelproxy.c: (authenticate_sock_read):

	Extra newline in different place
	
	* src/proxy.c: (main):
	* src/proxy.h:

	-m option for mirroring socket i/o to files
	
	* src/request.c: (connection_free), (proxy_client_eof),
	(proxy_server_eof), (proxy_response_headers_write),
	(proxy_read_response_headers), (proxy_connect_callback),
	(proxy_do_connect), (proxy_get_headers), (proxy_new_connection):

	Support for response_cb, -m support
	
	* src/sock.c: (sockbuf_write), (sockbuf_read),
	(sockbuf_append_buffer), (socket_destroy), (socket_set_mirrors),
	(socket_write), (socket_tunnel):
	* src/sock.h:

	Mirroring support, unidirectional tunneling support
	
	* src/test/test-client.c: (main), (do_translate):

	Stupid debug stuff

2000-07-21  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c: (http_connection_sock_connect),
	(http_connection_finish):
	
	Fixed another one of the many crashers caused by me not 
	realizing that socket_close calls the eof callback :)

	* src/impl-eazelproxy.c: (authenticate_user):
	* src/proxy.c: (main):

	Misc debug changes

	* src/request.c:
	* src/request.h:
	
	exported request_parse

2000-07-21  Mike Fleming  <mfleming@eazel.com>

	* src/gnuregex.c:
	Made it compile with -Werror

2000-07-20  Mike Fleming  <mfleming@eazel.com>

	* configure.in:

	Changed openssl check, fixed -DDEBUG flag

	* src/proxy.h:
	* src/request.c: (proxy_tunnel_sock_read_headers):
	* src/sock.c:
	* src/sock.h:

	Some more stuff compiles w/o OpenSSL now

2000-07-20  Mike Fleming  <mfleming@eazel.com>

	* RENAMING:
	* src/test/test-client.c: (auth_proxy_uri_parse),
	(EazelProxy_User_copy), (EazelProxy_User_duplicate),
	(usercontrol_find_user), (do_translate):

	test-client -t now works with vfs-translate -exec
	GNOME-VFS integration works at least in passing

2000-07-20  Mike Fleming  <mfleming@eazel.com>

	* src/http-connection.c:
	* src/impl-eazelproxy.c: (user_for_username), (user_free),
	(user_deactivate), (user_authenticate_cb),
	(listener_broadcast_user_authenticate_failed),
	(impl_EazelProxy_UserControl_logout_user):
	* src/request.c: (listener_new), (listener_free),
	(proxy_do_connect):

	Misc minor bug fixes

2000-07-19  Michael K. Fleming  <mfleming@eazel.com>

	* src/digest.c: (digest_init):

	Attempted to get digest to work with Apache 1.3.x mod_digest
	(it still doesn't) 

	* src/impl-eazelproxy.c: (authenticate_user),
	(impl_EazelProxy_AuthnCallback_do_fail):

	(stupid debug code switching between home and work)

	* src/test/test-client.c: (main), (do_logout), (my_getline),
	(auth_proxy_uri_free), (auth_proxy_uri_parse), (make_new_uri),
	(usercontrol_find_user), (do_translate):

	Beginnings of client for gnome-vfs translate

2000-07-17  Mike Fleming  <mfleming@eazel.com>

	Basic eazel-proxy fully functional, including:

	o authenticate_user
	o logout_user
	o Proxying requests and adding Authorization headers

	This checkin is just bugfixes, plus the addition of a test program

	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_sock_read), (init_corba_junk), (user_activate),
	(user_authenticate_cb), (impl_EazelProxy_UserControl_logout_user),
	(impl_EazelProxy_UserControl_add_listener):
	* src/request.c: (listener_new), (proxy_get_request):
	* src/sock.c:
	* src/test/.cvsignore:
	* src/test/Makefile.am:
	* src/test/test-client.c: (illegal_options), (main), (do_login),
	(LoginState_to_string), (do_status), (do_follow), (do_logout):

2000-07-14  Mike Fleming  <mfleming@eazel.com>

	* src/digest.c: (digest_free):

	digest_free allows NULL's

	* src/eazelproxy.idl:

	logout_user returns a boolean success/fail now

	* src/impl-eazelproxy.c: (authenticate_finished),
	(user_for_username), (user_new), (user_activate), (user_free),
	(user_deactivate), (user_authenticate_cb), (user_glist_string_cmp),
	(user_proxy_request_cb), (user_proxy_response_cb),
	(user_proxy_close_cb), (impl_EazelProxy_AuthnCallback_do_fail),
	(impl_EazelProxy_AuthnCallback_do_fail_username),
	(listener_broadcast_user_authenticated),
	(listener_broadcast_user_authenticate_failed),
	(listener_broadcast_user_logout),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_logout_user),
	(impl_EazelProxy_UserControl_add_listener),
	(usercontrol_glist_find_token),
	(impl_EazelProxy_UserControl_remove_listener):
	* src/impl-eazelproxy.h:

	User management code completed
	EazelProxy::UserListener infrastructure completed.

	Neither tested.

	* src/request.c: (listener_do_close), (listener_decrement_open),
	(listener_from_port), (listener_schedule_close),
	(socket_connect_proxy_tunnel), (proxy_do_connect),
	(proxy_get_headers), (proxy_listen_close):
	* src/request.h:

	proxy_listen_close, close scheduling, ProxyCallbackInfo callback
	for Request (but not Result yet)

	* src/utils.c: (g_list_remove_all_custom):
	* src/utils.h:

	Random utility funcion

2000-07-14  Mike Fleming  <mfleming@eazel.com>

	* src/TODO:
	* tests/TODO:
	* src/request.c: (listener_decrement_open), (proxy_do_connect):

	Bug fixes from last checkin.  All tests pass now.

2000-07-13  Michael K. Fleming  <mfleming@eazel.com>

	NOTE: Unfortunately, this change seems to break things.

	* src/Makefile.am:

	Compile against -stubs, as well
	
	* src/eazelproxy.idl:

	Added missing callback param to UserControl::authenticate_user

	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_user), (init_corba_junk), (EazelProxy_User_copy),
	(EazelProxy_User_duplicate), (EazelProxy_UserList_make_from_glist),
	(glist_compare_user_username), (user_for_username), (user_new),
	(user_activate), (user_free),
	(impl_EazelProxy_AuthnCallback_do_fail), (user_authenticate_cb),
	(impl_EazelProxy_UserControl_get_default_user),
	(impl_EazelProxy_UserControl_get_active_users),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_logout_user):
	* src/impl-eazelproxy.h:

	Beginnings of UserControl implementation.
	
	* src/proxy.c: (main):
	* src/proxy.h:

	Listen code moved to proxy_listen
	
	* src/request.c: (listener_new), (listener_free),
	(listener_add_open), (listener_decrement_open), (connection_free),
	(connection_new), (proxy_client_eof), (proxy_server_eof),
	(proxy_connect_callback), (proxy_do_connect), (proxy_get_headers),
	(proxy_get_request_eof), (proxy_listen), (proxy_new_connection):
	* src/request.h:

	Added ability to listen to multiple ports

	Added beginnings of callback mechanism for proxy core

	Refactored the HTTP header header code

	HTTP headers are now stored in a GList until the request is completed
	
	* src/sock.c: (socket_accept):
	* src/sock.h:

	SockAcceptFn's now get passed the user_data from the parent (listening) socket

	* src/utils.c:
	* src/utils.h:

	eazel_after_bind is toast; the functionality is elsewhere now
	

2000-07-11  Mike Fleming  <mfleming@eazel.com>

	* src/TODO:
	* src/digest.c: (digest_init), (digest_gen_response_header):
	* src/http-connection.c: (http_get_headers),
	(http_parse_authn_header), (http_connection_finish):
	* src/http-connection.h:
	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_sock_read), (authenticate_http_callback),
	(authenticate_user):
	* src/impl-eazelproxy.h:

	Digest authentication actually works now.

2000-07-11  Mike Fleming  <mfleming@eazel.com>

	* src/TODO:
	* src/Makefile.am:
	* src/digest.c: (digest_random_seed), (digest_gen_cnonce),
	(digest_init), (digest_gen_response_header), (digest_free),
	(digest_gen_token):
	* src/digest.h:

	Added HTTP Digest Authentication routines.

	* src/http-connection.c: (http_parse_status_line),
	(http_get_headers), (http_get_headers_state_free),
	(http_parse_authn_header):
	* src/http-connection.h:

	Added http_get_headers and http_parse_authn_header

	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_sock_eof), (authenticate_sock_read),
	(authenticate_http_callback), (authenticate_user):

	Added authenticate functions for async HTTP authenticate
	round-trip.

	* src/utils.c: (to_hex_string):
	* src/utils.h:

	Added to_hex_string

2000-07-06  Mike Fleming  <mfleming@eazel.com>

	* configure.in:
	* src/TODO:
	* src/http-connection.c: (http_parse_status_line),
	(http_connection_connect), (http_connection_sock_connect),
	(http_connection_connect_sock_eof), (http_connection_finish):
	* src/http-connection.h:
	* src/impl-eazelproxy.c: (authenticate_finished),
	(authenticate_sock_eof), (authenticate_sock_read),
	(authenticate_http_callback), (authenticate_user):
	* src/request.c: (socket_connect_proxy_tunnel),
	(proxy_tunnel_finish), (proxy_tunnel_state_free),
	(proxy_tunnel_sock_connect), (proxy_tunnel_sock_eof),
	(proxy_tunnel_sock_read), (proxy_tunnel_sock_read_headers),
	(proxy_connect_callback), (proxy_do_connect):
	* src/request.h:
	* src/sock.c: (socket_read):
	* src/utils.h:

	HTTP fetch works

	upstream proxy code refactored; uses socket_connect_proxy_tunnel
	for upstream CONNECT cases

	Beginnings of digest auth round-trip code

2000-07-05  Mike Fleming  <mfleming@eazel.com>

	* configure.in:
	* src/Makefile.am:
	* src/eazelproxy.idl:
	* src/http-connection.c: (http_parse_status_line),
	(socket_connect_proxy_tunnel_ssl), (proxy_tunnel_finish),
	(proxy_tunnel_state_free), (proxy_tunnel_sock_connect),
	(proxy_tunnel_sock_eof), (proxy_tunnel_sock_read),
	(proxy_tunnel_sock_read_headers), (http_connection_connect),
	(http_connection_sock_connect), (http_connection_connect_sock_eof),
	(http_connection_response_sock_read),
	(http_connection_response_sock_eof), (http_connection_finish_fail),
	(http_connection_free):
	* src/http-connection.h:
	* src/impl-eazelproxy.c: (init_corba_junk),
	(impl_EazelProxy_UserControl_get_default_user),
	(impl_EazelProxy_UserControl_get_active_users),
	(impl_EazelProxy_UserControl_authenticate_user),
	(impl_EazelProxy_UserControl_logout_user),
	(impl_EazelProxy_UserControl_add_listener),
	(impl_EazelProxy_UserControl_remove_listener):
	* src/impl-eazelproxy.h:
	* src/proxy.c: (main):
	* src/proxy.h:
	* src/request.c: (request_free), (request_new), (request_copy),
	(request_parse):
	* src/sock-ssl.c: (ssl_begin_ssl):
	* src/sock-ssl.h:
	* src/sock.c: (sockbuf_get_data), (socket_read),
	(socket_finish_connect), (socket_tunnel_ssl), (socket_begin_ssl):
	* src/sock.h:
	* src/test/proxy-test.pl:

	Churned on the EazelProxy idl interface

	Added http connection method that supports upstream proxies

	Added a connect wrapper for connecting through upstream http proxies
	via the CONNECT method

	Added -p option to specify port (used for automated test)

	Added some public methods to request.c for manipulating HTTPRequest

	Added "socket_read" and "socket_begin_ssl" public functions to sock.c

	Added test script with six tests.

2000-07-03  Robey Pointer  <robey@eazel.com>

	* src/log.c: (log):
	* src/proxy.c: (main):
	* src/request.c: (request_free), (request_parse),
	(proxy_tunnel_read_wait), (proxy_tunnel_read), (proxy_client_eof),
	(proxy_server_eof), (proxy_connect_callback), (proxy_do_connect):
	* src/sock-ssl.c: (socket_begin_ssl):
	* src/sock.c: (socket_finish_connect), (socket_connect),
	(socket_connect_ssl), (dispatch_socket_events), (socket_tunnel),
	(socket_tunnel_ssl):
	* src/sock.h:

	Make the '-h' option work, and make the logging function more
	resistant to evil characters.

	Support upstream proxy (-u) option, to allow our proxy to use an
	existing proxy.  Added weird support for using -f/-u at the same
	time (which we plan to do) so that a client can make a normal GET
	request, and we'll translate that to a CONNECT/SSL request on the
	upstream proxy.

	Fix a few bugs with race conditions over who closes the socket
	first.  Fix handling of POLLHUP for failed connections, now that
	we use poll.

2000-07-02  Michael K. Fleming  <set EMAIL_ADDRESS environment variable>

	* acconfig.h:

	undef <-> undefine

2000-06-30  Robey Pointer  <robey@eazel.com>

	* acconfig.h:
	* src/TODO:
	* src/log.c: (log):
	* src/proxy.c: (takesig), (display_version), (main):
	* src/proxy.h:
	* src/request.c: (proxy_server_eof):
	* src/sock.c: (sockbuf_new), (sockbuf_free), (sockbuf_getline),
	(sockbuf_write), (sockbuf_read), (sockbuf_append),
	(sockbuf_append_buffer), (resolve_name), (socket_destroy),
	(socket_new), (socket_write), (dispatch_socket_events),
	(socket_glib_poll_func), (socket_listen), (socket_tunnel),
	(socket_set_read_fn), (socket_set_eof_fn), (socket_set_data),
	(socket_get_data), (socket_get_byte_counts), (socket_log_debug):
	* src/sock.h:

	Turn off default logfile and remote host.  Add long forms to
	the command-line options, and add '-h/--help' support.  Track
	recv/xmit stats.  Allow OAF to be turned off (for using as a
	standalone proxy).

2000-06-30  Robey Pointer  <robey@eazel.com>

	* src/Makefile.am:
	* src/request.c: (connection_free), (connection_new),
	(proxy_server_eof), (proxy_connect_callback),
	(proxy_abort_connect), (proxy_do_connect), (proxy_get_headers),
	(proxy_get_request), (proxy_get_request_eof):
	* src/sock.c: (resolve_name), (socket_destroy), (socket_new),
	(socket_accept), (dispatch_socket_events), (socket_log_debug):
	* src/sock.h:
	* src/dnscache.h:
	* src/dnscache.c:

	Brought back the DNS caching piece of tinyproxy (it's small, and
	still somewhat useful).

	Added magic numbers to the tops of the Socket and Connection
	structs, and sprinkled g_assert()'s to verify them, for better
	debugging.

	Fixed a bug where a client could abort a connection before the
	server socket had finished connecting, and the proxy wouldn't
	notice that sockets had vanished while it wasn't looking.  (It
	pays attention now.)

2000-06-30  Robey Pointer  <robey@eazel.com>

	* src/request.c: (request_parse), (proxy_connect_callback),
	(proxy_get_request):
	* src/sock-ssl.c: (socket_turn_off_evil_ciphers):

	Made request parser more flexible, and added support for the
	CONNECT proxy method, so that when running as a normal proxy,
	http and https can be proxied.

2000-06-30  Mike Fleming  <mfleming@eazel.com>

	* configure.in:
	* src/compat.c: (uid_from_local_sockaddr_in):
	* src/impl-eazelproxy.c: (impl_eazelproxy_get_port_number):
	* src/proxy.c: (main):
	* src/utils.c: (eazel_after_bind), (eazel_check_connection):

2000-06-30  J Shane Culpepper  <pepper@eazel.com>

	* AUTHORS:
	* README:
	Changing to correctly reflect the owners and maintainers of the module.

2000-06-29  Robey Pointer  <robey@eazel.com>

	* src/TODO:
	* src/proxy.c: (usagedisp), (main):
	* src/request.c: (proxy_connect_callback), (proxy_do_connect),
	(proxy_get_headers):
	* src/sock-ssl.c: (verify_callback), (ssl_log_error),
	(socket_turn_off_evil_ciphers), (socket_begin_ssl):

	With empty '-r' option, ammonite will behave like a normal proxy
	server (useful for testing).

	Pulled out proxy_do_connect() into its own function.  The "Host:"
	header is now set/added/removed correctly (to match the site we
	expect to talk to).

	SSL code refuses to use RSA, IDEA, RC4, or RC5 ciphers for the
	symmetrical encryption, even if available.

2000-06-28  Mike Fleming  <mfleming@eazel.com>

	* .cvsignore:
	* configure.in:
	* doc/.cvsignore:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/eazel-proxy.oafinfo:
	* src/eazelproxy.idl:
	* src/impl-eazelproxy.c: (init_corba_junk),
	(impl_eazelproxy_get_port_number):
	* src/impl-eazelproxy.h:
	* src/proxy.c: (takesig), (main):
	* src/proxy.h:
	* src/sock.c: (socket_glib_poll_func):
	* src/sock.h:

	Added beginnings of CORBA stuff

	Removed OLD_EVENT_LOOP stuff

	You'll need to "make install" now to copy the oafinfo file into
	you're share/oaf directory

2000-06-28  Robey Pointer  <robey@eazel.com>

	* src/TODO:
	* src/request.c: (request_parse), (proxy_connect),
	(proxy_get_headers), (proxy_get_request):

	Made request parsing flexible enough to accept "GET /path",
	not just "GET http://host/path".  Allow methods other than
	GET, and pass them through as-is.
	
2000-06-28  Robey Pointer  <robey@eazel.com>

	* acconfig.h:
	* configure.in:
	* src/Makefile.am:
	* src/TODO:
	* src/proxy.c: (usagedisp), (display_version), (main):
	* src/proxy.h:
	* src/request.c: (proxy_get_headers):
	* src/sock.c: (sockbuf_write), (sockbuf_read), (socket_close),
	(socket_getline), (socket_write), (socket_connect),
	(socket_connect_ssl), (socket_finish_connect), (socket_accept),
	(socket_eof), (socket_event_check), (dispatch_socket_events),
	(socket_log_debug):
	* src/sock.h:
	* src/sock-ssl.c: NEW
	* src/sock-ssl.h: NEW

	Added configure.in tests for detecting openSSL library and
	defining HAVE_OPENSSL (and some make options) when the library
	is found.

	Added #ifdef'd code to various pieces of sock.c to support
	outbound SSL connections, and added sock-ssl.[ch] to isolate
	as much of that code as possible.

	proxy.c now reports via '-v' if SSL support was compiled in,
	and adds an option '-S <certfile>' to cause outbound connections
	to be SSL'd, verifying the server cert.

2000-06-27  Mike Fleming  <mfleming@eazel.com>

	* src/gnuregex.c:
	* src/proxy.c: (takesig), (main):
	* src/sock.c: (sockbuf_read), (dispatch_socket_events),
	(socket_glib_poll_func):
	* src/sock.h:

	Changed the event loop to run beneath a glib g_main_loop

2000-06-26  Robey Pointer  <robey@eazel.com>

	* src/Makefile.am:
	* src/proxy.c: (main)
	* src/request.c: (proxy_new_connection)
	* src/utils.c: (eazel_after_bind) (eazel_check_connection)
	* src/utils.h:
	* src/compat.c:
	* src/compat.h:

	Re-integrated a few missing compat.c & eazelmods.c functions into
	utils.c and compat.c (where compat.c holds things that will be hard
	to port off Linux).  Re-added the regex library for compat.c's code
	to determine the UID on the other side of a local socket.
	
2000-06-26  Robey Pointer  <robey@eazel.com>

	* src/proxy.c:
	* src/proxy.h:
	* src/request.c:
	* src/utils.c:
	* src/utils.h:
	* Makefile.am:
	* acconfig.h:
	* configure.in:

	Removed many of the old tinyproxy files, which were now redundant or
	barely used, and consolidated the rest into smaller files.  Rewrote
	the socket library to be callback-based instead of state-engine
	based, so that we can add more parsing code later for changing and
	reading the HTTP headers.

	The proxy now collects the client headers into a small buffer before
	forwarding them to the remote server (allowing us to munge them), and
	avoids using regex to parse the client's request line.  The regex
	library is no longer used, but is still in CVS in case we want to use
	it later (seems fairly likely).  The eazel/ directory is still present
	for now, but is no longer built or used.
	
2000-06-10  J Shane Culpepper  <pepper@eazel.com>

	* Makefile.am:
	* acconfig.h:
	* configure.in:

	Removed adns support from default configuration. Removed libeazelnet
	from default subdirs for now since nothing is there.

2000-06-09  Mike Fleming  <mfleming@eazel.com>

	* src/conns.c:
	* src/conns.h:
	* src/reqs.c: (clientreq), (newconn_req), (getreqs):
	* src/sock.c:
	* src/tinyproxy.c: (usagedisp), (main):

	Added EAZEL_NO_ADNS.  If you turn this macro on, you won't
	use ADNS.  Still haven't removed it from the configure.in

2000-06-09  Mike Fleming  <mfleming@eazel.com>

	* src/config.h:
	* src/eazel/compat.c: (uid_from_local_sockaddr_in):

	Stupid fixes

2000-06-09  Mike Fleming  <mfleming@eazel.com>

	* acconfig.h:
	Added this file; oops

2000-06-09  Mike Fleming  <mfleming@eazel.com>

	* src/eazel/compat.c: (is_pid_alive), (uid_from_local_sockaddr_in):
	* src/eazel/compat.h:
	* src/eazel/eazelmods.c: (load_auth_token), (eazel_translate_host),
	(eazel_check_connection):
	* src/reqs.c: (clientreq), (getreqs):
	* src/sock.c: (init_listen_sock):

	Added socket peer UID check; a connection from a different UID
	is not allowed to make a request.

	Misc fixes

2000-06-08  Mike Fleming  <mfleming@eazel.com>

	* configure.in:
	Changed warning flags to match nautilus

	* src/Makefile.am:
	* src/eazel/Makefile.am:
	Added libeazel_mods as compile dep

	* src/eazel/eazelmods.c: (get_home_subdirectory_path),
	(make_home_subdirectory_if_needed), (cleanup_func),
	(check_and_create_lock), (eazel_load_config), (eazel_check_run),
	(eazel_after_bind):

	Made server locking work.

	* src/eazel/eazelmods.h:
	* src/reqs.c: (getreqs):
	* src/sock.c: (init_listen_sock):
	* src/tinyproxy.c:

	Other small pieces of progress
		

2000-06-07  J Shane Culpepper  <pepper@eazel.com>

	Added module ammonite and a skeleton build harness.  Still need to
	do alot of minor tweaks to whip this into shape before source files
	are landed.
