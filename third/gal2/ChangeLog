2003-06-25  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.8

2003-06-18  Suresh Chandrasekharan  <suresh.chandrasekharan@sun.com>

	* e-iconv.c: Fixed typo in BIG5HKSCS

2003-06-19  Bolian Yin <bolian.yin@sun.com>

	* e-gui-utils.c (e_popup_menu): accept event arg to be NULL.

2003-06-18  Mike Kestner  <mkestner@ximian.com>

	* autogen.sh : libtool version check fix for libtool-1.5
	Patch from Elijah Newren <newren@math.utah.edu>

2003-06-13  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_dispose): unref the im_context.

2003-06-02  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.7

2003-05-31  Mike Kestner  <mkestner@ximian.com>

	* gal/util/e-util.c (e_filename_make_safe): mangle the %'s out
	too so that libxml2 doesn't convert the encoded hex values.

2003-05-22  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-color-combo.c (color_combo_set_color) : Don't
	  make callers assign the pixel for the widget.

2003-05-28  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bump libtool version for api addition
	* gal/util/e-util.c (e_utf8_strftime): new, utf8 in/out
	(e_utf8_strftime_fix_am_pm): new, utf8 in/out

2003-05-27  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-05-21  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.6

2003-05-19  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.5

2003-05-19  Mike Kestner  <mkestner@ximian.com>

	* Makefile.am : revert a broken CLEAN_FILES change. [42478]

2003-05-18  Danilo Å egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-16  Anna Marie Dirks  <anna@ximian.com>

	* gal/widgets/e-categories.c: Added appropriate padding/spacing
	to the categories list dialog. Fixes the rest of #41217.

	* gal/widgets/e-categories-master-list-dialog.glade: HIG-ified 
	this dialog.

	* gal/widgets/gal-categories.glade: HIG-ified this dialog
	(in terms of spacing/padding). Fixes most of bug #41217

2003-05-16  Mike Kestner  <mkestner@ximian.com>

	For Rui Miguel Silva Seabra  <rms@1407.org>
	* gal.spec.in : make the rpm spec work again

2003-05-15  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-scroll-frame.c (e_scroll_frame_class_init):
	override the scroll method rather than the button release
	(e_scroll_frame_scroll): scroll based on a GdkEventScroll 
	[bug #41935, the gal part]

2003-05-13  Chris Toshok  <toshok@ximian.com>

	[ fixes several utf8/pango related problems, including bugs
	#41288, #42596, #42604 ]
	
	* configure.in (GAL_CURRENT): bump to 3, per mkestner.
	(GAL_REVISION): drop to 0, per mkestner.

	* gal/e-text/e-text.c (reset_layout_attrs): we need to convert the
	start/end bounds of the object to byte indices for the attribute.
	(reset_layout): in the layout == NULL case don't create the layout
	then immediately set it again with the same text.  also, we need
	to convert selection_start to a byte index before calling
	pango_layout_get_cursor_pos.
	(e_text_draw): remove some #ifdef 0'd code, move the calculation
	of our initial clip_rect below the xpos/ypos assignments so we
	don't duplicate the expression.  Fix the selection drawing in the
	multiline case so that it actually works, instead of assuming that
	all ETexts only have 1 line *boggle*.
	(get_position_from_xy): this needs to return a utf8 offset.
	(e_text_copy_clipboard): convert sel_start/sel_end to byte indices
	before copying.
	(primary_get_cb): same.
	(paste_received): validate the input here, and drop the length
	parameter from e_text_insert.
	(next_word): convert from an utf8 offset on entry to this
	function, and return a utf8 offset when we're done.  also, remove
	the call the g_unichar_validate.  we validate at all points where
	text is inserted.
	(find_offset_into_line): new function used in the backward/forward
	line code.  find the utf8 offset into a line (the number of utf8
	characters from a prior \n or beginning of the string.)
	(_get_position): in general there are lots of changes here because
	text->selection_start/text->selection_end are utf8 offsets, not
	byte offsets. fix E_TEP_START_OF_LINE so that hitting Ctrl-a when
	you're at the beginning of a line doesn't take you to the
	beginning of the previous line.  fix E_TEP_END_OF_LINE in an
	analogous fashion. for E_TEP_FORWARD_CHARACTER we just increment
	by 1.  for E_TEP_BACKWARD_CHARACTER we just decrement by 1.  for
	E_TEP_BACKWARD_WORD we drop the g_unichar_validate call and
	simplify things a bit.  reimplement
	E_TEP_FORWARD_LINE/E_TEP_BACKWARD_LINE so they find the current
	offset into the line, then scan forward/backward for the next/prev
	line, and put us at the right offset on that line.  fix
	E_TEP_SELECT_WORD so double clicking in the space between words
	doesn't select both words - if you double click on the trailing
	edge of the space, it selects the next word.  leading edge selects
	the previous one.  for E_TEP_SELECT_ALL use g_utf8_strlen.
	(e_text_insert): everything that calls this passes a \0 terminated
	string, so we assume it's \0 terminated (the old code did as well,
	with calls to strlen) and drop the length parameter.  also make
	sure this is all utf8 happy.
	(capitalize): use g_utf8_offset_to_pointer instead of just adding
	text->text and start/end, and remove the validate call.  also fix
	the call to e_text_model_delete and use e_text_model_insert_length
	instead of e_text_model_insert.
	(e_text_command): for E_TEP_INSERT, validate the input.  for
	E_TEP_CAPS just use MAX instead of the neat little hack.  also,
	fix the scrolling so that it scrolls properly in both X and Y
	directions (there are still some hiccups but it's much much better
	than previously).
	(e_text_commit_cb): validate the input here.

	* gal/e-text/e-text-model.c (struct _ETextModelPrivate): just use
	a GString here and get rid of MAX_LENGTH.
	(e_text_model_dispose): free GString.
	(e_text_model_real_validate_position): clean this up a bit.
	(e_text_model_real_get_text): return the contents of the GString.
	(e_text_model_real_get_text_length): use g_utf8_strlen here.
	(e_text_model_real_set_text): convert to GString
	(e_text_model_real_insert): just call e_text_model_insert_length
	here instead of duplicating the function.
	(e_text_model_real_insert_length): convert to utf8/gstring.
	i.e. convert @position and @length to a bytes and use
	g_string_insert_len.
	(e_text_model_real_delete): same, with g_string_erase.
	(e_text_model_get_text_length): use g_utf8_strlen
	(e_text_model_strdup_nth_object): convert the length of the object
	to bytes before copying.
	(e_text_model_get_nth_object_bounds): calculate start/end properly
	for utf8.

2003-05-12  Mike Kestner  <mkestner@ximian.com>

	* configure.in : add gtk/libgnomecanvas compatability test 

2003-05-12  Chris Toshok  <toshok@ximian.com>

	[ fixes #42608 ]
	* gal/widgets/e-categories.c (e_categories_button_clicked): don't
	ref the master_list_dialog here.

	* gal/widgets/e-categories-master-list-dialog.c
	(dialog_destroyed): use gtk_object_destroy here.

2003-05-08  Radek Doulik  <rodo@ximian.com>

	* gal/util/e-util.c (e_gettext): use E_I18N_DOMAIN

	* gal/util/e-i18n.h: use e_gettext as we need our text domain to
	be binded

2003-05-07  Alastair Tse  <liquidx@gentoo.org>

	* docs/gal-api.sgml: formatting fixes.

2003-05-07  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-color-combo.c (color_combo_class_init) : don't
	  bother hooking up empty destroy and finalize methods.

	* gal/widgets/gtk-combo-box.c (gtk_combo_box_destroy) : fix.
	  1) Do not unref what you have just destroyed.
	  2) NULL out pointers so that when destroy gets called again you
	     don't double destroy them.

2003-05-05  Jeremy Katz  <katzj@redhat.com>

	* gal/e-text/e-completion-callbacks.c
	(e_completion_callbacks_new): Fix prototype.
	* gal/e-text/e-completion-callbacks.h: Likewise.

2003-05-05  Christian Neumair  <chris@gnome-de.org>

	* gal/e-text/e-text.c: Fixed typo.

2003-05-03  Masahiro Sakai  <sakai@tom.sfc.keio.ac.jp>

	* configure.in: call AC_LIBTOOL_WIN32_DLL which is necessary for
	building shared library on win32 platform.

	* gal/Makefile.am (libgal_2_0_la_LDFLAGS):
	* gal/a11y/Makefile.am (libgal_a11y_2_0_la_LDFLAGS): add
	-no-undefined which is necessary for building shared library on
	some platforms (e.g. Win32, BeOS).

	* gal/a11y/e-table/gal-a11y-e-cell-text.c: don't call undefined
	functions e_cell_text_get_selection() and e_cell_text_set_selection().

	* gal/a11y/Makefile.am (libgal_a11y_2_0_la_LIBADD):
	add $(top_builddir)/gal/libgal-2.0.la and $(EXTRA_GNOME_LIBS).

	* gal/Makefile.am:
	(libgal_2_0_la_LIBADD): add $(EXTRA_GNOME_LIBS).
	(ui_subdirs): add "." ahead of "a11y". because above change make
	a11y/libgal-a11y-2.0.la to depend on libgal-2.0.la.

	* gal/widgets/Makefile.am (test_color_LDADD,
	test_e_font_LDADD, test_font_loading_LDADD): fix ordering.
	$(EXTRA_GNOME_LIBS) should be behind other libraries that depend on it.

2003-05-01  Mike Kestner  <mkestner@ximian.com>

	* gal/e-text/e-completion-callbacks.c (e_completion_callbacks_new): 
	return the instantiated object. [bug #42156]

2003-05-01  Jody Goldberg <jody@gnome.org>

	* gal/widgets/gtk-combo-box.c (gtk_combo_box_mnemonic_activate) :
	  support being a mnemonic activation target.

2003-04-29  Chris Toshok  <toshok@ximian.com>

	[ fixes bug #41158 ]
	* gal/widgets/e-categories.c (e_categories_construct): reorder
	Ok/Cancel buttons per HIG.

2003-04-28  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.4

2003-04-28  Chris Toshok  <toshok@ximian.com>

	* gal/util/e-bit-array.c (e_bit_array_delete_real): fix logic for
	updating selection after a delete when @move_selection_mode ==
	TRUE.

2003-04-27  Jody Goldberg <jody@gnome.org>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_construct) : tiny
	  size tweak to fix 1 pixel ugliness in the toolbar.  This code is
	  rife with magic numbers and sizes that assume toolbar == 24x24
	* gal/widgets/widget-color-combo.c (color_combo_construct) : ditto.

2003-04-14  Jody Goldberg <jody@gnome.org>

	For Rui Miguel Silva Seabra  <rms@1407.org>
	* gal.spec.in : make the rpm spec work again and correct Copyright
	tag to License tag (which is the correct one)

2003-04-09  Mike Kestner  <mkestner@ximian.com>

	* configure.in : releasing 1.99.3

2003-04-09  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-categories-master-list-option-menu.c
	(ecmlom_ecml_changed): The strings aren't allocated any more.
	Don't free them.

	* gal/widgets/e-categories-master-list-combo.c
	(ecmlc_ecml_changed): Likewise

	* gal/widgets/e-option-menu.c: (e_option_menu_new) 
	(e_option_menu_new_from_array) 
	(e_option_menu_construct_from_array, e_option_menu_set_strings) 
	(e_option_menu_set_strings_from_array): Constify string args

2003-04-08  Mike Kestner  <mkestner@ximian.com>

	* gal/widgets/Makefile.am : remove e-font.[ch], test-e-font, 
	and test-font-loading.
	* gal/widgets/e-unicode.[ch] (e_utf8_from_gtk_string): kill
	(e_utf8_from_gtk_string_sized): kill
	(e_utf8_to_gtk_string): kill
	(e_utf8_to_gtk_string_sized): kill
	(e_utf8_gtk_menu_item_new_with_label): kill
	(e_utf8_gtk_clist_set_text): kill
	(e_utf8_gtk_clist_append): kill
	* e-categories-master-list-option-menu.c (ecmlom_ecml_changed):
	don't use e_utf8_to_gtk_string.
	* e-categories-master-list-combo (ecmlc_ecml_changed):
	don't use e_utf8_to_gtk_string.

2003-04-08  Mike Kestner  <mkestner@ximian.com>

	gal/e-text/e-text.[ch] : break EFont dependency

2003-04-07  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-canvas-background.c (ecb_class_init):
	fill_color_gdk is a boxed GdkColor, not a pointer.
	(ecb_set_property): same.
	(ecb_get_property): same.

2003-04-03  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-entry.c (e_entry_init): set handle_popup to TRUE on
	the EText.

	* gal/e-text/e-text.c (e_text_set_property): add setter for
	handle_popup.
	(e_text_get_property): add getter for handle_popup.
	(e_text_event): only do our special popup handling if handle_popup
	is true.  otherwise, pass the event along.
	(e_text_class_init): install the handle_popup property.
	(e_text_init): init handle_popup to FALSE, so we get default
	behavior in most cases.

	* gal/e-text/e-text.h: add "handle_popup" field, so the user of an
	EText can decide whether to handle popups themselves.

2003-04-03  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (e_text_commit_cb): emit a keypress signal.
	yes, i know this might not correspond to a single keypress, but..

2003-04-02  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (e_text_copy_clipboard): ifdef
	gtk_widget_get_clipboard since we need to build against gtk 2.0.
	(e_text_update_primary_selection): same.
	(e_text_paste): same.
	(e_text_do_popup): same.

2003-04-02  Chris Toshok  <toshok@ximian.com>
	* gal/e-text/e-text.c (e_text_event): only connect the signals if
	!im_context_signals_registered.
	(e_text_init): init im_context_signals_registered = FALSE.

	* gal/e-text/e-text.c (struct _EText): add
	im_context_signals_registered.
	
2003-04-02  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (e_text_dispose): just disconnect based on
	DATA, so we only need 1 call.
	(e_text_event): same.

2003-04-02  Chris Toshok  <toshok@ximian.com>

	[ either fixes #39702 or comes damn, damn close.  also, fixes EText
	to not suck *nearly* as much. ]
	* gal/util/e-marshal.list: add NONE:POINTER,INT,OBJECT.

	* gal/e-text/e-entry.h: (struct _EEntryClass): popup ->
	populate_popup.

	* gal/e-text/e-entry.c (proxy_changed): rename, the old name was
	too damn long.
	(proxy_activate): same.
	(proxy_populate_popup): same, and change from popup to
	populate_popup.
	(e_entry_init): track change to cb names, and populate_popup.
	also, pass the ECanvas's im_context to the EText.
	(e_entry_class_init): POPUP -> POPULATE_POPUP.

	* gal/e-text/e-text.h (struct _EText): remove the old selection
	stuff, and add im_context/reset_im_context fields.
	(struct _ETextClass): popup -> populate_popup.

	* gal/e-text/e-text.c (e_text_dispose): remove all the
	GtkInvisible based selection stuff, and disconnect from/unref the
	im_context.
	(e_text_set_property): add "im_context" handling.
	(e_text_get_property): same.
	(e_text_event): connect/disconnect from the IM context's signals
	in the FOCUS_CHANGE handler.  in the KEY_PRESS/RELEASE handler,
	use gtk_im_context_filter_keypress if we have an im_context.
	also, use e_text_do_popup now instead of just emitting the "popup"
	signal.
	(e_text_copy_clipboard): new function.
	(e_text_delete_selection): new function.
	(e_text_cut_clipboard): new function.
	(e_text_paste_clipboard): new function.
	(e_text_select_all): new function.
	(primary_get_cb): new function, handle requests for the primary
	selection when we're the owner.
	(primary_clear_cb): new function, unfinished.
	(e_text_update_primary_selection): new function.
	(paste_received): new function, insert pasted text.
	(e_text_paste): new function,
	(popup_menu_detach): new function, not needed really.
	(popup_targets_received): new function, pop up the popup once we
	have the selection information necessary to sensitize the c/c/p
	buttons.
	(e_text_do_popup): new function, request the selection.
	(e_text_reset_im_context): new function.
	(e_text_command): for E_TEP_SELECT, call
	e_text_update_primary_selection.  for E_TEP_DELETE/INSERT,
	_delete_selection -> e_text_delete_selection.  for E_TEP_COPY,
	call e_text_copy_clipboard.  for E_TEP_PASTE/E_TEP_GET_SELECTION
	call e_text_paste.
	(e_text_class_init): change the "popup" signal to
	"populate_popup".  Also, add the "im_context" property.
	(e_text_commit_cb): new function. IM context callback.
	(e_text_retrieve_surrounding_cb): new function.  IM context
	callback.
	(e_text_delete_surrounding_cb): new function.  IM context
	callback.  unfinished.

2003-04-01  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-canvas.c: move to using gtk_im_context.

	* gal/widgets/e-canvas.c: add im_context member.

2003-04-01  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): stop drawing that annoying
	focus rectangle.

2003-04-01  Chris Toshok  <toshok@ximian.com>

	[ fixes bug #39508 ]
	* gal/e-text/e-text.c (e_text_command): add back in some suitably
	pango-ized code to get EText's scrolling horizontally as you move
	the cursor.

2003-04-01  Mike Kestner  <mkestner@ximian.com>

	* configure.in : make GETTEXT_PACKAGE version specific

2003-04-01  Mike Kestner  <mkestner@ximian.com>

	* docs/Makefile.am : break an automake-1.6 dependency.

2003-03-27  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bumping libtool version

2003-03-26  Not Zed  <NotZed@Ximian.com>

	* gal/e-text/e-entry.c (e_entry_show_popup): set the popup to
	insensitive when we pop it down.  hack to force it to lose focus,
	fix for #39719.

2003-03-25  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-gui-utils.c: Remove e_notice. (Moved to
	evolution.)

2003-03-21  Chris Toshok  <toshok@ximian.com>

	[ fixes bug #39856 ]
	* gal/widgets/e-reflow.c (e_reflow_update): request a full redraw
	when we're done dragging columns.

2003-03-14  Chris Toshok  <toshok@ximian.com>

	* gal/util/e-util.c (e_write_file): ugh, we need to make sure the
	file is opened for writing.  or the flags with O_WRONLY.

2003-03-14  Mike Kestner  <mkestner@ximian.com>

	* gal/util/e-util.c (e_mkdir_hier): use access() like camel

2003-03-13  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-xml-utils.c (e_xml_save_file): Updated to use
	xmlDocDumpFormatMemory() so that we get structured xml rather than
	just a clump of xml mess.

2003-03-12  Mike Kestner  <mkestner@ximian.com>

	* gal/widgets/e-option-menu.c : kill signals[] and enum. Rework of
	a patch submitted by Henry Jia <henry.jia@sun.com>.

2003-03-10  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/e-text/e-text.c: Added prototype for show_pango_rectangle()

2003-03-07  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): fix drawing bugs, and disable
	the stupid looking focus rect, since I can't find a theme that
	uses them.
	(e_text_event): force redraw in the focus-out case if the cursor
	is shown (so we can erase it), and also trick ourselves into
	drawing it immediately (by setting it to FALSE) in the focus-in
	case.

2003-03-06  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-iconv.c: Alias gb-2312 to gb2312 also (since iconv
	doesn't have "gb-2312"). I wonder if we should capitalise GB2312?
	At least my iconv lists it in all caps (although I have the
	benefit of having gnu iconv which is case insensitive so I dunno).
	(e_strdown, e_strup): New functions to replace
	g_ascii_str[down,up]: because the glib versions return a newly
	allocated string buf and that is not what we want.
	(e_iconv_charset_name): Use the new e_strdown.
	(e_iconv_open): Save errno.

2003-03-05  Mike Kestner  <mkestner@ximian.com>

	* Makefile.am : put po back in the build
	* configure.in : put po back in the build

2003-03-05  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bump libtool version. releasing 1.99.2.

2003-03-04  Dmitry Mastrukov  <dmitry@taurussoft.org>

	* gal/widgets/e-unicode.c : i18n fix

2003-03-04  Mike Kestner  <mkestner@ximian.com>

	* Makefile.am : add some CLEANFILES, shaddup distcheck

2003-03-04  Mike Kestner  <mkestner@ximian.com>

	* docs/Makefile.am : don't dist an html file that's not created
	if gtk-doc is disabled.

2003-02-27  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (reflow_columns): init column_count to
	column_start + 1.
	(item_removed): clean up the setting of
	reflow->reflow_from_column.
	(items_inserted): same.

2003-02-27  Mike Kestner  <mkestner@ximian.com>

	* gal/widgets/e-canvas.c (emit_event): use gdk_event_copy
	and gdk_event_free to dup the event.

2003-02-26  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_dispose): remove the
	grab_cancelled_check_id if it's still active.

2003-02-26  Hans Petter Jansson  <hpj@ximian.com>

	Fixes Ximian #38564.
	
	* gal/widgets/e-categories-master-list-dialog.c
	(create_ecmld_etable): Show the ETable after creation, since
	libglade doesn't do it.

2003-02-25  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-iconv.c (locale_parse_lang): New internal function to
	parse the locale language code.
	(e_iconv_init): Parse and set the locale_lang variable.
	(e_iconv_locale_language): Return the locale_lang.
	(e_iconv_charset_language): Map some CJKR charsets to a language
	code.

2003-02-24  Hans Petter Jansson  <hpj@ximian.com>

	* gal/e-text/e-text.c (e_text_dispose): Don't unref the
	GtkInvisible - instead, destroy it.

2003-02-19  Dan Winship  <danw@ximian.com>

	* gal/unicode/*: Not being used any more. Kill. Kill!

	* gal/util/e-unicode-i18n.[ch]: Likewise

	* tests/test-unicode.c: This too. It's testing glib now...

	* tests/Makefile.am (noinst_PROGRAMS): remove test-unicode

	* gal/widgets/e-categories-master-list-dialog-model.c: Make
	"parent_class" static

2003-02-17  Jody Goldberg <jody@gnome.org>

	* gal/e-table/e-table-group.c (e_table_group_construct) : make things
	  compile on an alpha.  passing NULL to a var_arg not portable.
	  This seems like a better approach.

2003-02-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (item_removed): make this actually work:
	destroy the canvas item, memmove stuff around, change
	reflow->count, etc, etc.

2003-02-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (reflow_columns): enable this function to
	reflow the view from a particular column onward.  This is useful
	if you have a huge model and the only changes are happening at the
	end (as is normally the case if you're appending to a large
	model.)
	(item_changed): calculate the height of the changed item here, so
	we aren't doing it as we reflow the model.  For now, reflow the
	entire model.  Further optimization can be done here.
	(item_removed): new function.  remove the item and reflow from the
	column that contained it.
	(items_inserted): calculate the heights of the new items, and
	calculate the lowest numbered column containing one of the
	inserted items.  reflow from there.
	(model_changed): calculate the heights of everything here.
	(comparison_changed): new function, clear the sorter and reflow.
	(disconnect_model): disconnect comparison_changed and
	model_item_removed.
	(connect_model): connect comparison_changed and
	model_item_removed.
	(adjustment_changed): use queue_incarnate here, instead of forcing
	the reflow model to incarnate as we scroll.  Not sure if this is
	actually the right solution, but it does make the scrollbar more
	responsive at the cost of redraw speed.

	* gal/widgets/e-reflow.h (struct _EReflow): add slots for the new
	signal ids, as well as "reflow_from_column".

	* gal/widgets/e-reflow-model.c (e_reflow_model_class_init): create
	the comparison_changed and model_item_removed signals.
	(e_reflow_model_comparison_changed): new function, emit the
	comparison_changed signal.
	(e_reflow_model_item_removed): new function, emit the
	model_item_removed signal.

	* gal/widgets/e-reflow-model.h: add comparison_changed and
	model_item_removed signals.

2003-02-12 Suresh Chandrasekharan <suresh.chandrasekharan@sun.com>

	* gal/util/e-iconv.c: Fix for Solaris Bug "31081  Mailer
	sender/Subject/Date fields blank for Solaris 8 ko_KR.EUC locale." and
	partial fix for Solaris Bug "32747 additional issues with evolution
	beta2 in ja_JP.PCK locale"

2003-02-12  Larry Ewing  <lewing@ximian.com>

	* configure.in (GETTEXT_PACKAGE): change this to be a simple
	string because intltool can't currently handle variable
	substitution on GETTEXT_PACKAGE.

2003-02-09  Chris Toshok  <toshok@ximian.com>

	* tests/.cvsignore: ignore test-completion.

	* tests/test-completion.c: new program, completion test.

	* tests/Makefile.am (noinst_PROGRAMS): add test-completion.

	* gal/e-text/Makefile.am: remove e-completion-test from the build
	here, moving it to ../../tests.

	* gal/e-text/e-completion.c (e_completion_class_init): we've
	removed the restart, cancel, clear, and lost signals.  Also, we've
	renamed some so it's easier to tell from the name which it is
	(virtual func or signal.)
	(e_completion_dispose): remove call to clear_search_stack, as we
	don't do auto-refinement anymore.
	(e_completion_clear): gone.
	(e_completion_push_search): gone.
	(e_completion_pop_search): gone.
	(e_completion_clear_search_stack): gone.
	(e_completion_refine_search): gone.
	(e_completion_unrefine_search): gone.
	(e_completion_begin_search): substantially clear this up, since we
	don't have the refinement stuff anymore.  Also, the call to
	request_completion is a virtual function call, not a signal.
	(e_completion_match_count): always return matches->len here, never
	match_count, which is gone (with the refinement stuff)
	(e_completion_foreach_match): remove the hit_count stuff.
	(e_completion_restart): gone.
	(e_completion_lost_match): gone.
	(e_completion_end_search): remove the sorting stuff from here (and
	the call to restart.)  the etable sorting stuff will have to take
	up the slack, but for now there's no reason to restart the search
	here.

	* gal/e-text/e-completion.h (struct _ECompletionClass): straighten
	out what's a virtual function and what's a signal, instead of
	using signals for both.  Also, remove the auto_refine stuff, as
	it's not used.

	* gal/e-text/e-completion-view.c (e_completion_view_size_request):
	make the damn drop down window bigger (100 pixels, or the
	requisition height, whichever is bigger.)
	(e_completion_view_disconnect): remove handling for signals that
	are gone.
	(restart_completion_cb): gone.
	(cancel_completion_cb): gone.
	(clear_completion_cb): gone.
	(lost_completion_cb): gone.
	(e_completion_view_construct): track new names of ECompletion
	signals.

	* gal/e-text/e-completion-view.h (struct _ECompletionView): remove
	restart_signal_id, cancel_signal_id, clear_signal_id, and
	lost_signal_id.
	
	* gal/e-text/e-entry.c (get_borders): new function, ala gtkentry.
	(canvas_size_request): use get_borders instead of computing it
	here.
	(e_entry_init): remove duplicate assignment of
	emulate_label_resize.
	(e_entry_show_popup): remove some ifdef'ed crap.
	(e_entry_start_completion): don't cancel the completion before
	starting again.  This keeps the popup from disappearing.

	* gal/e-text/e-completion-match.c (e_completion_match_construct):
	no more hit_count.

	* gal/e-text/e-completion-match.h (struct _ECompletionMatch):
	remove hit_count.

	* gal/e-text/e-completion-callbacks.[ch]: new class so we can use
	callbacks instead of subclassing.

2003-02-09  Abel Cheung  <maddog@linux.org.hk>

	* gal/widgets/e-categories.c (e_categories_class_init),
	* gal/e-table/e-tree-selection-model.c
	  (e_tree_selection_model_class_init): Unmarked strings not suitable
	  for translation (correct me if wrong).

2003-02-07  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_create_with_domain):
	replaced deprecated calls (gtk_menu_append ->
	gtk_menu_shell_append and gtk_radio_menu_item_group ->
	gtk_radio_menu_item_get_group)

2003-02-06  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-gui-utils.c
	(e_auto_kill_popup_menu_on_selection_done): Rename from
	e_auto_kill_popup_menu_on_hide().  Connect to "deactivate" instead
	of destroy.
	(e_popup_menu): Use e_auto_kill_popup_menu_on_selection_done()
	instead of e_auto_kill_popup_menu_on_hide().

2003-02-05  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.c
	(ecmld_class_init): Replace deprecated glade_gnome_init() with
	glade_init().

	* tests/test-define-views.c (main): Likewise.

2003-02-03  Mike Kestner  <mkestner@ximian.com>

	* configure.in : make GAL_LIBS use -lgal-2.0
	* gal/Makefile.am : remove extraneous GTK_LIBS reference
	* tests/test-tree-3.c : update to new etta API

2003-02-01  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/widgets/e-gui-utils.c (e_auto_kill_popup_menu_on_hide): Just
	use gtk_widget_destroy as the G_CALLBACK function.

2003-01-31  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/widgets/e-gui-utils.c (kill_popup_menu): gtk_widget_destroy
	the menu rather than g_object_unref'ing it.

2003-01-31  Daniel Yacob  <locales@geez.org>

	* configure.in: Added am (Amharic) to ALL_LINGUAS.

2003-01-28  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump

2003-01-27  Jody Goldberg <jody@gnome.org>

	* Release 1.99.1

2003-01-22  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-text/e-text.c (e_text_dispose): Renamed from
	e_text_destroy; chain up to ::dispose instead of ::destroy.
	(e_text_dispose, e_text_class_init): Override ::dispose, not
	::destroy.

2003-01-22  Radek Doulik  <rodo@ximian.com>

	* configure.in: require gnome print 2.2 for the other flags as
	well (thanks to aliakc@web.de for pointing this out)

2003-01-21  Radek Doulik  <rodo@ximian.com>

	* gal-2.0.pc.in (Cflags): require gnome print 2.2

	* configure.in (GAL_LIBS): require gnome print 2.2

2003-01-17  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (show_pango_rectangle): reverse part of the
	patch from 1/15.

2003-01-17  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_request): pass
	pango_context_get_language to pango_context_get_metrics.

2003-01-17  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-gui-utils.c (e_notice): Use gtk_dialog_run()
	instead of gtk_widget_show() so we return only after the user
	acknowledges the error.

2003-01-15  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c (show_pango_rectangle): apply the patch
	NotZed and I came up with to fix the height of the evolution
	composer entries.

2003-01-15  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-xml-utils.c (e_xml_save_file): Back to the land of
	the living we shall go.

2003-01-15  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-completion-view.c (begin_completion_cb): add call
	to e_table_model_pre_change here to reduce spew.
	(cancel_completion_cb): same.
	(completion_cb): same.
	(end_completion_cb): same.
	(clear_completion_cb): same.
	(lost_completion_cb): same.

2003-01-14  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_request): use PangoFontMetrics
	here instead of using the ascent/descent of the GtkStyle's font.

2003-01-14  Dan Winship  <danw@ximian.com>

	* configure.in: define GNOME_EXPLICIT_TRANSLATION_DOMAIN to be the
	same as GETTEXT_PACKAGE, and include a description of each.

	* acconfig.h: kill this now so auto* will stop yelling about how
	old-school we are.

2003-01-09  Mike Kestner  <mkestner@ximian.com>

	* tests/Makefile.am: LDADD the 2.0 lib, not 2-0

2003-01-08  Mike Kestner  <mkestner@ximian.com>

	* configure.in: changes to versioning. PACKAGE is gal, not gal2-0.
	package versions are now 1.99.x.  Lib versioning starts over at 
	0.0.0 for libgal-2.0. Version the HTMLDIR.
	* art/Makefile.am: version the pixmaps install dir
	* gal/Makefile.am: s/libgal-2-0/libgal-2.0
	* gal/*/Makefile.am: install headers and data to gal-2.0 dirs
	* gal/a11y/Makefile.am: install .h, not .c

2003-01-08  Rodney Dawes  <dobey@ximian.com>

	* configure.in: Remove GNOME_PLATFORM_GNOME_2() macro call, unneeded
	
2002-12-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-categories-master-list.[ch]: GObject-ify this.

2002-12-15   Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added missing entries to ALL_LINGUAS
	(Dutch (nl) and Slovenian (sl))

2002-12-08  Chris Toshok  <toshok@ximian.com>

	* tests/test-text.c: lots of stuff, add 2 e-text widgets, 1
	readonly, the other writable (that uses the uri model..)
	
	* gal/e-text/e-text.[ch]: lots of pango changes.  we don't do
	*anything* with gdk/e fonts now.  everything is pango.  There are
	still some issues while editting but display should more or less
	work properly now, and without all the performance problems.

	* gal/e-text/e-completion-view.c (e_completion_view_expose_event):
	use gtk_widget_send_expose instead of gtk_widget_event so we don't
	get the annoying gtk warning.

	* gal/e-text/e-entry.c (e_entry_dispose): make sure both the gdk
	and gtk grabs are removed.
	(e_entry_class_init): fill_color_gdk is a boxed type, not pointer.

	* gal/e-text/e-text-model-uri.h (E_TYPE_TEXT_MODEL_URI): oops,
	this should be e_text_model_uri_get_type, not
	e_text_model_get_type.

2002-12-05  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-util.c (g_str_compare): Revert back to using just
	strcmp - this fixes bug #33933 but reopens bug #26355.
	(g_collate_compare): New function meant to address the sorting
	required by bug #26335.

2002-12-04  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-canvas-background.c (ecb_dispose): guard against
	multiple calls.

2002-12-03  Hans Petter Jansson  <hpj@ximian.com>

	* gal/widgets/e-canvas-background.c (ecb_destroy): Don't leak
	private structure.

2002-11-27  Not Zed  <NotZed@Ximian.com>

	* gal/widgets/e-gui-utils.c (e_notice): Changed to GtkMessageType
	instead of char * gnome type.  Also changed to run async, but
	remain modal.
	(e_notice): use close button too ?  i wonder what style guide
	says.

2002-11-30  Chris Toshok  <toshok@ximian.com>

	* configure.in (AC_OUTPUT): add a11y stuff.

	* gal/Makefile.am (ui_subdirs): same.

2002-11-29  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.c: rework this from the gal-2 branch, clahey's
	patch, and the stuff i'd done since.  it's working *MUCH* better
	now.

2002-11-26  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-categories-master-list-option-menu.c
	(ecmlom_remove_ecml): move things around a bit.
	(ecmlom_dispose): guard against multiple calls.

2002-11-20  Chris Toshok  <toshok@ximian.com>

	* tests/Makefile.am (noinst_PROGRAMS): add test-text.c

	* tests/test-text.c: new test, just create an e-entry so i can
	debug e-text without bringing up evolution.

2002-11-19  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-text.[ch]: commit clahey's original pango work.

2002-11-18  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_set_property): column_width =
	double.
	(e_reflow_realize): no need to cast to double, column_width is
	already a double.

2002-11-18  Not Zed  <NotZed@Ximian.com>

	* gal/widgets/e-gui-utils.c (e_notice): we need to destroy the
	dialog after we've run it, because run doesn't do it for us like
	gnome-dialog did.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-gui-utils.c (e_notice): convert this to wrap
	around GtkMessageDialog.

	* gal/widgets/e-categories-master-list-dialog.c (dialog_response):
	gnome_dialog_close -> gtk_widget_destroy.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_class_init): fix c&p typo.

	* gal/widgets/e-categories-master-list-dialog.c: switch to
	GtkDialogism's.
	
	* gal/widgets/gal-categories.[ch]: same.

	* gal/widgets/e-categories-master-list-dialog.glade: libglade-convert.

	* gal/widgets/e-categories.glade: same.
	
	* gal/util/e-text-event-processor.[ch]: subclass this from
	GObject.

	* gal/util/e-text-event-processor-emacs-like.[ch]: clean up the
	gtk cruft a bit.
	
	* gal/e-text/e-text.c (_get_tep): remove the _sink call.
	(e_text_init): same.

	* gal/e-text/e-text-model.[ch]: subclass this from GObject instead
	of GtkObject.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_class_init): fix c&p typo.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* configure.in: have to bump to 0.0.9.99 because of the
	e_table_header_compute_height change.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* tests/test-define-views.c: make sure this still works.

	* tests/test-table-1.c: make sure this still works.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-completion-test.c: Lots of GObject work.

	* gal/e-text/e-completion-view.[ch]: same.

	* gal/e-text/e-completion.[ch]: same.

	* gal/e-text/e-entry.[ch]: same.

	* gal/e-text/e-table-text-model.[ch]: same.

	* gal/e-text/e-text-model-uri.[ch]: same.

	* gal/e-text/e-text-model.[ch]: same.

	* gal/e-text/e-text-test.c: same.

	* gal/e-text/e-text.[ch]: same.

2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/color-group.c: lots of GObject work.

	* gal/widgets/color-palette.[ch]: same.

	* gal/widgets/e-canvas-backgruond.[ch]: same.

	* gal/widgets/e-canvas-vbox.[ch]: same.

	* gal/widgets/e-canvas.[ch]: same.

	* e-categories-master-list-array.[ch]: same.

	* e-categories-master-list-combo.[ch]: same.
	
	* e-categories-master-list-dialog-model.[ch]: same.
	
	* e-categories-master-list-dialog.[ch]: same.

	* e-categories-master-list-option-menu.[ch]: same.

	* e-categories-master-list.[ch]: same.

	* e-categories.[ch]: same.

	* e-file-selection.[ch]: same.

	* e-gui-utils.c: same.

	* e-hscrollbar.[ch]: same.

	* e-option-menu.[ch]: same.

	* e-popup-menu.[ch]: same.

	* e-printable.[ch]: same.

	* e-reflow-sorted.[ch]: same.

	* e-reflow.[ch]: same.

	* e-scroll-frame.[ch]: same.

	* e-vscrollbar.[ch]: same.

	* gtk-combo-box.[ch]: same.

	* gtk-combo-stack.[ch]: same.

	* gtk-combo-text.[ch]: same.

	* test-e-font.c: same.

	* widget-color-combo.[ch]: same.

	* widget-pixmap-combo.[ch]: same.
	
2002-11-16  Chris Toshok  <toshok@ximian.com>

	* gal/util/e-marshal.list: add lots of marshallers (most, if not
	all, for etable).

	* gal/util/e-text-event-processor-emacs-like.[ch]: lotsa GObject work.

	* gal/util/e-text-event-processor.[ch]: lotsa GObject work.

	* gal/util/e-util.c: same.

	* gal/e-paned/e-hpaned.[ch]: lotsa GObject work.

	* gal/e-paned/e-paned.[ch]: same.

	* gal/e-paned/e-vpaned.[ch]: same.

2002-11-15  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-selection-model-array.c (esma_dispose):
	g_object_unref() instead of gtk_object_unref().

2002-11-14  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-selection-model-array.c: deal with
	EBitArray/ESorter being a GObject now.

	* gal/widgets/e-selection-model-simple.c: same.
	
	* gal/util/e-bit-array.[ch]: this derives from GObject now.

	* gal/util/e-sorter.[ch]: same.

	* gal/util/e-sorter-array.[ch]: same.

2002-11-14  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-selection-model.[ch]: this derives from GObject now.

	* gal/widgets/e-selection-model-simple.[ch]: same.

	* gal/widgets/e-selection-model-array.[ch]: same.

	* gal/widgets/e-reflow-model.[ch]: same.

	* gal/widgets/e-reflow.c: fix all references to EReflowModel such
	that it's a GObject, not a GtkObject.

2002-11-13  Chris Toshok  <toshok@ximian.com>

	* gal/util/e-marshal.list: add more marshallers for e-table.

2002-11-11  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_destroy): only
	clear choices if cv->choices != NULL.
	(e_completion_view_disconnect): zero out cancel_signal_id.

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/color-palette.c: Replace gtk_object_(un)?ref() with
	g_object_(un)?ref().
	* gal/widgets/e-canvas-utils.c: Likewise.
	* gal/widgets/e-canvas.c: Likewise.
	* gal/widgets/e-categories-master-list-combo.c: Likewise.
	* gal/widgets/e-categories-master-list-dialog-model.c: Likewise.
	* gal/widgets/e-categories-master-list-dialog.c: Likewise.
	* gal/widgets/e-categories-master-list-option-menu.c: Likewise.
	* gal/widgets/e-categories.c: Likewise.
	* gal/widgets/e-gui-utils.c: Likewise.
	* gal/widgets/e-popup-menu.c: Likewise.
	* gal/widgets/e-reflow-sorted.c: Likewise.
	* gal/widgets/e-reflow.c: Likewise.
	* gal/widgets/e-selection-model.c: Likewise.
	* gal/widgets/gtk-combo-box.c: Likewise.
	* gal/widgets/widget-pixmap-combo.c: Likewise.

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-table/e-cell-popup.c: Replace gtk_object_(un)?ref() with
	g_object_(un)?ref().
	* gal/e-table/e-cell-text.c: Likewise.
	* gal/e-table/e-cell-tree.c: Likewise.
	* gal/e-table/e-cell-vbox.c: Likewise.
	* gal/e-table/e-table-click-to-add.c: Likewise.
	* gal/e-table/e-table-config-field.c: Likewise.
	* gal/e-table/e-table-field-chooser-dialog.c: Likewise.
	* gal/e-table/e-table-field-chooser-item.c: Likewise.
	* gal/e-table/e-table-field-chooser.c: Likewise.
	* gal/e-table/e-table-group-container.c: Likewise.
	* gal/e-table/e-table-item.c: Likewise.
	* gal/e-table/e-table-without.c: Likewise.

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-option-menu.c (item_activated_cb): Do not emit
	"changed".
	(e_option_menu_class_init): Do not set up the "changed" signal.

	* gal/widgets/e-option-menu.h: Removed signal "changed" [the GTK
	2.0 GtkOptionMenu already has that].

2002-11-08  Jody Goldberg <jody@gnome.org>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_construct) : be
	consistent with libgnomeui and use GTK_ICON_SIZE_LARGE_TOOLBAR.

2002-11-07  Chris Toshok  <toshok@ximian.com>

	* gal/util/Makefile.am (libgalinclude_HEADERS): Install e-iconv.h.

2002-11-06  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_class_init): remove duplicate
	g_signal_new for column_width_changed.

2002-11-05  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bump version to gal2-0.0.8.99

2002-11-01  Ettore Perazzoli  <ettore@ximian.com>

	* gal/util/e-util.h (E_MAKE_X_TYPE): Update for libbonobo 2.0.

2002-10-29  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bump version to 0.21.0.99

2002-10-26  Jody Goldberg <jody@gnome.org>

	* configure.in : post releaese version bump

2002-10-26  Jody Goldberg <jody@gnome.org>

	* Release 2.0.0.7

2002-10-25  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-file-selection.c (e_file_selection_get_filenames):
	Don't prepend the cwd to absolute paths.

2002-10-24  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_normalize_punctuation): helper
	fuction to do a (custom) normalization of unicode chars.
	(e_font_to_native) use e_font_normalize_punctuation to convert
	punctuation that is not in the current charset.

2002-10-22  Chris Toshok  <toshok@ximian.com>

	* configure.in: update to gal 0.20.99.99

2002-10-21  Morten Welinder  <terra@diku.dk>

	* gal/widgets/gtk-combo-box.c (gtk_combo_box_destroy): Ditto.
	(gtk_combo_box_class_init): Ditto.

	* gal/widgets/color-palette.c (color_palette_destroy): New
	function, split from _finalize.
	(color_palette_class_init): Connect it.

	* gal/widgets/widget-color-combo.c (color_combo_destroy): New
	function; still empty.

2002-10-20  Chris Toshok  <toshok@ximian.com>

	[ Fixes evolution bug #26355 ]
	* gal/util/e-util.c (g_str_compare): use g_utf8_collate here
	instead of strcmp.

	* gal/e-text/Makefile.am (e_completion_test_LDADD): reorder so
	that util comes before unicode.

2002-10-16  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_string_sized): Don't
	include the byte reserved for the nul in the outleft size.
	(e_utf8_from_iconv_string_sized): Same.
	(e_utf8_to_iconv_string_sized): Here too, but also make sure we
	pad the end of the resulting string with enough nul bytes (4) so
	that even multi-byte charsets are terminated correctly.
	(e_utf8_to_gtk_string_sized): Again here.

2002-10-15  Mike Kestner  <mkestner@ximian.com>

	* configure.in : remove dup Makefile from AC_OUTPUT

2002-10-07  Mike Kestner  <mkestner@ximian.com>

	* configure.in : bump to version 0.20.1

2002-09-26  Radek Doulik  <rodo@ximian.com>

	* gal/util/e-iconv.c (C_g_strdown): new helper function, g_strdown
	with forced C locale
	(e_iconv_init): use C_g_strdown
	(e_iconv_charset_name): ditto

2002-09-25  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-unicode.c: add the gtk2 keypad entries (resync
	with gdk).

	* gal/widgets/e-font.c (e_font_to_native): rework again to remove
	the need for converting nbsp ahead of time.

2002-09-23  Peteris Krisjanis <peteris.krisjanis@os.lv>
	
	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-09-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/widgets/e-font.c (set_nbsp_zero_width_flag): Updated to the
	slightly changed e_font_to_native() API.
	(e_font_draw_utf8_text): Same.
	(e_font_utf8_text_width): Here too.
	(e_font_to_native): Rewritten from scratch.

2002-09-23  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-option-menu.c (item_destroyed_cb): new function,
	free the cb_struct.
	(e_option_menu_set_strings_from_array): hook up the destroy signal
	to item_destroyed_cb.

2002-09-19  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_draw_utf8_text): set the pointer
	not the length to allocation.

2002-09-19  Dan Winship  <danw@ximian.com>

	* gal/util/e-iconv.c: Make locale_charset a char *, not
	const char *. Kills a warning in the !HAVE_CODESET case.
	(e_iconv_init): No longer need to cast locale_charset to (char *)
	while mangling it in the HAVE_CODESET case.

	* gal/util/e-xml-utils.c: #include <stdlib.h> for free()

	* gal/widgets/e-categories-master-list-array.c: Likewise

2002-09-18  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_draw_utf8_text): limit alloca
	length to a E_ALLOCA_MAX.
	(e_font_utf8_text_width): limit alloca length to E_ALLOCA_MAX.

2002-09-17  Mike Kestner  <mkestner@ximian.com>

	* gal/util/e-iconv.c : apply patch for 27447 from Matt Avery for
	a bug in the solaris iconv implementation.

2002-09-16  Morten Welinder  <terra@diku.dk>

	* gal/widgets/widget-color-combo.c (color_combo_construct): Plug
	leak.

2002-09-13  Jody Goldberg <jody@gnome.org>

	* Release 2.0.0.6

2002-09-10  JP Rosevear  <jpr@ximian.com>

	* gal/e-text/e-text.c (line_splitter): take a clip_height and use
	it to set the maximum number of lines if necessary
	(split_into_lines): pass clip_height arg

	Fixes #13901
	

2002-09-02   Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) to ALL_LINGUAS

2002-08-29  Mike Kestner  <mkestner@ximian.com>

	* gal/widgets/e-selection-model-array.c : kill a return that caused
	selection ranges to not emit selection_changed if the end index only
	changed by 1.

2002-08-29  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump

2002-08-14  Chema Celorio  <chema@ximian.com>

	* configure.in: Fix the check for strftime, scan for "l" and "k"
	not "%l" and "%k"

2002-08-26  Gregory Leblanc  <gleblanc@linuxweasel.com>

	* gal/e-text/Makefile.am: removed \ before new line to make
	automake 1.6 happy

2002-08-14  Chema Celorio  <chema@ximian.com>

	* configure.in: Fix the check for strftime, scan for "l" and "k"
	not "%l" and "%k"

2002-08-07  Peter Williams  <peterw@ximian.com>

	* configure.in (CFLAGS): Add -D_REENTRANT cause we need errno
	to behave reliably.

2002-08-07  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-xml-utils.c (e_xml_save_file): Do slightly better
	error handling for close() and loop until it closes successfully.

2002-08-06  Jody Goldberg <jody@gnome.org>

	* Release 2.0.0.5

2002-08-06  Jody Goldberg <jody@gnome.org>

	* gal/widgets/e-cursors.h (#endif) : Add xterm cursor.

2002-08-06  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-xml-utils.c (e_xml_save_file): Changed to handle
	saving to a temp file first, this allows us to remove a lot of
	duplicate code from everywhere.

2002-08-06  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped version to 0.19.99.18

	* gal/util/e-xml-utils.c (e_xml_save_file): New convenience
	function to save an xmlDocPtr. Replaces xmlSaveFile because
	xmlSaveFile isn't dependable.

2002-06-21  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font_gtkhtml): new
	simplified version of e_font_from_gdk_font for GtkHTML library

2002-06-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.17.

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h
	(e_reflow_selection_event_real): Made this function handle
	GDK_BUTTON_RELEASE.  Added a maybe_in_drag variable that the API
	user can set to 0 to indicate that a drag has occurred.

2002-06-05  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Added debugging printfs.
	(e_text_request_paste): Fixed the order of setting
	last_type_request before calling gtk_selection_convert due to a
	reentrancy bug.

2002-06-04  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.16.

2002-06-03  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_style_set):
	Reflow and redraw when the style gets set.

2002-05-29  Jody Goldberg <jody@gnome.org>

	* Release 2.0.0.4

2002-05-29  Jody Goldberg <jody@gnome.org>

	* Makefile.am (CLEANFILES) : include intltool

2002-05-28  Christopher James Lahey  <clahey@ximian.com>

	* Merged up to GAL_2_ANCHOR_MERGE2.

2002-05-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (grab_cancelled_check): If grabbed_item
	is NULL, cancel the timeout.

2002-05-09  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Switch from gnome_canvas_item_grab to
	e_canvas_item_grab.

	* gal/widgets/e-canvas.c, gal/widgets/e-canvas.h
	(e_canvas_item_grab, e_canvas_item_ungrab): Added these functions.

2002-05-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (imagesdir): Change this directory to
	include the $(VERSION).

	* gal/widgets/e-reflow.c (set_empty): Don't switch from utf8 to
	widget encoding, since EText takes utf8.

2002-05-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): Make the style here match the
	proper widget style to emulate a label or an entry.

2002-05-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h
	(e_popup_menu_create_with_domain): Added this function that lets
	you specify the translation domain.

2002-05-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_filename_make_safe):
	Documented this function as not necessarily stripping shell
	metacharacters.  Fixes Ximian bug #21223.

2002-05-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c (simple_spec),
	gal/widgets/e-categories-master-list-dialog.c (SPEC),
	gal/widgets/e-categories.c (INITIAL_SPEC): Set the gettext-domain
	here.

	* gal/util/e-i18n.h (E_I18N_DOMAIN): #define as makes sense in the
	different cases.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Added a sed job on po/Makefile.in.in here.

	* gal/util/e-i18n.h: Made this use
	GNOME_EXPLICIT_TRANSLATION_DOMAIN if it's set.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_format_number_float): Changed this to
	handle large numbers.
	(e_create_directory): Changed this to be a wrapper around
	e_mkdir_hier.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed LDFLAGS to LIBS for tests here.  Bumped
	the version number to 0.19.99.15.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.h (E_ASCII_DTOSTR_BUF_SIZE): Use DBL_DIG to
	compute how much buffer space to use here.

	* gal/util/e-xml-utils.c (e_xml_set_double_prop_by_name): Use
	DBL_DIG here to decide how many digits to print.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c: Include alloca.h here if it's
	necessary.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-background.c (ecb_init): Initialize these
	struct members individually instead of as a struct.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* acconfig.h, configure.in: Handle GAL_HAVE_ALLOCA_H properly in
	autoconf > 2.5.0 as well as in low autoconfs.

2002-04-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-paned.c, gal/e-text/e-entry.c,
	gal/util/e-bit-array.c, gal/util/e-sorter-array.c,
	gal/util/e-sorter.c, gal/util/e-text-event-processor.c,
	gal/widgets/color-group.c, gal/widgets/color-palette.c,
	gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas.c,
	gal/widgets/e-canvas.h,
	gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories.c, gal/widgets/e-reflow-model.c,
	gal/widgets/e-reflow.c, gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h,
	gal/widgets/gtk-combo-box.c, gal/widgets/gtk-combo-stack.c,
	gal/widgets/widget-color-combo.c,
	gal/widgets/widget-pixmap-combo.c: Ansification patch from danw.

2002-04-24  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-option-menu.c
	(e_categories_master_list_option_menu_get_category): Don't return
	NULL here or segfault if ecmlom->priv->categories is NULL.

	* gal/widgets/e-option-menu.c (e_option_menu_init): The initial
	value of an option menu is the first element, not no element
	selected.  Changed the default value here from -1 to 0.

2002-04-15  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=67220
	http://bugzilla.gnome.org/show_bug.cgi?id=75227
	* gal/widgets/gtk-combo-stack.c (list_select_cb) : remove silly code.
	(gtk_combo_stack_push_item) : ditto.
	(cb_button_release_event) : fix signature, and always end the grab.

2002-04-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.14.

	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h
	(e_popup_menu_copy_1, e_popup_menu_free_1, e_popup_menu_copy,
	e_popup_menu_free): Added these functions

2002-04-18  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (EXTRA_DIST): Removed iconv-detect.h.

	* configure.in: Added "-I$(srcdir)" to CFLAGS here before
	compiling iconv-detect.c.

	* gal/util/Makefile.am: Added "-I$(top_builddir)" to INCLUDES
	here.

2002-04-18  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_create): handle toggle
	and radio items
	(make_item): the item is now passed in from above and not returned

2002-04-17  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version number to 0.19.99.13.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am: Added
	gal/widgets/e-categories-master-list-option-menu.c and
	gal/widgets/e-categories-master-list-option-menu.h.

	* gal/widgets/e-categories-master-list-option-menu.c,
	gal/widgets/e-categories-master-list-option-menu.h: New class to
	pick one category from the master list as an option menu instead
	of as a combo.

	* configure.in: Bumped version number to 0.19.99.12.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.11.
	
	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h: Changed
	this to be API compatible with gal 0.19.  Added a bunch of pound
	defines and added API for toggle and radio menu items.

	* gal/widgets/e-categories.c: Updated this to match the new
	EPopupMenu.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (emit_event): If there is a grabbed_item,
	send all events to it.

2002-04-10  Ettore Perazzoli  <ettore@ximian.com>

	* gal/util/e-xml-utils.c: #include <parser.h> and <xmlmemory.h>
	instead of <gnome-xml/parser.h> and <gnome-xml/xmlmemory.h>.  In
	fact, the latter is incompatible with what `gnome-config --cflags
	xml' is assuming, and breaks in the case where gnome-xml is not
	installed in /usr/local.

2002-04-04  JP Rosevear  <jpr@ximian.com>

	* configure.in: one piece should not have gone it

2002-04-04  JP Rosevear  <jpr@ximian.com>
	
	* Makefile.am: dist the iconv-detect files

2002-04-04  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-text/e-entry.c (e_entry_show_popup): Don't show the popup
	if the entry->item doesn't have focus.

2002-04-02  Chris Toshok  <toshok@ximian.com>

	* configure.in: restore the CFLAGS/LDFLAGS after we run
	iconv-detect since we need -liconv.  Fixes the build on freebsd.

2002-03-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-file-selection.c (selection_changed): Set text
	based on the base GtkFileSelection entry if the selection is
	NULL.  Compute the filename for the no selection case using the
	visible entry.

2002-04-01  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-file-selection.c (e_file_selection_get_filenames):
	strdup the result of gtk_file_selection_get_filename. Free
	filesel_path when done.

2002-03-29  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Use iconv-detect.c to generate a iconv-detect.h
	file containing information about the preferred charset formats to
	use with the system iconv.

	* iconv-detect.c: New program to detect the preferred charset
	formats for use with the system iconv.

	* gal/util/e-iconv.c (e_iconv_charset_name): Update to use macros
	defined in iconv-detect which is created at configure time.

2002-03-28  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.10.

2002-03-28  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-file-selection.c
	(libwidgetsinclude_HEADERS): Added e-file-selection.h

	* gal/widgets/e-file-selection.c, gal/widgets/e-file-selection.h:
	New class to make multiple selection possible in Gtk file
	selection.

2002-03-26  Chris Toshok  <toshok@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): oops, add e-text.

	* gal/e-text/Makefile.am: remove comment about adding .lo's to the
	parent directory Makefile.am.

2002-03-26  Chris Toshok  <toshok@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): just list the .la's instead
	of all the .lo's, and let libtool worry about how to link things
	together.  makes the .so link line *much* smaller.

	* gal/util/Makefile.am: remove comment about adding .lo's to the
	parent directory Makefile.am.

	* gal/unicode/Makefile.am: same.

	* gal/widgets/Makefile.am: same.

	* gal/e-paned/Makefile.am: same.

2002-03-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-option-menu.lo.

	* gal/util/e-util.c, gal/util/e-util.h (e_strdupv): Copied this
	function from glib2.
	(GET_STRING_ARRAY_FROM_ELLIPSIS,
	GET_DUPLICATED_STRING_ARRAY_FROM_ELLIPSIS): Added these macros to
	automate getting a NULL terminated array off of the stack.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-option-menu.c.
	(libwidgetsinclude_HEADERS): Added e-option-menu.h.

	* gal/widgets/e-canvas.c (e_canvas_class_init): Reformatted this
	function.

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h
	(e_glade_xml_connect_widget, e_glade_xml_set_sensitive): Two new
	functions to automate pulling a widget from a GladeXML and either
	connecting a signal or setting the sensitivity.

	* gal/widgets/e-option-menu.c, gal/widgets/e-option-menu.h: New
	class to simplify the interface to GtkOptionMenu.

2002-03-15  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/gal/widgets/e-popup-menu.c: Allow for per-item closures and
	also instead of taking a const char *pixname, take a GtkWidget
	*pixmap instead.

	* gal/widgets/e-categories.c: Update to sync up with changes made
	to the EPopupMenu Api.

2002-03-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_style_set): Check for a
	style_set signal on all the contained GnomeCanvasItems.

2002-03-13  Dan Winship  <danw@ximian.com>

	* configure.in (LDFLAGS): Remove a bit that toshok didn't mean to
	commit.

2002-03-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h
	(e_marshal_BOOL__STRING_INT): Replaced e_marshal_BOOL__STRING with
	this since the function it was used for has been modified.

2002-03-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.19.99.9.

2002-03-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-table-search.lo.

	* gal/util/e-util.c, gal/util/e-util.h (e_marshal_BOOL__STRING):
	Added this marshal function.

2002-03-11  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.19.99.8.

2002-03-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-cell-vbox.lo.

2002-03-09  Chris Toshok  <toshok@ximian.com>

	* configure.in: Bumped version number to 0.19.99.7

	* gal/widgets/e-unicode.c (e_utf8_strstrcasedecomp): we want to
	return o from here on success, not p, since p is incremented one
	unicode character past the point where the substring begins.
	(e_utf8_strstrcase): same.

2002-02-28  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): If tab is hit and the
	cursor is still in the entry, move down into the entry otherwise
	unbrowse.

2002-02-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table-memory-store.lo.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories.c (table_click): Toggle whether this
	row is selected when it's clicked on.
	(e_categories_construct): Set the title of this dialog.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.6.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h
	(column_width_changed): New signal for when the width of the
	column changes.

	* gal/util/e-util.c, gal/util/e-util.h (e_marshal_NONE__DOUBLE):
	New marshaller.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.5.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	menus/gal-view-instance-save-as-dialog.lo.

	* gal/e-text/e-text.c (next_word): Contains refactored code from
	the E_TEP_FORWARD_WORD case of e_text_command.
	(e_text_command): Implemented E_TEP_CAPS.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c: Emit E_TEP_CAPS
	for the right values for M-l, M-c, and M-u.

	* gal/util/e-text-event-processor-types.h
	(ETextEventProcessorCommandAction): New action E_TEP_CAPS.
	(ETextEventProcessorCaps): New enum giving values for E_TEP_CAPS
	action.

Fri Apr 26 02:22:37 2002  Jonathan Blandford  <jrb@gnome.org>

	* gal/e-text/e-entry.c: #include <gtk/gtktypebuiltins.h>
	* gal/e-text/e-text.c: ditto
	* gal/widgets/e-scroll-frame.c: ditto

2002-05-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (grab_cancelled_check): If grabbed_item
	is NULL, cancel the timeout.

2002-05-09  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Switch from gnome_canvas_item_grab to
	e_canvas_item_grab.

	* gal/widgets/e-canvas.c, gal/widgets/e-canvas.h
	(e_canvas_item_grab, e_canvas_item_ungrab): Added these functions.

2002-05-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (imagesdir): Change this directory to
	include the $(VERSION).

	* gal/widgets/e-reflow.c (set_empty): Don't switch from utf8 to
	widget encoding, since EText takes utf8.

2002-05-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): Make the style here match the
	proper widget style to emulate a label or an entry.

2002-05-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h
	(e_popup_menu_create_with_domain): Added this function that lets
	you specify the translation domain.

2002-05-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_filename_make_safe):
	Documented this function as not necessarily stripping shell
	metacharacters.  Fixes Ximian bug #21223.

2002-05-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c (simple_spec),
	gal/widgets/e-categories-master-list-dialog.c (SPEC),
	gal/widgets/e-categories.c (INITIAL_SPEC): Set the gettext-domain
	here.

	* gal/util/e-i18n.h (E_I18N_DOMAIN): #define as makes sense in the
	different cases.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Added a sed job on po/Makefile.in.in here.

	* gal/util/e-i18n.h: Made this use
	GNOME_EXPLICIT_TRANSLATION_DOMAIN if it's set.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_format_number_float): Changed this to
	handle large numbers.
	(e_create_directory): Changed this to be a wrapper around
	e_mkdir_hier.

2002-04-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed LDFLAGS to LIBS for tests here.  Bumped
	the version number to 0.19.99.15.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.h (E_ASCII_DTOSTR_BUF_SIZE): Use DBL_DIG to
	compute how much buffer space to use here.

	* gal/util/e-xml-utils.c (e_xml_set_double_prop_by_name): Use
	DBL_DIG here to decide how many digits to print.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c: Include alloca.h here if it's
	necessary.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-background.c (ecb_init): Initialize these
	struct members individually instead of as a struct.

2002-04-26  Christopher James Lahey  <clahey@ximian.com>

	* acconfig.h, configure.in: Handle GAL_HAVE_ALLOCA_H properly in
	autoconf > 2.5.0 as well as in low autoconfs.

2002-04-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-paned.c, gal/e-text/e-entry.c,
	gal/util/e-bit-array.c, gal/util/e-sorter-array.c,
	gal/util/e-sorter.c, gal/util/e-text-event-processor.c,
	gal/widgets/color-group.c, gal/widgets/color-palette.c,
	gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas.c,
	gal/widgets/e-canvas.h,
	gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories.c, gal/widgets/e-reflow-model.c,
	gal/widgets/e-reflow.c, gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h,
	gal/widgets/gtk-combo-box.c, gal/widgets/gtk-combo-stack.c,
	gal/widgets/widget-color-combo.c,
	gal/widgets/widget-pixmap-combo.c: Ansification patch from danw.

2002-04-24  Zbigniew Chyla  <cyba@gnome.pl>

	i18n fixes

	* gal/Makefile.am (libgal_2_0_la_LIBADD):
	Removed util/e-unicode-i18n.lo.

	* configure.in: Fixed GETTEXT_PACKAGE.

	* gal/e-table/e-table-group-container.c
	(compute_text): s/U_/_/
	Don't include "e-unicode-i18n.h".

	* gal/util/Makefile.am
	(libutil_la_SOURCES): Removed e-unicode-i18n.[ch],
	(libgalinclude_HEADERS): Moved e-i18n.h to libutil_la_SOURCES,
	(INCLUDES): Define GNOMELOCALEDIR.

	* gal/util/e-util.c:
	Added e_gettext().

	* gal/util/e-i18n.h:
	Removed #defines cut&pasted from gnome-i18n.h/bonobo-i18n.h,
	included <bonobo/bonobo-i18n.h> and defined _() macro as
	e_gettext() function call.

	* gal/util/e-unicode-i18n.[ch]: Removed.

	* gal/widgets/e-categories-master-list-array.c (ecmla_default):
	Don't use e_utf8_from_locale_string.

	* gal/e-table/e-cell-text.c,
	gal/e-table/e-table-config-field.c,
	gal/e-table/e-table-item.c,
	gal/e-table/e-tree.c,
	gal/e-text/e-entry-test.c,
	gal/widgets/e-categories.c,
	gal/widgets/e-popup-menu.c,
	gal/widgets/test-color.c:
	Fixed includes.

2002-04-15  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump

2002-04-15  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=67220
	http://bugzilla.gnome.org/show_bug.cgi?id=75227
	* gal/widgets/gtk-combo-stack.c (list_select_cb) : remove silly code.
	(gtk_combo_stack_push_item) : ditto.
	(cb_button_release_event) : fix signature, and always end the grab.


2002-04-24  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-option-menu.c
	(e_categories_master_list_option_menu_get_category): Don't return
	NULL here or segfault if ecmlom->priv->categories is NULL.

	* gal/widgets/e-option-menu.c (e_option_menu_init): The initial
	value of an option menu is the first element, not no element
	selected.  Changed the default value here from -1 to 0.

2002-04-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.14.

	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h
	(e_popup_menu_copy_1, e_popup_menu_free_1, e_popup_menu_copy,
	e_popup_menu_free): Added these functions

2002-04-18  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_create): handle toggle
	and radio items
	(make_item): the item is now passed in from above and not returned

2002-04-18  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (EXTRA_DIST): Removed iconv-detect.h.

	* configure.in: Added "-I$(srcdir)" to CFLAGS here before
	compiling iconv-detect.c.

	* gal/util/Makefile.am: Added "-I$(top_builddir)" to INCLUDES
	here.

2002-04-17  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version number to 0.19.99.13.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am: Added
	gal/widgets/e-categories-master-list-option-menu.c and
	gal/widgets/e-categories-master-list-option-menu.h.

	* gal/widgets/e-categories-master-list-option-menu.c,
	gal/widgets/e-categories-master-list-option-menu.h: New class to
	pick one category from the master list as an option menu instead
	of as a combo.

	* configure.in: Bumped version number to 0.19.99.12.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.11.
	
	* gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h: Changed
	this to be API compatible with gal 0.19.  Added a bunch of pound
	defines and added API for toggle and radio menu items.

	* gal/widgets/e-categories.c: Updated this to match the new
	EPopupMenu.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (emit_event): If there is a grabbed_item,
	send all events to it.

2002-04-15  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=67220
	http://bugzilla.gnome.org/show_bug.cgi?id=75227
	* gal/widgets/gtk-combo-stack.c (list_select_cb) : remove silly code.
	(gtk_combo_stack_push_item) : ditto.
	(cb_button_release_event) : fix signature, and always end the grab.

2002-04-10  Ettore Perazzoli  <ettore@ximian.com>

	* gal/util/e-xml-utils.c: #include <parser.h> and <xmlmemory.h>
	instead of <gnome-xml/parser.h> and <gnome-xml/xmlmemory.h>.  In
	fact, the latter is incompatible with what `gnome-config --cflags
	xml' is assuming, and breaks in the case where gnome-xml is not
	installed in /usr/local.

2002-04-04  JP Rosevear  <jpr@ximian.com>

	* configure.in: one piece should not have gone it

2002-04-04  JP Rosevear  <jpr@ximian.com>
	
	* Makefile.am: dist the iconv-detect files

2002-04-04  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-text/e-entry.c (e_entry_show_popup): Don't show the popup
	if the entry->item doesn't have focus.

2002-04-02  Chris Toshok  <toshok@ximian.com>

	* configure.in: restore the CFLAGS/LDFLAGS after we run
	iconv-detect since we need -liconv.  Fixes the build on freebsd.

2002-04-01  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-file-selection.c (e_file_selection_get_filenames):
	strdup the result of gtk_file_selection_get_filename. Free
	filesel_path when done.

2002-03-29  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Use iconv-detect.c to generate a iconv-detect.h
	file containing information about the preferred charset formats to
	use with the system iconv.

	* iconv-detect.c: New program to detect the preferred charset
	formats for use with the system iconv.

	* gal/util/e-iconv.c (e_iconv_charset_name): Update to use macros
	defined in iconv-detect which is created at configure time.

2002-03-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-file-selection.c (selection_changed): Set text
	based on the base GtkFileSelection entry if the selection is
	NULL.  Compute the filename for the no selection case using the
	visible entry.

2002-03-28  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.10.

2002-03-28  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-file-selection.c
	(libwidgetsinclude_HEADERS): Added e-file-selection.h

	* gal/widgets/e-file-selection.c, gal/widgets/e-file-selection.h:
	New class to make multiple selection possible in Gtk file
	selection.

2002-03-26  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump.

2002-03-26  Jody Goldberg <jody@gnome.org>

	* Release 2.0.0.2

2002-03-26  Chris Toshok  <toshok@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): oops, add e-text.

	* gal/e-text/Makefile.am: remove comment about adding .lo's to the
	parent directory Makefile.am.

2002-03-26  Chris Toshok  <toshok@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): just list the .la's instead
	of all the .lo's, and let libtool worry about how to link things
	together.  makes the .so link line *much* smaller.

	* gal/util/Makefile.am: remove comment about adding .lo's to the
	parent directory Makefile.am.

	* gal/unicode/Makefile.am: same.

	* gal/widgets/Makefile.am: same.

	* gal/e-paned/Makefile.am: same.

2002-03-25  Morten Welinder  <terra@diku.dk>

	* gal/widgets/widget-color-combo.c (color_combo_construct): Plug
	leak.

2002-03-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-option-menu.lo.

	* gal/util/e-util.c, gal/util/e-util.h (e_strdupv): Copied this
	function from glib2.
	(GET_STRING_ARRAY_FROM_ELLIPSIS,
	GET_DUPLICATED_STRING_ARRAY_FROM_ELLIPSIS): Added these macros to
	automate getting a NULL terminated array off of the stack.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-option-menu.c.
	(libwidgetsinclude_HEADERS): Added e-option-menu.h.

	* gal/widgets/e-canvas.c (e_canvas_class_init): Reformatted this
	function.

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h
	(e_glade_xml_connect_widget, e_glade_xml_set_sensitive): Two new
	functions to automate pulling a widget from a GladeXML and either
	connecting a signal or setting the sensitivity.

	* gal/widgets/e-option-menu.c, gal/widgets/e-option-menu.h: New
	class to simplify the interface to GtkOptionMenu.

2002-03-21  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/color-palette.h: include
	libgnomecanvas/gnome-canvas.h

2002-03-16  Jon K Hellan  <hellan@acm.org>

	* gal/widgets/color-palette.c (color_palette_set_current_color):
	If color == NULL, set color to default.

	* gal/widgets/widget-color-combo.[ch]
	(color_combo_set_color_to_default): New.

	* gal/widgets/color-palette.[ch]
	(color_palette_set_color_to_default): New

2002-03-15  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/gal/widgets/e-popup-menu.c: Allow for per-item closures and
	also instead of taking a const char *pixname, take a GtkWidget
	*pixmap instead.

	* gal/widgets/e-categories.c: Update to sync up with changes made
	to the EPopupMenu Api.

2002-03-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_style_set): Check for a
	style_set signal on all the contained GnomeCanvasItems.

2002-03-15  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gal/widgets/widget-color-combo.[ch] (color_combo_box_set_preview_relief) :
	  new

2002-03-13  Dan Winship  <danw@ximian.com>

	* configure.in (LDFLAGS): Remove a bit that toshok didn't mean to
	commit.

2002-03-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h
	(e_marshal_BOOL__STRING_INT): Replaced e_marshal_BOOL__STRING with
	this since the function it was used for has been modified.

2002-03-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.19.99.9.

2002-03-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-table-search.lo.

	* gal/util/e-util.c, gal/util/e-util.h (e_marshal_BOOL__STRING):
	Added this marshal function.

2002-03-11  Jody Goldberg <jody@gnome.org>

	* gal/util/e-bit-array.c (e_bit_array_new) : hack ref/sink in here.
	  This should really be a GObject.

	* gal/e-table/e-table-specification.c
	(e_table_specification_load_from_node) : ref/sink the columns.

	* gal/e-table/e-table.c (et_real_construct) : ref/sink the
	  e_table_extras, and the sorter.
	(e_table_construct) : ref/sink the spec and the state.
	(et_destroy) : fix protection in the face of multiple calls.
	(e_table_init) : ref/sink the selection model.

	* configure.in : fix the so number.

2002-03-11  Jody Goldberg <jody@gnome.org>

	* gal/widgets/color-palette.c : change the signature of the 'changed'
	signal to include a flag indicating is_default, and rename the signal
	'color_changed' to make sure people notice the signature change.

	* gal/widgets/widget-color-combo.c : ditto.

	* gal/util/e-marshal.list : cleanup
	  add NONE:POINTER,BOOLEAN,BOOLEAN,BOOLEAN

2002-03-11  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.19.99.8.

2002-03-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-cell-vbox.lo.

2002-03-10  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump.

2002-03-10  Jody Goldberg <jody@gnome.org>

	* Release 2.0.1

2002-03-09  Chris Toshok  <toshok@ximian.com>

	* configure.in: Bumped version number to 0.19.99.7

	* gal/widgets/e-unicode.c (e_utf8_strstrcasedecomp): we want to
	return o from here on success, not p, since p is incremented one
	unicode character past the point where the substring begins.
	(e_utf8_strstrcase): same.

2002-02-28  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): If tab is hit and the
	cursor is still in the entry, move down into the entry otherwise
	unbrowse.

2002-02-27  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-pixmap-combo.c (image_from_data) : new function
	  to avoid leaking the pixbuf.

2002-02-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table-memory-store.lo.

2002-02-19  Jody Goldberg <jody@gnome.org>

	* gal/e-table/e-table-field-chooser-item.c (etfci_maybe_start_drag) :
	  take int not double.

2002-02-18  Jody Goldberg <jody@gnome.org>

	* configure.in : post snapshot bump.

2002-02-18  Gediminas Paulauskas <menesis@delfi.lt>

	* configure.in: remove GNOME_COMMON_INIT, GNOME_PLATFORM_GNOME_2

2002-02-17  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/e-text/e-text-model-test.c, e-text-test.c: Remove calls to
	deprecated functions gtk_widget_push|pop_visual().
	

2002-02-15  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-pixmap-combo.c (pixmap_table_setup) : sink the
	  tooltip.

	* gal/widgets/gtk-combo-text.c (gtk_combo_text_destroy) : destroy is
	  called twice.

2002-02-14  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-pixmap-combo.c (pixmap_combo_select_pixmap) : Use
	  GdkPixbuf directly.
	(pixmap_table_setup) : ditto.
	(pixmap_combo_construct) : ditto.

	* gal/widgets/test-color.c (main) : adjust test to handle the
	  signature change.

	* gal/widgets/widget-color-combo.c (color_combo_construct) : take a
	  GdkPixbuf.
	(color_combo_new) : ditto.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories.c (table_click): Toggle whether this
	row is selected when it's clicked on.
	(e_categories_construct): Set the title of this dialog.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.6.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h
	(column_width_changed): New signal for when the width of the
	column changes.

	* gal/util/e-util.c, gal/util/e-util.h (e_marshal_NONE__DOUBLE):
	New marshaller.

2002-02-10  Chema Celorio  <chema@celorio.com>

	* gal-2.0.pc.in (Requires): add libgnomeprint since we refernce it, otherwise all
	apps that use gal need to include "libgnomeprint-2.0" in their PKG_CHECK_MODULES
	in order to avoid unresolved symbols that we are introducing

2002-02-09  Jody Goldberg <jody@gnome.org>

	* gal/widgets/widget-color-combo.c (color_combo_construct) : set the
	  default button relief to none.
	* gal/widgets/gtk-combo-box.c (gtk_combo_box_init) : ditto.
	* gal/widgets/widget-pixmap-combo.c (pixmap_combo_construct) : ditto.
	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_construct) : ditto.

2002-02-09  Jody Goldberg <jody@gnome.org>

	* gal/util/e-marshal.list : s/BOOLEAN:POINTER/BOOLEAN:OBJECT/
	* gal/widgets/gtk-combo-box.c (gtk_combo_box_class_init) : Use a
	consistent marshaller and declartion.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.5.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	menus/gal-view-instance-save-as-dialog.lo.

	* gal/e-text/e-text.c (next_word): Contains refactored code from
	the E_TEP_FORWARD_WORD case of e_text_command.
	(e_text_command): Implemented E_TEP_CAPS.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c: Emit E_TEP_CAPS
	for the right values for M-l, M-c, and M-u.

	* gal/util/e-text-event-processor-types.h
	(ETextEventProcessorCommandAction): New action E_TEP_CAPS.
	(ETextEventProcessorCaps): New enum giving values for E_TEP_CAPS
	action.

2002-01-31  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added gal-view-instance.lo.

2002-01-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.4 for
	e-tree.h changes.

2002-01-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.3 for
	e-tree.h changes.

2002-01-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.19.99.2 for
	e-tree-model.h changes.

2002-01-30  Chris Toshok  <toshok@ximian.com>

	* gal/e-text/Makefile.am (e_completion_test_LDADD): fix link
	ordering so tests build on freebsd.

	* gal/widgets/Makefile.am (test_e_font_LDADD): same.
	(test_font_loading_LDADD): same.

2002-01-28  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2002-01-26  Jody Goldberg <jody@gnome.org>

	* gal/widgets/e-cursors.c (e_cursors_init) : make sure the colors are
	  initialized.

	* gal/widgets/e-colors.c (e_color_init) : doh!

2002-01-25  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-iconv.c: AIX and IRIX are like Sun systems - they use
	ISO8859-1 rather than names like ISO-8859-1.

2002-01-25  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Up version number to 0.19.99.1.

2002-01-24  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/e-scroll-frame.c: added void
	e_scroll_frame_get_policy, e_scroll_frame_get_vscrollbar_visible,
	e_scroll_frame_get_hscrollbar_visible

2002-01-23  Rodrigo Moya <rodrigo@gnome-db.org>

	* tests/Makefile.am: link with libgal-2-0.la, not libgal.la

2002-01-23  Hasbullah Bin Pit <sebol@ikhlas.com>

	* configure.in: Added ms at ALL_LINGUAS.
	* po/ms.po: Added Malay Translation.

2002-01-22  Ettore Perazzoli  <ettore@ximian.com>

	* gal/util/e-util.c (e_marshal_NONE__POINTER_POINTER_POINTER_POINTER): New.

2002-01-21  Jody Goldberg <jody@gnome.org>

	* gal/widgets/e-colors.c (e_color_alloc) : fix bogosity.

	* gal/widgets/color-palette.c : The group is now a GObject.
	  The 'rgb:*' syntax for colour specs is not supported by the pango
	  parser.

	* gal/widgets/color-group.c : Make this a GObject, and use finalize

	* gal/util/e-util.h (E_MAKE_TYPE) : Use the GObject methods rather
	  than the wrappers so that new types can inherit directly from
	  GObject.

	* gal/unicode/gunicode.h : Use G_*DECLS rather than *GNOME_DECLS.

	* gal/e-text/e-text.c (e_text_get_arg) : You need to use
	  gdk_copy_color in gnome2 to avoid upsetting memchunks.

2002-01-20  Jody Goldberg <jody@gnome.org>

	* **/Makefile.am : Install things into $(GAL_EPOCH) rather than 'gal'
	* gal/Makefile.am : add the epoch to the library name.

	* Makefile.am : Add pkgconfig file, remove galConf.

	* .cvsignore : Add gal-2.0.pc.

2002-01-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_text_model_changed): Request a
	reflow and an update when the text model changes.  Fixes Ximian
	bug #16459.
	(e_text_set_arg): (ARG_TEXT) Don't set the number of lines to one
	here.

2002-01-18  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.c (dialog_clicked):
	Handle the remove button here.

	* gal/widgets/e-categories-master-list-dialog.glade: Added the
	remove button here.

2002-01-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.h, gal/e-text/e-table-text-model.h,
	gal/e-text/e-text-model-uri.h, gal/e-text/e-text.h,
	gal/util/e-i18n.h, gal/widgets/e-canvas-utils.h,
	gal/widgets/e-gui-utils.h, gal/widgets/e-printable.h,
	gal/widgets/gtk-combo-stack.h: Added #include
	<libgnome/gnome-defs.h>.

2002-01-15  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in (iconv): if iconv_open() returns -1, abort. Don't
	abort if (!cd) because that could be valid.

2002-01-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (line_splitter): Handle the case of a 0
	length string properly here.

2002-01-09  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/widgets/e-font.c: Conditionally include alloca.h

2002-01-09  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.99.0.  Bumped
	GAL_CURRENT.  Reset GAL_REVISION.

2002-01-04  Pablo Saratxaga  <pablo@mandrakesoft.com>

        * configure.in: Added "eu" to ALL_LINGUAS

2001-12-28  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added "el" (Greek) to ALL_LINGUAS.

2001-12-27  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (split_into_lines): Reworked to fix bugs
	related to breaking text on newlines.  Some fairly substantial
	code duplication was removed in the process.

2001-12-18  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Bumped version number to 0.19.0.1.  Bumped
	GAL_REVISION.

2001-12-18  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Bumped version number to 0.19.

2001-12-17  Christopher James Lahey  <clahey@ximian.com>

        From a patch by Dan Nguyen <dnn@austin.ibm.com>

	* configure.in: Added configure check for %l and %k in strftime.

	* gal/util/e-util.c, gal/util/e-util.h (e_strftime): New function.
	Handles %l and %k even on platforms that don't support them by
	translating to %I and %H.

2001-12-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model-simple.c
	(e_selection_model_simple_set_row_count): Set esma->selected_row
	and esma->selected_range_end to -1 here.

	* gal/widgets/e-selection-model-array.c
	(e_selection_model_array_confirm_row_count): Set selected_row and
	selected_range_end to -1 here.
	(esma_select_single_row): Check that selected_row is within the
	range of possible rows.  This should never happen, but this check
	will help if it does.

2001-12-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/unicode/gunidecomp.c (_g_utf8_normalize_wc): Handle the case
	of invalid utf8 here by simply dropping any invalid characters.

2001-12-11  Gustavo GirÃ¡ldez  <gustavo.giraldez@gmx.net>

	* gal/e-table/e-table-header-item.c (ethi_unrealize): unregister
	ETableHeaderItem widget as a drag target when unrealizing it.

2001-12-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_unrealize): Turn off idle
	handling in the unrealize function instead of the destroy
	function.

2001-12-10 Chris Phelps <chicane@reninet.com>

	* configure.in: upate version.

	* kill all gnome-defs includes.

2001-12-10  Michael Meeks  <michael@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): upd.
	gtk_paint_focus.

	* *.[ch]: update for atom changes.

[ based on Chris Phelps' work ]

	* *.[ch]: switch get_type returns to GtkType

	* gal/widgets/e-canvas.c (emit_event):
	comment out nastiness & add warning.

	* gal/widgets/e-canvas-utils.c
	(show_area_timeout): remove unneccessary
	GTK_OBJECT_DESTROYED

	* gal/widgets/e-canvas-vbox.c
	(e_canvas_vbox_remove_item): ditto.

	* gal/e-text/e-text.c (tooltip_event): use
	text->model not GTK_OBJECT_DESTROYED.
	(e_text_event): ditto.

2001-12-10  Jon Trowbridge  <trow@ximian.com>

        * gal/e-text/e-text.c (text_width_with_objects): Don't crash if
        the text string is NULL.
        (text_draw_with_objects): Don't crash if the text string is NULL.
        (Fixes #16359)

2001-12-04  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped version number to 0.18.99.0
	and CURRENT to 19.

2001-11-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.2 and GAL_REVISION
	to 2.

2001-11-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Handle
	selection_row_changed signal.

	* gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h: Properly send
	selection_row_changed signals if changing from a single row
	selected to a single other row selected or if moving the
	selection_end by a single row.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added selection_row_changed
	signal.
	(e_selection_model_select_as_key_press): Fixed the case statement
	here to make MULTIPLE and EXTENDED the same as BROWSE instead of
	as SINGLE.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-gui-utils.c
	(e_container_change_tab_order_callback): Don't do anything if
	focus_child is NULL.  This makes tab when cycling around tab order
	not skip to the beginning of this tab order group.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped version number to 0.18.1.

	* gal/widgets/e-selection-model-array.c
	(e_selection_model_array_delete_rows): Make sure the cursor row is
	selected after deleting here.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

From a patch by Yukihiro Nakai <ynakai@redhat.com>.

	* gal/widgets/e-canvas.c (e_canvas_realize): Handle
	GDK_IM_PREEDIT_POSITION here.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

From a patch by Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories-master-list-combo.c
	(ecmlc_ecml_changed): Collate based on the utf8 strings instead of
	the locale strings.  Fixes Ximian bug #14895.

2001-11-12  Zbigniew Chyla  <cyba@gnome.pl>

	gal/unicode/gutf8.c (g_ucs4_to_utf8):
	s/g_error/utf8_error_msg/ (don't abort on invalid UTF-8).

2001-11-12  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories.c (e_categories_init): Removed much of
	the UI initialization; moved to e_categories_construct.
	(e_categories_construct): Now contains the UI initialization.
	Checks to make sure the relevant glade file is found.
	(e_categories_new): If our construct call failed to properly load
	the gui, return NULL. (Fixes #14780)

2001-11-08  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (full_cb): Only popup entries that have
	focus.  Fixes the lingering completion popup bug.

2001-11-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added e-canvas-background.lo.

	* gal/widgets/Makefile.am: Added e-canvas-background.c and
	e-canvas-background.h.

	* gal/widgets/e-canvas-background.c,
	gal/widgets/e-canvas-background.h: New class, provides infinite
	background color or arbitrary rectangle of background color.

2001-11-06  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/util/e-unicode-i18n.h:
	Fixed stupid bug (U_ macro should always take one argument).

	* gal/e-table/e-table-group-container.c (compute_text): s/_/U_

2001-11-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.0.1.  Bumped
	revision to 1.

2001-11-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.

2001-11-03  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.17.99.0.  Bumped
	the soname to 18.

	* gal/widgets/e-categories.c (e_categories_destroy): Got rid of a
	GtkWarning here that was due to Gtk+ casting a NULL pointer.
	Fixes Ximian bug #14327.

2001-10-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.16.99.0 and
	GAL_CURRENT to 17.

2001-10-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.16.

2001-10-31    <NotZed@Ximian.com>

	* configure.in: Bumped version number to 0.17.

2001-10-30  Larry Ewing  <lewing@ximian.com>

	* gal/unicode/gunicode.h: update for get_char_validated.

	* gal/unicode/gutf8.c (g_utf8_get_char_validated): add this for
	gtkhtml to get rid of extra cut & paste.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.15.99.9.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.15.99.10.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c: Added column_width argument.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_reflow): Calc height here if we need
	it to check the y position of the cursor.

2001-10-30    <NotZed@Ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Add e-unicode-i18n.lo.  Blah,
	thanks for a totally untested patch, and next time read the big
	three WARNINGS in the Makefile before you break the build.

2001-10-29  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_make_completion_window_transient):
	Added.  Makes our popup window a transient of the toplevel.
	(e_entry_enable_completion_full): Try to make our popup a
	transient.
	(e_entry_realize): Also try to make our popup a transient here, in
	case the entry wasn't packed before we enabled completion.  This
	is all an attempt to fix bug #13791.

	* gal/e-text/e-entry.c (e_entry_destroy): destroy our
	completion_view_popup... we've been leaking them all of this time.
	This should fix the mysterious bug #13900.

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	Silently drop match strings that contain invalid utf-8... not a
	good thing to do, but better than any of the currently available
	alternatives.

2001-10-29  Joe Shaw  <joe@ximian.com>

	* configure.in: Bump version up to 0.15.99.8

	* gal/util/Makefile.am: Build e-unicode-i18n.c and install
	e-unicode-i18n.h.

2001-10-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_stop_editing): Set text->revert =
	NULL here.
	(e_text_cancel_editing): Only revert if text->revert is non-null.

2001-10-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number here to 0.15.99.7.

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_stop_editing):
	Exported this function.
	(e_text_cancel_editing): New function.  Allows you to revert
	edits.

2001-10-28  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Return 1 from the
	button_release event.  Fixes Ximian bug #13701.

2001-10-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (connect_set_adjustment): Commented out
	connecting to the scroll adjustments here since it's not necessary
	for how we use e-reflow.  Fixes Ximian bug #13306.

2001-10-27  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.6 for
	emulate_label_resize.

	* gal/e-text/e-entry.c: Added "emulate_label_resize" argument to
	make EEntry act like a label for width resizing purposes.

2001-10-26  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump up to 0.15.99.5.

	* gal/util/e-util.c
	(e_marshal_INT__POINTER_POINTER_POINTER_POINTER_POINTER): pass
	`args[4]' as the fourth argument instead of `args[3]' again.
	(e_marshal_INT__POINTER_POINTER_POINTER_BOOL): New.

2001-10-26  Damon Chaplin  <damon@ximian.com>

	* configure.in: bumped gnome-print requirement from 0.21 to 0.25,
	to try to avoid bug #13466. (I have 0.25 and it is OK.)

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-test.c, gal/util/e-i18n.h,
	gal/widgets/e-hsv-utils.c, gal/widgets/e-hsv-utils.h: Changed the
	license announcement at the top of these files.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-vscrollbar.h: Fix a typo.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-hpaned.h,
	gal/e-paned/e-paned.c, gal/e-paned/e-paned.h,
	gal/e-paned/e-vpaned.c, gal/e-paned/e-vpaned.h,
	gal/e-text/e-completion-match.c, gal/e-text/e-completion-match.h,
	gal/e-text/e-completion-test.c, gal/e-text/e-completion-view.c,
	gal/e-text/e-completion-view.h, gal/e-text/e-completion.c,
	gal/e-text/e-completion.h, gal/e-text/e-entry-test.c,
	gal/e-text/e-entry.c, gal/e-text/e-entry.h,
	gal/e-text/e-table-text-model.c, gal/e-text/e-table-text-model.h,
	gal/e-text/e-text-model-repos.c, gal/e-text/e-text-model-repos.h,
	gal/e-text/e-text-model-test.c, gal/e-text/e-text-model-uri.c,
	gal/e-text/e-text-model-uri.h, gal/e-text/e-text-model.c,
	gal/e-text/e-text-model.h, gal/e-text/e-text.c,
	gal/e-text/e-text.h, gal/util/e-bit-array.c,
	gal/util/e-bit-array.h, gal/util/e-cache.c, gal/util/e-cache.h,
	gal/util/e-iconv.c, gal/util/e-iconv.h, gal/util/e-sorter-array.c,
	gal/util/e-sorter-array.h, gal/util/e-sorter.c,
	gal/util/e-sorter.h, gal/util/e-text-event-processor-emacs-like.c,
	gal/util/e-text-event-processor-emacs-like.h,
	gal/util/e-text-event-processor-types.h,
	gal/util/e-text-event-processor.c,
	gal/util/e-text-event-processor.h, gal/util/e-util.c,
	gal/util/e-util.h, gal/util/e-xml-utils.c, gal/util/e-xml-utils.h,
	gal/widgets/color-group.c, gal/widgets/color-group.h,
	gal/widgets/color-palette.c, gal/widgets/color-palette.h,
	gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h,
	gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas-vbox.h,
	gal/widgets/e-canvas.c, gal/widgets/e-canvas.h,
	gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h,
	gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-combo.h,
	gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog-model.h,
	gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories-master-list-dialog.h,
	gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h,
	gal/widgets/e-categories.c, gal/widgets/e-categories.h,
	gal/widgets/e-colors.c, gal/widgets/e-colors.h,
	gal/widgets/e-cursors.c, gal/widgets/e-cursors.h,
	gal/widgets/e-font.c, gal/widgets/e-font.h,
	gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h,
	gal/widgets/e-hscrollbar.c, gal/widgets/e-hscrollbar.h,
	gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h,
	gal/widgets/e-printable.c, gal/widgets/e-printable.h,
	gal/widgets/e-reflow-model.c, gal/widgets/e-reflow-model.h,
	gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h,
	gal/widgets/e-reflow.c, gal/widgets/e-reflow.h,
	gal/widgets/e-scroll-frame.c, gal/widgets/e-scroll-frame.h,
	gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h,
	gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h,
	gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h,
	gal/widgets/e-unicode.c, gal/widgets/e-unicode.h,
	gal/widgets/e-vscrollbar.c, gal/widgets/e-vscrollbar.h,
	gal/widgets/gtk-combo-box.c, gal/widgets/gtk-combo-box.h,
	gal/widgets/gtk-combo-stack.c, gal/widgets/gtk-combo-stack.h,
	gal/widgets/gtk-combo-text.c, gal/widgets/gtk-combo-text.h,
	gal/widgets/test-color.c, gal/widgets/test-e-font.c,
	gal/widgets/test-e-font.h, gal/widgets/test-font-loading.c,
	gal/widgets/widget-color-combo.c,
	gal/widgets/widget-color-combo.h,
	gal/widgets/widget-pixmap-combo.c,
	gal/widgets/widget-pixmap-combo.h,
	src/e-table/e-table-sorted-variable.c, tests/test-define-views.c,
	tests/test-shortcut-bar.c, tests/test-table-1.c,
	tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c,
	tests/test-unicode.c: Changed the license announcement at the top
	of these files.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Added
	cursor_changed handling to set the has_cursor argument of the
	contained objects.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* docs/etablexml.txt: Document allow-grouping attribute.

	* tests/test-table-1.c (SPEC): Updated this to test the
	allow_grouping=\"false\" attribute.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv), gal/widgets/e-font.c
	(e_font_to_native), gal/widgets/e-unicode.c
	(e_utf8_from_iconv_string_sized, e_utf8_to_iconv_string_sized,
	e_utf8_from_gtk_string_sized, e_utf8_to_gtk_string_sized): Fixed
	warnings here.

2001-10-25    <NotZed@Ximian.com>

	* configure.in: Bumped version to 0.15.99.4 for e-iconv changes.

	* gal/widgets/e-unicode.c (e_utf8_from_iconv_string_sized): "
	(e_utf8_to_iconv_string_sized): "
	(e_utf8_from_gtk_string_sized): "
	(e_utf8_to_gtk_string_sized): "

	* gal/widgets/e-font.c (e_font_to_native): s/iconv/e_iconv/

	* gal/util/e-iconv.c (e_iconv): Implement a wrapper for iconv() to
	make sure we link with and execute the right iconv to match the
	right iconv_open.  (BLAH!)

2001-10-24  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

	* gal/unicode/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

	* gal/util/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

2001-10-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): Use the widget's style's
	text_gc for drawing text if either draw_background or draw_button
	is on.  Fixes Ximian bug #2215.

2001-10-23  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version to 0.15.99.3 for EText's
	"draw_button" argument.

	* gal/e-text/e-entry.c: Forward the "draw_button" argument to the
	contained EText.

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_draw): Added
	new "draw_button" argument.  If this is turned on and the first
	widget that's a parent of the containing canvas with GTK_NO_WINDOW
	turned off above the current one is a button, EText draws a button
	underneath itself to match the containing button.

2001-10-22  Damon Chaplin  <damon@ximian.com>

	* configure.in: bumped version to 0.15.99.2.

2001-10-22  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(control_keys): Make C-w not do anything here.
	(e_text_event_processor_emacs_like_event): Make C-A-* not do
	anything here.

2001-10-22  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_get_selection):
	Accept UTF8_STRING, UTF-8, and STRING targets when getting the
	selection.  Fixes Ximian bug #12086.

2001-10-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_get_invisible): Offer UTF8_STRING,
	UTF-8, COMPOUND_TEXT, STRING, and TEXT targets when we offer the
	selection.

2001-10-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_selection_event_real): Use
	right_click_down here instead of maybe_do_something.

2001-10-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.h: Changed some of these gbooleans to be
	guint : 1s.

	* gal/widgets/e-canvas.c (e_canvas_item_grab_focus): Send the in
	event here to the new focused item instead of the old one.

2001-10-18  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Connect
	keys before we show the widget.

2001-10-18  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.1.

	* gal/util/e-util.c, gal/util/e-util.h (e_write_file_mkstemp): New
	function to create a unique file.
	(e_write_file): Check the return value of close here.

2001-10-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.0 and
	sonumber to 0.16.

2001-10-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.

2001-10-16    <NotZed@Ximian.com>

	* gal/util/e-iconv.c (flush_entry): Want to check nn not in for
	end of list condition.

2001-10-14  Not Zed  <NotZed@Ximian.com>

	* gal/util/e-iconv.c: Added special case for iso-10646-1 ->
	ucs-2be encoding since its not always available.

2001-10-13  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): work around broken behavior
	in some iconv implementions that require the length arguments to
	be valid pointers event if both buffers are NULL.

2001-10-13  Carlos PerellÃ³ MarÃ­n <carlos@gnome-db.org>

	* configure.in (ALL_LINGUAS): Added pt

2001-10-12  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_charset_name): fix the test for
	"cp".
	(flush_entry): free the conv string and make sure we remove all
	the the items not all but the last one.

2001-10-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-iconv.c (e_iconv_init): Fix for Debian systems which
	apparently can use a ';' as a codeset terminator? Cleaned up the
	code in the process, the parser is a little nicer now.

2001-10-12  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_charset_name): tweak the conversion
	routine slightly for microsoft charsets.
	(e_iconv_charset_name): fix microsoft fix.

2001-10-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): Changed the crash fix to just
	return -1.

2001-10-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): Fixed a crash here for NULL
	ofrom.

2001-10-12    <NotZed@Ximian.com>

	* gal/util/e-iconv.c: Fix case of some entries to work with
	solaris, incl adding UTF-8.
	(e_iconv_init): Dont down-case the name, only the key.
	(e_iconv_charset_name): Use capitals for ISO and CP for Solaris's
	iconv to work.
	(e_iconv_open): If we can't convert, say we're not busy, so it
	gets re-used next open, spit out a warning.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog-model.c
	(ecmldm_destroy): Don't g_free priv->ecml here since it's a
	GtkObject.

	* gal/widgets/e-font.c (e_font_to_native): Changed this to use
	g_utf8_next_char.
	(e_font_utf8_char_width): Made this use g_utf8_skip instead.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Fredrik Nilsson <jymdman@home.se>.

	* gal/util/e-util.c (e_format_number): Made this work properly for
	numbers with a full set of 0s for one of the grouping elements.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-table-text-model.c (e_table_text_model_insert,
	e_table_text_model_insert_length, e_table_text_model_delete),
	gal/e-text/e-text-model.c (e_text_model_real_insert,
	e_text_model_real_insert_length): Use e_strdup_append_strings here
	instead of g_strdup_printf because printf("%.*s") is locale
	dependent on some systems.

	* gal/util/e-util.c (e_strdup_append_strings): New function to
	append a bunch of strings with optional lengths.

2001-10-11    <NotZed@Ximian.com>

	* configure.in: bumped revision to .1

	* gal/widgets/test-font-loading.c (print_gdk_font_name): Close
	iconv when done.

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Close
	iconv when dont with it.
	(e_utf8_from_charset_string_sized): Changed for e_iconv api
	changes.
	(e_utf8_to_charset_string_sized): "
	(e_utf8_from_gtk_string_sized): Close iconv when done with it.
	(e_utf8_from_locale_string_sized): "
	(e_utf8_to_locale_string_sized): "

	* gal/widgets/e-font.c (e_locale_encoding): Removed.
	(e_iconv_from_charset): Removed.
	(e_iconv_to_charset): Removed.
	(e_iconv_from_locale): Removed.
	(e_iconv_to_locale): Removed.
	(e_iconv_from_gdk_font): Changd to use new e-iconv apis.
	(e_iconv_to_gdk_font): "
	(e_font_unref): Close iconv's when done with them.
	(translate_encoding): Removed.
	(get_locale_charset): Removed.
	(e_gdk_font_encoding): Fix for api changes.

	* gal/util/e-iconv.c: New stuff to commonify/fix up some problems
	with the iconv cache/conversion stuff inside e-font.

2001-10-10  Rodrigo Moya <rodrigo@ximian.com>

	* Makefile.am: match backslashes

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Yukihiro Nakai <ynakai@redhat.com>.

	* gal/widgets/e-font.c (e_font_utf8_char_width, e_font_to_native):
	Fixed the test for 4 byte characters here.

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped sonumber to 15.

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Dan Nguyen <dnn@austin.ibm.com>.

	* gal/Makefile.am (libgal_la_LDFLAGS): Added $(GTK_LIBS).

	* gal/e-text/e-text.c (e_text_event): Changed this from a C++
	comment to a C comment.

2001-10-09  Rodrigo Moya <rodrigo@ximian.com>

	* configure.in: added libart to EXTRA_GNOME_CFLAGS/LIBS, needed by
	GnomeCanvas, but which is now installed in a different prefix

2001-10-09  JP Rosevear  <jpr@ximian.com>

	* configure.in: bump version to 0.14.99.0

2001-10-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.14.

2001-10-06  Michael Meeks  <michael@ximian.com>

	* *.c s/->childs/->xmlChildrenNode/g;

2001-10-06  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): remove the
	test condition and always work from the locale not the font.
	This has been tested and verified with owen.

2001-10-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_flexible_strtod): New
	function that parses a string as a double either in the C locale
	or the current locale.
	(e_ascii_dtostr): New function that saves a double as a string as
	it would be saved in the C locale.

	* gal/util/e-xml-utils.c
	(e_xml_get_double_prop_by_name_with_default): Use
	e_flexible_strtod here.
	(e_xml_set_double_prop_by_name): Use e_ascii_dtostr here.  Fixes
	Ximian bug #11440.

2001-10-05  Michael Meeks  <michael@ximian.com>

	* gal/util/e-util.h: add E_OBJECT_CLASS_ADD_SIGNALS and
	E_OBJECT_CLASS_TYPE to ease migration to Gnome 2.0 from
	a single source base.

	* All C files:
	s/object_class->type,/E_OBJECT_CLASS_TYPE (object_class),/g;
	s/gtk_object_class_add_signals([^\(]*)\(([^,]*),([^,]*),([^\)]*)/
	E_OBJECT_CLASS_ADD_SIGNALS\1(\2,\3,\4/;

2001-10-05  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories-master-list-combo.c
	(ecmlc_ecml_changed): Sort the list of categories.
	(Bug 8088)

2001-10-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.13.99.1.

2001-10-03  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/gtk-combo-text.h : fix typo.

2001-10-02  Jody Goldberg <jgoldberg@home.com>

	* tests/Makefile.am : remove duplicated
	  test_shortcut_bar_LDFLAGS & test_shortcut_bar_LDADD
	  that were giving automake-1.5 gas.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model.c (MAX_LENGTH): Added a max length of
	2047 to the standard ETextModel.  Fixes Ximian bug #3021.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the sonumber to 14.

	* gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h
	(e_canvas_item_area_shown): New function returns TRUE iff
	e_canvas_item_show_area would be a noop.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (set_empty): Transcode empty message from
	utf8 to gtk charset.  Fixes Ximian bug #2468.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Don't handle
	control-enter if allow_newlines is off. Fixes Ximian bug #3742.

2001-10-01  JP Rosevear  <jpr@ximian.com>

	* configure.in: bump to 0.13.99.0

2001-10-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Updated version number to 0.13.

2001-09-26  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): Allow ctrl-p and ctrl-n to
	be used to move up and down in the completion list. (Bug #10500)

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	Properly validate the utf8. 

2001-09-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (_insert): Made it so
	that if allow_newlines is FALSE, pasting into ETexts doesn't
	insert carriage returns.  Fixes Ximian bug #5761 and Ximian bug
	#9067.

2001-09-25  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.12.99.2.

2001-09-24    <NotZed@Ximian.com>

	* gal/widgets/e-font.c (translate_encoding): If we dont have the
	encoding in our lookup table, add a copy, and return the copy, not
	the incoming string.

2001-09-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.99.0.

	From a patch by Damian Ivereigh <damian@cisco.com>:

	* gal/util/e-util.c, gal/util/e-util.h (e_strftime_fix_am_pm): New
	function, takes the same arguments as strftime, but does some
	fixup if the given string is in 12 hour mode but the locale
	doesn't have AM/PM descriptors.

2001-09-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.0.1.

2001-09-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.

2001-09-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (reflow_columns): Fixed a typo here where
	we were setting the running height based on the height of object
	number 2 instead of the current object.  Fixes Ximian bug #8807.

2001-09-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_right_click_down,
	e_selection_model_right_click_up): New functions to deal with the
	special cases of what happens when you right click on a tree or
	table in single selection mode.

2001-09-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-sorter-array.c (e_sorter_array_append): Fixed a typo
	here.  esa->rows += count, not esa->rows = count.

2001-09-18  Christopher James Lahey  <clahey@ximian.com>

	* LICENSE, README, gal.spec.in: Changed the license to LGPL.

2001-09-17  Larry Ewing  <lewing@ximian.com>

	* gal/e-text/e-text.c (e_text_supply_selection): remove redundant
	NULL checks since g_free handles NULLs.
	(e_text_destroy): free the selection.  It does appear to be a
	guarantee that we get a selection-clear event before we are
	destroyed.

2001-09-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.99.4.

	* gal/e-text/e-completion-view.c (e_completion_view_construct),
	tests/test-table-1.c (create_table): Changed the parameters to
	e_table_simple_new here to adjust to changes in the interface.

	* gal/widgets/e-categories-master-list-array.c (ecmla_default):
	Fixed a memory leak here.

	* gal/widgets/e-categories.c (e_categories_get_save_id): Added
	get_save_id here so that selection would be maintained across
	changes.

2001-09-15  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_reflow): Check that
	unsorted >= 0 before using it as an array index.  (Bug #9115)

2001-09-13  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): Applied Roger's patch
	that pretends to correct some chinese problems (with minor fixes)
	(e_font_from_gdk_font): Ditto
	(translate_encoding): Ditto
	(get_locale_charset): Ditto

2001-09-13  Dan Winship  <danw@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Unref the model after creating the ETable, since the table will
	hold a ref on it until we destroy it when we're destroyed.

	* gal/e-text/e-entry.c (e_entry_destroy): Unref the popup window
	rather than destroying it.

2001-09-12  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): use fontset for all
	fonts whose encoding begins with 'jis'

2001-09-12  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widgets/e-font.c (get_locale_charset): break locale string at ';'
	fixes bug #5396
	(translate_encoding): Terminate temp buffer, if encoding string is
	invalid (very long), would fix #5396, if the previous snippet wouldn't
	already done that ;-)

2001-09-09  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (e_text_text_model_changed): If our text shrinks,
	make sure that the selection doesn't spill off over the end of the
	reduced buffer.  (Related to bug #8535)

2001-09-08  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Re-remove
	evil utf8_to_gtk debug printf that Chris seems to have
	accidentally re-added.

2001-09-07  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.99.3 for
	ETableWithout.

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_maybe_do_something): Return a value based on
	whether we did something.

2001-09-04  Ettore Perazzoli  <ettore@ximian.com>

	* gal/unicode/Makefile.am (INCLUDES): Add `-I$(top_srcdir)' here.

2001-09-02  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/widgets/e-unicode.c (e_utf8_from_locale_string_sized):
	Use e_iconv_from_locale, not e_iconv_to_locale.

2001-09-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.11.99.2 for new
	e_utf8 functions.

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_utf8_is_ascii): Added this function.  Reformatted.

2001-09-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.11.99.1 for new
	e_utf8 functions.

	* gal/unicode/gunicollate.c (g_utf8_collate, g_utf8_collate_key):
	Changed this from e_utf8_from_locale_string to
	e_utf8_to_locale_string.

	* gal/widgets/e-font.c, gal/widgets/e-font.h
	(e_iconv_from_charset, e_iconv_to_charset): Added these functions
	to the exported interface (renamed them as well from
	e_iconv_from_encoding and e_iconv_to_encoding.)

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_utf8_from_iconv_string, e_utf8_from_iconv_string_sized,
	e_utf8_to_iconv_string, e_utf8_to_iconv_string_sized,
	e_utf8_from_charset_string, e_utf8_from_charset_string_sized,
	e_utf8_to_charset_string, e_utf8_to_charset_string_sized): Added
	these functions.
	(e_utf8_from_locale_string, e_utf8_to_locale_string): Changed
	these to use the new e_utf8_from_iconv_string and
	e_utf8_to_iconv_string.

2001-08-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): zh_TW.Big5 -> zh_TW

2001-08-29  Zbigniew Chyla  <cyba@gnome.pl>

	Correction to my previous patch - it didn't compile without
	__STDC_ISO_10646__ defined.

	* gunicollate.c
	(g_utf8_collate): Use e_utf8_from_locale_string instead of g_convert,
	cast g_get_charset argument to char**.
	(g_utf8_collate_key): Ditto.

2001-08-29  Peter Williams  <peterw@ximian.com>

	* gal/unicode/gunicollate.c: Change include order to compile
	correctly.

2001-08-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version numbers since we changed the
	binary interface a little while back.

Tue Aug 28 18:29:28 2001  George Lebl <jirka@5z.com>

	Patch to fix few 64bit issues

	* gal/e-table/e-table-header-item.c (ethi_draw) (ethi_start_drag)
	  gal/widgets/e-categories.c (e_categories_value_at)
	  (e_categories_value_to_string):
	  Use GINT_TO_POINTER and GPOINTER_TO_INT to cast between pointers
	  and ints to fix 64bit issues connected with that.

	* gal/e-table/e-table-sorting-utils.c
	  (e_table_sorting_utils_tree_check_position)
	  gal/util/e-sorter-array.c (e_sorter_array_append):
	  Use size_t for size not ints to fix crashes

	* gal/e-text/e-completion-match.c, gal/e-text/e-completion.c:
	  Include <string.h>

2001-08-29  Chris Toshok  <toshok@ximian.com>

	* configure.in: use GTK_CONFIG instead of gtk-config.

2001-08-28  Zbigniew Chyla  <cyba@gnome.pl>

	Cut&pasted more code from glib2 for g_utf8_collate

	* configure.in: Bumped version to 0.11.3.

	* gal/Makefile.am (libgal_la_LIBADD):
	Added unicode/gunicollate.lo.

	* gal/unicode/Makefile.am
	(libunicode_la_SOURCES): Added gunicollate.c.
	(noinst_HEADERS): Added gunicomp.h.

	* gal/unicode/gunicode.h
	(enum GNormalizeMode): New.
	(g_ucs4_to_utf8, g_utf8_normalize, g_utf8_collate, g_utf8_collate_key):
	New functions.

	* gal/unicode/gunidecomp.c
	(find_decomposition, combine, _g_utf8_normalize_wc, g_utf8_normalize):
	New functions.

	* gal/unicode/gunidecomp.h:
	Copied from current version of glib2 with canon_offset and
	compat_offset fields added

	* gal/unicode/gutf8.c:
	(g_ucs4_to_utf8): New function.

	* gal/unicode/gunicollate.c, gal/unicode/gunicomp.h:
	New files.

2001-08-23  Zbigniew Chyla  <cyba@gnome.pl>

	Fixes some Evolution bugs.

	* gal/widgets/e-categories-master-list-combo.c (ecmlc_ecml_changed):
	Convert categories to GTK+ locale before passing them to
	gtk_combo_set_popdown_strings.

2001-08-23  Yanko Kaneti  <yaneti@declera.com>

	* gal/widgets/Makefile.am (test_e_font_LDADD, test_font_loading_LDADD):
	* gal/e-text/Makefile.am (e_completion_test_LDADD): add ICONV_LIBS 
	to the test programs build flags

2001-08-22  Zbigniew Chyla  <cyba@gnome.pl>

	This patch fixes a lot of i18n problems in Evolution.

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized):
	Call gtk_widget_ensure_style before refering to widget's style.

2001-08-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.2.  Bumped so
	REVISION to 2.

2001-08-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.1.  Bumped so
	REVISION to 1.

2001-08-21  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_button): cut and paste fixed
	version of gnome_canvas_button here.
	(pick_current_item): needed by e_canvas_button, also from
	gnome-canvas.c.
	(gnome_canvas_item_invoke_point): same.
	(e_canvas_class_init): hook button_press_event and
	button_release_event to e_canvas_button.

2001-08-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.

2001-08-20  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Increment version number to 0.10.99.5 for changes
	to ETableWithout api.

2001-08-16  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-match.h: Added "hit_count" to
	ECompletionMatch.  Used by search refinement/unrefinement.

	* gal/e-text/e-completion.c (e_completion_refine_search): Added.
	Handle automatic search refinements.
	(e_completion_unrefine_search): Added.  Handle automatic search
	"unrefinements", or reversions.
	(e_completion_begin_search): Check if the refinement or
	unrefinement operations can be used to handle the search.  Emit
	"request_search" at the end of the call.
	(e_completion_class_init): Added a new signal "request_search".
	"begin_search" is now purely informational, telling views that a
	series of matches and an "end_search" are forthcoming.

	* configure.in: Increment version of 0.10.99.3.

2001-08-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.10.99.4.  Fixed some
	comments.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-without.lo.

2001-08-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c (e_selection_model_key_press):
	Handle GDK_KP_Up and GDK_KP_Down here.

2001-08-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.glade: Gave this
	dialog a minimum size.  Fixes Ximian bug #5377.

2001-08-10  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-canvas-vbox.h: new proto and virtual method

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_real_add_item_start):
	adds the the item to the beginning
	(e_canvas_vbox_add_item_start): call the virtual method

2001-08-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_create):
	last_item_separator shouldn't get reset if the item is hidden.

2001-08-09  jacob berkman  <jacob@ximian.com>

	* configure.in: bumped up to 0.10.99.3

	* gal/e-text/e-completion-view.c (e_completion_view_init): init
	matches array
	(e_completion_view_destroy): free matches array
	(e_completion_view_disconnect): disconnect from the clear and
	lost_match signals
	(e_completion_view_clear_choices): fixup for ptr array
	(e_completion_view_set_cursor_row): ditto
	(e_completion_view_select): ditto
	(e_completion_view_key_press_handler): ditto
	(clear_completion_cb): handle the clear signal
	(lost_completion_cb): remove a row from the model
	(table_row_count): fixup for ptr array
	(table_value_at): ditto
	(e_completion_view_construct): connect to clear and lost
	completion signals
	(e_completion_view_set_width): ptr array fixup again

	* gal/e-text/e-completion.c (e_completion_class_init): add new
	clean / lost completion signals
	(e_completion_init): initialize the matches array
	(e_completion_destroy): free the matches array
	(e_completion_add_match): fixup for matches being a GPtrArray
	(e_completion_clear_matches): ditto
	(e_completion_clear): new function to clear the list of matches
	(e_completion_foreach_match): fixup for ptrarray
	(e_completion_restart): ditto
	(e_completion_found_match): if we are at the limit return first,
	rather than adding and then unreffing.  there very well could be
	some weird crashes this caused but it is kind of unlikely.
	(e_completion_lost_match): new function to forget about a match
	(e_completion_end_search): add a comment on why this is broken

	* gal/e-text/e-entry.c (e_entry_text_keypress): only start a
	delayed completion if our completion timeout is >= 0.  this
	provides a way for the completion starting / stopping to be
	controlled by something other than the EEntry (ie, file-sel)

2001-08-09  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Bumped version up to 0.10.99.2.

	* gal/e-text/e-entry.c (e_entry_class_init): Added
	"completion_popup" signal.
	(e_entry_show_popup): Emit "completion_popup" signal if the popup
	has appeared or disappeared.
	(e_entry_enable_completion_full): Listen for "cancel_completion"
	signals from our model, and disable our completion if get one.
	(e_entry_completion_popup_is_visible): Added.  Returns TRUE if the
	completion popup is on the screen.

	* gal/e-text/e-text-model.c (e_text_model_class_init): Added
	"cancel_completion" signal.
	(e_text_model_cancel_completion): Added.  Emits
	"cancel_completion" signal.

2001-08-09  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-entry.c (e_entry_destroy): Quintuple sigh.  See below.

	* gal/util/e-bit-array.c (eba_destroy): Sextuple sigh.

2001-08-08  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-selection-model-array.c (esma_destroy): Chain to
	the destroy handler in the parent class!

	* gal/widgets/e-selection-model.c (esm_destroy): Likewise.  Sigh.

	* gal/widgets/e-categories.c (e_categories_destroy): Likewise.
	And make it static.  Double sigh.

	* gal/widgets/e-categories-master-list-array.c (ecmla_destroy):
	Likewise.  Triple sigh.

	* gal/widgets/e-categories-master-list-dialog-model.c
	(ecmldm_destroy): Likewise.  Quadruple sigh.

2001-08-07  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): allow
	toggling between converting from the gdkfont's charset or from the
	locale charset for testing.

2001-08-07  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.10.99.1.

	* tests/test-shortcut-bar.c (icon_callback): Remove.
	(add_test_groups): Just add the icon from the `icon_pixbuf[]'
	right here, using the new @image arg in
	`e_shortcut_model_add_item()'.

2001-08-05  Ettore Perazzoli  <ettore@ximian.com>

	* e-paned.h: Remove members `down', `down_position', `down_time',
	`saved_size' from `struct EPaned'.

	* gal/e-paned/e-vpaned.c (BAR_WIDTH): Removed #define.
	(CLOSED_THRESHOLD): Likewise.
	(NOMINAL_SIZE): Likewise.
	(CLICK_STOP): Likewise.
	(CLICK_TIMEOUT): Likewise.
	(e_vpaned_toggle_position): Removed.
	(e_vpaned_button_press): Remove the stupid
	click-to-toggle-minimization thing.
	(e_vpaned_button_release): Likewise.
	(e_vpaned_expand): Removed.
	(e_vpaned_collapse): Removed.
	(e_vpaned_toggle_position): Removed.

	* gal/e-paned/e-hpaned.c (BAR_WIDTH): Removed #define.
	(CLOSED_THRESHOLD): Likewise.
	(NOMINAL_SIZE): Likewise.
	(CLICK_STOP): Likewise.
	(CLICK_TIMEOUT): Likewise.
	(e_hpaned_toggle_position): Removed.
	(e_hpaned_button_press): Remove the stupid
	click-to-toggle-minimization thing.
	(e_hpaned_button_release): Likewise.
	(e_hpaned_expand): Removed.
	(e_hpaned_collapse): Removed.
	(e_hpaned_toggle_position): Removed.

2001-08-02  Radek Doulik  <rodo@ximian.com>

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	avoid freed memory reading, when you call it like
	e_completion_match_set_text (match,
	e_completion_match_get_match_text (match), tmp);

2001-08-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.c (dialog_clicked):
	Make this dialog close when the close button is hit.  Fixes Ximian
	bug #5157.

	* gal/widgets/e-categories-master-list-dialog.glade: Fixed a typo
	here.  Replaced dialog-emcl with dialog-ecmld as it should be.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (INCLUDES): Added
	-DGAL_IMAGESDIR=\"$(imagesdir)\" here.

	* gal/widgets/e-categories-master-list-array.c: Changed how this
	handles colors and icons.  It puts them in the list instead of
	using a hash table.

	* gal/widgets/e-categories-master-list.h: Added some comments to
	this file.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/unicode/gutf8.c (g_utf8_find_prev_char): Made
	g_utf8_find_prev_char able to return the first character of a
	string.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the sonumbers.

2001-07-31  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version to 0.10.99.0.

2001-07-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.10.

2001-07-30  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS), configure.in: Added art subdirectory.

2001-07-25  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (e_text_set_arg): Properly ref the font we
	pass in as an ARG_FONT_E.
	(_do_tooltip): Removed some crack.  We no longer have to manually
	ref the font. The ref-counting now happens inside the set_arg
	function, as it should.
	(e_text_destroy): Set text->font to NULL after unrefing it.

2001-07-24  Wang Jian  <lark@linux.net.cn>

	* configure.in: zh_TW.Big5 added in ALL_LINGUAS

2001-07-20  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_set_width): Removed
	some debugging spew I committed by mistake.

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Change
	window policy to allow the completion window to shrink when the
	number of options decreases.

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Removed some obsolete code.

2001-07-17  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Remove the
	debugging message here.

2001-07-16  Rodrigo Moya <rodrigo@ximian.com>

	* gal/widgets/e-categories-master-list-array.c: add "Birthday" to the
	list of builtin categories

2001-07-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (connect_model): Reset the view when we
	set the model here.  Fixes Ximian #4105.

2001-07-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_event): Start editing immediately on
	a button_press that grabs the focus.  e_canvas_item_grab_focus
	doesn't seem to get us the focus event until the event loop.
	Fixes Ximian bug #1766.

2001-07-14  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added nn to ALL_LINGUAS.

2001-07-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.9.99.0.  Bumped so
	number to 9.

2001-07-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.9.

2001-07-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_select_as_key_press): Created this function for
	key presses that move in some way other than just to the next or
	previous row.
	(e_selection_model_key_press): Use
	e_selection_model_select_as_key_press for handling home and end
	here.

2001-07-09  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-text.c (_get_position): For E_TEP_END_OF_BUFFER,
	use the length in bytes, not the length in characters --- this
	function is supposed to return byte offsets.

2001-07-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-vpaned.c
	(e_hpaned_button_press, e_hpaned_button_release,
	e_vpaned_button_press, e_vpaned_button_release): Check for
	event->button == 1 here when doing the auto shrink.  This fixes
	bug #4189.  Also fixed parity in e_vpaned_button_press which makes
	this work for vertical paneds.

2001-07-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_destroy):
	Destroy the tooltip if we're the owner when we're destroyed.
	Also, keep a reference to the text object in case we get a signal
	on the window after the text object is destroyed.

	* gal/widgets/e-canvas.c (e_canvas_destroy): Hide the tooltip if
	there is one when the canvas is destroyed.

2001-07-05  Richard Hult  <rhult@codefactory.se>

	* gal/util/e-util.c (e_format_number): Allocate one byte for the
	terminating zero as well.

2001-07-05  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_command): Don't scroll to the cursor
	on grab, ungrab, noop, and copy commands.

2001-07-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number of gal to 0.8.99.8.

2001-07-04  Rodrigo Moya <rodrigo@ximian.com>

	* gal/widgets/e-categories-master-list-array.c:
	* gal/widgets/e-categories-master-list.c: added 2 new parameters
	to the 'append' virtual method, so that we can specify colors and
	icons per category, and added 2 new virtual methods,
	nth_icon and nth_color to get the pixmap file and color
	representation of a given category

2001-07-03  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_point): If lines is NULL here split
	into lines and just return that the point is outside this text
	object.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: 0.8.99.7.

	* gal/Makefile.am: Don't link against e-charset-picker.lo

	* gal/widgets/Makefile.am: Don't build e-charset-picker.c or it's
	test program.

	* gal/widgets/e-charset-picker.[c,h]: Removed.

	* gal/widgets/test-charset-picker.c: Removed.

2001-06-29  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-match.c (e_completion_match_unref): Do
	nothing if passed NULL.
	(e_completion_match_compare): Move the sort_major comparison out
	to make it the primary sort key (followed by score and then
	sort_minor).
	(e_completion_match_compare_alpha): Move the sort_major comparison
	out to make it the primary sort key.


2001-06-29  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.8.99.6.

	* gal/util/e-util.c (e_free_string_slist): New.
	(e_free_object_list): New.

2001-06-27  Peter Williams  <peterw@ximian.com>

	* configure.in: Bump version number due to incompatible changes
	in ETree.

2001-06-26  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added ta to the languages list.

2001-06-26  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.8.99.3.

	* gal/util/e-util.c
	(e_marshal_INT__POINTER_POINTER_POINTER_POINTER): New.  Sigh.
	GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+ marshalling
	sucks.  GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+
	marshalling sucks.  GTK+ marshalling sucks.  GTK+ marshalling
	sucks.  GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+
	marshalling sucks.  GTK+ marshalling sucks.

2001-06-26  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: 0.8.99.4.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-combo.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-categories-master-list-combo.c.
	(libwidgetsinclude_HEADERS): Added
	e-categories-master-list-combo.h.

	* gal/widgets/e-categories-master-list-array.c
	(ecmla_nth): Made this function return const char *.

	* gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-combo.h: New widget to be a
	combo box filled with a list of the categories in the master
	category list.

	* gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h
	(e_categories_master_list_nth): Made this function return const
	char *.

2001-06-21  Radek Doulik  <rodo@ximian.com>

	* configure.in (ALL_LINGUAS): added cs

2001-06-09  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Removed unused frame variable.

2001-06-08  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c: Turned off alternating row
	colors in our ETable specification.

	* gal/e-text/e-completion-match.c (e_completion_match_compare_alpha): 
	Fix the sort routine to properly use the major & minor keys for
	sorting grouped elements with the same match text.  I had this all
	wrong. 

2001-06-07  jacob berkman  <jacob@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate): we can ignore the
	border, as e-text takes care of that for us
	(canvas_size_request): correctly handle when borders should be
	drawn

	* gal/e-text/e-completion-view.c (e_completion_view_paint): fix a
	small bug in the drawing-2-pixel-border change to my patch

2001-06-06  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c:
	* gal/e-text/e-completion-view.c: Applied patch from Jacob Berkman
	to un-offset the completion popup and add a border around it.  I
	tweaked it slightly to make the border two pixels thick instead of
	one.  (Which I like, but might annoy everyone else.  We'll see.)
	

2001-06-05  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-entry.c: Small changes throughout to use
	ECompletionMatch.

	* gal/e-text/e-completion-view.c: Small changes throughout
	to use ECompletionMatch.

	* gal/e-text/e-completion.c: Small changes throughout to use
	ECompletionMatch.

	* gal/e-text/e-completion-match.h:
	* gal/e-text/e-completion-match.c: Added.  A struct to contain
	completion matches.  This lets us more easily pass around
	information between the various bits of completion machinery.

2001-06-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.8.99.2.

2001-06-03  Jon Trowbridge  <trow@ximian.com>

	* gal/unicode/gunicode.h: Added function prototypes for
	our new g_utf8_strfoo functions.

	* gal/unicode/gutf8.c (g_utf8_strcasecmp): Added.  A UTF-8 version
	of g_strcasecmp.
	(g_utf8_strncasecmp): Added.  A UTF-8 version of g_strncasecmp.
	(g_utf8_strdown): Added.  A UTF-8 version of g_strdown.
	(g_utf8_strup): Added.  A UTF-8 version of g_strup.
	(g_utf8_strtitle): Added.  This would be a UTF-8 version of
	g_strtitle, if g_strtitle existed.

2001-05-31  jacob berkman  <jacob@ximian.com>

	* gal/e-text/e-entry.c (e_entry_init): set allow_newlines on the
	etext item to false, since we are like an entry

2001-05-31  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c (e_charset_picker_new): Swap
	arguments to "activate" so the right widget gets the right other
	widget set as object data on it.

2001-05-30  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c (e_charset_picker_new, etc): Redo
	so this returns a GtkMenu rather than a GtkOptionMenu.

	* configure.in: bump to 0.8.99.1

2001-05-29  Jason Leach  <jleach@ximian.com>

	* docs/etablexml.txt: Added a documentation note to the ETable
	specification about alternating-row-colors being a valid
	attribute (code I wrote weeks ago).

2001-05-25  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/e-font.c: #include <stdlib.h>
	* gal/widgets/e-popup-menu.c: #include <string.h>. Kill warnings.
	

2001-05-25  Duncan Mak  <duncan@ximian.com>

	* gal/e-paned/e-hpaned.c (e_hpaned_xor_line): Ported Ramiro's
	double line trick back to GAL. Did some tinkering around with
	Chris and made it draw each of the two lines twice, with
	cris-cross dashes.

	* gal/e-paned/e-vpaned.c (e_vpaned_xor_line): The same.

2001-05-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-vpaned.c: Fixed some
	indenting.

2001-05-25  Duncan Mak  <duncan@ximian.com>

	* gal/e-paned/e-paned.h (struct _EPaned): Added new data members
	to handle click-to-snap stuff. Ported from Ramiro's
	nautilus-horizontal-splitter.[ch] for eel and nautilus.

	* gal/e-paned/e-hpaned.c (e_hpaned_button_press): make it handle
	click-to-snap, ported from eel.
	(e_hpaned_button_release): ditto.
	(e_hpaned_toggle_position): new function to do click-to-snap, runs
	internal functions e_hpaned_expand and e_hpaned_collapse. Also from
	eel.

	* gal/e-paned/e-vpaned.c (e_vpaned_button_press): same as what i
	did to EHPaned.
	(e_vpaned_button_release): ditto.
	(e_vpaned_toggle_position): ditto.

2001-05-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.99.0.  Bumped
	GAL_CURRENT to 8 and GAL_REVISION back to 0.

2001-05-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.0.1.  Bumped
	GAL_REVISION to 1.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* README: Added a line about contributed code license and such
	here.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (model_changed): Killed a warning here.
	(model_changed, items_inserted): Check if we're empty.

2001-05-18  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c: New routines to create an option
	menu of character sets.

	* gal/widgets/test-charset-picker.c: and a test program

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES,
	(libwidgetsinclude_HEADERS): add e-charset-picker stuff

	* gal/Makefile.am (libgal_la_LIBADD): and here too. Love that
	wacky build system.

	* configure.in: bump to 0.7.99.6

2001-05-14  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (calc_line_widths): Validate utf8 to avoid
	lock-ups.
	(_get_position): Validate utf8 to avoid lock-ups.

2001-05-14  Almer S. Tigelaar  <almer@gnome.org>

	* configure.in : Bumped version number to 0.7.99.5.
	
	* gal/gal/widgets/color-group.[ch] : Remove change signal and
	add new custom_color_add signal.
	(color_group_add_color): emit custom_color_add signal,
	remove custom flag.
	(color_group_class_init): Cope for new and removed signal.
	(color_group_init): Cope for removed notion of current color and
	new history mechanism.
	(color_group_most_recent_color): Remove.
	(color_group_oldest_color): Remove.
	(color_group_next_color): Remove.
	(color_group_previous_color): Remove.
	(color_group_set_history_size): Revise for new history mechanism.
	(color_group_fetch): Idem.
	(color_group_destroy): Idem.

	* gal/gal/widgets/color-palette.[ch]: Add by_user flag to
	change signal.
	(emit_change): Add by_user flag, remove tell_group signal and 
	simplify call to color_group_add_color.
	(color_clicked): Adjust for by_user flag.
	(cb_nocolor_clicked): Idem.
	(cust_color_set): Idem.
	(cb_group_color_change): Remove.
	(cb_group_custom_color_add): New, adjust the palette if a new
	custom color was added to the grup.
	(color_in_palette): Check if a color is in the standard palette.
	(color_palette_new_with_vals): Init default set.
	(color_palette_construct): Remove passing of set, take from palette.
	(color_palette_set_current_color): New, programatically set current
	color and remember it. Add color to custom colors if it's not in
	the palette.
	(color_palette_get_current_color): Return remembered current color.
	(marshal_NONE__POINTER_BOOL): Add extra _BOOL.
	(color_palette_finalize): Free current color.
	(color_palette_new_with_vals): Init current color.
	(color_palette_set_group): Don't connect change signal to colorgroup
	it no longer exists. Instead connect the custom_color_add signal to
	cb_group_custom_color_add.
	
	* gal/gal/widgets/widget-color-combo.[ch]: Add by_user flag to
	change signal.
        (emit_change): Add by_user flag.
	(cb_color_change): Adjust for by_user flag.
	(preview_clicked): Idem and free color using gdk_color_free.
	(color_combo_set_color): Use color_palette_set_current_color.
	(marshal_NONE__POINTER_BOOL): Define new marshaller.
	(color_combo_class_init): Use new marshaller to cope for added
	by_user boolean signal flag.
	(color_combo_set_color_internal): Change the color without
	triggering any other signals.
	(color_combo_get_color): Get current color.
	(color_combo_set_color): Set the color on the palette.
	(color_combo_construct): Idem.

2001-05-09  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.7.99.4.

2001-05-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.7.99.3.

2001-05-07  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized):
	write what was converted to console, this function does not work
	always.
	(e_utf8_gtk_editable_get_chars),
	(e_utf8_gtk_menu_item_new_with_label): removed some unneeded checks.
	(e_xml_get_translated_utf8_string_prop_by_name): if i.e. "title"
	was found, do not convert it to utf8 -- it already is. do this
	only on "_title".

2001-05-07  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-text.c (e_text_reflow): Request an update if just
	our line widths needed recalculation.  This fixes the bug where
	the text item would not repaint itself if the canvas lost the
	focus.

2001-05-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added util/e-sorter-array.lo
	and widgets/e-reflow-model.lo.  Removed
	widgets/e-reflow-sorted.lo.

	* gal/util/Makefile.am (libutil_la_SOURCES): Added
	e-sorter-array.c.
	(libgalinclude_HEADERS): Added e-sorter-array.h.

	* gal/util/e-sorter-array.c, gal/util/e-sorter-array.h: A sorter
	for use with a single compare function to do sorting.

	* gal/util/e-util.c, gal/util/e-util.h
	(e_marshal_INT__OBJECT_POINTER): Added this marshaller.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-reflow-model.c.  Removed e-reflow-sorted.c.
	(libwidgetsinclude_HEADERS): Added e-reflow-sorted.h.  Removed
	e-reflow-model.h.

	* gal/widgets/e-reflow-model.c, gal/widgets/e-reflow-model.h:
	Model for EReflow.  Has a number of items and generates canvas
	items on the fly.

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Major rewrite.
	This now uses a model to generate its canvas items instead of
	having canvas items added to it.  It doesn't create the canvas
	items now until they will be shown on screen.

2001-05-04  Jon Trowbridge  <trow@gnu.org>

	* configure.in: Added a "pessimistic default" to the iconv check
	for cross-compiling.  (I hate seeing that warning about AC_TRY_RUN
	every time I run autoconf...)

	* gal/unicode/gutf8.c: Added macros for conditionally checking
	that function inputs are valid utf-8.
	(g_utf8_find_prev_char): Added utf8_check.
	(g_utf8_strlen): Added utf8_check.
	(g_utf8_offset_to_pointer): Added utf8_check.
	(g_utf8_pointer_to_offset): Added utf8_check.
	(g_utf8_strncpy): Added utf8_check.
	(g_utf8_strchr): Added utf8_check.
	(unicode_strrchr): Added utf8_check.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Made fewer calls to functions like
	split_into_lines to save time when possible.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h:
	Made sorting happen in an idle loop when there are lots of adds.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-dialog-model.lo and
	widgets/e-categories-master-list-dialog.lo here.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	widgets/e-categories-master-list-dialog-model.c and
	widgets/e-categories-master-list-dialog.c here.
	(libwidgetsinclude_HEADERS): Added
	widgets/e-categories-master-list-dialog-model.h and
	widgets/e-categories-master-list-dialog.h here.
	(glade_DATA): Added e-categories-master-list-dialog.glade here.

	* gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog-model.h: New class
	defining an ETableModel for use in
	e-categories-master-list-dialog.c.

	* gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories-master-list-dialog.glade,
	gal/widgets/e-categories-master-list-dialog.h: New dialog for
	editing the master category list.

	* gal/widgets/e-categories.c: Added code to hook up the edit
	master category list button here to launch an
	e-categories-master-list-dialog.

	* gal/widgets/gal-categories.glade: Added a button here to edit
	the master category list.

2001-04-26  Dan Winship  <danw@ximian.com>

	* configure.in: Remove check for libunicode and remove
	UNICODE_CFLAGS and UNICODE_LIBS from galConf.sh

2001-04-24  Dan Winship  <danw@ximian.com>

	* configure.in: Bump to 0.7.99.2 (e_{table,tree}_get_cell_geometry)

2001-04-23  Dan Winship  <danw@ximian.com>

	* configure.in: bump to 0.7.99.1, add gal/unicode/Makefile. gal no
	longer internally depends on libunicode, although it will continue
	to configure against it until gtkhtml/evolution are ported too.

	* gal/Makefile.am (nonui_subdirs): add unicode
	(libgal_la_LDFLAGS): remove $(UNICODE_LIBS)
	(libgal_la_LIBADD): add unicode/*.lo

	* gal/unicode/*: unicode handling code copied nearly verbatim from
	glib 2.0, plus gal build glue.

	* gal/e-text/Makefile.am (INCLUDES): Remove UNICODE_CFLAGS
	(e_text_test_LDADD, e_entry_test_LDADD, e_text_model_test_LDADD,
	e_completion_test_LDADD): remove -lunicode, add libunicode.la

	* gal/e-text/e-text.c: Remove <unicode.h>, use gunicode functions.

	* gal/widgets/Makefile.am (libwidgets_la_LDFLAGS): remove
	UNICODE_LIBS
	(INCLUDES): remove UNICODE_CFLAGS
	(test_e_font_LDADD, test_font_loading_LDADD): add libunicode.la

	* gal/widgets/e-unicode.h: #include <gal/unicode/gunicode.h>.
	Remove some cruft.

	* gal/widgets/e-unicode.c: remove <unicode.h>, use gunicode
	functions. Add e_unicode_get_utf8 to replace some uses of
	unicode_get_utf8, which isn't quite the same as any gunicode
	function.

	* gal/widgets/e-font.c: remove <unicode.h>, use gunicode functions

	* tests/Makefile.am (INCLUDES): Remove UNICODE_CFLAGS
	(LDADD): Remove UNICODE_LIBS

2001-04-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c: Added #include <stdlib.h>.

2001-04-20  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-test.c: Limit total matches, for better
	performance on slow machines.  It is supposed to be a test, so
	correctness of the completion operations isn't really a
	priority...

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Set GTK_CAN_FOCUS flag.

	* gal/e-text/e-entry.c (e_entry_show_popup): Evil! Evil! Unclean!
	Unclean!  Manually check if the pointer is in the area where the
	popup is going to appear, and if it is, warp the pointer out of
	the way.  After days of fucking around, this horrible hack is the
	only way that I've been able to figure out to keep the focus from
	being taken away from the entry and ending up somewhere strange
	when the popup pops up.  (The main problem is with the case of
	focus-follows-cursor --- click-to-focus works fine.  Sawfish
	idiocincracies may also be causing problems, but I don't want to
	unjustly accuse the WM of anything, as tempting and appealing as
	that can be.)
	(key_press_cb): Proxy for forwarding the popup's key press events
	to the entry.
	(key_release_cb): Proxy for forwarding the popup's key release
	events to the entry.
	These proxies should be enough to take care of my focus problems.
	Unfortunately, they aren't, and the pointer-warping-focus-horror
	is required for reasons that I don't fully understand.

	* gal/e-text/e-text.c (_get_xy_from_position): Made
	_get_xy_from_position return a boolean.  It returns TRUE if the
	computation was successful
	(and if valid data is now in *xp and *yp), FALSE otherwise.  Make
	sure that text->lines is not NULL, and return FALSE if it is.
	(_get_position): Test that _get_xy_from_position returns TRUE
	before using the values in x and y.
	(_get_position): Test that _get_xy_from_position returns TRUE
	before using the values in x and y.
	Garbage values being returned in passed-in pointers created a race
	condition where you could hang an EText if you deleted the entire
	contents of the buffer really quickly.

2001-04-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/.cvsignore: Typo.  s/text-color/test-color/

2001-04-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h
	(e_categories_master_list_array_from_string,
	e_categories_master_list_array_to_string): Added these functions.

2001-04-16  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/color-palette.c (color_palette_set_group) : Implement.
	(color_palette_finalize) : use it here.
	(color_palette_new_with_vals) : and here.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed some comments here.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-array.lo and
	widgets/e-categories-master-list.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	widgets/e-categories-master-list-array.c and
	widgets/e-categories-master-list.c.
	(libwidgetsinclude_HEADERS): Added
	widgets/e-categories-master-list-array.h and
	widgets/e-categories-master-list.h.

	* gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h,
	gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h: Added
	ECategoriesMasterList and a simple local implementation of it.

	* gal/widgets/e-categories.c, gal/widgets/e-categories.h:
	Privatized this.  Switched to using ECategoriesMasterList.
	(table_right_click): Added a right click menu to add and remove
	things to and from the global category list.

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h: Fixed some
	comments and formatting.

	* gal/widgets/e-popup-menu.h (E_POPUP_SEPARATOR,
	E_POPUP_TERMINATOR): Added these #defines.

2001-04-15  Jody Goldberg <jgoldberg@home.com>

	* configure.in: Upped the version number to 0.7.99.0.

	* gal/widgets/Makefile.am : add test-color.

	* gal/widgets/test-color.c (main) : update.

	* gal/widgets/color-group.c (color_group_new_named) : add a context
	  pointer to manage multiple instances of the same conceptual group
	  in different instances.  eg the foregroup colour groups for windows
	  editing different documents should be different.
	(create_unique_name) : Adjust signature.
	(color_group_from_name) : ditto, Use the cg as the key, not just name.
	(color_group_destroy) : ditto.
	(color_group_new_named) : ditto.
	(cg_hash) : new function.
	(cg_cmp) : new function.
	(initialize_group_names) : used here.

	* gal/widgets/color-palette.c (color_palette_new) : Take a
	  ColorGroup directly rather than a ColorGroup name.
	(color_palette_new_with_vals) : ditto.

	* gal/widgets/widget-color-combo.c (color_table_setup) : Take a
	  ColorGroup directly rather than a ColorGroup name.
	(color_combo_construct) : Ditto.
	(color_combo_new) : Ditto.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.7.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (tooltip_event): Propagate the event after
	sending it to the base EText.

2001-04-15  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_real_add_item): Do
	not ref both the box and the item; just connect to the item's
	"destroy" signal.
	(e_canvas_vbox_remove_item): Do not unref the box.
	(e_canvas_vbox_destroy): Disconnect from the items.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Added strikeout
	argument.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (tooltip_event): Use e_canvas_hide_tooltip
	and e_canvas_popup_tooltip.  Set bold on the tooltip.

	* gal/widgets/e-canvas.c, gal/widgets/e-canvas.h: Added
	e_canvas_popup_tooltip and e_canvas_hide_tooltip.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Added "bold" argument.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Made setting the rgba color work even if
	you're using the non-aa canvas (except for the a.)

2001-04-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added widget/e-hsv-utils.lo.

	* gal/widgets/Makefile.am: Added e-hsv-utils.c and e-hsv-utils.h.

	* gal/widgets/e-hsv-utils.c, gal/widgets/e-hsv-utils.h: Moved from
	gal/e-table/e-table-hsv-utils.c and
	gal/e-table/e-table-hsv-utils.h.  Handle modifying hue saturation
	and value of colors.

2001-04-13  Mikael Hallendal  <micke@codefactory.se>

	* gal/Makefile.am (libgal_la_LIBADD): 
	  Added e-table/e-cell-spin-button.lo
	  Added e-table/e-cell-float.lo

	* gal/util/e-util.[ch] 
	(e_format_number_float): 
  	  Added function to format floats. Uses e_format_number for the 
	  integer part.
	(e_marshal_NONE__POINTER_INT_INT_INT): Added used by 
	  gal/e-table/e-cell-spin-button.c

2001-04-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c
	(e_selection_model_do_something): Always emit the cursor changed
	signal.  Even if it's changed to the same row/column.

2001-04-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.6.99.0.  Upped the
	so number to 6.

	* docs/etablexml.txt: Made some updates here.

	* tests/test-tree-1.c, tests/test-tree-3.c: Added NULL, NULL to
	the call to e_tree_memory_callbacks_new.

2001-04-10  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-unicode.c (e_utf8_*_*_string): if (!string) return NULL;
	to avoid crashes in strlen(NULL). TODO: need g_strlen which does that.

2001-04-10  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-paned/e-paned.c (e_paned_style_set): Only do things with
	the widget windows if you are actually realized.

2001-04-10  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped version number to 0.6.

2001-04-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_xml_get_translated_utf8_string_prop_by_name): New function to
	translate a string and then convert it to utf8.  Acts just like
	e_xml_get_translated_string and then calls
	e_utf_from_locale_string on it.

	* gal/util/e-xml-utils.c: Changed e_xml_get_translated_string to
	take a string with no underscore at the beginning and search for
	both that prop and the same prop with the underscore prepended.
	If it finds it without the underscore, it returns it.  If it finds
	it with the underscore, it translates.

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Reformatted
	these a bit.

2001-04-07  Dan Winship  <danw@ximian.com>

	* tests/test-tree-3.c (INITIAL_SPEC): add a missing \

	* gal/e-text/e-text.c (_get_position_from_xy): Add a "break;" to
	an otherwise-empty default case to make it ANSI.

2001-04-06  Larry Ewing  <lewing@ximian.com>

	* gal/e-paned/e-paned.c (e_paned_style_set): handle style changes
	properly.
	(e_paned_class_init): use e_paned_style_set.

2001-04-05  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-popup-menu.c: Copied gnome_app_helper_gettext function
	here, and use it for translating menu names (they are passed from app as
	well as from gal in arrays with N_(), and domains differ).

2001-04-04  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/e-text/e-entry.c: Fix headers.
	* gal/e-text/e-table-text-model.[ch]: Ditto.
	* gal/e-text/e-table-text-model-uri.c: Ditto.
	* gal/e-text/e-text-model-uri.[ch]: Ditto.
	* gal/e-text/e-text-model.[ch]: Ditto.
	* gal/e-text/e-text.[ch]: Ditto.
	* gal/util/e-text-event-processor-emacs-like.[ch]: Ditto.
	* gal/util/e-text-event-processor.[ch]: Same.
	* gal/util/e-util.h: Ditto.
	* gal/util/e-xml-utils.[ch]: Same here.
	* gal/widgets/color-group.[ch]: Ditto.
	* gal/widgets/color-palette.[ch]: Ditto.
	* gal/widgets/e-canvas-utils.h: Ditto.
	* gal/widgets/e-canvas-vbox.[ch]: Ditto.
	* gal/widgets/e-canvas.[ch]: Ditto.
	* gal/widgets/e-categories.h: Ditto.
	* gal/widgets/e-colors.[ch]: Ditto.
	* gal/widgets/e-cursors.c: Ditto.
	* gal/widgets/e-gui-utils.c: Ditto
	* gal/widgets/e-popup-menu.[ch]: Same.
	* gal/widgets/e-reflow-sorted.c: Same.
	* gal/widgets/e-reflow.[ch]: Same.
	* gal/widgets/e-selection-model.c: Same
	* gal/widgets/e-unicode.[ch]: Same.
	* gal/widgets/gtk-combo-stack.[ch]: Same.
	* gal/widgets/widget-color-combo.[ch]: Same.
	* gal/widgets/widget-pixmap-combo.[ch]: Same.

2001-04-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added
	e_selection_model_cursor_activated.

2001-04-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model-uri.c, gal/e-text/e-text.c,
	gal/e-text/e-text.h, gal/e-text/e-text-event-processor.c,
	gal/util/e-xml-utils.c, gal/widgets/e-cursors.c,
	gal/widgets/e-cursors.h: Fixed headers.  Moved the .h associated
	with each .c to the top of the list of included files.

	* gal/util/e-util.h: Removed the bonobo-xobject.h header here.

	* gal/util/e-xml-utils.c: Replaced strcasecmp with g_strcasecmp.

	* gal/widgets/e-canvas-vbox.c: Make this work even if the item is
	destroyed after the vbox.

	* gal/widgets/e-categories.c (do_parse_categories): Made this
	translate using e_utf8_from_locale string as it should.

2001-04-02  Rusty Conover  <rconover@zootweb.com>

	* gal/util/e-util.c (e_format_number): Fixed this function to
	properly format numbers that have leading zeros in sub groups.
	Case in point 3042423 should now come out as 3,042,423 not
	3,42,423.

2001-04-02  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/gal-categories.glade.h: removed.
	* gal/widgets/gal-categories.glade: do not save strings.
	* gal/widgets/Makefile.am: update.

2001-04-01  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-categories.c: replaced glade_xml_new with
	glade_xml_new_with_domain. wrapped every category name in N_() and
	call _() where appriopriate, fixes #2029.
	* gal/widgets/e-popup-menu.c: call gettext on every menu item. Works
	only on popup menus of gal, not evolution (different domain).

2001-04-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-tree-selection-model.lo.

2001-03-31  Jon Trowbridge  <trow@ximian.com>

	* gal/util/e-util.c (g_str_compare): Handle NULL args
	semi-gracefully.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* tests/.cvsignore: .cvsignore fix.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* tests/Makefile.am: Added test-table-1.

	* tests/test-table-1.c: A test and example of ETable usage.

	* tests/test-tree-1.c, tests/test-tree-2.c: Added \ before line
	break in string.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-bit-array.c, gal/util/e-bit-array.h: Added
	e_bit_array_cross_and and e_bit_array_cross_or.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): Removed
	g_print here.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* tests/test-tree-1.c (create_tree): Test ETreeScrolled here
	instead of just ETree.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): This really
	should be > instead of >= since we want the scrollbar to not show
	up when the contents just fit within the window.

2001-03-29  Radek Doulik  <rodo@ximian.com>

	* configure.in: raised version to 0.5.99.13

	* gal/widgets/widget-color-combo.c (color_combo_set_color):
	exported set_color function

2001-03-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added util/e-bit-array.lo.

	* gal/util/Makefile.am: Added e-bit-array.c and e-bit-array.h.

	* gal/util/e-bit-array.c, gal/util/e-bit-array.h: New class
	containing the implementation of the bit array used in
	e-selection-model-array.

	* gal/widgets/e-selection-model-array.c,
	e-selection-model-array.h: Refactored the bit array implementation
	into a separate class.

	* gal/widgets/e-selection-model-simple.c: Changed how it clears
	the bit array of the ESelectionModelArray parent class.

	* gal/widgets/e-selection-model.h: Added code to make the
	declaration of EForeachFunc only get included once.

2001-03-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-selection-model-array.lo.

	* gal/widgets/Makefile.am: Added e-selection-model-array.c and
	e-selection-model-array.h.

	* gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h: New class that implements
	the details of ESelectionModel.  ESelectionModel has been
	refactored to just be a this virtual class.  ESelectionModelArray
	is the original implementation of ESelectionModel.  This is what
	most people will want to use or derive from.

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: Made the parent class of
	this be ESelectionModelArray instead of ESelectionModel.  Changed
	some function names to match this change.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Refactored most of the
	implementation of this class into ESelectionModelArray.  Now just
	a thin virtual class.

2001-03-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.12.

2001-03-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.11.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-memory-callbacks.lo and e-table/e-table-memory.lo.

	* configure.in: Bumped the version number to 0.5.99.10.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.9.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_marshal_INT__INT_POINTER_INT_POINTER,
	e_marshal_BOOL__INT_POINTER_INT_POINTER_INT_INT_INT): Fixed the
	GTK_RETLOC calls for these marshallers.

2001-03-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.8.

	* Merged branch:

2001-03-18  Miguel de Icaza  <miguel@ximian.com>

	* tests/test-tree-1.c (create_tree): Set the size of the thing to
	a decent value that lets us test stuff. 

2001-03-18  Marius Andreiana  <mandreiana@yahoo.com>

	* configure.in: Added ro (Romanian) to ALL_LINGUAS

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added another semi-private
	function (e_selection_model_change_cursor.)

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added a couple of semi-private
	functions (e_selection_model_change_one_row and
	e_selection_model_confirm_row_count.)

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* tests/test-tree-1.c, tests/test-tree-3.c: Added arguments for
	e_tree_memory_callbacks_new of get_save_id and has_save_id to
	NULL.

2001-03-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_sort): Switched to just using qsort
	directly here.

2001-03-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_bsearch, e_sort): Added e_sort and
	e_bsearch.  They both take a closure.  e_sort guarantees a stable
	sort.  e_bsearch returns the range of matching elements including
	the position where an object would be if there are no matching
	elements.

2001-03-16  Miguel de Icaza  <miguel@ximian.com>

	* gal/e-text/e-entry.h: Expose the canvas/item that used to be
	public and that were privatized.

2001-03-16  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/widget-pixmap-combo.h: Comment out text after #endif.
	* gal/e-text/e-completion.c: Add #include <string.h> for strcmp().
	

2001-03-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-tree-sorted.lo.

2001-03-15  Matthew Wilson  <msw@redhat.com>

	* gal.spec.in (%files devel): the -devel package must own the
	/usr/include/gal directory and all its contents

2001-03-15  Dan Winship  <danw@ximian.com>

	* configure.in: Bump to 0.5.99.7

	* gal/widgets/e-canvas.c (e_canvas_item_grab_focus): Make this
	take an extra argument saying whether or not to grab the
	widget-level focus.

	* gal/e-text/e-text.c (e_text_event): Update arguments to
	e_canvas_item_grab_focus.

2001-03-14  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/widget-color-combo.h: Comment out text after #endif.
	* gal/widgets/color-group.h: Comment out text after #endif.
	* gal/widgets/color-palette.h: Same here.
	

2001-03-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: Replaced the methods
	insert_row and delete_row with insert_rows and delete_rows.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Replaced the methods insert_row
	and delete_row with insert_rows and delete_rows.

2001-03-13  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_unichar_to_utf8): Rename this from
	g_unichar_to_utf8 so that it doesn't conflict with the function of
	that name exported by gnome-print (and so that it's consistent
	with all of the other functions in the file).

2001-03-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_point): Made this function do
	something a little closer to what it is supposed to do.

2001-03-12  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text-model.c (e_text_model_real_insert_length):
	Renamed "temp" as "new_text", to avoid confusion.
	(e_text_model_real_delete): Renamed "temp" as "new_text", to avoid
	confusion.

2001-03-11  Timur Bakeyev  <timur@gnu.org>

	* gal/util/e-xml-utils.c: Added condition and fallback to LC_CTYPE
	if system doesn't define LC_MESSAGES. Usage of LC_CTYPE to determine
	language is hackish and questionable, then... Still, gives nice re-
	sults if there is no other ways to get that value.
	

2001-03-08  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am: Added e-table/e-table-utils.lo,
	e-table/e-tree-memory-callbacks.lo, e-table/e-tree-memory.lo,
	e-table/e-tree-scrolled.lo, e-table/e-tree-table-adapter.lo, and
	e-table/e-tree.lo.  Removed e-table/e-tree-simple.lo.

	* gal/util/e-util.c, gal/util/e-util.h: Added a whole bunch of
	e_marshal functions for ETree.

	* tests/test-tree-1.c, tests/test-tree-3.c: Reworked these to use
	the new tree stuff.

End of branch

2001-03-07  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version number to 0.5.99.6 due to the new
	`e_table_get_cell_at()' call.

2001-03-06  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-entry.c (e_entry_text_keypress): Added.  This is
	part of a change of sematics that makes things much nicer for the
	user --- auto-activate the completion popup only on keypresses
	than also change the entry.
	(e_entry_proxy_changed): Record that the underlying EText has
	changed, and set up a timeout to clear the changed_since_keypress
	flag in a very short amount of time.
	(e_entry_init): Connect to the EText's "keypress" signal".
	(e_entry_destroy): If our completion_delay_tag timeout is still
	floating around out there when we are winding things down, remove
	it.

	* gal/e-text/e-text.c (e_text_class_init): Added keypress signal.
	(e_text_text_model_reposition): Removed some old cruft.
	(e_text_event): Emit our keypress signal after handling events of
	type GDK_KEY_PRESS.

2001-03-05  Jon Trowbridge  <trow@gnu.org>

	* configure.in: Set version number to 0.5.99.5

	* gal/e-text/e-entry.c (e_entry_class_init): Add a "popup" signal.
	If you have trepidations about this, see the technical argument
	below.
	(e_entry_init): Connect to the EText's popup signal.
	(e_entry_proxy_popup): Proxy emitter for popup signals from the
	EText.

	* gal/e-text/e-text.c (e_text_class_init): Added a "popup" signal.
	(e_text_event): Emit the "popup" signal on right-clicks.  Now you
	could ask yourself: "should there be a signal named 'popup' in
	EText that gets emitted on right-clicks?"  And this is a
	reasonable question, since... well, this has a funny feeling to
	it.  But the whole point of GNOME, or at least one of the original
	points of GNOME, was to impose policy in a reasonable way when it
	made sense in order to simplify the user's experience.  Convention
	dictates that popup menus are tied to right-clicks --- so rather
	than setting up some elaborate forwarding of button-press signals,
	why not just impose a little policy and set up a signal that is
	closely tied to a familiar set of semantics?  Maybe it isn't the
	best thing to do from a aesthetics-of-the-API point of view, but I
	doubt anyone could condemn it as being anything more than mostly
	harmless.

2001-03-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.4.

	* gal/e-text/e-text.c (e_text_draw): Fixed a crash here.

2001-03-01  Vladimir Vukicevic  <vladimir@ximian.com>

	* gal/Makefile.am: added e-cell-pixbuf.lo

2001-03-01  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Boost version number to 0.5.99.3.

	* gal/e-text/e-entry.c (e_entry_show_popup): Grab pointer when the
	popup is visible, and then hide the popup if any button press
	events occur outside of the popup.  This lets up avoid most of the
	worst "floating popup" cases that would occur if windows are
	moved, desktops changed, etc. with the mouse.  (Doing things like
	changing desktop w/ keybindings can still cause a "floating
	popup", but that is also true of Gtk's own combo box.)  Change
	popup positioning to slightly offset it from the entry, rather
	than just plopping it down directly below.
	(button_press_cb): Determine if a button press occured outside of
	the popup when the pointer was grabbed, and unbrowse accordingly.

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): Improve keystroke handling.
	Allow Tabs to pass through (after hiding the pop-up) in order to
	allow focus change requests to work properly.
	(e_completion_view_construct): Disable horizontal scrollbars.

	* gal/e-text/e-completion-test.c (main): Reworked to use signals
	instead of explicit callbacks.

	* gal/e-text/e-completion.h:
	* gal/e-text/e-completion.c: Fix the awkward mix of signals and
	explicitly-specified callbacks by taking out the explicit
	callbacks.  This approach is more gtk-ish, after all.

	

2001-03-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.2.

2001-03-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-selection-model-simple.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added e-selection-model-simple.c.
	(libwidgetsinclude_HEADERS): Added e-selection-model-simple.h.

	* gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h:
	Added a gint *position argument to e_reflow_sorted_remove_item and
	e_reflow_sorted_get_item and two gint * arguments to
	e_reflow_sorted_replace_item and e_reflow_sorted_reorder_item to
	return the positions in the array of the items removed, gotten, or
	moved.

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Added a gint
	*position argument to e_reflow_sorted_add_item to return the
	positions in the array of the item added.

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: New class implementing a
	simple selection model that you add rows to and remove rows from.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added e_selection_model_move_row.

2001-02-27  Miguel de Icaza  <miguel@ximian.com>

	* gal/widgets/e-gui-utils.c (e_popup_menu): Make this more robust:
	do not assume that the GdkEvent will be either a GdkEventButton of
	some sort or a GdkEventKey: deal gracefully with other possible
	conditions. 

2001-02-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c: Changed
	e_table_selection_model_clear to e_selection_model_clear.

	* tests/test-tree-3.c: Changed E_TABLE_CURSOR_LINE to
	E_CURSOR_LINE.

2001-02-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added e-sorter.lo and e-selection-model.lo.

	* gal/util/Makefile.am: Added e-sorter.c and e-sorter.h.

	* gal/util/e-sorter.c, gal/util/e-sorter.h: New class.  This is a
	new simple virtual class for use with ESelectionModel.  It
	implements the same set of methods as ETableSorter but the default
	behavior is as if the sorting was a no-op.

	* gal/widgets/Makefile.am: Added e-selection-model.c and
	e-selection-model.h.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: New class.  Implements all of the
	semantics of ETableSelectionModel except for the connection to the
	ETableModel.

2001-02-25  Damon Chaplin  <damon@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): added e-cell-popup.lo and
	e-cell-combo.lo

2001-02-24  Michael Meeks  <michael@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): use >=
	instead of > on hsb / vsb visibilty calculation, to determine
	whether we should queue a re-size. Possibly should use >= for
	resize, but > for visilibity ?

2001-02-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-sorting-utils.lo.

2001-02-21  Michael Meeks  <michael@ximian.com>

	* gal/util/e-util.h (E_MAKE_X_TYPE): implement.

2001-02-19  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Added.
	Allows you to attach an ECompletion to an EEntry, and have that
	ECompletion be used for (obviously enough) completions.

	* gal/e-text/e-completion-view.h, gal/e-text/e-completion-view.c:
	Added.  ECompletionView is a widget for displaying the results of
	a completion request in a format that is appropriate for a
	drop-down window.

	* gal/e-text/e-completion.h, gal/e-text/e-completion.c: Added.
	ECompletion is a "pure virtual base class" for completion-type
	operations.  It is implemented so that completions can be either
	synchronous or asynchronous.

	* gal/e-text/e-text.c: Lots of changes to accomodate the
	ETextModel changes.  First of all, we render embedded text objects
	as being underlined.  We also cause the model to emit the
	appropriate object activation signal when an embedded object is
	double-clicked.  Also, all of the code that moves the cursor in
	response to user input has been removed.  Instead, the EText now
	listens for "reposition" events from the underlying model, and
	bases all cursor motions on those.
	(get_bounds_item_relative): Fixed bug in the handling of
	differently-anchored text.  Being differently-anchored is not a
	crime or a perversion --- it is an alternative lifestyle that we
	have to respect.

	* gal/e-text/e-text-model-uri.h, gal/e-text/e-text-model-uri.c: A
	sample ETextModel that converts URIs into embedded objects that
	get opened in the browser when you double-click them.

	* gal/e-text/e-text-model-repos.h,
	gal/e-text/e-text-model-repos.c: Added.  A group of simple
	structures & functions for handling various cursor movement rules.
	These are the sorts of things that are passed as arguments to
	ETextModel "reposition" event handlers.

	* gal/e-text/e-text-model.h, gal/e-text/e-text-model.c: Privitized
	the ETextModel struct and "methodized" all of the operations, so
	that derived classes can do arbitrarily respond to get/set
	requests in arbitrarily strange ways.  Also added the concept of
	declaring regions of the text as "embedded text objects".
	Finally, caused operations that change the text to emit a
	"reposition" signal that passes information that can be used by a
	view (like an EText) to move the cursor or selection in an
	intelligent way in response to those changes.  This means that you
	can now open two ETexts that look at the same ETextModel, and have
	the cursor in one do the right thing when you edit the other.  (As
	opposed to producing a lot of potential segfaults, as it was
	before.)


2001-02-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed the version number to 0.5.99.1.

	* gal/Makefile.am (libgal_la_LIBADD): Change the directories for
	e-table-text-model.lo, e-text-event-processor.lo, and
	e-text-event-processor-emacs-like.lo.  Reordered the e-text
	directory to be after the e-table directory in build order.

	* gal/e-text/Makefile.am: Removed
	e-text-event-processor-emacs-like.c,
	e-text-event-processor-emacs-like.h,
	e-text-event-processor-types.h, e-text-event-processor.c, and
	e-text-event-processor.h.  Added e-table-text-model.c and
	e-table-text-model.h.

	* gal/e-text/e-table-text-model.c: Changed the signature of these
	mehtods to match the changed signature in ETextModel.

	* gal/e-text/e-text-event-processor-emacs-like.c,
	gal/e-text/e-text-event-processor-emacs-like.h,
	gal/e-text/e-text-event-processor-types.h,
	gal/e-text/e-text-event-processor.c,
	gal/e-text/e-text-event-processor.h: Moved these to gal/util/.

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Changed the includes
	to match the moved files.

	* gal/util/Makefile.am: Added e-text-event-processor-emacs-like.c,
	e-text-event-processor-emacs-like.h,
	e-text-event-processor-types.h, e-text-event-processor.c, and
	e-text-event-processor.h.

	* gal/util/e-text-event-processor-emacs-like.h,
	gal/util/e-text-event-processor.h: Changed the includes to match
	the moved files.

2001-02-18  Rusty Conover  <rconover@zootweb.com>

	* gal/util/e-util.c (e_format_number): Fix it so that numbers
	containing inner zeros will be formatted correctly.  For instance
	the number 5005 when formatted was coming out as 5,5.  It now
	comes out at 5,005.

2001-02-17  Christopher James Lahey  <clahey@ximian.com>

	From a patch submitted by Murray Cumming <Murray.Cumming@mybau.com>

	* gal/util/e-util.h, gal/util/e-xml-utils.h,
	gal/widgets/e-canvas-utils.h, gal/widgets/e-colors.h,
	gal/widgets/e-cursors.h, gal/widgets/e-gui-utils.h,
	gal/widgets/e-popup-menu.h, gal/widgets/e-printable.h,
	gal/widgets/gtk-combo-stack.h: Added GNOME_DECLS.

2001-02-15  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.0.  Upped the
	so number to 5.

2001-02-14  Dan Winship  <danw@ximian.com>

	* gal/util/e-util.c (e_marshal_INT__POINTER_POINTER,
	e_marshal_INT__POINTER_POINTER_POINTER_POINTER): New marshallers

2001-02-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas-vbox.h: Made a
	width other than the default possible if the children have widths
	larger than the default.

2001-02-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h
	(e_canvas_item_show_area_delayed): Added this function.

2001-02-09  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_key): Since gdkevent is a
	union, casting a smaller struct to a gdkevent caused unknown
	memory to be copied around.  fix by copying to a full gdkevent
	structure before calling gdkevent.
	(e_canvas_focus_in): ditto
	(e_canvas_focus_out): ditto

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed the version number of gal to 0.5.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model-test.c (describe_model): Commented out
	this function since it's not being used.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/gal-categories.glade, gal/widgets/e-categories.c
	(ec_set_header): Added a "header" argument to set the label at the
	top of the dialog.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Don't handle C-Enter.

2001-02-07  Kjartan Maraas  <kmaraas@gnome.org>

	* Makefile.am: Added xml-i18n-* to EXTRA_DIST.
	* configure.in: Added AM_PROG_XML_I18N_TOOLS.
	

2001-02-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_realize): Store
	the whole GdkColor instead of just the pixel.

2001-02-06  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_to_native): okay, revert that
	brokeness from my last commit.
	(translate_encoding): don't convert to utf-16 that is definitely
	the wrong byte order, now match iso-10646-1 and do it properly.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-i18n.h: Added a comment.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_format_number,
	e_create_directory): Added e_format_number and e_create_directory.

2001-02-05  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_to_native): make sure the bytes of
	the multibyte font are in big endian order, this seems to be
	required by the XChar2b structure.

2001-02-05  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/e-text/.cvsignore: Added e-text-model-test

2001-02-05  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.h: Changed draw_borders from a gboolean to a
	a guint : 1.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-font.c (e_font_to_native), gal/widgets/e-unicode.c
	(e_utf8_from_gtk_string_sized, e_utf8_to_gtk_string_sized):
	Changed the call to iconv to be char ** instead of const char **.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c: Rearranged the includes here a bit.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-i18n.h: Added declarations for all the functions
	declared in gnome-i18n.h.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* tests/.cvsignore: Added test-define-views to this .cvsignore.

2001-02-04  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.4.99.8

2001-02-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-font.c, gal/widgets/e-font.h (e_font_to_gdk_font):
	Added this function.  It returns a reffed GdkFont based on the
	style passed in.

2001-02-02  Ettore Perazzoli  <ettore@ximian.com>

	* tests/Makefile.am (vfs_programs): Remove `test-tree-2'.  It
	doesn't build right now and it's breaking the daily snapshots.

2001-01-31  Radek Doulik  <rodo@ximian.com>

	* gal/e-text/e-entry.h: added gboolean draw_borders to make it
	compile, probably some forgotten commit of e-entry.h

2001-01-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Fixed
	allocation and placement of text for no bordered text.

2001-01-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Fixed
	allocation and placement of text window.

	* gal/e-text/e-text.c (e_text_draw): Fixed display of the text.

2001-01-30  Christopher James Lahey  <clahey@helixcode.com>

	* Reverted the latest change to EText since we're in feature freeze.

2001-01-29  Not Zed  <NotZed@Ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_xml1_decode): Always include +1
	for the size.  0*2 == 0, so malloc returns NULL, which is not what
	we want.

2001-01-29  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-text.c (e_text_init): Connect to the model's
	"position" signal.
	(e_text_init): Set default value for rgba_object as blue.
	(e_text_destroy): Disconnect model position signal.
	(fix_selection): Some extra sanity checking to keep the selection
	from spilling outside of the bounds of the text string as it
	expands or contracts.  Should be obsolete due to the changes to
	objectify_uris --- but I'll leave this in here for now, in an
	attempt to avoid non-\0-terminated strings, segfaults, and all of
	that fun stuff.
	(e_text_text_model_position): Move our cursor according to the
	suggestions made by our ETextModel, via the "position" signal.
	(text_width_with_objects): Check that text is not NULL.
	(text_draw_with_objects): Accept an extra GdkGC for use in drawing
	objects.
	(e_text_set_arg): Properly handle the "position" signal when
	changing models.
	(e_text_draw): Initialize the GC for drawing objects, if
	necessary.
	(_insert): Comment out the code that adjustes text->selection_*.
	The cursor is now moved by the ETextModel directly via the
	position signal, not by the view.

	* gal/e-text/e-text-model-uri.c (objectify_uris): Add more
	sophisticated uri recognition via regular expressions.
	(objectify_uris): Changed to track position changes as model->text
	expands and contracts along with the objects.  Block the
	objectification of any chunks of text that straddle our current
	position.
	(e_text_model_uri_set_text): Added position info to objectify_uris
	call.
	(e_text_model_uri_insert): Added position info to objectify_uris
	call.
	(e_text_model_uri_insert_length): Added position info to
	objectify_uris call.
	(e_text_model_uri_delete): Added position info to objectify_uris
	call.

	* gal/e-text/e-text-model.c (e_text_model_class_init): Added a
	"position" signal that allows the ETextModel to send cursor
	positioning information back to any view.  We need this for text
	with objects, where the text string can grow and shrink in ways
	that the view doesn't expect.
	(e_text_model_real_insert): Added sanity checking of args and a
	position emission.
	(e_text_model_real_insert_length): Added sanity checking of args
	and a position emission.
	(e_text_model_real_delete): Added sanity checking of args.
	(e_text_model_suggest_position): A wrapper around the "position"
	signal emitter.

2001-01-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-cell-number.lo

2001-01-28  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/util/e-i18n.h: Don't #define __GNOME_I18N_H__ if it's already
	defined.

	*gal/util/e-xml-utils.c:
	Functions moved from Gnumeric:
	e_xml_get_child_by_name_by_lang_list,
	e_xml_get_child_by_name_by_lang_list_with_score (static),
	e_xml_get_child_by_name_no_lang.
	New functions (for completness):
	e_xml_get_integer_prop_by_name_with_default,
	e_xml_get_string_prop_by_name_with_default,
	e_xml_get_uint_prop_by_name,
	e_xml_get_uint_prop_by_name_with_default,
	e_xml_set_uint_prop_by_name.
	Now every e_xml_get_*_prop_by_name function just calls
	e_xml_get_*_prop_by_name_with_default with some sensible default
	value.
	Formatting fixes here and there.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-categories.c (e_categories_construct): New.
	(e_categories_new): Call it.  Made const-safe.
	(ec_set_categories): Made const-safe.

2001-01-27  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-categories.c (table_key_press): Made pressing the
	space bar toggle a given row.

2001-01-26  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-text-model-test.c: Added; a new test program that
	demonstrates objects in ETexts.
	
	* gal/e-text/e-text-model-uri.c: Added; a text model that converts
	URIs in the text into objects that are passed off to the GNOME URI
	handler when activated.  This is actually still extremely broken;
	I got it just working enough to test out my EText changes.

	* gal/e-text/e-text.c: A whole lot of changes, designed to make
	ETextModel objects render properly.  The basic idea of the changes
	is pretty simple, though.
	(text_width_with_objects): First of all, this function is an
	alternative to e_font_utf8_text_width that takes into the account
	the embedded \1s in the text string and properly accounts for the
	width of the object strings.
	(unicode_strlen_with_objects): Next, this function finds the
	proper strlen of a string, expanding the \1s.
	(text_draw_with_objects): Finally, this is just a replacement for
	e_font_draw_utf8_text that does the right thing for objects.  I've
	gone through all of e-text.c and replace calls by those original
	functions with my new object-enabled alternatives.
	(split_into_lines): Some tweaking to get line breaking to work
	properly.  Made \1 into a "break character", so that we can break
	lines between multiple adjacent objects.  (Which seemed like the
	right thing to do, but there may be cases where that is
	undesireable.)
	(_get_position_from_xy): Fixed to properly handle embedded
	objects, and to get the right selection semantics for objects.
	(Or at least semantics that feel right to me.)  Also fixed a bug
	that caused selection, etc. to not work properly if the text was
	anchored anywhere other than with GTK_ANCHOR_NORTH*.
	(_get_position): Hacked to cause objects to activate when they are
	double-clicked.  There is probably a better way to do this.
	
	* gal/e-text/e-text-model.c (e_text_model_real_object_count):
	Provide a default implementation of an object counter.  Derived
	classes might want to override this for efficiency reasons.
	(e_text_model_strdup_expanded_text): Added.  Allocates and returns
	a string contains the model's text with the objects "expanded"
	within.

	* gal/e-text/e-text-model.h: Added obj_count, get_nth_obj, and
	activate_nth_obj virtual methods to ETextModelClass.

2001-01-25  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-categories.c (e_categories_init): Give the initial
	focus to the text entry, and do gnome_dialog_editable_enters() on
	it.  Make the OK button the default button.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-utils.c (e_canvas_item_show_area): Clamp
	the value we set here.
	(compute_offset): Switched to ints here.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-utils.c (e_canvas_item_show_area): Made
	this function put some space around the area shown.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.7.

	* gal/widgets/e-font.c: Added a global variable e_font_verbose and
	only print debugging messages if it gets set to non-zero.

2001-01-24  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.6.

2001-01-22  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in: put ALL_LINGUAS list in sync with the files in po/

2001-01-22  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-categories.c (e_categories_set_arg): use new internal 
	function to set
	(ec_set_categories): set the list of categories
	(e_categories_new): use ec_set_categories, fixes crash

2001-01-22  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-define-views.c (main): Switched this to use the users
	home directory instead of mine.

2001-01-22  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-define-views.c (dialog_clicked): Deal with clicking
	OK or Cancel on the dialog.  Load the view collection on startup.

2001-01-22  Akira TAGOH  <tagoh@redhat.com>
 
	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): Fixed operation
	event_key received the strings.

	* gal/widgets/e-font.c (e_font_from_gdk_font): Added check CJK locale.
	(translate_encoding): Added Japanese encoding table.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Check for nl_langinfo (CODESET).  Code taken from
	glib 1.3 branch.

	* gal/widgets/e-font.c, gal/widgets/e-font.h (e_locale_encoding):
	Added e_locale_encoding, e_iconv_from_locale, and
	e_iconv_to_locale.

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h: Added
	e_utf8_from_locale_string, e_utf8_from_locale_string_sized,
	e_utf8_to_locale_string, e_utf8_to_locale_string_sized.

2001-01-21  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added function
	e_xml_get_bool_prop_by_name_with_default.

2001-01-21  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c (INITIAL_SPEC): Changed this to test
	cursor-mode="line" selection-mode="browse" and draw-focus="true".

2001-01-20  Fatih Demir	<kabalak@gmx.net>

	* configure.in: Added tr to ALL_LINGUAS.

2001-01-19  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added sk to ALL_LINGUAS.

2001-01-19  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_run):
	s/GdkEventButton/GdkEvent/

	* gal/widgets/e-gui-utils.c (e_popup_menu): ditto, and deal with
	key events as well

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Fixed text misplacement.

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (_do_tooltip): Make tooltip appear properly
	even if anchor is set.

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Center
	text vertically.

2001-01-17  Miguel de Icaza  <miguel@gnu.org>

	* po/POTFILES.in: update.

	* gal/widgets/color-palette.c: use e-i18n.h

	* gal/util/e-i18n.h: Avoid inclussion of the GNOME i18n file as we
	provide our own.

2001-01-17  Dave Camp  <dave@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Removed e-table/e-table-config-field.lo

2001-01-17  Dave Camp  <dave@ximian.com>

	* po/POTFILES.in: Remove gal/e-text/e-entry-test.c and 
	gal/widgets/test-color.c, as these are not distributed with the 
	tarball.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c (e_entry_init): Made EEntry be shrinkable.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c, gal/e-text/e-entry.h (et_set_arg): Make
	justification work properly for entries.  Documented.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* tests/Makefile.am: Added test-define-views.

	* tests/test-define-views.c: New test for the gal/gal/menus/
	stuff.

2001-01-16  Jason Leach  <jasonleach@usa.net>

	* gal/e-text/e-text.c (e_text_set_arg): Emit a "changed" signal to
	the EText after we gtk_object_set a "model" arg and fill the EText
	with text from the model, which obviously changes the text.

2001-01-16  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-paned/e-vpaned.c (e_vpaned_draw), gal/e-paned/e-hpaned.c
	(e_hpaned_draw): Removed an unused variable.

2001-01-15  Miguel de Icaza  <miguel@gnu.org>

	* docs/tmpl/e-table-specification.sgml: Write documentation.

2001-01-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-table/e-cell-date.lo
	and e-table/e-cell-size.lo.

	* configure.in: Upped the internal version number of gal to
	0.4.99.4.

2001-01-13  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-paned/e-vpaned.c (e_vpaned_draw): Don't draw the handle
	with `gtk_paint_handle()' as it looks butt-ugly.
	* gal/e-paned/e-hpaned.c (e_hpaned_draw): Likewise.

2001-01-12  Miguel de Icaza  <miguel@ximian.com>

	* docs/tmpl/e-table-sort-info.sgml: Document the object.

2001-01-12  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.3.

2001-01-11  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widget/e-font.c (e_font_from_gdk_font): Return NULL, if GdkFont == NULL
	Some checks for 'should be impossible' situations - but they probably can
	occur for screwed up X/font configurations
	(e_font_from_gdk_fontset): Ditto

2001-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c (save_state):
	(create_tree): Make these save and load the header state so that
	we can test header state saving.

2001-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* docs/etablexml.txt: Document the new selection-mode attribute of
	ETableSpecification.

2001-01-09  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/Makefile.am: dist the glade file

2001-01-06  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Print out bold font
	full name, not just weight
	(e_font_from_gdk_fontset): Ditto

2001-01-06  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Added E_XF_SET_WIDTH
	to font query
	(e_font_from_gdk_fontset): Ditto

2001-01-06  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-unicode.c (e_utf8_xml1_decode): Removed an unused
	variable.
	(e_utf8_from_gtk_string_sized): Made ib const here.

2001-01-05  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/test-font-loading.c: New test program

	* gal/widgets/Makefile.am: Added test-font-loading

	* gal/widgets/e-font.c (e_font_from_gdk_name): Try to figure out,
	whether we want to create font or fontset
	(e_font_from_gdk_font): Splitted fontset variant into separate
	method, so CJK/Europaean people will not break each other code
	(e_font_from_gdk_fontset): New function

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_string_sized): If iconv == -1
	assumes either iso-8859-1 or iso-10646 encoding
	(e_utf8_to_gtk_string_sized): Ditto

2001-01-04  JP Rosevear  <jpr@helixcode.com>

	* configure.in: bump version

	* gal/widgets/gal-categories.glade: Glade file for category editor

	* gal/widgets/e-categories.[hc]: A category editor dialog taken 
	and renamed from evolution

	* gal/widgets/Makefile.am: Build new files and install
	glade stuff

2001-01-04  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (e_text_draw): Fixed the border bug.
	Borders draw properly now.

2001-01-02  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widget/e-unicode.* (e_utf8_xml1_decode): New function
	(e_utf8_xml1_encode): ditto

2001-01-02  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number.

2001-01-02  Ali Abdin  <aliabdin@aucegypt.edu>

	* gal/configure.in: Install API docs in the 'gal' directory, not in
	  bonobo's

2000-12-29  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-entry.c: Add support here for "cursor_pos".
	(et_get_arg): Handle ARG_CURSOR_POS.
	(et_set_arg): ditto.

	* gal/e-text/e-text.c: Add new argument: "cursor_pos". 
	(e_text_get_arg): Handle ARG_CURSOR_POS.
	(e_text_set_arg): Handle ARG_CURSOR_POS.
	(e_text_class_init): Add.

2000-12-27  Miguel de Icaza  <miguel@helixcode.com>

	* tests/Makefile.am (INCLUDES): Add test-shortcut-bar to the
	makefile. 

2000-12-27  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added gal/shortcut-bar/Makefile.

	* tests/Makefile.am: Added test-shortcut-bar.

	* tests/test-shortcut-bar.c: Moved this from gal/shortcut-bar.

2000-12-26  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-entry.c: Connect to the "changed" and "activate"
	signals on the EText to the proxy routines.
	(e_entry_proxy_changed): Proxy this to our signals.
	(e_entry_proxy_activate): ditto.

2000-12-26  Christopher James Lahey  <clahey@helixcode.com>

	* docs/etablexml.txt: New file documenting the ETableSpecification
	xml format.

2000-12-26  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Added a "draw_background" argument.  Set
	the default for the "draw_background" argument to the contained
	EText to TRUE.

	* gal/e-text/e-text.c: Changed the default for the
	"draw_background" argument to FALSE.

2000-12-25  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-text.c (e_text_init): Always have some text.  Fixes crash.

	* gal/widgets/e-reflow.c (set_empty): Set draw_background to FALSE.

	* gal/e-text/e-text.c (e_text_draw): Made the code CanvasItem
	correct: the code should not draw at arbitrary positions in the
	GdkWindow, it should instead draw from item->x1, item->y1 to
	item->y1, item->y2 (Chris, we need to talk about this, I think my
	current fix is passable, but might not be fully correct.
	Specially the interpretation of the width, height arguments).
	(e_text_class_init): Fix name.
	(e_text_set_arg): Use correct name.

2000-12-24  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-text.c (e_text_set_arg): Handle draw background.
	(e_text_draw): Support both border drawing and background drawing.

	* gal/e-text/e-entry.c (et_get_arg, et_set_arg): Reduce code size by casting
	once.
	(et_set_arg, et_get_arg): Add ARG_DRAW_BORDERS handling.

2000-12-23  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added
	e_xml_get_double_prop_by_name_with_default.

2000-12-21  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-box.c (gtk_combo_box_set_tearable): New
	API call.

2000-12-20  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-box.h: Export gtk_combo_box_get_pos. 

	* gal/widgets/gtk-combo-box.c: Add two new signals:
	pre_pop_down and post_pop_hide.
	(gtk_combo_box_popup_hide_unconditional): Emit signal when done.
	(gtk_combo_box_popup_display): Emit signal

2000-12-19  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-text.c (gtk_combo_text_construct): Move
	initialization code to construct instead of leaving it on _new.

	* gal/widgets/gtk-combo-text.h, gal/widgets/gtk-combo-text.c
	(gtk_combo_text_construct): expose.

	* gal/widgets/widget-pixmap-combo.h: ditto.

	* gal/widgets/widget-color-combo.h: Fix parent class.  It should
	have been GtkComboBoxClass, not GnomeCanvasClass.

2000-12-19  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_strdup_strip): Made the
	parameter type of e_strdup_string a const.  Made it not call
	isspace on signed characters.  Made the return type of
	e_strstrcase non const again.

2000-12-19  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated so number to 4 since an interface has
	changed.  Updated version number to 0.4.99.0 for internal
	versioning number.

2000-12-15  Dan Winship  <danw@helixcode.com>

	* configure.in: FreeBSD ships two iconv library ports, and they
	mangle the one we support. So support the other one too. Also,
	throw in some AC_CACHE fun to make re-configures faster.

2000-12-15  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number to 0.4.1.  Bumped the
	GAL_REVISION to 1.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_event): Don't allow
	the arrow keys to let you scroll off of the table. 

	* NEWS: Changed the NEWS format.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* README: Updated README a bit.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* NEWS: Updated NEWS a bit.

	* configure.in: Updated version number to 0.4.

2000-12-13  Christopher James Lahey  <clahey@helixcode.com>

	* docs/.cvsignore: Added .cvsignore.

2000-12-13  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (_do_tooltip): Changed the color from yellow
	to light gray.

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_event): Made it so
	that e-canvas-vbox doesn't eat all the keyboard events.  This
	means widget navigation keys work properly.

2000-12-11  Dan Winship  <danw@helixcode.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): Add some
	checks so that setting the vadjustment before the hadjustment
	won't cause a warning.

2000-12-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/util/e-util.h: Fixed a warning by making
	e_strstrcase return a const gchar.

2000-12-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-font.c (e_iconv_to_gdk_font): Fixed a warning.

2000-12-09  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped so number to 3.0.0.  Upped version number to
	internal cvs version number.

2000-12-08  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/widget-color-combo.h: Adjust as well.

	* gal/widgets/color-palette.c (color_palette_new): Make API
	parseable by gtk-doc.

2000-12-08  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/e-canvas.c (e_canvas_destroy): Remove my lame "fix"

2000-12-07  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/e-canvas.c (e_canvas_destroy): Destroy the gdkIC
	if we have one

2000-12-07  Dan Winship  <danw@helixcode.com>

	* gal/Makefile.am (libgal_la_LDFLAGS): Add $(ICONV_LIBS) and
	$(UNICODE_LIBS) to make auto-dependencying stuff work

2000-12-07  Dan Winship  <danw@helixcode.com>

	* configure.in: Add --with-libiconv, set ICONV_CFLAGS as well as
	ICONV_LIBS, and put it in galConf.sh

	* gal/widgets/Makefile.am (INCLUDES): Add $(ICONV_CFLAGS)

2000-12-07  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Removed bonobox from the gal libs and configure
	lines.

2000-12-06  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_get_name): new function

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Dropped the so number back down to its proper
	value.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Increased the version number to 0.3.  Increased
	the so number.

	* gal/util/e-util.h: Removed unnecessary #define e_str_make_safe
	e_filename_make_safe.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/widgets/e-font.c: Fixed some warnings.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Increased the version number.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	menus/gal-view-etable.lo, menus/gal-view-factory-etable.lo,
	menus/gal-view-factory.lo, and menus/gal-view-collection.lo.

2000-12-05  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/util/e-cache.*: New files, implementing general LRU cache

	* gal/widgets/e-font.c (e_font_from-gdk-font): Use cache, removed
	foundry specification from fon loading
	(e_gdk_font_encoding): Use cache

2000-12-04  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_print_gdk_font_name): New function
	(e_font_from_gdk_font): Added font name printout (if VERBOSE)

2000-12-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gal/util/e-util.h (e_str_make_safe): macro that calls
	e_filename_make_safe

	* gal/util/e-util.c (e_filename_make_safe): Renamed from
	e_str_make_safe
	(e_strstrcase): go back to returning gchar * rather than const.

2000-11-30  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: Bump the version to 0.2.99.4

	* gal/util/e-util.c (e_strstrcase): This should return a const
	gchar *.
	(e_str_make_safe): New convenience function to replace risky chars
	with an underscore.

2000-11-29  Dan Winship  <danw@helixcode.com>

	Move away from unicode_iconv*. We still need libunicode for utf8
	strings functions, but that will go away eventually.

	* configure.in: Add a check for libiconv, which is required if
	your system doesn't have iconv in libc, or has glibc 2.1.2. Bump
	the gal version number to 0.2.99.3

	* tests/Makefile.am (LDADD): add ICONV_LIBS

	* gal/widgets/Makefile.am (libwidgets_la_LDFLAGS): Add ICONV_LIBS

	* gal/widgets/e-unicode.c: Use iconv rather than libunicode for
	iconv()ing.
	(e_unicode_init): No longer needed

	* gal/widgets/e-font.c: Use iconv rather than libunicode for
	iconv()ing.
	(e_iconv_{from,to}_gdk_font): renamed from e_uiconv...

	* gal/widgets/test-e-font.c: No longer need to e_unicode_init().

2000-11-25  Federico Mena Quintero  <federico@helixcode.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-header-utils.lo.

2000-11-24  Jon K Hellan  <hellan@acm.org>

	* configure.in: Remove remaining bonobo dependencies.

2000-11-22  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/widgets/widget-pixmap-combo.c: Used gettext() instead of _()
	macro. We should get string from an application's (eg. Gnumeric's)
	textdomain not from the gal's one here.

2000-11-21  Morten Welinder  <terra@diku.dk>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_clear_selection):
 	Plug leak.
	(list_select_cb): Plug leak.
	(gtk_combo_stack_remove_top): Plug leak.

2000-11-20  Morten Welinder  <terra@diku.dk>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_truncate): New
 	function.

2000-11-18  Miguel de Icaza  <miguel@helixcode.com>

	* configure.in (gnomelocaledir): Removed test for Bonobo here.

	* gal/menus/gal-view-menus.c: Removed this file, and moved into
	Evolution. 

2000-11-14  Jody Goldberg <jgoldberg@home.com>

	* configure.in : Fix typo.

2000-11-13  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): identify fonts,
	which calcs width of "&nbsp;" equal 0
	(set_nbsp_zero_width_flag): helper function, indentifies those bad
	fonts
	(replace_nbsp_with_spaces): replaces &nbsp;'s with spaces
	(e_font_to_native): use replace_nbsp_with_spaces

2000-11-13  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated version number.

	* gal/e-table/e-tree-model.c, gal/e-table/e-tree-model.h: Added
	freeze and thaw functions.

	* gal/menus/gal-define-views-dialog.c: Fixed some warnings.

2000-11-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/Makefile.am:  Added a bunch of .lo s from the menus
	directory.

2000-11-10  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/widget-color-combo.c (color_combo_construct):
	Reindented. 

2000-11-09  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Changed the gal version number and the gal so
	number.  Added check for bonobo.

	* gal/Makefile.am: Added gal-view-menus.lo.

	* gal/widgets/e-unicode.c: Removed some unused variables.

2000-11-08  Matt Bissiri  <bissiri@eecs.umich.edu>

	* .cvsignore: add gal.spec

2000-11-08  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-unicode.* (e_utf8_strstrcasedecomp): New function
	doing canonical-decomposing, combination marks ignoring, case
	insensitive search

2000-11-07  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): add ,* if we are
	calling gdk_fontset_load

2000-11-07  Jody Goldberg <jgoldberg@home.com>
	For : ÃRDI GergÃµ <cactus@cactus.rulez.org>

	* gal/widgets/gtk-combo-stack.[ch] : Improve selection display.

2000-11-06  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Place AM_GNOME_GETTEXT after ALL_LINGUAS to
	make it work.
	

2000-11-06  Julian Missig  <julian@linuxpower.org>

	* gal/widgets/e-unicode.h: END_GNOME_DECLS, not BEGIN

2000-11-06  Jeffrey Stedfast  <fejj@helixcode.com>

	* gal/widgets/e-popup-menu.h: Add a submenu field to struct
	EPopupMenu.

	* gal/widgets/e-popup-menu.c (e_popup_menu_create): If the menu
	item has a submenu field, create the submenu and attach it.

	* configure.in: Bumped the micro-version because of some changes
	to e-popup-menu's structure.

2000-11-06  Christopher James Lahey  <clahey@helixcode.com>

	* acconfig.h, configure.in: Set GNOME_EXPLICIT_TRANSLATION_DOMAIN.

2000-11-05  Jason Leach  <leach@wam.umd.edu>

	* configure.in: fixed the libxml depdency checking, there was a
	typo ("xml-config --libs print") and it was only checking for
	greater than 1.8.5, but gal actually requires at least libxml
	1.8.8 to compile.  Fixes bug #29517.

2000-11-05  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added gal/menus/Makefile.

	* gal/Makefile.am: Added menus to subdirs and
	gal-define-views-dialog.lo to libgal_la_LIBADD.

2000-11-03  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.c (emit_change) : Do not free the
	  colour here.
	 (preview_clicked) : free the result of color_palette_get_current_color

2000-11-02  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated gal version number.

2000-11-01  Matt Bissiri  <bissiri@eecs.umich.edu>

	* gal/widgets/widget-color-combo.[ch] : Make this header file
	"stand alone", so that it can be included without including
	another file (gtk-combo-box.h) first.  This is needed, otherwise the
	latest /cvs/gtkhtml/components/html-editor/body.c does not compile.

2000-11-01  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_gdk_font_encoding): translate the
	encoding even in the fontset case.
	(translate_encoding): add charset mappings from iso_xxxxx-x to
	iso-xxxxx-x.  this fixes freebsd.

2000-11-01  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): better twobyte
	check, and get rid of all the BROKEN_FONTSET_STUFF.

	* gal/widgets/test-e-font.c (main): call e_unicode_init.

2000-10-31  Szabolcs Ban  <shooby@gnome.hu>

	* configure.in: Added hu to ALL_LINGUAS.

2000-10-31  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.c (emit_change) : Take the colour to
	  emit as an argument.
	(cb_color_change) : Pass the supplied colour.  This fixes the use of
	  the no colour button.  Gnumeric was breaking when people selected
	  the 'clear' background because the combo was sending the current
	  colour to gnumeric rather than NULL.
	(preview_clicked) : Use the current colour.

	* gal/widgets/color-palette.c (emit_change) : color_group_add_color
	* also emits a CHANGED signal.  Do not emit duplicates.

2000-10-31  Gediminas Paulauskas  <menesis@delfi.lt>

	* configure.in: added lt to ALL_LINGUAS.
	

2000-10-31  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): add lightfont->type
	== GDK_FONT_FONT to the conditional, since xfs isn't really a
	XFontStruct unless that's true.  also, #define
	BROKEN_FONTSET_STUFF since although it's broken, we seem to crash
	if it's undef'ed.  the conditional change should fix the most
	blatant problem.

2000-10-31  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.[ch] : Make the class public.
	* gal/widgets/color-group.[ch] : Ditto.
	* gal/widgets/color-palette.[ch] : Ditto.

	* gal/widgets/gtk-combo-stack.h : Add conditional extern "C".
	  Do not use GNOME_DECL because these are slated for inclusion in Gtk
	  rather than gnome.
	* gal/widgets/gtk-combo-text.h : Ditto.

2000-10-30  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): disable new fontset
	code (which has problems) unless BROKEN_FONTSET_STUFF is defined.
	(locale_charset_to_encoding): same.

2000-10-27  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number to a cvs version number.

2000-10-27  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c,
	gal/e-text/e-text-event-processor-emacs-like.c,
	gal/e-text/e-text-event-processor-emacs-like.h,
	gal/e-text/e-text-event-processor.c,
	gal/e-text/e-text-event-processor.h, gal/e-text/e-text.c: Added an
	"allow_newlines" argument.

2000-10-26  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-10-26  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/test-e-font.*: Dumb test program

2000-10-25  Lauris Kaplinski  <lauris2helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Use fontsets,
	if we do not have unicode font
	(e_gdk_font_encoding): Use locale encoding for fontsets

2000-10-25  Dan Winship  <danw@helixcode.com>

	* gal/util/e-util.c (e_marshal_NONE__POINTER_POINTER_INT): Add
	another marshalling function.

2000-10-25  Akira Tagoh  <tagoh@redhat.com>

	* gal/widgets/e-font.c (get_locale_charset): new function
		

2000-10-24  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/widget-color-combo.c (color_combo_construct): if
	icon is NULL allow create combo button without icon and with large
	color rectangle
	(color_combo_new): removed assert icon != NULL

2000-10-23  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated the version number to 0.2.1 and the
	libtool version numbers as appropriate.

2000-10-22  John Gotts  <jgotts@linuxsavvy.com>

	* Makefile.am: Minor Makefile.am screw up fixed.  Sorry guys.

2000-10-20  John Gotts  <jgotts@linuxsavvy.com>

	* Makefile.am, configure.in, gal.spec.in: Created a new spec file.

2000-10-20  Christophe Merlet  <christophe@merlet.net>

	* configure.in: Added French (fr) in $ALL_LINGUAS.

2000-10-19  Dan Winship  <danw@helixcode.com>

	* gal/e-text/e-text.c (e_text_destroy): Remove dbl_timeout and
	tpl_timeout.

2000-10-19  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text-event-processor-emacs-like.c: Made the number
	keys on the number pad work in ETexts and ECellTexts.

2000-10-19  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated the version number to 0.2 and the libtool
	version numbers as appropriate.

2000-10-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Made EEntry accept focus properly.

2000-10-15  Ettore Perazzoli  <ettore@helixcode.com>

	* gal/widgets/e-hscrollbar.c (e_hscrollbar_new): Use
	`gtk_object_new()' instead of `gtk_type_new()' and then
	`gtk_object_set()', as the latter doesn't set the CONSTRUCTED
	flag.
	* gal/widgets/e-vscrollbar.c (e_vscrollbar_new): Likewise.

2000-10-15  Ettore Perazzoli  <ettore@helixcode.com>

	* gal/widgets/e-scroll-frame.c (e_scroll_frame_set_vadjustment):
	Use an EVScrollbar instead of a GtkVScrollbar.
	(e_scroll_frame_set_hadjustment): Use an EHScrollbar instead of a
	GtkHScrollbar.

	* gal/widgets/e-vscrollbar.h: New.
	* gal/widgets/e-vscrollbar.c: New.
	* gal/widgets/e-hscrollbar.h: New.
	* gal/widgets/e-hscrollbar.c: New.

2000-10-13  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Use $UNICODE_CFLAGS and $UNICODE_LIBS instead
	of gnome-config

2000-10-13  Christopher James Lahey  <clahey@helixcode.com>

	* gal/Makefile.am: Added e-table-config-field.lo.

	* tests/test-tree-2.c: Changed this to use cursor-mode in the xml
	instead of the no longer existing gtk argument.

2000-10-12  Iain Holmes  <iain@helixcode.com>

	* gal/e-text/e-text.c (e_text_(set|get)_arg): Add "font_e"
	argument. Make the "font_gdk" argument write-only.
	(e_text_realize): Ref the style font.
	(_do_tooltip): Ref the font before creating the tooltip and
	delete the blank lines in the middle.
	

2000-10-12  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h: Added
	e_container_focus_nth_entry.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c:
	Changed these to use the default cells.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c:
	Changed these to match the new ETable system.

	* gal/Makefile.am: Added e-table-column-specification.lo,
	e-table-extras.lo, e-table-specification.lo, and e-table-state.lo.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c: Included a missing #include.

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added
	e_xml_get_bool_prop_by_name, e_xml_set_bool_prop_by_name, and
	e_xml_get_translated_string_prop_by_name.  Reindented prototypes.

2000-10-09  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added Galician (gl) to ALL_LINGUAS.

2000-10-08  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-unicode.h: Added {BEGIN|END}_GNOME_DECLS

2000-10-07  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): Use "fixed", if font
	cannot be found
	(e_font_from_gdk_font): Use font as light version, if we cannot
	get X font property

2000-10-07  Dan Winship  <danw@helixcode.com>

	* gal/util/e-util.c (e_mkdir_hier): New function to make a
	directory and (if needed), its parents

2000-10-07  Damon Chaplin  <damon@helixcode.com>

	* gal/e-text/e-text.c (e_text_unrealize): set cursors to NULL after
	destroying them, to avoid any possibility of BadCursor.
	(e_text_event): just return if the EText item is destroyed.

2000-10-06  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* configure.in: Add ja (Japanese) to ALL_LINGUAS

2000-10-05  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, tests/Makefile.am: Made gnome-vfs an optional
	dependence.  Gal will now compile without gnome-vfs but
	test-tree-2 will only compile if gnome-vfs is available.

Mon Oct  2 18:25:45 2000  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, tests/Makefile.am: Added a configure check for
 	gnome vfs.

2000-10-02  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (no_conv_wrapper): new helper function,
	does "poor" conversion in case we don't have font->to conversion
	available
	(e_font_to_native): use no_conv_wrapper

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* gal/e-table/e-tree-example-1.c: nuke
	
	* gal/e-table/e-tree-example-2.c: nuke
	
	* tests/test-tree-1.c: move gal/e-table/e-tree-example-1.c here.

	* tests/test-tree-2.c: move gal/e-table/e-tree-example-2.c here.

	* tests/Makefile.am: new file.

	* tests/.cvsignore: same.

	* configure.in: AC_OUTPUT (tests/Makefile)

	* Makefile.am (SUBDIRS): add tests dir.

2000-10-02  Federico Mena Quintero  <federico@helixcode.com>

	* tests/Makefile.am (LDADD): Add $(UNICODE_LIBS).

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* tests/test-tree-3.c: add a test for tree sorting.

	* tests/Makefile.am (noinst_PROGRAMS): add test-tree-3.

	* tests/.cvsignore: same.

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* tests/test-tree-3.c (sort_ascending): track sorting api change.
	(sort_descending): same.
	(descending_compare): same.
	(ascending_compare): same.

2000-09-29  Mathieu Lacage  <mathieu@eazel.com>

	* gal/Makefile.am: dunno: a space.
	* gal/e-table/Makefile.am: add UNICODE_CFLAGS
	* gal/widgets/Makefile.am: idem.

Tue Sep 26 17:04:45 2000  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added -I${includedir} to GAL_INCLUDEDIR so that
 	gnome-config --cflags gal will work.  Also added unicode since gal
 	is dependent on libunicode.

2000-09-26  Jody Goldberg <jgoldberg@home.com>

	* configure.in : There is no makefile in gal/widgets/pixmaps

2000-09-23  Chema Celorio  <chema@celorio.com>

	* configure.in: add libunicode library to LIBS since gnome-print
	no longer depends on libunicode

2000-09-22  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text-event-processor-emacs-like.c: Fixed operation
	of the keypad keys in EText and ECellText.

2000-09-21  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-gui-utils.h: Changed the #ifndef used so that it
	doesn't collide with one inside of evolution.  The entire name of
	this file should change soon.

2000-09-20  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added "no" to ALL_LINGUAS.
	

2000-09-20  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/color-group.c (color_group_add_color) : do no use == TRUE
	* gal/widgets/color-palette.c (cb_group_color_change) : Ditto.
	(emit_change) : Ditto.

2000-09-19  Robert Brady  <robert@suse.co.uk>

	* configure.in (ALL_LINGUAS): Add Swedish, Danish, British.

2000-09-18  Radek Doulik  <rodo@helixcode.com>

	* src/widgets/e-font.c (e_font_to_native): make const safe
	(e_font_to_native): likewise
	(e_font_draw_utf8_text): likewise
	(e_font_to_native): if font->to == -1, return 0

2000-09-18  Morten Welinder  <terra@diku.dk>

	* src/widgets/color-palette.c (color_clicked): Plug leak.
	(color_palette_change_custom_color): Plug leak.
	(cust_color_set): Plug leak.

	* src/widgets/widget-color-combo.c (emit_change): Plug leak.

2000-09-18  Kenneth Christiansen <kenneth@gnu.org>

        * po/desk.pl, po/update.pl: Two new scripts for helping
        translation/i18n maintainance of Gal

        * po/README.tools: Added readme file, which explains the
        use of the newly checked in po tools.

        * po/POTFILES.in: Overall prepared for translations of gal

2000-09-18  JP Rosevear  <jpr@helixcode.com>

	* configure.in: Add libunicode check for non-standard
	prefixes

2000-09-18  Federico Mena Quintero  <federico@helixcode.com>

	* gal/widgets/widget-pixmap-combo.h: 
	* gal/widgets/gtk-combo-text.h: 
	* gal/widgets/gtk-combo-stack.h: 
	* gal/widgets/e-reflow.c: 
	* gal/widgets/e-reflow-sorted.c: 
	* gal/widgets/e-reflow-sorted.h: 
	* gal/widgets/e-printable.c: 
	* gal/widgets/color-group.c: 
	* gal/e-text/e-text.c:
	* gal/e-text/e-text.h:
	* gal/e-text/e-text-test.c:
	* gal/e-text/e-text-event-processor.h:
	* gal/e-text/e-text-event-processor-emacs-like.h:
	* gal/e-text/e-entry.h:
	* gal/e-paned/e-vpaned.h:
	* gal/e-paned/e-hpaned.h: Fix includes.

	* gal/widgets/Makefile.am (INCLUDES):
	* gal/util/Makefile.am (INCLUDES):
	* gal/e-text/Makefile.am (INCLUDES): Fix include paths.

	* configure.in (GAL_INCLUDEDIR): do not include
	-I${includedir}/gal; people should use #include <gal/blah/blah.h>.
	(AC_OUTPUT): Renamed the src directory to gal.

	* Makefile.am (SUBDIRS): Ditto.

2000-09-18  Christopher James Lahey  <clahey@helixcode.com>

	* src/e-paned/Makefile.am, src/e-table/Makefile.am,
	src/e-text/Makefile.am: Install the headers.

2000-09-17  Morten Welinder  <terra@diku.dk>

	* src/widgets/e-colors.c (e_color_init): Don't leak if called
 	twice.

2000-09-17  Miguel de Icaza  <miguel@helixcode.com>

	* src/widgets/color-group.c: Update to use E_MAKE_TYPE

2000-09-17  Jody Goldberg <jgoldberg@home.com>

	* src/Makefile.am (libgal_la_LIBADD) : Add new files

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/util/e-xml-utils.c (e_xml_set_string_prop_by_name): Merging
	in additional type functions
	(e_xml_get_string_prop_by_name): ditto
	(e_xml_set_double_prop_by_name): ditto
	(e_xml_get_double_prop_by_name): ditto

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, src/widgets/Makefile.am: Added the
	src/widgets/pixmaps/ directory.

	* po/ChangeLog: Necessary for make distcheck.

	* src/util/Makefile.am (libgalinclude_HEADERS): Fixed a typo of
	e-xml-utils.c to e-xml-utils.h.

	* src/widgets/pixmaps/.cvsignore, src/widgets/pixmaps/Makefile.am:
	Make this a full fledged directory for make distcheck purposes.

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/widgets/Makefile.am: Added e-scroll-frame.c,
	e-scroll-frame.h, e-unicode.c, and e-unicode.h.

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/e-table/Makefile.am: Removed duplicate
	$(EXTRA_GNOME_CFLAGS).

	* src/util/Makefile.am: Added e-xml-utils.c and e-xml-utils.h.

	* src/widgets/Makefile.am: Added e-printable.c and e-printable.h.

	* src/widgets/e-printable.c: Fixed the include directory for
	e-util.h.

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/e-paned/e-hpaned.h: Fix header includes

	* src/e-paned/e-vpaned.h: Fix header includes

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/widgets/e-gui-utils.c: Remove e_create_image_widget function

	* src/widgets/e-canvas-vbox.c: Fix headers

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/widgets/Makefile.am, src/widgets/e-reflow-sorted.c,
	src/widgets/e-reflow.c: Added e-reflow-sorted and e-reflow and
	fixed the #includes.

2000-09-17  Jody Goldberg <jgoldberg@home.com>

	* src/widgets/e-colors.c (e_color_init) : doh!

	* configure.in : Add a version.
	* src/Makefile.am (libgal_la_LIBADD) : Update the set of lo files.

