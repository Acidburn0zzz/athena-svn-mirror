.\" This file uses -man macros.
.\"	@(#)printf.3s	6.3 (Berkeley) 6/5/86
.\"
.TH IOPEN 2v "Sept 15, 1987" "PRPQ 5799-CGZ: IBM 4.3/RT, Rel 1 " " "
.SH NAME
iopen \- open an inode for reading or writing
.SH SYNOPSIS
.B "iopen(dev, inode, flags)"
.SH "DESCRIPTION"
.I Iopen
opens
.I inode
on the mounted file system partition specified by device
.I dev
for reading and/or writing and returns a file descriptor for use in subsequent system calls.
.PP
The
.I flags
argument is specified by or'ing the following values:
.PP
O_RDONLY	open for reading only
.br
O_WRONLY	open for writing
.br
O_RDWR	open for reading and writing
.br
O_APPEND	append on each write
.PP
This call is permitted only to the super user; normally only on those inodes created by
.I icreate(2v).
It can, however, be used on regular files (not directories) if the group of the file is first set to -2.
.PP
The file descriptor returned is set to remain open across
.I execve
system calls and the current file position is set to the beginning of file.
.SH "RETURN VALUE"
The value -1 is returned if an error occurs.  Otherwise the non-negative numbered file descriptor for the newly opened inode is returned.
.SH ERRORS
.I Iopen
can fail for one of the following principle reasons:
.PP
.B [ENXIO]
	The specified device does not exist or is not mounted.
.br
.B [EPERM]
	The caller is not the super user.
.br
.B [ENOENT]
	The specified inode is not an active, regular file.
.br
.B [EPERM]
	The specified inode was found, but was not created by
.I icreate,
nor did it have a group id of -2.
.br
.B [EMFILE]
	The process limit for file descriptors would be exceeded.
.PP
Be prepared for other, unspecified errors.
.SH "SEE ALSO"
icreate(2i), iread(2i), iwrite(2i), iinc(2i), idec(2i), vfsck(8v)
