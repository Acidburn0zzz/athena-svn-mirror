Tue Sep 30 23:12:09 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: 5.91

	* (record_loops_stats): Make 3rd argument "unsigned" instead of
	"u_char" to avoid problem with xlC under AIX.
	Reported by: Toralf Foerster <toralf.foerster@io-warnemuende.de>

Sat Sep 27 00:21:07 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_atom.c: Patches from Ulrich Windl

	* xntpd/refclock_parse.c: Patches from Frank Kardel.

Sat Sep 20 01:03:27 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpq/ntpq.c (sendrequest): &keyid, not keyid.
	From: k2@physik.uni-muenchen.de (Klaus Steinberger)

Mon Sep  1 20:57:43 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: 5.90.4

Mon Aug 18 22:47:53 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* Makefile.am (EXTRA_DIST): Only distribute automake-1.2.patches
	and autoconf-2.12.patches.

	* README: Clean up the auto*patches stuff to only list the recent ones

Sun Aug 17 01:53:03 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_gpsvme.c (vme_control): Use a strcpy to copy
	a_lastacode, and an explicit NUL to initialize it.

	* xntpd/refclock_acts.c (acts_receive): Fix incorrect usage of
	a_lastcode.

	* xntpd/refclock_msfees.c (msfees_control): Use a strcpy to copy
	a_lastcode, and initialize it with an explicit NUL.

	* xntpd/refclock_bancomm.c (vme_control): Use a strcpy to
	copy a_lastcode, and initialize it with an explicit NUL.

Sun Aug 17 00:00:08 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_chu.c (chu_process): lastcode is now a_lastcode
	* xntpd/refclock_mx4200.c (mx4200_parse_s): Ditto
	* xntpd/refclock_parse.c (parse_control): Ditto
	* xntpd/refclock_bancomm.c (vme_control): Ditto
	* xntpd/refclock_tpro.c (tpro_poll): Ditto
	* xntpd/refclock_irig.c (irig_poll): Ditto
	* xntpd/refclock_msfees.c (msfees_control): Ditto
	* xntpd/refclock_usno.c (usno_timeout): Ditto
	* xntpd/refclock_true.c (true_receive): Ditto
	* xntpd/refclock_hpgps.c (hpgps_receive): Ditto
	* xntpd/refclock_gpsvme.c (vme_control): Ditto
	* xntpd/refclock_arbiter.c (arb_receive): Ditto
	* xntpd/refclock_arc.c (arc_poll): Ditto
	* xntpd/refclock_atom.c (atom_receive): Ditto
	* xntpd/refclock_nmea.c (nmea_receive): Ditto (in several places)
	* xntpd/refclock_heath.c (heath_receive): Ditto (in several places)
	* xntpd/refclock_acts.c (acts_receive): Ditto (in several places)
	(acts_timeout): Ditto
	* xntpd/refclock_trak.c (trak_receive): Ditto (in several places)
	* xntpd/refclock_as2201.c (as2201_receive): Ditto (in several places)
	* xntpd/refclock_wwvb.c (wwvb_receive): Ditto (in several places)
	* xntpd/refclock_pst.c (pst_poll): Ditto

Sat Aug 16 22:52:56 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_pst.c (pst_receive): lastcode is now a_lastcode
	(in several places)

	* xntpd/ntp_refclock.c (refclock_control): lastcode is now a_lastcode

	* include/ntp_refclock.h: Change the name of struct refclockproc's
	lastcode member to a_lastcode, since it's an array.

	* xntpd/refclock_leitch.c (leitch_control): lastcode is now p_lastcode

	* xntpd/ntp_refclock.c (refclock_cmpl_fp): Use const in the casts
	(refclock_control): lastcode is now p_lastcode

	* xntpd/ntp_control.c (ctl_flushpkt): Near line 831, we weren't
	using &keyid as the second arg to memcpy.  Seems wrong to me...
	(ctl_putclock): lastcode is now p_lastcode.
	(ctl_putdata): const char *dp
	(ctl_putstr): const char *tag
	(ctl_putlfp): const char *tag
	(ctl_putfp): const char *tag
	(ctl_putint): const char *tag
	(ctl_putts): const char *tag

	* include/ntp_refclock.h: Rename struct refclockstat's lastcode
	member to p_lastcode.

Wed Aug 13 22:37:28 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Add sanity check to VxWorks cross-compile.

Tue Aug 12 01:21:30 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c: kmem and file should be const
	(getoffsets): kernels are const char *

	* xntpdc/ntpdc_ops.c: struct statreset needed const
	struct resflags, ditto
	const char *leapbittab
	const char *controlleapbittab

	* xntpdc/ntpdc.c (getarg): const char *digits
	(help): const char *spaces

	* xntpdc/ntpdc.h: struct xcmd needed const

	* xntpdc/ntpdc.c: const char *prompt

	* xntpd/refclock_true.c (true_receive): const char *label

	* xntpd/ntp_config.c: struct keywrd needed a const
	as did xntp_options
	and the name in struct masks

	* ntpq/ntpq.c (rtdatetolfp): const char *months
	(getarg): const char *digits
	(help): const char *spaces

	* ntpq/ntpq_ops.c: struct varlist needed "const"
	(printassoc): const char *condition
	(printassoc): const char *last_event
	(printassoc): const char *auth
	(printassoc): const char *conf
	(doprintpeers): const char *dstadr_refid

	* ntpq/ntpq.h: Add const where needed

Mon Aug 11 00:28:50 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpq/ntpq.h: const char *text in ctl_var
	struct xcmd has several const char *

	* include/ntpd.h: ctl_var: const char *text in ctl_var

	* libntp/a_md5decrypt.c (MD5authdecrypt): Add const where needed.

	* include/ntp_refclock.h: const the strings in struct clktype.

	* libntp/machines.c: const char *set_tod_using

	* libntp/prettydate.c (prettydate): Add const where needed...

	* include/ntp_stdlib.h: Add const to modetoa
	* libntp/modetoa.c (modetoa): Ditto

	* ntpq/ntpq.c: Add const to prompt

	* libntp/modetoa.c (modetoa): Add const to modestrings

	* libntp/humandate.c: Add const where needed...

	* xntpd/Makefile.am (version.o): $(COMPILE) version.c
	* ntptrace/Makefile.am (version.o): Ditto
	* ntpq/Makefile.am (version.o): Ditto
	* ntpdate/Makefile.am (version.o): Ditto

	* libntp/hextolfp.c (hextolfp): const cleanup

	* libntp/getopt.c: const cleanup

	* libntp/buftvtots.c (buftvtots): const cleanup

	* libntp/authusekey.c (authusekey): Declare "hex" a const char *.

	* include/ntp_stdlib.h: Make 2nd arg of msyslog a const char *.
	* libntp/msyslog.c: Ditto

	* scripts/mkversion: #include <config.h> and make the Version
	string a const char *.

	* libntp/authkeys.c (MD5auth_setkey): const cleanup

	* libntp/atolfp.c (atolfp): Clean up declaration of digits.

Sun Aug 10 17:07:45 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/ntptime.c (main): Performance improvements
	From: Jonathan Stone <jonathan@dsg.stanford.edu>

	* scripts/summary.pl (peer_summary): Patch.
	From: "Ulrich Windl" <ulrich.windl@rz.uni-regensburg.de>

	* config.sub: Added vxworks patches
	* configure.in: Ditto
	* include/ntp_machine.h: Ditto
	* include/ntp_select.h: Ditto
	* include/ntp_syslog.h: Ditto
	* libntp/humandate.c: Ditto
	* libntp/machines.c: Ditto
	* libntp/msyslog.c: Ditto
	* libntp/systime.c: Ditto
	* ntpdate/ntpdate.c: Ditto
	* ntpq/ntpq.c: Ditto
	* ntptrace/ntptrace.c: Ditto
	* util/tickadj.c: Ditto
	* xntpd/ntp_config.c: Ditto
	* xntpd/ntp_filegen.c: Ditto
	* xntpd/ntp_intres.c: Ditto
	* xntpd/ntp_io.c: Ditto
	* xntpd/ntp_refclock.c: Ditto
	* xntpd/ntp_timer.c: Ditto
	* xntpd/ntp_unixclock.c: Ditto
	* xntpd/ntp_util.c: Ditto
	* xntpd/ntpd.c: Ditto
	* xntpdc/ntpdc.c: Ditto
	From: Casey Crellin <casey@ccii.co.za>

Mon Jul 28 00:18:16 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/caljulian.c (caljulian): Bugfix for jt->hour calc.
	From: Craig Leres <leres@ee.lbl.gov>

Sun Jul 27 16:44:18 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_wwvb.c (wwvb_receive): Handle timezones for those
	folks who need it.
	* html/driver4.html: Doc update for timezone patch.
	From: Phil Tait <Philip.Tait@phxase.allied.com>

	* xntpd/ntp_control.c (ctl_flushpkt): Use a memcpy to put the
	keyid into datapt to avoid an alignment problem.
	Reported by: jeremyp@gsms01.alcatel.com.au (Peter Jeremy)

	* ntpq/ntpq.c (sendrequest): Use a memcpy to put the keyid into
	qpkt to avoid a possible alignment problem.

Tue Jul 15 00:26:02 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: 5.90.3

	* xntpd/ntp_refclock.c (refclock_open): Back out the patch from
 	"Robert L. McMillin" <rlm@syseca-us.com> (Fri May 16 - don't
 	disable CLOCAL if we have DSR).  The patch was a local hack...

	* authstuff/keyparity.c: Changed a gob of u_long's to u_int32's
	* authstuff/makeIPFP.c: Ditto.
	* authstuff/makePC1.c: Ditto.
	* authstuff/makePC2.c: Ditto.
	* authstuff/makeSP.c: Ditto.
	* authstuff/mkrandkeys.c: Ditto.
	* authstuff/omakeIPFP.c: Ditto.
	* include/ntp_refclock.h: Ditto.
	* include/ntp_stdlib.h: Ditto.
	* include/ntpd.h: Ditto.
	* libntp/a_md512crypt.c: Ditto.
	* libntp/a_md5decrypt.c: Ditto.
	* libntp/a_md5encrypt.c: Ditto.
	* libntp/auth12crypt.c: Ditto.
	* libntp/authdecrypt.c: Ditto.
	* libntp/authencrypt.c: Ditto.
	* libntp/authkeys.c: Ditto.
	* libntp/authreadkeys.c: Ditto.
	* libntp/authusekey.c: Ditto.
	* ntpdate/ntpdate.c: Ditto.
	* ntpq/ntpq.c: Ditto.
	* ntpq/ntpq_ops.c: Ditto.
	* xntpd/ntp_config.c: Ditto.
	* xntpd/ntp_control.c: Ditto.
	* xntpd/ntp_intres.c: Ditto.
	* xntpd/ntp_io.c: Ditto.
	* xntpd/ntp_peer.c: Ditto.
	* xntpd/ntp_proto.c: Ditto.
	* xntpd/ntp_request.c: Ditto.
	* xntpdc/ntpdc.c: Ditto.
	* xntpdc/ntpdc_ops.c: Ditto.

Mon Jul 14 22:38:28 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/authkeys.c: Changed almost all of the u_long's to u_int32's.
	* libntp/auth12crypt.c: Ditto.

	* xntpdc/ntpdc_ops.c (traps): Looks like we need a bunch of
	ntohX() calls here...

Sat Jul 12 00:00:40 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_control.c: Define ctl_auth_keyid as a u_int32.

	* xntpd/ntp_config.c (getconfig): ckey and ctl_auth_keyid are
	u_int32, not u_long.

	* xntpd/ntp_io.c (io_multicast_del): Use a u_int32 argument, not a
	u_long.

	* include/ntpd.h: Declare io_multicast_{add,del} to take a u_int32
	argument.

	* xntpdc/ntpdc_ops.c (reslist): count is a u_int32, not a u_long.
	(do_restrict): num, ditto.
	(clkbug): ltemp, ditto.
	(clkbug): s, ditto.

	* xntpd/ntp_request.c: Define/declare info_auth_keyid as a
 	u_int32, not a u_long.
	(set_request_keyid): keyid is a u_int32, not a u_long.  Grab a
 	u_int32 from the packet, not a u_long.
	(set_control_keyid): Ditto.

Fri Jul 11 21:52:42 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_proto.c (receive): hiskeyid is a u_int32, not a u_long.
	(fast_xmit): xkey is a u_int32, not a u_long.
	(transmit): xkeyid, ditto.

	* xntpd/ntp_io.c (io_multicast_add): addr is a u_int32, not a
	u_long.  Same for haddr.

	* xntpd/ntp_control.c (process_control): res_keyid is a uint32;
	just grab a u_int32 from the packet.

	* xntpdc/ntpdc_ops.c (traps): Clean up some ?: stuff.
	(do_changekey): htonl() takes a U_int32 but "key" is a long.
  	"key" should probably be a u_int32, but somebody will need to look
 	at this later.
	(fudge): Cast the pending value of FUDGE_VAL2 to a u_int32.
	(fudge): Ditto, for FUDGE_FLAGS.

	* xntpdc/ntpdc.c: Declare/define info_auth_keyid as int32 instead
	of u_long.

	* xntpd/ntp_intres.c: Declare/define req_keyid as u_int32 instead
	of u_long.

	* xntpd/ntp_request.c (peer_info): Cast the pending value of
	"timer" to u_int32.  Just being obvious...
	(peer_stats): Ditto for timereceived, timetosend, timereachable,
	and the rest of the pp-> u_longs...
	(sys_stats): Ditto for the stuff going into the ss-> stuff.
	(mem_stats): Ditto, ms-> stuff.
	(io_stats): Ditto, io-> stuff.
	(timer_stats): Ditto, ts-> stuff.
	(loop_info): Ditto, li-> stuff.
	(list_restrict): Ditto, ir->count.
	(mon_getlist_0): Ditto, appropriate im-> stuff.
	(mon_getlist_1): Ditto.  Also, clean up the im->daddr ?: rats
	nest.  I hope I didn't break it...	
	(get_auth_info): Cast the pending value of ia-> stuff to u_int32.
	(req_get_traps): Ditto, it-> stuff.
	(get_ctl_stats): Ditto, ic-> stuff.
	(get_leap_info): Ditto, il-> stuff.
	(get_kernel_info): Ditto, ik-> stuff.
	(get_clock_info): Ditto, ic-> stuff.

	* xntpd/ntp_io.c (create_sockets): Clean up the casting.
	(io_multicast_add): Ditto (make it match what we used in
	create_sockets()).

	* xntpd/ntp_control.c (ctl_error): htonl() returns a 32-bit
	quantity; cast accordingly.  We may still have to use memcpy here.
	(ctl_flushpkt): Ditto.
	(res_keyid): define/declare as a u_int32, not a u_long.

	* ntptrace/ntptrace.c (decodeipaddr): ipaddr should be u_int32.
	(getipaddr): Ditto.
	(addservbyname): Ditto.

	* ntpq/ntpq.c (sendrequest): info_auth_keyid is a 32-bit beast;
 	avoid the memcpy() by using *(u_int32 *) instead of u_long.
	
	* include/in.h: htonl() and ntohl() must be u_int32...

Thu Jul 10 23:18:17 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libparse/parse.c (parse_ioread): When printing parseio, treat it
	as an unsigned long instead of an unsigned int.
	From: Christos Zoulas <christos@deshaw.com>

Tue Jul  8 00:58:56 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_parse.c: Rename NO_FLAGS to NO_CL_FLAGS to avoid
	a namespace collision in HPUX.
	Reported by Ulrich.Windl@rz.uni-regensburg.de

Mon Jul  7 20:30:48 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_arc.c: Patches
	* html/driver27.html: Ditto
	From Damon Hart-Davis <d@hd.org>

	* scripts/plot_summary.pl: Patches
 	From <Ulrich.Windl@rz.uni-regensburg.de>
	(Converted from DOS text to Unix by HMS)
	* scripts/summary.pl: Ditto (on both counts)

	* ntpq/ntpq_ops.c (writevar): 4th argument must be 1;
	CTL_OP_WRITEVAR requires authentication.
	(writelist): Ditto.
	From jeremyp@gsms01.alcatel.com.au (Peter Jeremy)

	* configure.in (AC_C_BIG_ENDIAN): cross-compile stuff for vxworks
	Reported by: Casey Crellin <casey@gateway.ccii.co.za>

	* html/copyright.html: Typos
	From Ulrich.Windl@rz.uni-regensburg.de

	* include/ntpd.h (record_loop_stats): Make 3rd argument a u_char
	instead of an int.
	* libntp/msyslog.c: Comment cleanup
	* xntpd/ntp_io.c (io_multicast_add): Cast ~0 to a u_long before
	calling htonl().  [HMS - maybe u_int32?]
	* xntpd/ntp_loopfilter.c (local_clock): Don't cast
	(1 << (peer->minpoll -1) to a u _long.
	* xntpd/ntp_unixclock.c (clock_parms): Initialize hz to 0 for
	Windows/NT
	* xntpd/ntpd.c (SIGDIE2): Windows/NT has SIGINT
	* libntp/libntp.mak: New version
	* xntpd/xntpd.mak: Ditto
	* scripts/wininstall/distrib/readme.nt: Ditto
	From Greg Schueman
	
Mon Jun 30 19:40:51 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libparse/Makefile.am (EXTRA_PROGRAMS): Convert to automake-1.2

	* configure.in (MAKE_LIBPARSE): Convert to automake-1.2

	* libntp/Makefile.am (noinst_LIBRARIES): Convert to automake-1.2
	(libntp_a_SOURCES): Ditto.

	* libparse/Makefile.am (EXTRA_LIBRARIES): Convert to automake-1.2
	(libparse_a_SOURCES): Ditto.
	(libparse_kernel_a_SOURCES): Ditto.

	* configure.in: Renamed AC_CONFIG_HEADER to AM_CONFIG_HEADER as
	part of upgrade to automake-1.2.

Mon Jun 30 19:18:05 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Under Irix, the mlockall() stuff just returns
	-1/ENOSYS.  Idiots.
	Reported by Claude.Erbacher@ec-nantes.fr
	
Tue Jun 24 00:43:31 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/ntptime.c: Provide a definition for "debug"
	"progname" should not be static
	"optargs" now permits a -d option
	(main): Handle the -d flag
	(main): exit(0) instead of returning a random value
	From: Christos Zoulas <christos@deshaw.com>

	* acconfig.h: Add DECL_PLOCK_0

	* configure.in: DECL_PLOCK_0 for OSF4

	* xntpd/ntpd.c: If we HAVE_PLOCK, #include <sys/lock.h> if we have
	that, too. (for OSF1)

Mon Jun 23 21:30:57 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/findconfig.c: Added #include <unistd.h> for its prototypes

	* acconfig.h: Add DECL_MKSTEMP_0

	* configure.in: DECL_MKSTEMP_0 for solaris2

	* include/l_stdlib.h: Added declaration for mkstemp()

	* libparse/parse.c: Only #include <sys/parsestreams.h> of STREAM
	is #defined.
	From: Torsten Duwe <duwe@lst.de>

	* xntpd/ntp_io.c: Fix vilatile declarations for freelist,
	fulllist, and beginlist pointers.
	From: Torsten Duwe <duwe@lst.de>

Thu Jun 19 20:33:21 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.90.2

Mon Jun 16 22:06:40 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/machines.c: DST Bugfix from Greg Schueman (reported by
	Viraj Bais <viraj_bais@ccm.fm.intel.com>
	* scripts/wininstall/distrib/readme.nt: New version from Greg
	Schueman
	
	* xntpd/ntp_unixclock.c (clock_parms): Integrate the clockinfo
	code with the rest of the world, for those systems that don't
	provide everything we need via clockinfo.  While we'er in there,
	if hz is available from clockinfo, get it.
	* configure.in: Check struct clockinfo for hz and tickadj.
	* acconfig.h: HAVE_HZ_IN_STRUCT_CLOCKINFO: Added.
	HAVE_TICKADJ_IN_STRUCT_CLOCKINFO: Added.
	Cleanup the clockinfo stuff so that it works in more places.

Tue Jun  3 22:08:29 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Look for timer_{create,settime}() in preparation
	for POSIX timers...

	* xntpd/ntp_loopfilter.c (local_clock): If the offset is > .5,
	don't apply it here - the magnitude will overflow and appear as a
	negative number!  Also, the cutout bugfix was lost; reapply it.
	Juha Sarlin <juha@c3l.tyreso.se>

Thu May 29 23:18:33 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpdate/ntpdate.c (main): Time out the select() after a minute.
	From: Todd Aven <Todd.Aven@BankersTrust.Com>

	* xntpd/refclock_mx4200.c (mx4200_ref): Increase longitude from 2
	to 3 digits in NMEA sentence.  Minor code cleanup.
	From: "Marc Brett" <Marc.Brett@waii.com>

Tue May 27 21:46:57 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.90.1

Thu May 22 00:19:17 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_acts.c (acts_receive): Avoid a possible NULL
	dereference; log if we detect a problem.  If this *does* ever
	happen, we need to make the same change to refclock_usno (unless
	the two refclocks get merged before then).

	* configure.in: Remove DECL_MEMSET_0 from sunos4; there is a
	better way...

	* include/l_stdlib.h: if DECL_STDIO_0, only do the declarations if
	either FILE or BIFSIZ are defined.

Wed May 21 02:20:18 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_arc.c (arc_receive): Older C compilers won't
	initialize a structure in a declaration...

	* configure.in (ntp_refclock): Only enable the SHM clock for
 	Windows/NT.  The driver is ANSI C instead of K&R and the code uses
 	c++ comment conventions.

Wed May 21 00:00:14 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_shm.c: Added
	* xntpd/refclock_conf.c: Added refclock_shm entry
	* xntpd/ntp_control.c: Added CTL_SST for SHM
	(HMS: added an entry (bogus) for the Arcron MSF clock)
	* xntpd/Makefile.am (xntpd_SOURCES): Added refclock_shm.c
	* util/sht.c: Added
	* util/Makefile.am (EXTRA_PROGRAMS): Add sht
	* libntp/libntp.mak: Patch failed!  Needs work...
	* libntp/msyslog.c: Initialize err to zero
	* libntp/clocktypes.c: Add SHM to the clock list
	* include/ntp_machine.h (SHM_CLOCK): #define for Windows/NT
	* include/ntp.h (REFCLK_SHM): Added
	* html/refclock.html (href): Added pointer to driver28.html
	* html/driver28.html: Added
	* configure.in: Added --enable-SHM

	* acconfig.h: Added SHM_CLOCK
	From: Peter Bauer <PBHD@compuserve.com>

	* configure.in: Added --enable-ARCRON-MSF for Damon's new driver.

	* html/driver27.html: Added.
	* libntp/clocktypes.c: Added Arcron MSF.
	* xntpd/refclock_arc.c: Added.
	* xntpd/refclock_conf.c: Added refclock_arc.
	* xntpd/Makefile.am (xntpd_SOURCES): Added refclock_arc.c
	* include/ntp.h (REFCLK_ARCRON_MSF): Added.
	* acconfig.h: Added ARCRON_MSF.
	New refclock: Arcron.  From: "Damon Hart-Davis" <dhd@exnet.com>

	* include/l_stdlib.h: for DECL_STDIO_0, use BUFSIZ instead of FILE
 	in #ifdef test.  For that matter, let's just always declare the
	set if we're asked to (for now).
	For patch below, added DECL_BCOPY_O, DECL_MEMSET_0, and DECL_SIGVEC_0.

	* configure.in: Add DECL_BCOPY_0, DECL_MEMSET_0, and DECL_SIGVEC_0
	on sunos4
	* acconfig.h: Ditto.
	Requested by: Frank Kardel <kardel@Informatik.Uni-Erlangen.DE>

Mon May 19 22:28:44 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in:  Solaris2.5 implements sched_setscheduler() as a
	stub returning -1.  Idiots...

	* xntpd/ntp_io.c (create_sockets): Fix typos in patch from Christos.

Fri May 16 00:22:46 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_wwvb.c (wwvb_receive): Add debugging code and
	support for Timecode format 3.
	* xntpd/refclock_leitch.c (leitch_receive): Use GMT when calling
	clocktime().
	* xntpd/ntp_refclock.c (refclock_open): Don't disable CLOCAL if we
	have DSR.
	* xntpd/refclock_chu.c (chu_receive): Use GMT when calling clocktime()
	* libntp/caltontp.c: Support for Ed Rheingold's calendrical
	calculations.
	* libntp/caljulian.c (caljulian): Ditto.
	* include/ntp_calendar.h: Ditto.
	From: "Robert L. McMillin" <rlm@syseca-us.com>

	* configure.in (check_libgen): Fix typo.
	Reported by Tomas Vanhala <vanhala@paulus.helsinki.fi>
	(NOKMEM): Define this for Irix4 and 5
	Reported by mehldau@photogrammetrie.de (Gerhard Mehldau)

Thu May 15 22:13:21 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_machine.h: Windows/NT improvements and bug fixed
	* libntp/msyslog.c: Ditto.
	* xntpd/ntp_config.c (getconfig): Ditto.
	* xntpd/ntp_timer.c (init_timer): Ditto.
	* xntpd/ntpd.c (main): Ditto.
	* xntpd/ntp_unixclock.c (clock_parms): Ditto.
	From: Greg Schueman <schueman@ix.netcom.com>

	* configure.in: Look for sys/sysctl.h and sysctl() to support
	patch from Cristos.

	* xntpd/ntp_unixclock.c (clock_parms): Use sysctl() if all the
	right parts are available.
	From: Christos Zoulas <christos@deshaw.com>

	* ntpdate/ntpdate.c (l_step_systime): Pathes from
	Stan Barber <sob@owlman.academ.com>

	* xntpd/ntp_io.c (create_sockets): NetBSD/Alpha patch
	* xntpd/ntp_config.c (getconfig): Ditto.
	From: Christos Zoulas <christos@deshaw.com>

	* xntpd/ntp_io.c: cast away volatile references to quiet compiles.
	From: Christos Zoulas <christos@deshaw.com>

	* configure.in: Add mkstemp() to AC_CHECK_FUNCS.

	* xntpd/ntp_config.c (save_resolve): Use mkstemp() if it's there.
	(Patch originally used mkstemp() ifdef BSD_44)
	From: Christos Zoulas <christos@deshaw.com>

Thu May  8 00:07:36 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_tickadj): Linux now wants the default
	value, 500/hz.
	From: Jeff Dairiki <dairiki@kalman.apl.washington.edu>

	* authstuff/authcert.c: Clean up noise...
	Reported by Ulrich.Windl@rz.uni-regensburg.de

	* xntpd/ntp_io.c: BSDI 3.0 patches
	From: Stan Barber <sob@owlman.academ.com>
	Also reported by Guido van Rooij <Guido.vanRooij@nl.cis.philips.com>

	* xntpd/refclock_nmea.c (field_parse): Fix declaration.
	From: Marc Brett <Marc.Brett@waii.com>

Wed May  7 22:35:24 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntpd.c: POSIX scheduling and process locking
	From: Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>

	(service_main): Reorganize and cleanup the process locking and
	priority code.  Clean up some of the SIGDIE* stuff.

	* configure.in: Detect the stuff we need for Ulrich's mods

	* xntpd/ntp_proto.c: Documentation and cleanup patches
	* xntpd/ntp_loopfilter.c: Ditto.
	From: Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>

	* xntpd/ntp_loopfilter.c (adj_host_clock): Added missing parens...
	From: Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>
	From: Juha Sarlin <juha@c3l.tyreso.se>
	
Sun Apr 13 13:17:13 1997  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* xntpd/refclock_parse.c (HOPF6021_FORMAT): made HOPF clock fixed
 	format

	* scripts/support/conf: updated files

	* parseutil/Makefile.am (noinst_PROGRAMS): removed parsetest

	* configure.in: building kernel modules on on sparc
 	implementations (PC don't usually have zs drivers)
	removed parsetest utility

	* libparse/clk_hopf6021.c: changed configuration for co-existance
 	with Meinberg clock formats

	* parseutil/dcfd.c: fixed comments

	* libparse/parsesolaris.c: gcc warning cleanup - gcc compile and
 	Solaris 2.5.1 kernel load lead to kernel panic - bug in Solaris
 	2.5.1(unpatched) krtld ? acc works perfectly

Mon Apr  7 00:40:30 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.90

	* util/tickadj.c (main): SCO patches
	From: Kees Hendrikse <kees@echelon.nl>

Sat Apr  5 01:29:21 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (create_sockets): Don't do SIOCGIFADDR ioctl().
	From: Greg Couch <gregc@cgl.ucsf.edu>	

	* xntpd/ntp_refclock.c: TIOCDCDTIMESTAMP support and NMEA
	improvements
	* xntpd/refclock_nmea.c: Ditto.
	* html/ldisc.html: Ditto.
	* html/refclock.html: Ditto.
	* html/driver20.html: Ditto.
	John Hay <jhay@zibbi.mikom.csir.co.za>
	
	* xntpd/ntp_io.c (sendpkt): Log when a connection comes back up.
	From: Ian Dall <Ian.Dall@dsto.defence.gov.au>

	* xntpd/refclock_parse.c (sendint): Endian patches
	(sendflt): Ditto.
	* libparse/clk_trimtsip.c (getflt): Endian patches
	(getdbl): Ditto.
	(getint): Ditto.
	From: Juha Takala <juha@solmu.ydi.vtt.fi>

	* xntpd/ntp_unixclock.c (init_systime): SCO patches.
	(clock_parms): Ditto.
	* xntpd/ntp_loopfilter.c (init_loopfilter): SCO patches.
	* acconfig.h: SCO[35]_TICKADJ added.
	* configure.in (ac_cv_var_tickadj): Various SCO patches.
	From: Kees Hendrikse <kees@echelon.nl>

Sat Apr  5 00:20:45 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_c_volatile): Bugfix.
	Reported by Steve Cooper <Cooper_Steve/ca@denkart.com>

Wed Mar 26 20:18:53 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_config.c (getnetnum): Clean up error messages.

Tue Mar 25 01:02:26 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_util.c (stats_config): Nuke the newline in the
	reported drift value.
	Reported by "Michael M. Schruf" <michael@venus.gan.net>

Thu Mar 20 22:35:59 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_loopfilter.c (local_clock): Bugfixes!
	From: Juha Sarlin <juha@c3l.tyreso.se>

Tue Mar 18 20:48:45 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.9

	* ntptrace/ntptrace.c (ReceiveBuf): Also stop recursion if we
	reach a local refclock.
	From: Tom Javen <tom@instmel.fi>

	* xntpd/refclock_mx4200.c:
	- Allowed operation on either fixed or mobile platforms (eg. ships)
	- Added leap second debug information to the syslog
	- Added receiver mode information to the syslog
	- Reduced the total number of messages coming from the receiver
	* html/driver9.html: Document the changes.
	From: Marc Brett <Marc.Brett@waii.com>

Fri Mar 14 00:06:09 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_loopfilter.c (local_clock): FLL bugfix.  We were using
 	an unsigned variable which messed up an expression with a signed
 	value.  From: Juha Sarlin <juha@c3l.tyreso.se>

Thu Mar 13 02:22:56 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (K_TICK_NAME): Make that "no" for *-*-sco5*.
	From: Andrew Sharpe <asharpe@sco.COM>

	* xntpd/ntp_util.c (stats_config): msyslog() the drift value and
	the file we read it from at startup.

	* configure.in (ac_cv_var_override_hz): Do it for FreeBSD.
  	sysconf(_SC_CLK_TCK) returns something Interesting, but not what
	we were expecting.

Wed Mar 12 20:28:35 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (main): Print out the kernel's value of hz.

Tue Mar 11 23:00:02 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_default_hz): mips-dec-ultrix4 needs an
	override of 256 HZ.

Mon Mar 10 23:41:11 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* acconfig.h: Change VOLATILE to volatile.
	* clockstuff/clktest.c: Ditto.
	* configure.in (ac_cv_c_volatile): Ditto.
	* include/ntp_machine.h:  Ditto.
	* ntpdate/ntpdate.c: Ditto.
	* ntpq/ntpq.c: Ditto.
	* util/ntptime.c: Ditto.
	* xntpd/ntp_intres.c: Ditto.
	* xntpd/ntp_loopfilter.c: Ditto.
	* xntpd/ntp_timer.c: Ditto.
	* xntpd/ntpd.c: Ditto.
	* xntpdc/ntpdc.c: Ditto.

	* xntpd/ntp_io.c: Improved volatile support.
	* xntpd/ntp_request.c: Ditto.
	* include/ntp.h: Ditto.
	From: "Edward J. Huff" <huffe@carbon.chem.nyu.edu>
	
Mon Mar 10 19:11:02 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (block_sigio): Start counting SIGIO block/unblock
	levels.
	(unblock_sigio): Ditto.

	* configure.in (K_TICK_NAME): Not under all/many/some versions of
	SCO.  For now, look for *-*-sco3* .
	Reported by "Michael D. Johnson" <mikej@nw9000.rain.com>

Thu Mar  6 02:31:59 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (io_setbclient): Use OPEN_BCAST_SOCKET.
	* acconfig.h (OPEN_BCAST_SOCKET): Added.
	* configure.in (ac_cv_var_open_bcast_socket): Added.
	Reported by Paolo Zeppegno <paolo@to.sem.it>

	* xntpd/ntp_util.c (record_loop_stats): Declare the function
	"normally".
	Reported by David.Billinghurst@restech.cra.com.au

	* html/ntpdate.html: ntpdate -q does a "query" only and does not
	set the time.

Wed Mar  5 22:15:39 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* NT patches
	From: Greg Schueman <schueman@ix.netcom.com>

	* util/tickadj.c (main): Alphabetize the options, make sure the
	usage string agrees with reality.
	(main): Show the kernel variable names/values we read.

Tue Feb 25 18:58:27 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_unixclock.c (clock_parms): Make sure PRESET_TICKADJ is
	at least 1: 500/1024 is 0...
	(init_systime): Log the estimated HZ.
	(clock_parms): When debugging, print the value of hz.

	* util/tickadj.c (main): Ditto.

	* configure.in (ac_cv_var_default_hz): 1024 for alpha-dec-osf4*.
	(ac_cv_var_override_hz): Yes for alpha-dec-osf4*.
	sysconf(_SC_CLK_TCK) lies here, too.

Mon Feb 24 22:17:32 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/authkeys.c: Make sure struct savekey's "union k" isn't
	empty - some compilers hate it.
	Reported by: Petri Kaukasoina <kaukasoi@elektroni.ee.tut.fi>

	* configure.in (ac_cv_var_use_md5): Lower case...
	(ac_cv_var_use_des): Ditto.
	Reported by: Petri Kaukasoina <kaukasoi@elektroni.ee.tut.fi>

Fri Feb 21 01:59:53 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (main): Wiggle tickadj the same way we do in
	ntp_unixclock.c.
	Reported by Don Lewis <Don.Lewis@tsc.tdk.com>

Thu Feb 20 02:06:09 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_timer.c (timer): Put the assertion checks before we
	check the timerqueue.  Remove the code that looked for a wrapped
	timerqueue; it was wrong, and the assertion checking code does a
	better job than the wrapped queue would have.

	* xntpd/refclock_true.c (true_doevent): Shut up lint.  Explicitly
	look for s_Init, S_F18, s_F50, s_Start, s_Auto, and s_Max.
	From: Mark Lovell <mlovell@vix.com>
	(true_doevent): Call msyslog() if we get one of them...

	* configure.in (ac_cv_var_nlist_tickadj): HPUX 9 doesn't have a
	tickadj kernel variable.
	From Don Lewis <Don.Lewis@tsc.tdk.com>

	* xntpd/ntp_timer.c (timer): Added assertion checks if
	TIMERQUEUE_DEBUG is #define'd.

Wed Feb 19 02:19:54 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (open_socket): Typos...
	(create_sockets): msyslog() content cleanup.

	* configure.in (VERSION): 5.89.8 released.

Tue Feb 18 18:42:45 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_mx4200.c (mx4200_receive): prettydate() takes
 	a *pointer* to an l_fp...
	(mx4200_parse_t): Add missing return value for BADDATE.
	(mx4200_parse_s): return 0; if everything went OK.

	* xntpd/ntp_io.c: Changes from Don.Lewis@tsc.tdk.com:
	Removing of the extra logging in ntpdate

	Cleanup of the #ifdef spaghetti for setting nonblocking I/O
	in open_socket, and async I/O in init_socket_sig()

	The call to init_socket_sig() is moved after nonblocking I/O
	is turned on, and it can be called in addition to making I/O
	nonblocking.

	The input_handler() routing is changed back to the 89.6 version
	with the following changes:

		Edward Huff's change to remove FD_CLR().
		(Hmn, this could be done in the case where recvfrom()
		fails because there was nothing for it to grab).

		All three flavors of non-blocking returns from recvfrom()
		are checked for so they don't cause errors to be logged.

		We don't goto select_again in case of a recvfrom() error.

	* xntpd/ntp_unixclock.c (clock_parms): make hz be DEFAULT_HZ if
	OVERRIDE_HZ is #define'd.
	* util/tickadj.c (main): Ditto.
	* configure.in (ac_cv_var_override_hz): Added.  Needed for SunOS4.
	* acconfig.h (OVERRIDE_HZ: Added,
	Reported by Don.Lewis@tsc.tdk.com

	* ntpdate/ntpdate.c (main): Don't log EINTR messages from select().

	* configure.in (USE_FSETOWNCTTY): Yes on FreeBSD.
	From: John Hay <jhay@zibbi.mikom.csir.co.za>

Sat Feb 15 04:12:06 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_stdlib.h: Fix the declaration for signal_no_reset().

Fri Feb 14 01:29:06 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (TPRO): Fixed typo.
	Reported by Dave Mills.

	* libntp/adjtime.c: Get rid of obsolete reference to CLOCK_ADJ.
	* libntp/systime.c: Ditto.
	(adj_systime): Ditto.
	From: "Edward J. Huff" <huffe@carbon.chem.nyu.edu>

Thu Feb 13 22:10:22 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.7

	* xntpd/refclock_mx4200.c: New release.
	* include/mx4200.h: Patches.
	* html/driver9.html: Update the docs for the new driver.
	From: Marc Brett <ltso@london.waii.com>

Wed Feb 12 19:34:27 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_sta_fll): Is STA_FLL in sys/timex.h?
	(ac_cv_var_kernel_pll): We need STA_FLL, too.

	* ntpdate/ntpdate.c (input_handler): Don't log select() timeouts.
	Reported by: Cooper_Steve/ca@denkart.com

	* configure.in: Provide declarations for RiscOS4.  Use the ones
	for SunOS4, but we still need a few more.

	* xntpd/ntp_io.c (wait_for_signal): It's OK if sigpause() "fails"
	with EINTR.
	(unblock_sigio): sigsetmask() returns the previous mask, not an
	error condition.
	(unblock_io_and_alarm): Ditto.

Wed Feb 12 01:17:46 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.6

Tue Feb 11 21:30:33 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* NT patches (setup.rul.in, etc.) 
	From: Greg Schueman <schueman@ix.netcom.com>

	* configure.in (ac_cv_var_tickadj): Default to 500/hz, not 500/HZ,
	now that we make sure both exist and "cascade" our knowledge in hz.

	* xntpd/ntp_io.c (wait_for_signal): EINTR from sigsuspend() is OK.
	(input_handler): Don't get subsequent received timestamps; we only
	process a single gob of file descriptors at the moment.

	(input_handler): This routine should only be on the stack once -
	keep an eye on this and let us know if we're invoked recursively
	(probably thru a signal handler).
	Requested by: "Edward J. Huff" <huffe@carbon.chem.nyu.edu>

Tue Feb 11 20:17:32 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntpd.c (moredebug): Save/restore errno.
	(lessdebug): Ditto.
	(no_debug): Ditto.
	* xntpd/ntp_io.c (sigio_handler): Save/restore errno.  Don't do
	redundant sigset()s.
	(set_signal): Use signal_no_reset() instead of duplicating the effort.
	* libntp/syssignal.c (signal_no_reset): Use sigvec().
	* configure.in (AC_CHECK_FUNCS): Look for sigvec().
	(ac_cv_var_signalled_io): Fix bug in the way HAVE_SIGNALED_IO was
	enabled/disabled. 
	From: Don Lewis <Don.Lewis@tsc.tdk.com>

	(ac_cv_var_tickadj): Default Solaris2 to 500/HZ, not tick/16.

Tue Feb 11 00:57:00 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_nlist_tick): AIX 3.2 doesn't have a
	"tick" kernel variable.
	From: Toralf Foerster <toralf.foerster@io-warnemuende.de>

	* xntpd/ntp_io.c (input_handler): The rewritten code didn't
	behave identically to the original code - we would syslog() and
	then return when we were "done" with the gob of fd's.  Now we
	DTRT, which is to only syslog() and return when select() initially
	returns zero, and we now re-select() after processing the gob.
	Additionally, we now have a hook to monitor the amount of time
	spent processing the gob.

Mon Feb 10 23:47:12 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_config.c (getconfig): Log (to syslog and stderr) when
	we can't open config files.

Mon Feb 10 20:26:37 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.5
	(ac_cv_var_signalled_io): Not Irix6.

Mon Feb 10 20:09:58 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.4

	* xntpd/ntp_io.c (input_handler): Irix6's cc is picky...

Mon Feb 10 02:05:31 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_signalled_io): Yes on SunOS, FreeBSD,
	and RiscOS4.
	* xntpd/ntp_io.c (open_socket): Don't do non-blocking I/O if we
 	HAVE_SIGNALED_IO.
	(input_handler): Get an initial list of read()-ready file
 	descriptors from select(), but only read one file descriptor per
 	select(), then FD_CLR() the fd and re-select() based on this new
	smaller fd_set.  This *should* fix the problem where a packet may
	"appear" as readable on more than one file descriptor, and the old
	code would only have data ready to read in the first fd.  The read
	on the other fds would block.

Sun Feb  9 05:00:53 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_signalled_io): Not SunOS...

Sat Feb  8 23:04:47 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_loopfilter.c (local_clock): Make sure ltmp (set from
	"interval") is greater than zero.  Dave fixed this Long Ago, but
	the fix seems to have gotten lost.
	Reported by: Don Lewis <Don.Lewis@tsc.tdk.com>

Fri Feb  7 00:40:52 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.3
	(ac_cv_var_signalled_io): Not freebsd...

Thu Feb  6 19:04:47 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (wait_for_signal): Call msyslog() on sig*()
	failures.
	(sigio_handler): Ditto.
	(block_io_and_alarm): Ditto.
	(unblock_io_and_alarm): Ditto.
	(unblock_sigio): Ditto.
	(block_io_and_alarm): Ditto.
	(block_sigio): Ditto.
	(unblock_io_and_alarm): Ditto.
	(unblock_sigio): Ditto.
	(wait_for_signal): Ditto.

Wed Feb  5 01:03:41 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_unixclock.c (clock_parms): Standardize the message
	when a kernel variable isn't found.

	* configure.in (ac_cv_var_adjtime_is_accurate): Yes for irix6.
  	From: "Richard H. Puckett" <puckett@cessna.larc.nasa.gov>
	(ac_cv_var_can_kmem): Just Say No for Irix6.  We don't know what
 	to look for, anyway.

	* xntpd/ntpd.c (worker_thread): Do a bit more logging of select()
	problems.
	* xntpd/ntp_intres.c (request): Ditto.
	* xntpd/ntp_io.c (input_handler): Ditto.
	* ntpdate/ntpdate.c (main): Ditto.

	* xntpd/ntpd.c (main): Make sure we're invoked as UID 0 if we
	HAVE_GETUID.
	* configure.in (AC_CHECK_FUNCS): Added getuid().
	(AC_TYPE_UID_T): Added.
	Requested by Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>

Tue Feb  4 19:23:58 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpdc/ntpdc.c: Clean up "help text" for keytype.
	Reported by Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>
	Clean up "help text" for keyid.

	* util/ntptime.c: Declare syscall() when we need to.
	Reported by Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>

	* xntpd/refclock_parse.c: #include <sys/ioctl> if we
	HAVE_SYS_IOCTL_H (for Linux).
	Reported by Ulrich Windl <ulrich.windl@rz.uni-regensburg.de>

	* kernel/sys/timex.h: Update the FreeBSD sysctl info.

	* configure.in (check_libgen): Added.  Needed for syslog support
	(via -lgen) on i386-univel-sysv4.2MP .
	Reported by Duane Voth <duanev@austx.tandem.com>

Mon Feb  3 19:48:37 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.2

	* include/ntp_io.h: NT Cleanup and typo patches from Greg Schueman
	<schueman@ix.netcom.com>
	* xntpd/refclock_nmea.c: Ditto.
	* xntpd/ntp_io.c: Ditto.
	
	* configure.in (Kinemetrics/True Time): Typo'd vax-dec-bsd.
	(ac_cv_var_signalled_io): Not for DEC systems in general.  Let's
	see if we can re-enable HAVE_SIGNALED_IO where permitted.

Sat Feb  1 03:11:05 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.89.1

	* ntpdate/ntpdate.c (signal_no_reset): We don't need this anymore...

	* libntp/syssignal.c (signal_no_reset): Never set SA_RESTART;
 	always set sa_flags to 0.  For now, let's log all nonzero sa_flags
	so in case some system really needs them we'll be able to identify
	it soon.
	From an idea by Frank Vance <fvance@waii.com>

Fri Jan 31 01:52:24 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.89 released.

Thu Jan 30 00:53:53 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_busted_vpath_in_make): Die instead of warn.

	* libparse/Makefile.am (CLEANFILES): Clean up the "extra" libraries.

	* xntpd/refclock_msfees.c (ees_receive): Lint cleanup.
	(msfees_control): Lint cleanup.
	(msfees_leap): Removed - unused.

	* xntpd/refclock_mx4200.c: Lint cleanup for SunOS4

	* xntpd/ntp_proto.c (receive): Lint cleanup for SunOS4.

	* include/l_stdlib.h: Add declarations for recv() and send() for
	DECL_IPC_0 (SunOS4)

	* xntpd/ntp_refclock.c: Forward declaration of refclock_cmpl_fp
	needs P() around its protptype...
	From: Scott Ratliff <scottr@carsinfo.com>

	* xntpd/ntp_util.c (stats_config): The fscanf()->fgets change got
	lost somewhere.  Put it back.
	From: "Edward J. Huff" <huffe@carbon.chem.nyu.edu>

Wed Jan 29 20:07:36 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (input_handler): Undo the "all reads thru recv()"
	change.  recv() won't read from a non-socket on too many systems.

	* ntpdate/ntpdate.c (signal_no_reset): Use this function if
	SA_RESTART is #defined, not _SEQUENT_.
	From: Frank Vance <fvance@waii.com>

Tue Jan 28 00:02:56 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_proto.c (clock_update): Gave some parens to a needy
 	expression.

	* util/tickadj.c (getoffsets): Remove the filename parameter (it
	wasn't being used) and don't return anything (the return value
	wasn't used, either).
	(main): Use "Cleaned up" call to getoffsets().

	* xntpdc/ntpdc.c (getkeyid): Explicitly declare 'c' an int.

	* ntpq/ntpq.c (cookedprint): Remove useless "break" statement
	after a "return".
	(getkeyid): Explicitly declare 'c' an int.

	* configure.in (ac_cv_prog_cc_pipe): See if gcc likes -pipe.
	Requested by <Ulrich.Windl@rz.uni-regensburg.de>.

Mon Jan 27 22:29:17 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_can_kmem): Clean up the logic.
	Explicitly check for {nlist,K_open,kvm_open}.
	(check_libsocket,check_libnsl): Not on irix6, either.

Thu Jan 23 02:31:17 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (HAVE_SIGNALED_IO): Just Say No.

Wed Jan 22 19:40:54 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/systime.c: Some systems have  have a utmpx.h that doesn't
	#include <utmp.h> .

	* Makefile.am (dist-hook): We need include/winnt in the
	distribution.  Reported by Greg Schueman <schueman@ix.netcom.com>

Tue Jan 21 00:48:44 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.88.2 released

	* xntpd/ntp_io.c (open_socket): Set the socket non-blocking even
	if we HAVE_SIGNALED_IO.

	* xntpd/refclock_hpgps.c: Lint cleanup.

	* xntpd/refclock_nmea.c: Lint cleanup.

	* xntpd/refclock_heath.c: Lint cleanup.

	* xntpd/refclock_acts.c: Lint cleanup.

Mon Jan 20 01:51:17 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* Another gob of cleanup and changes for NT.
	From: Greg Schueman <schueman@ix.netcom.com>
	
	* util/ntptime.c (main): Linux lint patches (from a Bunch of folks)

	* various html files: Patches from <Ulrich.Windl@rz.uni-regensburg.de>.
	
	* util/tickadj.c (getoffsets): Clean up some NOKMEM usage to get
	around potential problems on irix64.
	#include "l_stdlib.h" for atoi() declaration.  Reported by several
	folks.

	* html/xntpd.html: Update the doc on -a/-A.

	* xntpd/ntp_config.c (getconfig): let -A mean "disable
	authentication".
	(xntp_options): Added `A'.

	* configure.in (HAVE_SIGNALED_IO): Not MIPS RiscOS4.
	
Sun Jan 19 14:56:29 1997  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* parseutil/dcfd.c (main): msyslog() is used for xntp code -
 	dcfd.c is a standalone utility and thus not linked to libntp.a. So
 	dcfd.c has to use syslog() directly.

	* xntpd/refclock_parse.c: removed stream_nop(), parse_leap()

Sat Jan 18 00:25:01 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (HAVE_SIGNALED_IO): Not for convex.
	Reported by Frank Vance <fvance@waii.com>.
	(ac_busted_vpath_in_make): Created.  Use it for Irix6.2.
	Reported by Frank Vance <fvance@waii.com>.
	(USE_UDP_SIGPOLL, USE_TTY_SIGPOLL): Not on AIX4.2 .
	Reported by Bill Pemberton <wfp5p@tigger.itc.virginia.edu>

Fri Jan 17 01:28:39 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_unixclock.c (clock_parms): Don't exit(3) if we can't
	find a kernel.  The nlist stuff is static, so it's initialized to
	0; if nlist fails, we'll see the 0 for the nlist values and simply
	ignore the entries.
	(clock_parms): Don't exit(3) if we can't open(/dev/kmem), either.

Thu Jan 16 21:22:45 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Look for utmpx.h, pututline(), pututxline(),
	updwtmp(), and updwtmpx().
	(ac_cv_var_default_hz): Change the default from 66 to 100.  I
	want to get less mail about this non-issue.

Wed Jan 15 02:09:42 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/ntptime.c (ntp_adjtime): Typo'd __adjtimex().  Don't define
	or declare pll_trap() if SIGSYS isn't #define'd.
	Reported to c.p.t.n by Mitchell Blank Jr <mitch@earth.execpc.com>

	* configure.in: For irix6, if -n{32,64} is not present in CFLAGS
 	or LDFLAGS, supply -n32 by default.
  	Requested by Frank Vance <fvance@waii.com>	
	That's irix6.2.  6.1 was 64-bit only.
	Reported by <David.Billinghurst@restech.cra.com.au>

	* xntpd/ntpd.c (no_debug): Added.
	(service_main): Use it.

Tue Jan 14 01:11:58 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpdate/Makefile.am (version.o): Use $(CFLAGS) when compiling
	version.c .  Needed by IRIX when compiling with the -n32
	libraries.  From <David.Billinghurst@restech.cra.com.au>
	* ntpq/Makefile.am (version.o): Ditto.
	* ntptrace/Makefile.am (version.o): Ditto.
	* xntpd/Makefile.am (version.o): Ditto.
	* xntpdc/Makefile.am (version.o): Ditto.

Mon Jan 13 19:09:23 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/findconfig.c: Use NEED_HPUX_FINDCONFIG instead of looking
	for SYS_HPUX.

	* configure.in (ac_cv_var_hpux_findconfig): Added.

	* acconfig.h: NEED_HPUX_FINDCONFIG added.

	* xntpd/ntp_unixclock.c (init_systime): Use NEED_HPUX_ADJTIME
	instead of the old SYS_HPUX tests (HPUX < 10)

	* ntpq/ntpq.c (openhost): Use NEED_RCVBUF_SLOP instead of the old
	SYS_HPUX tests (HPUX < 8).

	* acconfig.h: NEED_RCVBUF_SLOP added.

	* configure.in (ac_cv_var_rcvbuf_slop): Added.

	* libntp/Makefile.am (ntp_SOURCES): Removed gettstamp.c
	* include/ntp_fp.h: Ditto.

	* xntpdc/ntpdc_ops.c (leapinfo): Use get_systime() instead of
	gettstamp().
	* xntpdc/ntpdc.c (sendrequest): Ditto.  Dave did similar things in
	other places.
	* ntpq/ntpq_ops.c (doprintpeers): Ditto.


	* include/winnt: Added new files.
	* (several files in libntp, ntpq, xntpd, and xntpdc): WinNT
	patches.  From Greg Schueman <schueman@ix.netcom.com>
	
	* xntpd/refclock_atom.c (atom_cmpl_fp): Add "const" to declaration
	of p1 and p2.  From Andrej Borsenkow <borsenkow.msk@sni.de>

Sat Jan 11 00:53:41 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_udp_wildcard_delivery): #define
	UDP_WILDCARD_DELIVERY for FreeBSD.
	Reported by John Hanley <jh@yahoo.com>

Fri Jan 10 03:20:03 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_types.h (int32,u_int32): Use SIZEOF_INT and
	SIZEOF_LONG to set these up.

	* configure.in: AC_CHECK_SIZEOF int and long so I can clean up
	ntp_types.h and quiet even more compiler noise.

Thu Jan  9 23:23:40 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/systime.c (step_systime_real): Call _clear_adjtime() if
	we NEED_HPUX_ADJTIME.

Wed Jan  8 02:36:52 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.88

	* Makefile.am (dist-export): rm authdes.c before we cp '.export
	over it.

	* html/ntpdate.html: Document the `-q' option.
	Reported by Greg Schueman <schueman@ix.netcom.com>
	Document the `-v' option, too.

	* ntpq/ntpq.c: Renamed IN manifest constant to SI (signed integer)
	to avoid conflict with Win header files.
	Reported by Greg Schueman <schueman@ix.netcom.com>

	* xntpd/ntp_refclock.c: #include <sys/ioctl.h> (if it exists) to
	provide ioctl() declaration for Linux.
	Reported by Jim Eggert x6127 <eggertj@atc.ll.mit.edu>
	* xntpd/refclock_acts.c: Ditto.
	* xntpd/refclock_heath.c: Ditto.
	* xntpd/refclock_usno.c: Ditto.

	* xntpd/ntp_io.c: Don't declare set_signal() unless we're going to
	use it.  Reported by Jim Eggert x6127 <eggertj@atc.ll.mit.edu>

	* configure.in: Don't DECL_STDIO_0 on sunos4 under acc.
	Reported by Marion Hakanson <hakanson@cse.ogi.edu>

	* xntpd/ntp_control.c (ctl_putsys): Changed the name of the
	utsname buffer from "utsname" to "utsnamebuf" to shut up some
	compiler warnings on some platforms.

Tue Jan  7 00:06:57 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/adjtime.c: Make sure the file isn't "empty" or pedantic
	compilers will croak and die.
	* libntp/memmove.c: Ditto.
	* libntp/mexit.c: Ditto.
	* libparse/clk_computime.c: Ditto.
	* libparse/clk_dcf7000.c: Ditto.
	* libparse/clk_hopf6021.c: Ditto.
	* libparse/clk_meinberg.c: Ditto.
	* libparse/clk_rawdcf.c: Ditto.
	* libparse/clk_rcc8000.c: Ditto.
	* libparse/clk_schmid.c: Ditto.
	* libparse/clk_trimtaip.c: Ditto.
	* libparse/clk_trimtsip.c: Ditto.
	* libparse/parse.c: Ditto.
	* libparse/parse_conf.c: Ditto.
	* xntpd/map_vme.c: Ditto.
	* xntpd/refclock_acts.c: Ditto.
	* xntpd/refclock_bancomm.c: Ditto.
	* xntpd/refclock_chu.c: Ditto.
	* xntpd/refclock_gpsvme.c: Ditto.
	* xntpd/refclock_heath.c: Ditto.
	* xntpd/refclock_irig.c: Ditto.
	* xntpd/refclock_msfees.c: Ditto.
	* xntpd/refclock_mx4200.c: Ditto.
	* xntpd/refclock_parse.c: Ditto.
	* xntpd/refclock_ptbacts.c: Ditto.
	* xntpd/refclock_tpro.c: Ditto.
	* xntpd/refclock_usno.c: Ditto.

	* configure.in (ac_cv_var_nlist_tick): There is no "tick" kernel
	variable in AIX4.

	* html/hints/a-ux: Renamed from aux to a-ux to avoid a problem on
	NT boxes.  Reported by Rainer Zocholl <zoc@zocki.toppoint.de>

Mon Jan  6 21:45:35 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Don't look for sys/select.h under SCO 3.2v4.2, as
	it's not needed and contains an "unprotected" declaration of
	struct timeval (which is already provided by sys/time.h).
	Reported by <smeghead@intnet.net>.

Mon Jan  6 21:20:27 1997  David Mills  <mills@udel.edu>

	* xntpd/ntp_loopfilter.c: Significant code cleanup and revision to
 	make sure the code follows the specifications and simulation
 	response.  Further changes to 'loopfilter.c will be accepted only
	if the submitter shows proof of performance in the simulator,
	which I am now hoisting to louie.	

Mon Jan  6 21:17:52 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Prefer clock_settime() over settimeofday().  This
 	will work most of the time; on SysVr4 boxes that have broken
 	settimeofday() calls we'll still have problems (because the
 	tv_usec parameter is quietly ignored).

Fri Jan  3 01:40:34 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/syssignal.c (signal_no_reset): Use SA_RESTART if
	SA_RESTART is #defined, not if we're on a Sequent box.
	From Peter Eriksson <peter@ifm.liu.se>

Thu Jan  2 18:51:27 1997  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (HZ): Use DEFAULT_HZ instead of 60.
	(main): Initialize hz to HZ and make hz available always.

	* xntpd/ntp_unixclock.c (HZ): Ditto.
	(clock_parms): Initialize hz to HZ and make hz available always.

	* acconfig.h (DEFAULT_HZ): Added.

	* configure.in (ac_cv_var_default_hz): Added.

Mon Dec 30 18:35:51 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (check_libsocket): Not under Irix5.
	Reported by Larry Schwimmer <rosebud@cyclone.stanford.edu>
	(check_libnsl): Ditto.

Sun Dec 29 04:31:10 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_kernel_pll): Correct the mistake I made
	the last time I changed this.
	Reported by John Hay <jhay@zibbi.mikom.csir.co.za>

Thu Dec 26 20:15:44 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_refclock.c (refclock_open): Clean up msyslog messages.
	Reindent some of the code.

	* xntpd/refclock_usno.c (usno_timeout): Clean up msyslog message
	on ioctl() failure when clearing DTR.
	(usno_timeout): msyslog when ioctl() setting DTR fails.
	(usno_disc): msyslog when ioctl() clearing DTR fails.

Mon Dec 23 19:53:31 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* TODO: Reformatted the SYS_* cleanup list.

	* xntpd/ntpd.c: Reformatted code.
 	(finish): Removed unused code.
	(finish): msyslog() the reason we're exiting.

Sat Dec 21 00:05:10 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.87.6

	* configure.in (ac_cv_func_ctty_for_f_setown): We *do* need this
	for BSDI2.

	* TODO: Removed the SYS_* bits that just got fixed.

	* xntpd/refclock_true.c: Use the PPS720 #define instead of SYS_BSDI.

	* acconfig.h: Add support for PCL 720 clock.

	* configure.in: Recognize when we have support for the PCL 720 clock.

	* xntpd/ntpd.c (main): Use HAVE_DAEMON instead of the previous
	SYS_* stuff or other macros.

	* configure.in (AC_CHECK_FUNCS): Look for daemon().

	* xntpdc/ntpdc.c (help): Use QSORT_USES_VOID_P.
	(helpsort): Ditto.

	* ntpq/ntpq.c (help): Use QSORT_USES_VOID_P.
	(sortassoc): Ditto.
	(assoccmp): Ditto.
	(helpsort): Ditto.

	* include/ntp_machine.h (QSORT_USES_VOID_P): #define for SYS_WINNT.

	* acconfig.h: Added QSORT_USES_VOID_P

Fri Dec 20 19:41:32 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_func_qsort_argtype): Added.

	* libntp/systime.c: Get ready to lose some SYS_ stuff.

	* xntpd/ntpd.c (main): Get ready to lose some SYS_ stuff.

	* authstuff/md5driver.c: Get ready to lose some SYS_ stuff.

	* include/ntp_machine.h: Tell folks in this file that the SYS_*
 	macros are obsolete.

Fri Dec 20 01:03:45 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.87.5
	
	* Makefile.am (dist-export): Created.
	(local-dist): Removed.  What was this for?

Thu Dec 19 00:54:26 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.87.4

	* configure.in (ac_cv_var_kernel_pll): Doesn't require SIGSYS
	anymore.
  	Reported by volker@Illuminatus.MZ.Rhein-Main.DE (Volker Schmidt)

Wed Dec 18 19:19:29 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_true.c: Mark says we don't need the #include
 	<sys/ppsclock.h> that was added by his patch.

	Version 5.87.3
	
	* xntpd/refclock_true.c: Patches from "Mark A. Lovell"
 	<mlovell@pinnacle.bigrock.com>

	* configure.in (ac_cv_func_ctty_for_f_setown): Not needed by
	BSDI2.  From "Mark A. Lovell" <mlovell@pinnacle.bigrock.com>	

Tue Dec 17 21:47:08 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (init_clock_sig): Identify subroutine in
	msyslog() call; I_SETSIG is also done in init_socket_sig.
	(init_socket_sig): Ditto.

Tue Dec 17 19:24:28 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libntp/authreadkeys.c: Call msyslog() instead of syslog().
	* libntp/emalloc.c: Ditto.
	* libntp/machines.c: Ditto.
	* libntp/systime.c: Ditto.
	* libparse/parse.c: Ditto.
	* libparse/clk_rawdcf.c: Ditto.
	* ntpdate/ntpdate.c: Ditto.
	* ntptrace/ntptrace.c: Ditto.
	* parseutil/dcfd.c: Ditto.
	* xntpd/ntp_config.c: Ditto.
	* xntpd/ntp_control.c: Ditto.
	* xntpd/ntp_io.c: Ditto.
	* xntpd/ntp_leap.c: Ditto.
	* xntpd/ntp_loopfilter.c: Ditto.
	* xntpd/ntp_peer.c: Ditto.
	* xntpd/ntp_proto.c: Ditto.
	* xntpd/ntp_refclock.c: Ditto.
	* xntpd/ntp_request.c: Ditto.
	* xntpd/ntp_timer.c: Ditto.
	* xntpd/ntp_unixclock.c: Ditto.
	* xntpd/ntp_util.c: Ditto.
	* xntpd/ntp_intres.c: Ditto.
	* xntpd/ntp_filegen.c: Ditto.
	* xntpd/ntpd.c: Ditto.
	* xntpd/refclock_chu.c: Ditto.
	* xntpd/refclock_mx4200.c: Ditto.
	* xntpd/refclock_parse.c: Ditto.
	* xntpd/refclock_bancomm.c: Ditto.
	* xntpd/refclock_tpro.c: Ditto.
	* xntpd/refclock_leitch.c: Ditto.
	* xntpd/refclock_irig.c: Ditto.
	* xntpd/refclock_msfees.c: Ditto.
	* xntpd/refclock_datum.c: Ditto.
	* xntpd/refclock_acts.c: Ditto.
	* xntpd/refclock_usno.c: Ditto.
	* xntpd/refclock_true.c: Ditto.
	* xntpd/refclock_gpsvme.c: Ditto.
	* adjtimed/adjtimed.c: Ditto.

	* include/ntp_syslog.h: Don't "#define syslog msyslog" anymore.

	* libntp/msyslog.c: Don't #undef syslog anymore, since we aren't
	"#define syslog msyslog" in ntp_syslog.h anymore.

Mon Dec 16 21:48:32 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.87.1:
	
	* xntpd/ntp_unixclock.c (clock_parms): Don't try to look up
	tickadj in the kernel if we don't know what to look up.  Ditto for
	tick (although this case should never happen - hollow laugh).

	* configure.in (ac_cv_var_nlist_tickadj): It's possible that
	there's no tickadj (or equivalent) in the kernel.  Like
	Solaris2.x, or HPUX (10, at least)
	(ac_cv_var_nlist_tick): It's not supposed to be possible that
	there's no tick (or equivalent) in the kernel, but I'm ready for
	it anyway.

	* xntpd/ntp_io.c (input_handler): If recvfrom() fails, log the fd,
	too.

	* xntpd/ntp_monitor.c (ntp_monitor): Rename monitor() to
	ntp_monitor() to avoid collision with a NextStep libc call.
	Reported by: Dennis Glatting <dennis.glatting@plaintalk.bellevue.wa.us>
	* xntpd/ntp_proto.c (receive): Ditto.
	* include/ntpd.h: Ditto.

	* libntp/syssignal.c (signal_no_reset): (not HAVE_SIGACTION) Typo.
	From: Dennis Glatting <dennis.glatting@plaintalk.bellevue.wa.us>

	* xntpd/ntpd.c: Added #include <io.h> for umask definition.
	Several other NT changes, too.
	From Greg Schueman <schueman@ix.netcom.com>

Fri Dec 13 00:32:26 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.87

Thu Dec 12 22:46:54 1996  Dave Mills <mills@udel.edu>

	* xntpd/ntp_proto.c: Changed some code that used 32-bit arithmetic
 	to 64-bit arithmetic to cope with very broken servers.

Wed Dec 11 00:15:19 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (input_handler): If FD_ISSET(), FD_CLR() it so we
 	don't check it again.  This might fix the "interrupted system
	call" messages we get on recvbuf().

Tue Dec 10 20:43:52 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_can_kmem): Linux: No.

Mon Dec  9 17:15:43 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_udp_wildcard_delivery): irix6 is "yes".
	From "John W. Shear" <jshear@cray.com>, et al.
	(many places): Sort the $target choices better so they're easier
	to find when messing around with new ones.  Reordered the new
	PARSE clock from Frank so it's alpha by --enable-whatever name.

Sat Dec  7 15:46:40 1996  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* libparse/parsesolaris.c: avoid CTTY on open

	* libparse/Makefile.am, libparse/Makefile.in: READMES are now in html

Wed Dec  4 20:10:00 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* Makefile.am (EXTRA_DIST): Added autoconf-2.12.patches.

	Version 5.86.13.2

	* xntpd/ntp_unixclock.c (clock_parms): Only ++got_tick{,adj} if we
	got a nonzero value.
	(clock_parms): Handle TICKADJ_NANO.

Tue Dec  3 23:24:54 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntpd.c (service_main): Use RTP_PRIO_REALTIME instead of
	RTP_PRIO_NORMAL.  Asked for by John Hay <jhay@zibbi.mikom.csir.co.za>

	Version 5.86.13.1
	
	* configure.in (ac_cv_var_kernel_pll): Typo.  Thanks to
	John Hay <jhay@zibbi.mikom.csir.co.za>

	Version 5.86.13

Sun Dec  1 18:40:04 1996  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* COPYRIGHT: added URLs

	* html/copyright.html: added URLs

	* libparse/Attic/README.new_clocks,
 	libparse/Attic/README.parse_clocks, html/parsedata.html,
 	html/parsenew.html, html/driver8.html: documentation for PARSE
 	clock is now in HTML

	* kernel/sys/parsestreams.h:
	support for updated parsesolaris.c implementation

	* xntpd/refclock_parse.c: POP "parse" streams module at shutdown

	* libntp/a_md5decrypt.c, libntp/a_md5encrypt.c, libntp/a_md512crypt.c:
	correct casts for MD5 calls

	* libparse/Makefile.in, libparse/Makefile.am:
	appropriate compile time defines for parsesolaris.c

	* libparse/parsesolaris.c: first working auto-configure version

	* libparse/clk_trimtsip.c:
	appropriate casts for conversion routine parameters

	* libparse/clk_computime.c: more standard string escapes

Sat Nov 30 20:51:33 1996  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* kernel/sys/parsestreams.h:
	initial compilable SunOS 4 auto configure version

	* xntpd/ntp_proto.c: fixed printf format

Sun Nov 24 23:16:49 1996  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* libparse/clk_computime.c: updated copyright

Sun Nov 24 00:57:21 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* Various files: NT patches from Greg Schueman <schueman@ix.netcom.com>

	* html/xntpd.html: Document the umask change.

	* xntpd/ntpd.c (main): Upon entry, if umask is zero, set the umask
	to 022.

Thu Nov 21 22:12:06 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Version 5.86.12.2
	
	* configure.in: Use AC_CANONICAL_SYSTEM and change from $host to
	$target to help those who want to try and cross-compile.
	(AC_CHECK_FUNCS): Don't look for getclock(); wait for the Big Rewrite.

Wed Nov 20 20:26:52 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_proto.c (init_proto): Fix inline doc; authenticate is
	enabled by default.

	* Makefile.am (EXTRA_DIST): Add autoconf-2.11.patches

Tue Nov 19 22:54:48 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.12

	* include/ntp_unixtime.h: Don't use GETTIMEOFDAY if we have
	getclock; use getclock() directly because it's Hard to get a
	GETTIMEOFDAY macro that works right when the Alpha uses 64 bit
	longs and other platforms use 32 bit longs when we're also
	constrained to work with pre-ANSI C compilers.
	* libntp/gettstamp.c (gettstamp): Ditto.
	* libntp/systime.c (step_systime_real): Ditto.
	* xntpd/ntp_config.c (do_resolve_internal): Ditto.
	* xntpd/ntp_proto.c (default_get_precision): Ditto.
	* xntpd/ntp_util.c (record_raw_stats): Ditto.
	* xntpd/refclock_parse.c (local_poll): Ditto.
	* util/precision.c (default_get_precision): Ditto.

	* configure.in (ac_cv_func_Xettimeofday_nargs): Typo.

Tue Nov 19 00:51:50 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.11

	* xntpd/ntp_config.c (getconfig): Record how we're setting the time.

	* libntp/machines.c: Cleaned up the #ifdef logic.

Mon Nov 18 02:53:25 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (main): Deal with TICKADJ_NANO

	* html/confopt.html: Document new ntp.conf variables "tick" and
 	"tickadj".

	* xntpd/ntp_unixclock.c: Add support for default_tick and
 	default_tickadj.
	(clock_parms): Ditto.

	* xntpd/ntp_config.c (getconfig): Added support for "tick" and
	"tickadj" in ntp.conf.

	* libntp/machines.c (settimeofday):  Lose USE_CLOCK_SETTIME, and
	choose based on availability of settimeofday, clock_settime, or
	stime.
	* configure.in: Ditto.

	* configure.in (ac_cv_var_nlist_tickadj): Do the nanosecond test
	outside of the code that checks for the name so that we get the
	right behavior when the name is in the cache.
	(ac_cv_var_nlist_tick): Ditto.
	(ac_cv_func_Xettimeofday_nargs): Added.

	* ntpdate/Makefile.am (INCLUDES): Remove extra -I$(srcdir)
	* adjtimed/Makefile.am (INCLUDES): Ditto.
	* ntpq/Makefile.am (INCLUDES): Ditto.
	* ntptrace/Makefile.am (INCLUDES): Ditto.
	* xntpd/Makefile.am (INCLUDES): Ditto.
	* xntpdc/Makefile.am (INCLUDES): Ditto.

	* configure.in (AC_CHECK_FUNCS): Look for stime().

	* html/hints/svr4-dell: There is no SETTIMEOFDAY_BROKEN...

	* xntpd/ntp_unixclock.c (clock_parms): Change the order of how we
 	look for tick and tickadj.  First go for the kernel read, and only
 	use the PRESET_ value if the kernel method failed.

Sat Nov 16 19:44:36 1996  Frank Kardel  <kardel@Informatik.Uni-Erlangen.DE>

	* libparse/clk_computime.c: Log entry added

	* libparse/clk_computime.c: Credits and formatting

	* libparse/clk_computime.c, xntpd/refclock_parse.c, libparse/parse_conf.c:
	Added DIEM receiver

	* libparse/parsesolaris.c: cleaned up version of parsesolaris.c
	currently untested
	remaining issues to be solved:
	  how to de-install a zs interrupt
	  safely not using splhigh()
	
Fri Nov 15 00:47:45 1996  Harlan Stenn  <stenn@whimsy.udel.edu>
	
	* libntp/libntp.mak: New version from Greg Schueman
	<schueman@ix.netcom.com>
	* ntpdate/ntpdate.mak: Ditto
	* ntpq/ntpq.mak: Ditto
	* ntptrace/ntptrace.mak: Ditto
	* xntpd/xntpd.mak: Ditto
	* xntpdc/xntpdc.mak: Ditto
	* scripts/wininstall/instsrv/Instsrv.mak: Ditto
	* include/ntp_machine.h: Ditto
	* scripts/mkver.bat: Ditto

	* xntpd/ntp_unixclock.c (clock_parms): HP-UX 10 puts the kernel in
	/stand/vmunix.  Use the same list of potential kernel names that
	tickadj.c uses.

	* util/tickadj.c (getoffsets): Use HAVE_GETBOOTFILE instead of
 	__FreeBSD__.
	(getoffsets): Report more nlist() problems.
	(getoffsets): HP-UX 10 uses /stand/vmunix
	(getoffsets): Use the same list of potential kernel names as
 	ntp_unixclock.c .

	* include/ntp_unixtime.h (GETTIMEOFDAY): HP-UX 10.x stock C
	compilers aren't ANSI C capable.  Braindamage!  Come on, HP, why
	try to keep up with POSIX when you ship a C compiler that's out of
	date by 10 years!  (Personal opinion of HS)

Wed Nov 13 19:21:11 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.10

	* include/ntp_unixtime.h: Declare getclock().

Wed Nov 13 17:57:15 1996  Harlan Stenn  <stenn@grundoon.udel.edu>

	* libntp/a_md5encrypt.c: Declare memmove() if we're supplying it.
	* libntp/a_md512crypt.c: Ditto.

	* include/l_stdlib.h: Control stdlib.h with HAVE_STDLIB_H instead
	of with STDC_HEADERS to shut up lint under SunOS.

Wed Nov 13 17:29:55 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntpd.c: Cleanup header inclusion.

	* ntpdate/ntpdate.c: Cleanup header inclusion.

	* libntp/msyslog.c: Cleanup header inclusion.

Wed Nov 13 01:36:29 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	Prototype/lint patches from Craig Leres <leres@ee.lbl.gov>
	* configure.in:
	* include/md5.h:
	* include/ntp.h:
	* include/ntp_refclock.h:
	* include/ntp_stdlib.h:
	* include/ntp_string.h:
	* libntp/atoint.c:
	* libntp/atouint.c:
	* libntp/authreadkeys.c:
	* libntp/clocktypes.c:
	* libntp/findconfig.c:
	* libntp/md5.c:
	* libntp/statestr.c:
	* libntp/syssignal.c:
	* libntp/tvtoa.c:
	* libntp/utvtoa.c:
	* libparse/parse.c:
	* ntpq/ntpq.c:
	* xntpd/ntp_config.c
	* xntpd/ntp_io.c
	* xntpd/ntp_monitor.c
	* xntpd/ntp_proto.c
	* xntpd/ntp_request.c
	* xntpd/ntp_util.c
	* xntpd/refclock_mx4200.c

Tue Nov 12 19:15:11 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_unixtime.h (GETTIMEOFDAY): x86-OSF changes from Dan
	Murphy <dlm@osf.org>

	* configure.in: x86-OSF patches...
	(ac_cv_var_adjtime_is_accurate): Yes, for x86-OSF.
	nlist() lives in -lld in x86 OSF.
	(AC_CHECK_HEADERS): Look for sys/timers.h .
	(AC_CHECK_FUNCS): Look for getclock() .
	Reported by Dan Murphy <dlm@osf.org>

	* config.guess: Recognize x86 OSF.  From Dan Murphy <dlm@osf.org>

Mon Nov 11 22:00:20 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (AC_CHECK_HEADERS): Don't look for sys/ioctl.h
	under Sunos4*.  From Craig Leres <leres@ee.lbl.gov>

Thu Nov  7 21:07:09 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* WHERE-TO-START: Describe the NEWS file, added a URL to the
	ntp/testing/ directory on louie.

	* Makefile.am (EXTRA_DIST): Added NEWS.

	* README: Reformatted the paragraphs.  Added the NEWS file.

	* configure.in (ac_cv_var_step_slew): For solaris2.[012], not
 	solaris2*.

Wed Nov  6 18:00:20 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (main): Linux lint.
	From Peter K <pko@paradigm-sa.com>

	* configure.in (ac_cv_c_volatile): Write a test for VOLATILE.
	(ac_cv_var_slew_always): SLEW_ALWAYS for bsdi3*, per Dave Mills
	after email from Jeffrey C Honig <jch@bsdi.com>.

	* clockstuff/clktest.c: wasalarmed and iosig are VOLATILE.

	* xntpd/ntpd.c: debug is VOLATILE.

	* xntpd/ntp_intres.c: config_timer and resolve_timer are VOLATILE.

	* xntpd/ntp_timer.c: alarm_flag and alarm_overflow are VOLATILE.

	* ntpdate/ntpdate.c: alarm_flag is VOLATILE.

	* ntpq/ntpq.c: jump is VOLATILE

	* xntpdc/ntpdc.c: jump is VOLATILE.
	(docmd): Disable jump upon return from the handler.  From
	Jeffrey C Honig <jch@bsdi.com>

Mon Nov  4 21:52:57 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_unixclock.c (clock_parms): Deal with TICK_NANO.

	* util/tickadj.c (main): Divide tick read from kernel by 1000 if
 	TICK_NANO.

	* configure.in (TICKADJ_NANO): Added.  Prepare for hrestime_adj,
 	used by recent Solaris2.
	(TICK_NANO): Added.  Prepare for nsec_per_tick, used by recent
 	Solaris2.
	
	* acconfig.h (TICKADJ_NANO): Added.
	(TICK_NANO): Added.

Mon Nov  4 20:51:42 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.9

	* util/tickadj.c (main): Cleanup lint.
	(getoffsets): Cleanup lint.

	* xntpd/refclock_arbiter.c (arb_poll): Cleanup lint.

	* xntpd/ntp_unixclock.c (clock_parms): Cleanup lint.

	* xntpd/ntp_proto.c (receive): Cleanup lint.

	* ntpdate/ntpdate.c (overshoot): Cleanup lint.

	* configure.in (ntp_refclock): Move initialization back to the
	front of the clock tests.

Sun Nov  3 01:14:45 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_make_ntptime): Don't require SIGSYS.
	(ac_cv_var_kernel_pll): Linux should be OK now...

	* util/ntptime.c: Get ready for VOLATILE.

	* xntpd/ntp_loopfilter.c (adj_frequency): syslog() when
 	ntp_adjtime() fails.

Sat Nov  2 17:12:26 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Get ready for VOLATILE.

	* acconfig.h: add VOLATILE

	* xntpd/ntp_loopfilter.c: Prepare for VOLATILE support.
  	Re-indented code.  Don't count on SIGSYS.  syslog() when
 	ntp_adjtime() fails.

	* xntpd/ntp_request.c (get_kernel_info): syslog() when
 	ntp_adjtime() fails.

	* util/ntptime.c (main): Don't count on SIGSYS.

Thu Oct 31 18:20:54 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Remove whitespace in front of CPP directives.
	From Paul.Russell@rustcorp.com.au
	
	(ac_cv_make_tickadj): Always make tickadj - it should never hurt.
  	Requested by Christian Krackowizer <kra1@ds5000.technodat.co.at>,
 	who needs it for hpux9.

Tue Oct 29 21:13:56 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.8

	* util/tickadj.c (getoffsets): Check the kvm_nlist()'s return
 	value against -1 instead of != 0.
  	Bug reported by "Brian C. Huffman" <huffman@louie.udel.edu>
	* xntpd/ntp_unixclock.c (clock_parms): Ditto, just for consistency.

Tue Oct 29 02:44:57 1996  Harlan Stenn  <stenn@whimsy.udel.edu>
	
	* configure.in (VERSION): 5.86.7

	* util/tickadj.c: Grab sys/param.h if we have it, as we might need
 	HZ.  We used to only grab it if we did NOT need nlist.h.  Thanks,
 	Dave!

Mon Oct 28 21:42:18 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.6

	* util/tickadj.c: Make sure HZ is #defined (for hpux9).  Reported
 	by Christian Krackowizer <kra1@ds5000.technodat.co.at>

	* xntpd/ntp_loopfilter.c (ntp_adjtime): Typo'd __adjtimex.
	* xntpd/ntp_request.c (ntp_adjtime): Ditto.
	* xntpd/ntp_unixclock.c (clock_parms): Typo.
	From Ulrich.Windl@rz.uni-regensburg.de

Sun Oct 27 23:21:51 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (VERSION): 5.86.5

	* libntp/libntp.mak: New versions from Greg Schueman
 	<schueman@ix.netcom.com>
	* ntpdate/ntpdate.mak: Ditto.
	* ntpq/ntpq.mak: Ditto.
	* ntptrace/ntptrace.mak: Ditto.
	* xntpd/xntpd.mak: Ditto.
	* xntpdc/xntpdc.mak: Ditto.

Sun Oct 27 01:01:29 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* Makefile.am (EXTRA_DIST): Added WINNT-README.html.

	* ntptrace/Makefile.am (EXTRA_DIST): save is no more...

	* include/ntp_machine.h (PRESET_TICK): Change (every * 0.1) to
	(every / 10).  Greg doesn't know why the floating point was there,
 	either.
	* configure.in: Ditto.

	* xntpd/ntp_refclock.c: NT patch.
	From: Greg Schueman <schueman@ix.netcom.com>
	* xntpd/ntp_unixclock.c (clock_parms): NT patch.
	* blddbg.bat: Ditto.
	* bldrel.bat: Ditto.
	* html/build.html: Ditto.
	* html/hints/winnt: Ditto.
	* include/ntp_machine.h: Ditto.
	* ntptrace/save: Ditto.
	* scripts/wininstall/SETUP.RUL: Ditto.
	* scripts/wininstall/build.bat: Ditto.
	* scripts/wininstall/distrib/readme.nt: Ditto.
	* scripts/wininstall/instsrv/instsrv.c: Ditto.
	* scripts/wininstall/instsrv/instsrv.ncb: Ditto.
	* scripts/wininstall/intel/setup/setup.lst: Ditto.
	* scripts/wininstall/readme.nt: Ditto.
	* scripts/wininstall/setup.rul: Ditto.

Sat Oct 26 00:32:31 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* README: Mention autoconf-2.10.patches and automake-1.0.patches.

	* configure.in: Moved the CHU and HP 58503A clocks into the
 	"--enable-all-clocks" section.  Found by Richard Stallman
 	<rms@gnu.ai.mit.edu>
	(ac_cv_var_can_kmem): Fix help string.

Fri Oct 25 00:21:05 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in: Rearrange and reformat the --enable stuff.

	* Makefile.am (EXTRA_DIST): Added autoconf-2.10.patch.  I hacked
	acgeneral.m4 to let us tell folks what the default is for the
	--enable things.

Wed Oct 23 00:11:43 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_kernel_pll): Disable KERNEL_PLL for
 	Linux until the linux folks get things straightened out.

	(ac_cv_var_adjtime_is_accurate): Not under solaris2.[01]* .
	From Bruce Jerrick <bruce@cse.ogi.edu>

	(ac_cv_var_use_settime): Don't use clock_settime() under
	solaris2.[012]* .  From Bruce Jerrick <bruce@cse.ogi.edu>

	(ntp_canparse): Added.  Use it on all of the parse clocks to make
	sure the user doesn't ask for something unsupported.

Tue Oct 22 00:00:44 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_config.c: Removed "authdelay .008" example from the
	comment describing config file entries - it's not used anymore.
	From Jon Peatfield <J.S.Peatfield@damtp.cam.ac.uk>

	* xntpd/ntp_util.c (stats_config): Initialize the value of buf in
	case the driftfile is empty.
	From Jon Peatfield <J.S.Peatfield@damtp.cam.ac.uk>

	* ntptrace/ntptrace.c: Move #include "ntp_select" later in the
	file so we make sure somebody did a #include <config.h> .
	From Frank Vance <fvance@waii.com>
	* ntpq/ntpq.c: Ditto.
	* ntpdate/ntpdate.c: Ditto.

	* configure.in (ac_cv_var_tick): ix86-sni* can read kmem; don't
	use a PRESET_TICK.  From Andrej Borsenkow <borsenkow.msk@sni.de>

Sat Oct 12 18:47:23 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_nlist_tickadj): Under AIX-4 it's
 	"tickadj", too.  From Frank Vance <fvance@waii.com>
	(ac_cv_decl_sys_errlist):  Recent NetBSD doesn't #include
	<errno.h> from <stdio.h>, so we will #include it ourselves.  From
	a bug reported by Greg Earle <earle@netbsd4me.jpl.nasa.gov>

Thu Oct 10 20:18:38 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_loopfilter.c: Control declaration of syscall
 	declaration with DECL_SYSCALL.  From a bug reported by Greg Earle
 	<earle@netbsd4me.jpl.nasa.gov>
	* xntpd/ntp_request.c: Ditto.
	* util/ntptime.c: Ditto.

	* html/porting.html: Removed reference to SYS_stuff.  Reported by
	Greg Earle <earle@netbsd4me.jpl.nasa.gov>

	* xntpd/ntp_io.c (create_sockets): Clean up some of the code,
	re-indent the entire file.

	* configure.in (ac_cv_var_nlist_tickadj): Under AIX-3.2.5 it's
 	"tickadj".  From Frank Vance <fvance@waii.com>

Tue Oct  8 03:17:15 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/refclock_nmea.c (nmea_receive): Don't listen to the clock
	if the clock can't figure out where it is.
	From Jeff Woolsey <woolsey@jlw.com>

Thu Oct  3 01:36:37 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_kernel_pll): Require sys/timex.h,
	SIGSYS, and NTP_SYSCALLS_{LIBC,STD} for KERNEL_PLL.

	* xntpd/ntp_loopfilter.c: Deal with Linux and ntp_{get,adj}time().
	* xntpd/ntp_request.c: Ditto.

	* configure.in: Under Linux, AC_CHECK_FUNCS(__ntp_gettime).
	(ac_cv_var_kernel_pll): Deal with Linux.  Sigh.

Tue Oct  1 18:27:02 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_make_ntptime, ac_cv_hdr_def_sigsys): Deal
	with x86 Linux braindamage.

Wed Sep 25 18:25:31 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpq/ntpq.c (passwd): Include {DES,MD5} in the Password: prompt.
	(sendrequest): Ditto.
	* xntpdc/ntpdc.c (passwd): Ditto.
	(sendrequest): Ditto.

	* configure.in (ntp_rawdcf): Deal with Linux.
	(ac_cv_var_rawdcf_parity): Ditto.
	(ac_cv_var_dtr_powers_dcf77): Ditto.
	* acconfig.h: (RAWDCF_NO_IGNPAR): Ditto.
	(DTR_POWERS_DCF77): Ditto.
	
Fri Sep 20 00:02:28 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_proto.c (default_get_precision): SEQUENT needs a
	struct timezone declaration.
	From Kenneth Stailey <kstailey@dol-esa.gov>

	* 5.86 released sometime on the 16th...  Did I mention that I'm
 	probably the only one adding things to the ChangeLog?  Probably
	because I'm the only one here using emacs...

Thu Sep 19 22:16:44 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/parse.h: Lose the minimal declaration for printf().
	From a bug reported by <Ulrich.Windl@rz.uni-regensburg.de>.

	* ntpdate/ntpdate.c (signal_no_reset): Added module for _SEQUENT_,
	from Kenneth Stailey <kstailey@dol-esa.gov>.

Tue Sep 17 19:11:00 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/tickadj.c (getoffsets): Have kvm_open() report errors to
 	STDERR.  Use kvm_nlist instead of just nlist in the error log
 	message.

Mon Sep  9 23:32:08 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (init_socket_sig): Check for _AIX in the
	AIX-specific code so things like DEC's OSF won't use it.

Tue Sep  3 23:35:35 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/Makefile.am (SUBDIRS): Deleted.

	* kernel/Makefile.am (SUBDIRS): Added.

	* configure.in (AC_OUTPUT): include/sys/Makefile becomes
	kernel/sys/Makefile .

	* kernel/sys/README: Put discussion of the old include/sys/* files
	in here.

	* include/README: Remove discussion of include/sys/ files.

	* kernel/sys: Moved include/sys to its new home.

Mon Sep  2 02:01:13 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* ntpq/ntpq.c: Default info_auth_keytype to MD5.

Fri Aug 30 00:18:32 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (--enable-kmem): Re-enable kmem for AIX now that
	Skippy's changes to ntp_unixclock.c are in.

	* xntpd/ntp_unixclock.c (clock_parms): Change the hierarchy from
	"NOKMEM" controlling things to "PRESET_TICK" controlling them.
	From Skippy.

	* xntpdc/ntpdc.c: Change default info_auth_keytype from
	KEY_TYPE_DES to KEY_TYPE_MD5.

	* configure.in (ac_cv_var_kmem): Deal with new ac_cv_var_tick
	rules.  From Skippy.

Thu Aug 29 22:13:21 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_use_udp_sigpoll): Not under Linux.
	(ac_cv_var_use_tty_sigpoll): Ditto.
  	From Jon Peatfield <J.S.Peatfield@damtp.cam.ac.uk>
	(VERSION): Bumped to 5.86, something that should have been done a
	while ago.
	(ac_cv_var_tick): Talk to Skippy.  There are cases where we need a
	"virtual" PRESET_TICK and we want to read tickadj via nlist().

Mon Aug 26 03:22:37 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_io.c (init_clock_sig): Use the AIX code when _AIX is
	defined, otherwise some non-AIX platforms get it and lose.

Thu Aug 22 01:24:18 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* libparse/parse.c (days_per_year): Renamed from dysize.
	(parse_to_unixtime): Use days-per_year instead of dysize.
	From bug reported by Bruce Jerrick <bruce@cse.ogi.edu>.
	* parseutil/dcfd.c: Ditto.
	(dcf_to_unixtime): Ditto.
	* xntpd/refclock_leitch.c: Ditto.
	(days_per_year): Ditto.
	(leitch_get_date): Ditto.

	* TODO: Updated the list of files containing SYS_* macros; after
	more dust settles, we should be able to simple remove this code.

	* parseutil/testdcf.c (main): Use NO_PARENB_IGNPAR instead of
	SYS_IRIX* tests.
	From bug reported by David Billinghurst <billingd@crc.cra.com.au>.
	* parseutil/dcfd.c (main): Ditto.
	* xntpd/refclock_parse.c: Ditto.

	* configure.in (ac_cv_var_min_rec_tickadj): Added.
	(ac_cv_var_nlist_extra_indirection): Added.
	(ac_cv_var_no_parenb_ignpar): Added.

	* acconfig.h: Added NLIST_EXTRA_INDIRECTION, MIN_REC_TICKADJ, and
 	NO_PARENB_IGNPAR.

	* util/tickadj.c (main): Use MIN_REC_TICKADJ instead of RS6000.
  	Under AIX, this should be 40.
	(getoffsets): Use NLIST_EXTRA_INDIRECTION instead of RS6000 (in 2
 	places).

	* xntpd/ntp_unixclock.c: #undef hz if hz is #defined, not if
	RS6000 is #defined.
	(clock_parms): Use NLIST_EXTRA_INDIRECTION instead of RS6000 (in
	2 places).

	* util/tickadj.c: Ditto. (hz and RS6000)

	* configure.in (--enable-kmem): Disable read of kmem for AIX.
  	From bug reported by Frank Vance <fvance@waii.com>.

	* xntpd/ntp_io.c: AIX (3.2.5, at least) needs <sys/ioctl.h>.  From
 	Frank Vance <fvance@waii.com>.

	* include/ntp_select.h: Use HAVE_SYS_SELECT_H.  From Frank Vance
	<fvance@waii.com>

	* xntpd/ntp_io.c: Frank Vance <fvance@waii.com> tells me that
	under UXPV, <sys/sockio.h> gives us the SIOC* #defines.

	* configure.in: Look for <sys/select.h> for FD_SET on AIX (and
	PTX?).  From Frank Vance <fvance@waii.com>.

Sun Jul 14 19:10:29 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_struct_sockaddr_has_sa_len): It was struct
 	socket in some places and struct sockaddr in others.  It should be
 	struct sockaddr (and HAVE_SA_LEN_IN_STRUCT_SOCKADDR) everywhere.
	(AC_CHECKHEADERS): Look for <sys/bsd_audioirig.h> for the IRIG
	clock and <sys/tpro.h> for the TPRO clock.  From Dave Mills.
	(--enable-IRIG): Choose based on <sys/bsd_audioirig.h>
	(--enable-TPRO): Choose based on <sys/tpro.h>

	* acconfig.h: Rename HAVE_SA_LEN_IN_STRUCT_SOCKET to
 	HAVE_SA_LEN_IN_STRUCT_SOCKADDR.

	* xntpd/ntp_io.c: Ditto.

Thu Jul 11 05:17:46 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_use_des): Enable DES by default until we
	figure out why MD5 works for Harlan but not for Dave.

	* xntpd/ntp_io.c: Including sys/ioctl.h loses under SunOS4; let's
	not include it and see who complains.

Tue Jul  9 00:19:19 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (NEED_HPUX_ADJTIME): Only say we NEED_HPUX_ADJTIME
	and build adjtimed under hpux[56789].
	(MAKE_LIBPARSE): Lose "--enable-PARSE".  MAKE_LIBPARSE iff
	somebody requests a driver that needs libparse.
	(ntp_eapc): Default "Enable All PARSE Clocks" to no.

Mon Jul  8 03:22:03 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* util/Makefile.am (bin_PROGRAMS): Moved MAKE_NTPTIME here.

Sun Jul  7 01:29:06 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_kernel_pll): Just check if sys/timex.h
	exists.

	* acconfig.h: Switched comments for PPS and KERNEL_PLL.

	* configure.in (MAKE_LIBPARSE_KERNEL): Prepare for deciding when
	we want to build libparse_kernel.

	* libparse/Makefile.am (noinst_LIBRARIES): Fix spelling of
	MAKE_LIBPARSE.  Add MAKE_LIBPARSE_KERNEL.

	* configure.in (MAKE_LIBPARSE): Only make/use libparse if we're
	building the PARSE code.

	* util/ntptime.c: Add #include <config.h> and only make if
	KERNEL_PLL is defined.

	* configure.in (ac_cv_make_ntptime): Added.

	* util/Makefile.am (noinst_PROGRAMS): Added MAKE_NTPTIME.

	* configure.in (--enable-PARSE): Disable unless explicitly
 	requested.
	Removed more ppsclock leftovers.
	
	* acconfig.h: Update the comment for KERNEL_PLL, as requested by
	Dave Mills.

	* configure.in (ac_cv_var_kernel_pll): Always to the check.
	Originally, this was only checked on Linux and we assumed it was
	there under FreeBSD.

Sat Jul  6 01:18:32 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_string.h: Add declaration for strchr() and strrchr()
	if we're on a system without them.

	* include/l_stdlib.h: Declare getpass() and hope it's OK everywhere.

	* xntpd/ntpd.c: Control inclusion of <sys/ioctl.h> with
	HAVE_SYS_IOCTL_H instead of !VMS.
	Better yet, don't include it at all and see if anybody cares.  It
	gives too many warnings under SunOS4 since it duplicates termios.h.

	* adjtimed/Makefile.am (AUTOMAKE_OPTIONS): Added
	AUTOMAKE_OPTIONS=no-dependencies.
	* authstuff/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* clockstuff/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* include/sys/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* include/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* kernel/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* libntp/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* libparse/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* ntpdate/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* ntpq/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* ntptrace/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* parseutil/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* xntpd/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* xntpdc/Makefile.am (AUTOMAKE_OPTIONS): Ditto.
	* util/Makefile.am (AUTOMAKE_OPTIONS): Ditto.

	* Makefile.am (SUBDIRS): Remove ppsclock from the distribution per
	Dave Mills (we're going to leave the ppsclock distribution in its
	own tarball).

	* adjtimed/Makefile.am (EXTRA_DIST): Remove TAGS (and README) from
	EXTRA_DIST.  TAGS causes too much trouble, and README should be
	automatically included.
	* authstuff/Makefile.am (EXTRA_DIST): Ditto.
	* clockstuff/Makefile.am (EXTRA_DIST): Ditto.
	* include/sys/Makefile.am (EXTRA_DIST): Ditto.
	* include/Makefile.am (EXTRA_DIST): Ditto.
	* libntp/Makefile.am (EXTRA_DIST): Ditto.
	* libparse/Makefile.am (EXTRA_DIST): Ditto.
	* ntpdate/Makefile.am (EXTRA_DIST): Ditto.
	* ntpq/Makefile.am (EXTRA_DIST): Ditto.
	* ntptrace/Makefile.am (EXTRA_DIST): Ditto.
	* parseutil/Makefile.am (EXTRA_DIST): Ditto.
	* ppsclock/ppstest/Makefile.am (EXTRA_DIST): Ditto.
	* ppsclock/Makefile.am (EXTRA_DIST): Ditto.
	* xntpd/Makefile.am (EXTRA_DIST): Ditto.
	* xntpdc/Makefile.am (EXTRA_DIST): Ditto.
	* util/Makefile.am (EXTRA_DIST): Ditto.

	* Makefile.am (AUTOMAKE_OPTIONS): Added "no-dependencies" so Dave
 	could use stock "make" anywhere he wants.
	(EXTRA_DIST): Removed TAGS.

	* include/Makefile.am (noinst_HEADERS): Remove $(srcdir)/ from the
 	front of each header - it messed up "make dist" from
 	subdirectories.

Fri Jul  5 00:07:23 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_ntp_syscalls): Prepend SYS_ to the
 	system calls we're looking for.  Found by Dave Mills.

	* xntpd/ntp_util.c (stats_config): Read the drift file using
	fgets() instead of fscanf().  Always call loop_config().
	From: Craig Leres <leres@ee.lbl.gov>

	* adjtimed/Makefile.am (INCLUDES): Remove the -I.. entry, as
	automake generates it for us automatically.
	(ETAGS_ARGS): Run TAGS on Makefile.am .
	* authstuff/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* clockstuff/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* include/sys/Makefile.am (ETAGS_ARGS): Ditto.

	* include/Makefile.am (noinst_HEADERS): Prepend $(srcdir) in front
	of each header so TAGS can find them in "other" build directories.
	(ETAGS_ARGS): Ditto.
	* kernel/Makefile.am (ETAGS_ARGS): Ditto.
	* libntp/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* libparse/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* ntpdate/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* ntpq/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* ntptrace/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* parseutil/Makefile.am (ETAGS_ARGS): Ditto.
	* ppsclock/ppstest/Makefile.am (ETAGS_ARGS): Ditto.
	* ppsclock/Makefile.am (ETAGS_ARGS): Ditto.
	* xntpd/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* xntpdc/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.
	* util/Makefile.am (INCLUDES): Ditto.
	(ETAGS_ARGS): Ditto.

	* Makefile.am (ETAGS_ARGS): Added Makefile.am and configure.in

	* configure.in: TTY_CLK -> TTYCLK.

	* acconfig.h: CHU_CLK -> CHUCLK. Sigh.
	TTY_CLK -> TTYCLK.  Sigh.

	* configure.in (CHUCLK): Code cleanup, and warn if the driver is
	included but sys/

	* xntpd/refclock_conf.c: Change CHU to CHUCLK.
	* xntpd/refclock_chu.c: Ditto.
	* configure.in (CHUCLK): Ditto.

Thu Jul  4 06:57:05 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* include/ntp_machine.h: Fixed typo on HAVE_SYS_STROPTS_H.

	* parseutil/parsetest.c: Add #include <config.h>

	* parseutil/Makefile.am (INCLUDES): Added.
	(noinst_PROGRAMS): Added.

	* parseutil/dcfd.c: Fixed typo on HAVE_TERMIOS_H and HAVE_TERMIO_H.
	Added #include <config.h>.	

Wed Jul  3 06:18:43 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_streams_tli): Clean up the code.  In
 	some cases the result was being changed after the answer was
 	reported to the user.
	(ac_cv_var_can_kmem): Don't AC_DEFINE(NOKMEM) here, wait until
 	after we check for PRESET_{TICK,TICKADJ}.
	(ac_cv_var_kmem): Added.  AC_DEFINE(NOKMEM) if we can't read kmem,
 	or if we can read kmem but both PRESET_{TICK,TICKADJ} are defined.
  	Scream and die if only one of the PRESET_* variables are defined
 	or if no PRESET_* variables are defined but we can't read kmem.

Tue Jul  2 00:24:46 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpdc/ntpdc.c (builtins): 'or' in OPT to argument type flag for
 	the "keytype" command so we can see the current keytype.
	(keytype): When printing the current keytype, print a final \n .

	* ntpq/ntpq.c (builtins): Ditto.
	(keytype): Ditto.

	* xntpd/ntp_io.c: On some platforms the ifa_addr member can be
 	NULL.  Check for this case.  From Jeremy Cooper <j@broder.com>

	* xntpd/refclock_acts.c: Change KEEPPTBACTS logic - if both ACTS
 	and PPTBACTS are defined, then if KEEPPTBACTS is defined #undef
 	ACTS ; otherwise #undef PTBACTS.  Do this *after* including last
 	file that might #Include <config.h> .

	* xntpd/refclock_ptbacts.c: Don't #undef ACTS, just #define
 	KEEPPTBACTS .

	* configure.in (ntp_eac): Change sense to include all suitable
 	clocks by default, as requested by Dave Mills.

Sat Jun 29 07:07:52 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/Makefile.am (xntpd_SOURCES): Added refclock_arbiter.c to
 	the Makefile; Dave already added the code and updated various
 	other bits.

Thu Jun 27 03:07:13 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* configure.in (ac_cv_var_tickadj): Change solaris2, fujitsu, and
 	hpux's value for PRESET_TICKADJ from *tick/16 to tick/16 for
 	tickadj.

	* xntpd/ntp_unixclock.c (clock_parms): We need the value for tick
 	before we handle tickadj.  Skippy says so.  Rename tick -> ptick
 	and tickadj -> ptickadj, so we can keep a local copy of tick and
 	handle PRESET_TICKADJ braindamage in tickadj in a less insane way.

	* util/tickadj.c (main): Handle PRESET_TICK and PRESET_TICKADJ
 	better.  Spell "kernel" correctly.  Rename hz -> hz_int.  Use new
 	hz variable the way ntp_unixclock does.  Generally hack things up
 	in the hope that it will be better than it was before.

	* acconfig.h: Added GPSVME.

	* configure.in: Changed behavior for --enable-all-clocks for:
	       ACTS - Not HPUX.  Needs termio.h or termios.h .
	       BANC - HPUX only, off unless explicitly requested
	      DATUM - Not HPUX.
	     GPSVME - HPUX only, off unless explicitly requested.
              HEATH - Not HPUX.  Needs termio.h or termios.h .
               IRIG - sun4c only.
             MX4200 - Not Ultrix.
               TPRO - sparc-*-* only.
           TRUETIME - Not dec-vax-bsd .
               USNO - Not HPUX.  Needs termio.h or termios.h .
	
Wed Jun 26 06:29:43 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* xntpd/ntp_refclock.c (refclock_cmpl_fp): Clean up declaration
 	for ANSI compilers.  From Andrej Borsenkow <borsenkow.msk@sni.de>

	* include/ntp_if.h: #include sys/stream.h and sys/stropts.h based
 	on their respective availability instead of SYS_*.
	From Andrej Borsenkow <borsenkow.msk@sni.de>

Thu Jun 20 04:37:38 1996  Harlan Stenn  <stenn@whimsy.udel.edu>

	* html/porting.html: First cut at changes caused by the conversion
 	to automake and autoconf.

	* Makefile.am (EXTRA_DIST): Added ChangeLog.

	* configure.in (enable-udp-wildcard): Typo'd enableval.
	(disable-kmem): Ditto.  From Andrej Borsenkow <borsenkow.msk@sni.de>

