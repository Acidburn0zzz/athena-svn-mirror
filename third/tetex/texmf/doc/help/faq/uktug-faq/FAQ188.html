<head>
<title>UK TeX FAQ -- question 188</title>
</head><body>
<h3>What's the name of this file</h3>
<p>One might want this so as to automatically generate a page header or
footer recording what file is being processed.  It's not easy...
<p>TeX retains what it considers the name of the <em>job</em>, only, in
the special macro <code>\jobname</code>; this is the name of the file first
handed to TeX, stripped of its directory name and of any extension
(such as <code>.tex</code>).  If no file was passed (i.e., you're using TeX
interactively), <code>\jobname</code> has the value <code>texput</code> (the name that's
given to <code>.log</code> files in this case).
<p>This is fine, for the case of a small document, held in a single file;
most significant documents will be held in a bunch of files, and
TeX makes no attempt to keep track of files input to the
<em>job</em>.  So the user has to keep track, himself - the only way
is to patch the input commands and cause them to retain details of the
file name.  This is particularly difficult in the case of Plain
TeX, since the syntax of the <code>\input</code> command is so peculiar.
<p>In the case of LaTeX, the input commands have pretty regular
syntax, and the simplest


<a href="FAQ216.html">patching techniques</a> can be used on them:
<pre>
  \def\ThisFile{\jobname}
  \newcounter{FileStack}
  \let\OrigInput\input
  \renewcommand{\input}[1]{%
    \stepcounter{FileStack}
    \expandafter\let
      \csname NameStack\theFileStack\endcsname
      \ThisFile
    \def\ThisFile{#1}%
    \OrigInput{#1}%
    \expandafter\let\expandafter
      \ThisFile
      \csname NameStack\theFileStack\endcsname
    \addtocounter{FileStack}{-1}%
  }
</pre>
(And similarly for <code>\include</code>.)  The code assumes you always use
LaTeX syntax for <code>\input</code>, i.e., always use braces around the
argument.
<p>The <i>FiNK</i> ("File Name Keeper") package provides a
regular means of keeping track of the current file name (with its
extension), in a macro <code>\finkfile</code>.  The bundle includes a
<i>fink.el</i> that provides support under <i>emacs</i> with
AUC-TeX.
<dl>
<dt><tt><i>fink.sty</i></tt><dd><a href="ftp://macros/latex/contrib/supported/fink.tar.gz">macros/latex/contrib/supported/fink.tar.gz</a>
</dl>
<p></body>
