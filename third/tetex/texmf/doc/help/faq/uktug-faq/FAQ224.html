<head>
<title>UK TeX FAQ -- question 224</title>
</head><body>
<h3>Defining a macro from an argument</h3>
<p>It's common to want a command to create another command: often one
wants the new command's name to derive from an argument.  LaTeX
does this all the time: for example, <code>\newenvironment</code> creates
start- and end-environment commands whose names are derived from the
name of the environment command.
<p>The (seemingly) obvious approach:
<pre>
\def\relay#1#2{\def\#1{#2}}
</pre>
doesn't work (the TeX engine interprets it
as a rather strange redefinition of <code>#</code>).  The trick is to use
<code>\csname</code>, which is a TeX primitive for generating command names
from random text, together with <code>\expandafter</code>.  The definition
above should read:
<pre>
\def\relay#1#2{%
  \expandafter\def\csname #1\endcsname{#2}%
}
</pre>
With this definition, <code>\relay{blah}{bleah}</code> is equivalent to
<code>\def</code><code>\blah{bleah}</code>.
<p>Note that the definition of <code>\relay</code> omits the braces round the
'command name' in the <code>\newcommand</code> it executes.  This is
because they're not necessary (in fact they seldom are), and in this
circumstance they make the macro code slightly more tedious.
<p>The name created need not (of course) be <em>just</em> the argument:
<pre>
\def\newrace#1#2#3{%
  \expandafter\def\csname start#1\endcsname{%
    #2%
  }%
  \expandafter\def\csname finish#1\endcsname{%
    #3%
  }%
}
</pre>
With commands
<pre>
\def\start#1{\csname start#1\endcsname}
\def\finish#1{\csname finish#1\endcsname}
</pre>
these 'races' could behave a bit like LaTeX environments.
<p></body>
