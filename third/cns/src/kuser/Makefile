
#
# This makefile is automatically generated by imake... do not modify
# or you may lose your changes when imake generates makefiles again.
# Ignore this message if you are not using imake.
#
#	$Source: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v $
#	$Author: ghudson $
#	$Header: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v 1.1.1.1 1996-09-06 00:47:21 ghudson Exp $
#

NEWTOP=../.
BUILDTOP=../.

DEPEND=$(BUILDTOP)/util/makedepend/makedepend

IMAKE=$(BUILDTOP)/util/imake/imake -I$(BUILDTOP)/util/imake.includes

INCLUDE= -I$(BUILDTOP)/include
CFLAGS=$(DBG) $(INCLUDE) $(DEFINES) $(GLOBAL_CDEFS)
LINTFLAGS=$(INCLUDE) $(DEFINES) $(GLOBAL_CDEFS)

#	$Source: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v $
#	$Author: ghudson $
#	$Header: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v 1.1.1.1 1996-09-06 00:47:21 ghudson Exp $
#

GLOBAL_CDEFS= -DATHENA_COMPAT -DATHENA -DKERBEROS -DVFS $(NOENCFLAG) $(DBMFLAG)

SRCTOP=/mit/kerberos/src

DESTDIR=

SVRDIR= /usr/etc
ATHENADIR=/usr/athena
LIBDIR= /usr/athena/lib
LINTLIBDIR = /usr/lib/lint
BINDIR= /usr/bin
UCBDIR= /usr/ucb
ETCDIR= /etc
DAEMDIR= /usr/etc
SLASHBINDIR= /bin
INCLDIR= /usr/include
MANDIR= /usr/man

KRB_LIB=$(BUILDTOP)/lib/krb/libkrb.a
KRB_LIBDEP=$(KRB_LIB)
KRB_LINTLIB=$(BUILDTOP)/lib/krb/llib-lkrb.ln
KRB_ADM=$(BUILDTOP)/lib/kadm/libkadm.a
KRB_ADMDEP=$(KRB_ADM)

NOENCFLAG=
DES_LIB=$(BUILDTOP)/lib/des/libdes.a
DES_LIBDEP=$(DES_LIB)
DES_LINTLIB=$(BUILDTOP)/lib/des/llib-ldes.ln

DBMFLAG=-DNDBM
KDB_LIB=$(BUILDTOP)/lib/kdb/libkdb.a
KDB_LIBDEP=$(KDB_LIB)

COM_ERR=-lcom_err

COM_ERR_DEP=

ARCHIVE= ar cru

RANLIB= ranlib

COMPILE_ET= compile_et

INSTALLFILE= install -m 444

INSTALLLIB= install -m 444

INSTALLPROG= install -m 555

INSTALLRAW= install

INSTALLSUID= install -m 4555 -o root

LD=ld

AS=as

LINT=lint

CC=cc

CCRO=cc -R

HCC=$(CC)

CPP=$(CC) -E

DBG=-O

DEFINES=-DBSD42

HCFLAGS=$(CFLAGS)

TAGGER=etags

MAKE=make
RM=rm -f
MV=mv
CP=cp
LN=ln -s
LPR=lpr -p
CHMOD=chmod

DEF_UID = 113

#	$Source: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v $
#	$Author: ghudson $
#	$Header: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v 1.1.1.1 1996-09-06 00:47:21 ghudson Exp $
#

# $Source: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v $
# $Author: ghudson $
# $Header: /afs/dev.mit.edu/source/repository/third/cns/src/kuser/Makefile,v 1.1.1.1 1996-09-06 00:47:21 ghudson Exp $
#
# Copyright 1987, 1988 by the Massachusetts Institute of Technology.
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
# Imakefile for kerberos-specific user programs
#

SUBDIRS=passwd
SRCS=kinit.c kdestroy.c klist.c ksu.c ksrvtgt.c
SRCDIR=${SRCTOP}/kuser
CODE=${SRCS} Imakefile
DEFINES=-DBSD42 -DDEBUG
LIBS= ${KRB_LIB} ${DES_LIB}
DEPLIBS= ${KRB_LIBDEP} ${DES_LIBDEP}

all:: kinit

kinit: ${DEPLIBS} kinit.o
	$(CC) $(CFLAGS) -o $@ kinit.o ${LIBS}

install::
	$(INSTALLPROG) kinit ${DESTDIR}${ATHENADIR}/kinit

clean::
	$(RM) kinit kinit.o

all:: kdestroy

kdestroy: ${DEPLIBS} kdestroy.o
	$(CC) $(CFLAGS) -o $@ kdestroy.o ${LIBS}

install::
	$(INSTALLPROG) kdestroy ${DESTDIR}${ATHENADIR}/kdestroy

clean::
	$(RM) kdestroy kdestroy.o

all:: klist

klist: ${DEPLIBS} klist.o
	$(CC) $(CFLAGS) -o $@ klist.o ${LIBS}

install::
	$(INSTALLPROG) klist ${DESTDIR}${ATHENADIR}/klist

clean::
	$(RM) klist klist.o

all:: ksu

ksu: ksu.o ${DEPLIBS}
	$(CC) $(CFLAGS) -o $@ ksu.o ${LIBS}

install::
	$(INSTALLSUID) ksu ${DESTDIR}${ATHENADIR}/ksu

clean::
	$(RM) ksu ksu.o

all:: ksrvtgt

ksrvtgt: ${DEPLIBS} ksrvtgt.o
	$(CC) $(CFLAGS) -o $@ ksrvtgt.o ${LIBS}

install::
	$(INSTALLPROG) ksrvtgt ${DESTDIR}${ATHENADIR}/ksrvtgt

clean::
	$(RM) ksrvtgt ksrvtgt.o

all::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" all "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) all ; \
			echo "### Done with" `pwd`);		\
	done

install::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" install "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) install ; \
			echo "### Done with" `pwd`);		\
	done

clean::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" clean "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) clean ; \
			echo "### Done with" `pwd`);		\
	done

depend::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" depend "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) depend ; \
			echo "### Done with" `pwd`);		\
	done

tags::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" tags "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) tags ; \
			echo "### Done with" `pwd`);		\
	done

print::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" print "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) print ; \
			echo "### Done with" `pwd`);		\
	done

src::
	@for d in  $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making" src "in" `pwd`;	\
			$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) src ; \
			echo "### Done with" `pwd`);		\
	done

Makefiles::
	@echo "### Making Makefiles in" `pwd`
	@for d in $(SUBDIRS); \
	do \
		(cd $$d; echo "### Making Makefile in" `pwd`; \
			$(MAKE) $(MFLAGS) SRCTOP=$(SRCTOP) \
			NEWTOP=../$(BUILDTOP)		\
			BUILDTOP=../$(BUILDTOP)		\
			-f ../Makefile			\
			Makefile; \
			$(MAKE) $(MFLAGS) SRCTOP=$(SRCTOP) \
			NEWTOP=../$(BUILDTOP)		\
			Makefiles; \
			echo "### Done with" `pwd`); \
	done

depend:: $(SRCS)
	@echo "### Now computing dependencies"
	@$(DEPEND) -s "# DO NOT DELETE" $(CFLAGS) $(SRCS)

clean::
	$(RM) *~ \#* *.bak $(TAGSFILE)

tags::
	$(TAGGER) *.c *.h

Makefile::
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(IMAKE) -DNEW_TOP=$(NEWTOP) -s Makefile

print:: ${CODE}
	${LPR} ${CODE}

src:: ${CODE}

${CODE}:
	$(RM) $@
	-$(LN) ${SRCDIR}/$@ $@

install::

Makefiles::

# DO NOT DELETE THIS LINE

