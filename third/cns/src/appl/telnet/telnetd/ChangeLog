Mon Oct 23 11:46:13 1995  Mark Eichin  <eichin@cygnus.com>

	* telnetd.c (doit): clear the environment before trying to use it
	in auth_encrypt_init.

Mon Oct 23 11:45:10 1995  Mark Eichin  <eichin@cygnus.com>

	* state.c (envvarok): add KRB5_CONFIG, KRB5CCNAME, KRBTKFILE,
	KRB_CONF, and KRB_REALMS to the list of bad variables.

Thu Oct 19 17:32:17 1995  Mark Eichin  <eichin@cygnus.com>

	* state.c (envvarok): don't permit *any* environment variables
	that contain the character '='.

Thu Oct 19 01:28:23 1995  Mark W. Eichin  <eichin@cygnus.com>

	* state.c (envvarok): New function, checks environment variables
	for exceptions that should not be passed to login.
	(suboption): don't do anything to propagated environment variables
	if they fail the exception test above.

Thu Feb  2 13:45:44 1995  Ian Lance Taylor  <ian@cygnus.com>

	* telnetd.0.ps, telnetd.0.txt: Remove unnnecessary files.

	* defs.h (HAVE_SYS_PTYVAR_H): Don't define if mips is defined.
	* sys_term.c (getptyslave): If __pyrsoft is defined, don't try to
	use TIOCNOTTY (since it breaks the subsequent setsid call)

	* defs.h (HAVE_SYS_PTYVAR_H): Don't define if __DGUX__ is defined.
	* telnetd.c: If __DGUX__ is defined, include <sys/stream.h>, and
	define _POSIX_BAUD_RATE_FLAVOR (to permit including both <termio.h>
	and <termios.h>).
	* sys_term.c (getptyslave): If __DGUX__ is defined, don't try to
	use TIOCNOTTY (since it breaks the subsequent setsid call), and
	don't try to I_PUSH "pckt" (since it doesn't exist).

Wed Jan 18 17:12:50 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* telnetd.8: Include man1/tmac.doc.

Fri Jan  6 14:55:10 1995  Ian Lance Taylor  <ian@cygnus.com>

	* telnetd.c (telnet): On HP/UX, use F_SETFL O_NONBLOCK rather than
        FIONBIO.

Fri Dec 30 09:09:48 1994  Ian Lance Taylor  <ian@cygnus.com>

	* ext.h: Define DEFAULT_IM reasonably for HP/UX.
	* sys_term.c (login_tty): On HP/UX, it is not serious if TIOCSCTTY
	fails.

Thu Dec 29 13:02:48 1994  Ian Lance Taylor  <ian@cygnus.com>

	* sys_term.c (rmut (UTMPX version)): Remove unused local
	variables.  On SGI, make a utmp entry as well as a utmpx entry.

	* ext.h: Define DEFAULT_IM reasonably for SCO.
	* sys_term.c (getpty): On SCO, use SCO style pty names.

Thu Dec 29 13:53:42 1994  Mark Eichin  <eichin@cygnus.com>

	* telnetd.c (doit): enable rewrite when setenving KRB_CONF.

Wed Dec 28 15:08:38 1994  Ian Lance Taylor  <ian@cygnus.com>

	* ext.h: Define DEFAULT_IM reasonably for AIX.
	* sys_term.c (getptyslave): Don't use TIOCNOTTY on AIX.

Tue Dec 20 18:17:16 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* telnetd.c (realm_file): New static variable.
	(opts): If KRB4 is defined, add "R:t:".
	(main): If KRB4 is defined, handle -R and -t.
	(usage): If KRB4 is defined, mention -R and -t.
	(doit): If realm_file is not NULL, set KRB_CONF in the
	environment.
	* telnetd.8: Document -R and -t.

Fri Dec 16 11:31:20 1994  Ian Lance Taylor  <ian@cygnus.com>

	* ext.h (terminaltype): Declare as extern.
	(line, encrypt_output, decrypt_input): Move declarations from
	here...
	* defs.h (line, encrypt_output, decrypt_input): ...to here.
	* sys_term.c (line): Always use the __GNUC__ case; strings may be
	constant on any compiler.
	* telnetd.c (auth_level): Don't define; it's in global.c anyhow.

Thu Dec 15 15:00:45 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* defs.h (STREAMS): Don't define if NO_PTYEM is defined.
	* sys_term.c: Define my_setpgrp as a macro, rather than defining
	setpgrp in terms of itself.  Use my_setpgrp instead of setpgrp.

	* defs.h (HAVE_SYS_PTYVAR_H): Define if using STREAMSPTY, unless
	i386 is defined (UnixWare doesn't have <sys/ptyvar.h>).
	* telnetd.c: If HAVE_SYS_PTYVAR_H is not defined, don't include
	<sys/ptyvar.h>, but instead define the TIOCPKT_* macros directly.

	* defs.h: Don't bother to define NO_UT_HOST, since the conf.h
	actually defines NOUTHOST.
	* sys_term.c: If UTMPX is defined, undefine NOUTHOST.  Use
	NOUTHOST instead of NO_UT_HOST.

Wed Dec 14 11:19:33 1994  Ian Lance Taylor  <ian@cygnus.com>

	* sys_term.c (L_SET): Define if not defined.

	* defs.h: If __SCO__ is defined, include <sys/spt.h> and define
	NO_UT_HOST.  If HAVE_SYS_PTEM_H is defined, include <sys/stream.h>
	and <sys/ptem.h>.

Tue Dec 13 13:06:37 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* utility.c: `??)' is also a trigraph, so just use `?)'.

Mon Nov 28 13:17:45 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* defs.h (UTMPX): Define on Solaris.

Wed Nov 23 14:08:56 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* sys_term.c (utmp_len): If NO_UT_HOST is defined, just initialize
	to MAXHOSTNAMELEN.
	(getpty): Cast _getpty result to char *.
	(startslave): If NO_UT_HOST is defined, don't set the ut_host
	field.
	(rmut): Likewise.
	* defs.h (NO_UT_HOST): Define on Irix 4.

	* Makefile.in: Add dependencies required for SunOS make VPATH
	support.
	(telnetd): Don't link against $(LIBNDBM).
	* defs.h: If BSD is defined with a large value, and this is not a
	Sun, just define it as 43 (this happens on OSF/1).
	* utility.c: Change ??\?) to just ??) to make it work with both
	ANSI trigraphs and classic C compilers.

Tue Nov 22 19:21:10 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	Merged into V4 distribution, using Cygnus configure instead of
	autoconf.  Added -L option to select login program to use.  Added
	support for SGI _getpty routine.

Fri Nov 18 01:23:13 1994  Mark Eichin  <eichin@cygnus.com>

	* Makefile.in (install): install telnetd manpage
	(from Ted Lemon <mellon@ipd.wellsfargo.com>).

Fri Nov 18 00:44:05 1994  Mark Eichin  <eichin@cygnus.com>

	* configure.in: use WITH_KRB4, cache cc_t in termio check, cache
	SETPGRP_TWOARG check.
	* Makefile.in (K4LIB): use @K4LIB@.
	(telnetd): use $(K4LIB). (from epeisach)

Mon Nov  7 22:16:51 1994  Theodore Y. Ts'o  (tytso@dcl)

	* configure.in: 
	  sys_term.c: Only include <sys/tty.h> if HAVE_SYS_TTY_H is
	  	  defined by configure.

        * configure.in: Check for sys/time.h and time.h.

	* defs.h: Pull in <sys/time.h> and <time.h> as necessary.

	* sys_term.c (startslave): Don't define time() manually.

	* configure.in: Add check for util library (needed for the Alpha)

Thu Sep 29 22:51:52 1994  Theodore Y. Ts'o  (tytso@dcl)

	* Makefile.in: Relink executables if libraries change

Tue Aug 16 18:04:58 1994  Mark Eichin  (eichin@tweedledumber.cygnus.com)

	* configure.in: check for vhangup.
	sys_term.c (cleanup): check for HAVE_VHANGUP.
	(cleanopen): ditto.

Mon Aug  8 01:15:27 1994  Mark Eichin  (eichin@cygnus.com)

	* utility.c (putf): don't misdeclare index/rindex, strings.h
	already got included. Don't even use them -- use str*chr instead.

Thu Aug  4 03:37:26 1994  Tom Yu  (tlyu@dragons-lair)

	* configure.in: pick up dbm libs

	* sys_term.h: fix linux lossage, i.e. <linux/tty.h>
	* configure.in: check for STREAMSPTY (hopefully)

	* Makefile.in:
	* configure.in: make install changes

Tue Jul 26 18:23:01 1994  Tom Yu  (tlyu@dragons-lair)

	* Makefile.in: fix missing $(srcdir)

Mon Jul 25 02:35:16 1994  Tom Yu  (tlyu@dragons-lair)

	* configure.in: check for utmpx

