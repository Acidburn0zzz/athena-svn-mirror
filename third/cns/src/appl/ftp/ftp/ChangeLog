Tue Jun  4 23:14:59 1996  Marc Horowitz  <marc@mit.edu>

	* secure.c: conditionalize sys_errlist declaration on
 	HAVE_SYS_ERRLIST_DECL
	* ftp.c: conditionalize sys_errlist declaration on
 	HAVE_SYS_ERRLIST_DECL
	* cmdtab.c: rename setmode() to ftp_setmode()
	* cmds.c: conditionalize sys_errlist declaration on
 	HAVE_SYS_ERRLIST_DECL
	(ftp_setmode): renamed from setmode() to avoid conflicting with
	a netbsd function
	(ftp_getmode): renamed from getmode() to avoid conflicting with
	a netbsd function
	(cstatus): rename getmode() to ftp_getmode()

Tue Oct 24 16:10:29 1995  Mark Eichin  <eichin@cygnus.com>

	* secure.c (secure_putbuf, secure_getbyte): use getsockname and
	getpeername directly on the data channel in order to get the right
	bindings for krb_mk/rd_priv/safe.
	* secure.h: no longer need to set hisaddr, myaddr.
	
Wed Jul 26 21:01:42 1995  Ken Raeburn  <raeburn@cygnus.com>

	* domacro.c: Include string.h.
	* secure.c: Ditto.

Mon Jul 10 14:54:41 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* glob.c (matchdir): #if 0 code that uses a private member of the
	DIR structure to check whether a filename passed to opendir is a
	directory or not.

Fri May 26 19:36:12 1995  Mark Eichin  <eichin@cygnus.com>

	* glob.c (matchdir): open "." explicitly if gpath is null.

Fri May 19 16:11:07 1995  Mark Eichin  <eichin@cygnus.com>

	* ftp.c (ptransfer): be sure that printf(%g) gets a float, not an
	implicit double, by doing the whole calculation in the variable.

Thu Feb  2 13:40:04 1995  Ian Lance Taylor  <ian@cygnus.com>

	* ftp.c: Don't try to use IP_TOS if the IP_TOS argument
	(IPTOS_LOWDELAY, etc.) is not defined.

Wed Jan 18 14:07:33 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* ftp.1: Include man1/tmac.doc.

	* ftp.c (initconn): If the PASV command is rejected, turn off
	passive mode and try again.

Wed Jan  4 11:21:34 1995  Ian Lance Taylor  <ian@tweedledumb.cygnus.com>

	* cmds.c, ftp.c: Use mygetpass instead of getpass.

	* ruserpass.c: Don't include <utmp.h>.  Don't declare getlogin,
	getpass, or getuttmp.

Thu Dec 29 15:19:44 1994  Mark Eichin  <eichin@cygnus.com>

	* cmds.c (setpeer): add || defined(linux) to the NBBY == 8 check,
	since this code is appropriate under linux.

Thu Dec 29 14:11:37 1994  Mark Eichin  <eichin@cygnus.com>

	* cmds.c (siteidle): renamed idle() to avoid conflict with linux
	idle(void).
	* cmdtab.c: rename declaration and cmdtab entry.

Tue Dec 27 13:29:08 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* ftp.c: If STDARG is defined, or if __STDC__ is defined and
	VARARGS is not defined, include <stdarg.h>, instead of
	<varargs.h>.
	(command): Use <stdarg.h> routines if STDARG || (__STDC__ && !
	VARARGS).
	(secure_error): Likewise.
	* ftp_var.h (command): Declare if STDARG || (__STDC__ && !
	VARARGS).
	* secure.c (secure_error): Likewise.

	* secure.h (hisaddr): Define as hisdataaddr.
	* ftp.c (hisdataaddr): New global variable.
	(initconn): Set hisdataaddr to data_addr.
	(dataconn): Use hisdataaddr instead of local variable from.

Fri Dec 23 15:18:12 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* cmds.c (unix): Define if _AIX is defined (AIX compiler does not
	predefine unix).

	* ftp.c (login): When choosing the default login name, use the
	values of the environment variables LOGNAME and then USER in
	preference to calling getlogin.

Thu Dec 22 14:59:34 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* cmds.c (gettype): Sometimes type will be zero, which requires
	special handling.

	* main.c: Include <krb.h>.
	(main): Support new option: -k.
	* ftp.c (realm): New global variable.
	(do_auth): Remove local variable realm; use new global instead.
	Don't call krb_realmofhost if realm is set.
	* ftp.1: Document -k.

Fri Dec 16 10:53:08 1994  Ian Lance Taylor  <ian@cygnus.com>

	Fixes for Alpha OSF/1:
	* cmds.c: Redefine sig_t to my_sig_t to avoid header file
	conflict.
	* ftp.c: Likewise.

	Fixes for SCO:
	* cmdtab.c: Include <stdio.h> before ftp_var.h.
	* domacro.c: Move include of <stdio.h> before include of
	ftp_var.h.  Don't include <sys/ttychars.h>.
	* main.c: Move include of <stdio.h> before include of ftp_var.h.

	Fixes for AIX:
	* cmds.c (mput): Use 0 instead of NULL when an integer is
	expected.
	(getit, mget): Likewise.
	* ftp_var.h (strncpy, strncat, strcat, strcpy): Don't declare.
	* ruserpass.c (strcpy): Don't declare.
	* secure.c: Include <netinet/in.h>.

	Fixes for Irix 4:
	* ftp_var.h: Unless DEFINITIONS is defined, declare variables
	rather than defining them.
	* ftp.c: Define DEFINITIONS before including ftp_var.h.
	(recvrequest): If NOSTBLKSIZE is defined, use BUFSIZ instead of
	st_blksize.
	* getpass.c: Put note after #endif in /* */
	* pclose.c: Likewise.
	* ruserpass.c (token): Move before ruserpass.
	(ruserpass): Don't declare token.

	General fixes to make it compile on Solaris: Use sigtype for
	signal handler return values, including conf.h where needed.  Add
	a dummy argument to signal handler functions. Replace index,
	rindex, bzero and bcopy with ANSI C functions.  Cast Kerberos
	routine arguments to avoid warnings.  Also:
	* cmds.c: Include <string.h>.  If POSIX is defined, include
	unistd.h, otherwise define getcwd to call getwd.
	(lcd): Call getcwd instead of getwd.
	(shell): If WAIT_USES_INT, use int instead of union wait.
	* ftp.c: Include <string.h>.
	(L_SET, L_INCR): Define if not defined.

	* ftp_var.h (index, rindex): Don't declare.
	* main.c: Inclue <string.h>.
	* pclose.c (getdtablesize): New function on hpux or __svr4__.
	* radix.c (radix_encode): Cast strcmp arguments to avoid warnings.
	* ruserpass.c: Include <string.h>.  If POSIX, include <stdlib.h>
	and don't declare malloc.
	(MAXHOSTNAMELEN): Define if not defined.
	(index): Don't declare.

Thu Dec 15 16:13:44 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* Initial checkin.  Based on Steve Lunt's ftp program, which was
        based on BSD code.
