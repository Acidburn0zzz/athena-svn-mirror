#### include configury here

BUILDTOP=$(C)$(S)$(U)$(U)$(U)

ALL	= ftpd
OBJS	= ftpd.o ftpcmd.o glob.o popen.o logwtmp.o vers.o radix.o secure.o

LOCALINCLUDE = -I$(srcdir)/..
DEFINES = -DKERBEROS

all:	$(ALL)

$(ALL):	$(OBJS) $(KRB_LIBDEP) $(DES_LIBDEP)
	$(CC) $(CFLAGS) $(OBJS) -o $@ $(KRB_LIB) $(DES_LIB) $(CRYPT_LIB)

clean:
	rm -f $(ALL) $(OBJS) ftpcmd.c

distclean:: clean
	-rm -f *~ core
	-rm -f Makefile config.status 

depend:

install:
	$(INSTALLPROG) ftpd $(DESTDIR)$(DAEMDIR)/ftpd
	$(INSTALLFILE) $(srcdir)/ftpd.8 ${DESTDIR}$(MANDIR)/man8/ftpd.8

ftpcmd.c: ftpcmd.y
	rm -f ftpcmd.c y.tab.c
	yacc $(srcdir)/ftpcmd.y
	mv -f y.tab.c ftpcmd.c

glob.o: $(srcdir)/../ftp/glob.c
	$(CC) -c $(CFLAGS) $(srcdir)/../ftp/glob.c
radix.o: $(srcdir)/../ftp/radix.c
	$(CC) -c $(CFLAGS) $(srcdir)/../ftp/radix.c

ftpd.o: pathnames.h
secure.o: secure.h

ftpd.o: ftpd.c
ftpcmd.o: ftpcmd.c
popen.o: popen.c
logwtmp.o: logwtmp.c
vers.o: vers.c
secure.o: secure.c

# NOPOSTFIX
