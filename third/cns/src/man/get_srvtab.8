.\"
.\" Copyright 1992 by the Massachusetts Institute of Technology.
.\"
.\" For copying and distribution information,
.\" please see the file <mit-copyright.h>.
.\"
.TH GET_SRVTAB 8 "Kerberos Version 4.0" "MIT Project Athena"
.SH NAME
get_srvtab \- obtain service key files from Kerberos key distribution center 
.SH SYNOPSIS
get_srvtab [
.B \-f 
] [
.B \-s 
.I service ... 
] [
.B -r
.I realm
] [
.B -u
.I principal
] [
.B \-h 
] 
.I host ... 

or

get_srvtab 
.B \-i
[
.B \-f 
] [
.B \-s 
.I service ...
] [
.B -r
.I realm
] [
.B -u
.I principal
] 

.SH DESCRIPTION
.I get_srvtab
generates new service key files from the the Kerberos(8) server.  
.I get_srvtab
sends a request to the Kerberos administration daemon (kadmind),
asking it to generate a new random service key.  This key is sent back
to the  
.I get_srvtab program,
and it is written into a newly created srvtab file named
.IR hostname -new-srvtab
in the current working directory.

Since 
.I get_srvtab 
needs to authenticate to the Kerberos administration daemon, it will
prompt the user for his or her root instance password.  The 
.I \-p
option can be used to override the default principal used to
authenticate to the administration.

.I get_srvtab
will warn the user and ask for confirmation if the specified hostname
does not exist in the DNS namespace, or if request service key has not
existed in the past.  The 
.I \-f
option will disable the requests for confirmation.  Note, however,
that since the user must still type his or her root instance password
when 
.I get_srvtab
is run, that this program is still not suitable for use in a shell script.

By default, 
.I get_srvtab
will generate srvtabs for the 
.B rcmd
and 
.B rvdsrv
services.  This can be changed by using the 
.I \-s
option, which allows the user to explicitly list the services which
should be included in the srvtab file.  Note that the Kerberos
administration daemon sets limitations on what services you may
request through this program.

The 
.I \-i
option can only be used by the superuser.  If this option is
specified, no hosts can be specified on the command line, and 
.I get_srvtab
will generate service keys for the host on which it is running, and
install those keys in /etc/athena/srvtab.  

.SH "WARNING"

.I get_srvtab
causes a new random key for each service, rendering any existing
srvtab file obselete.  This means that if the host
is currently in service and has an old srvtab file which it is using,
you must either use the
.I \-i 
option, which installs the srvtab file on the local host right after
it is created, or you must manually install the srvtab on the server
machine as soon as possible.  Otherwise, it will not be possible for
clients to authenticate using Kerberos to that server, since that
server's /etc/athena/srvtab file will be out-of-date.

If the
.I \-i
option is not specified, 
.I get_srvtab
generates the srvtab file in the current directory.  In that case, if
your current directory resides on a remote fileserver (either AFS or
NFS) the generated srvtab file will be sent across the network without
being encrypted.  This should be avoided whenever possible.  Note that
you should be doubly careful when writing the srvtab file to an AFS
directory, since get_srvtab will not set the protections on the
containing directory for you.

.SH "FILES"
.IR hostname -new-srvtab,
.I /etc/athena/srvtab
.SH "SEE ALSO"
ext_srvtab(8), make_srvtab(8), kadmin(8), kerberos(8)
.SH AUTHOR
Theodore Y. Ts'o, MIT Distributed Computing and Network Services
