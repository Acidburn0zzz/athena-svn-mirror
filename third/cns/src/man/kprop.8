.TH KPROP 8 "Kerberos Version 4.0" "MIT Project Athena"
.UC 5
.SH NAME
kprop \- send Kerberos database from master to slave
.br
push-kprop \- shell script to run kprop
.SH SYNOPSIS
.br
.B kprop
[
.B \-p
] [
.B \-force
] [
.B \-realm
realm ] [
.B \-private
] [
.B \-s
srvtab ] data_file slaves_file
.br
.B push-kprop
.SH DESCRIPTION
The
.I kprop
program is used to copy the Kerberos database from the Kerberos master
server to a slave server.  Any slave server may serve as a Key
Distribution Center just as the master server does, permitting people
to use Kerberos programs even if the master server is inaccessible.

The
.I kprop
program communicates with the 
.IR kpropd (8)
daemon, which runs on the slave server.

The 
.I data_file
argument is a file created by
.IR kdb_util (8)
with the
.I slave_dump
option.

The
.I slaves_file
argument is a text file containing a list of the hostnames of the
slave servers.  It should contain one hostname per line.  Each
hostname may optionally be followed by the port number to contact,
separated by a colon (e.g. host.domain:2754).  The default port number
is found by using
.IR getservbyname(3)
to look up the
.I krb_prop
service.  If that is not defined,
.I kprop
uses 754.

The
.I kprop
program and the
.IR kdb_util (8)
program communicate using a semaphore file.  The name of the file is
the
.I data_file
argument with
.I .dump_ok
appended.  The file is automatically created by
.IR kdb_util (8)
when the
.I slave_dump
option is used.

The
.I push_kprop
shell script may be used to invoke
.I kprop.
It assumes that the list of slaves is in the file
.IR /usr/kerberos/database/slavelist.

Normally the Kerberos database will be propagated from the server to
the slaves by invoking
.I push_kprop
on a regular basis using
.IR cron (8).

The
.I kprop
program requires a srvtab file with an entry for
.B rcmd.HOSTNAME@REALM.
This is the same type of srvtab file required to run the
.IR klogind (8)
or
.IR kshd (8)
servers.  Srvtab files can be created using the 
.IR ksrvutil (8)
program.  The default srvtab file is
.IR /etc/krb-srvtab.
This default may be overridden with the
.B \-s
option.
.SH OPTIONS
.TP 5
.B \-p
Use preauthentication when retrieving tickets.
.TP
.B \-force
Transfer the database even if the semaphore file generated by
.IR kdb_util (8)
indicates that the dump is not up to date.
.TP
.B \-realm realm
Set the Kerberos realm name.  The default realm name is obtained using
.IR krb_get_lrealm (3).
.TP
.B \-private
Encrypt the data being sent to the slave server.  This is the default.
.TP
.B \-s srvtab
Set the name of the srvtab file to use when retrieving tickets.  The
default is
.IR /etc/krb-srvtab.
.SH FILES
.TP 5
/usr/kerberos/database/slavelist
The list of slave hostnames used by
.I push-kprop.
.TP
/usr/kerberos/database/slavesave
The database dump file used by
.I push-kprop.
.TP
/tmp/kproptktXXXXXX
The ticket file used by
.I kprop.
.TP
/etc/krb-srvtab
The default srvtab file.
.SH SEE ALSO
.PP
kpropd(8), kdb_util(8), cron(8), krb_get_lrealm(3), ksrvutil(8),
klogind(8), kshd(8), getservbyname(3)
