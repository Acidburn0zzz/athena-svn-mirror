ARCHIVEARGS= $@ $(OBJS)

# Library to create
LIBNAME=libkstream.$(LIBEXT)

#### include configury here
##DOS!include ..\..\config\common
##DOS!include ..\..\config\mt-win

# We want *library* compiler options...
DBG=$(DBG_LIB)

BUILDTOP=$(C)$(S)$(U)$(U)

#ifdef NOENCRYPTION
SRCS = kstream.c
OBJS = kstream.$(OBJEXT)
#else
SRCS = kstream.c kstream_des.c
OBJS = kstream.$(OBJEXT) kstream_des.$(OBJEXT)
#endif

CODE=$(SRCS) Makefile.in kstream_int.h

all::

depend:: $(CODE)

all:: $(LIBNAME)

$(LIBNAME): $(OBJS)
	$(RMLIB) $@
	$(ARCHIVE) $(ARCHIVEARGS)
	$(RANLIB) $@

clean:: clean-$(WHAT)
	-$(RM) $(LIBNAME)
	-$(RM) *.$(OBJEXT)

distclean:: clean
	$(RM) *~ core
	$(RM) Makefile config.status 

clean-::
clean-unix::

clean-windows::
	-$(RM) libkstre.bak
	-$(RM) msvc.pdb
	-$(RM) proj.err

install:: install-$(WHAT)

install-unix::
	$(INSTALLLIB) $(LIBNAME) $(DESTDIR)$(LIBDIR)/$(LIBNAME)
	$(CHMOD) 644 $(DESTDIR)$(LIBDIR)/$(LIBNAME)
	$(RANLIB)    $(DESTDIR)$(LIBDIR)/$(LIBNAME)
	$(CHMOD) 444 $(DESTDIR)$(LIBDIR)/$(LIBNAME)

install-windows::

## 
