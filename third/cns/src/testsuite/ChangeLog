Fri Oct 27 18:51:15 1995  Mark Eichin  <eichin@cygnus.com>

	* config/default.exp: 90 second sleep after kadmind is killed to
	let the hold on the port expire. (V5 uses SO_REUSEADDR instead.)

Fri Feb 10 17:40:31 1995  Ian Lance Taylor  <ian@cygnus.com>

	* krb-standalone/rsh.exp: Mark the encrypted rsh tests as expected
	failures.

Thu Feb  2 13:50:34 1995  Ian Lance Taylor  <ian@cygnus.com>

	* config/default.exp: Add comments explaining how to run the
	krb-root tests on a system which does not have Kerberos installed.

Tue Jan 17 17:32:47 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/default.exp (check_klogin): New procedure.
	* krb-root/rlogin.exp: Call check_klogin.
	* krb-root/telnet.exp: Likewise.
	* krb-standalone/ftp.exp: Likewise.
	* krb-standalone/rcp.exp: Likewise.
	* krb-standalone/rsh.exp: LIkewise.

Mon Jan 16 15:53:43 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/rsh.exp: Don't check for "setgroups" string; rshd
	no longer outputs it.

	* krb-standalone/rcp.exp: Always pass -P3544 -N -k KRBTEST.COM to
	rcp.

	* config/default.exp: When turning off expect_after when a failure
	was caught by expect_after, use catch to avoid errors.
	* krb-root/rlogin.exp: Likewise.
	* krb-root/telnet.exp: Likewise.
	* krb-standalone/ftp.exp: Likewise.
	* krb-standalone/standalone.exp: Likewise.

	* krb-standalone/rsh.exp: Move comments out of expect body.

	* krb-standalone/ftp.exp: Set $HOME around ftp test to avoid
	getting confused by $HOME/.netrc.

Wed Jan  4 17:45:58 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/standalone.exp: Test using kdb_util to change the
	master key and reload the database.  Use kstash to make sure that
	the key really was changed.

	* config/default.exp (setup_kerberos_db): Don't look for "Enter"
	before "Kerberos master key".  Add $KEY to end of "masterkey".
	Expect kdb_init to request that the master key be reentered.

Fri Dec 30 10:13:24 1994  Ian Lance Taylor  <ian@cygnus.com>

	* krb-standalone/ftp.exp: Increase timeout around test, since it
	can take a little while to get logged in.  This was required on
	UnixWare.

Thu Dec 29 13:05:46 1994  Ian Lance Taylor  <ian@cygnus.com>

	* krb-root/telnet.exp (telnet_test): Don't require a particular
	type of flow control--SCO apparently defaults to none.

Wed Dec 28 18:01:41 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/default.exp (setup_srvtab): Make the srvtab globally
	readable, in case it needs to be read by root and this directory
	is NFS mounted.

	* config/default.exp (BINSH): If not set, set to /bin/sh5 if it
	exists (as on Ultrix) otherwise set to /bin/sh.
	(KEY): Use $BINSH instead of /bin/sh.
	(setup_root_shell): Likewise.
	* krb-root/rlogin.exp (rlogin_test): Likewise.
	* krb-root/telnet.exp (telnet_test): Likewise.
	* krb-standalone/rsh.exp (rsh_test): Likewise.

Tue Dec 27 12:33:16 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/default.exp: If an expect_after returns, clear the
	expect_after before returning.
	* krb-root/rlogin.exp: Likewise.
	* krb-root/telnet.exp: Likewise.
	* krb-standalone/ftp.exp: Likewise.

	* config/default.exp: Consider "Kerberos rlogin failed" or eof as
	indicating an inability to get a root shell.

Fri Dec 23 13:19:11 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/default.exp (setup_root_shell): Set the environment
	variable tmppwd in the root shell.
	* krb-root/rlogin.exp (start_rlogin_daemon): Use the shell
	environment variable tmppwd instead of the TCL variable, to keep
	the command line length down.
	* krb-root/telnet.exp (start_telnet_daemon): Likewise.

	* krb-standalone/ftp.exp: Accept '-' and 'e' in seconds, since it
	is printed using %g.

	* krb-standalone/ftp.exp: Look for \r after sending quit, to keep
	expect from hanging on some platforms.

	* krb-root/rlogin.exp: Look for \r or \n at the end of the date
	string, to make sure we pick up the entire string.
	* krb-root/telnet.exp: Likewise.
	* krb-standalone/rsh.exp: Use $, and \r or \n, to make sure we
	pick up the whole date string.

Thu Dec 22 15:12:56 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/default.exp: Set env(USER) if it is not set.

	* krb-standalone/ftp.exp: New test, of ftp.

	* krb-standalone/rsh.exp (rsh_test): Make spawn_id global.

	* krb-root/telnet.exp: Increase timeout around test, since it can
	take a little while to get logged in.
	* krb-root/rlogin.exp: Likewise.

Wed Dec 21 18:29:01 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-root/rlogin.exp: New test, of rlogin.
	* krb-standalone/rsh.exp: New test, of rsh.
	* krb-standalone/rcp.exp: New test, of rcp.

	* config/default.exp (RLOGIN): Define if not defined.
	(ROOT_PROMPT, SHELL_PROMPT): Define if not defined.
	(orig_krb_conf, orig_krbtkfile): Save original values of KRB_ROOT
	and KRBTKFILE environment variables.
	(restore_kerberos_env): New procedure.
	(setup_root_shell, stop_root_shell): New procedures.
	(check_date): New procedure.
	* krb-root/telnet.exp: Call setup_root_shell and stop_root_shell
	rather than doing it here.
	(RLOGIN): Don't bother to define.
	(ROOT_PROMPT, SHELL_PROMPT): Likewise.
	(stop_telnet_daemon): Make telnetd_pid global, so it works.
	(telnet_test): Test that the server sets up the date correctly.

Tue Dec 20 18:36:23 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-root/telnet.exp: New telnet test.  The test requires a root
	ticket.

	* config/default.exp: Add a bunch of procedures, partially copied
	from krb-standalone/standalone.exp.
	* krb-standalone/standalone.exp: Call the new procedures in
	config/default.exp instead of doing all work here.  Various
	associated changes.

Tue Dec 13 07:46:29 1994  Ian Lance Taylor  <ian@cygnus.com>

	* krb-standalone/standalone.exp: Add several expects to pick up
	the last output of the program, which appears to be required to
	prevent expect from hanging on AIX.

Wed Nov 23 14:24:14 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/standalone.exp: Update klist expect to correspond
	to change in error message.

Tue Nov 22 11:59:27 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/standalone.exp: Add verbose messages for the
	daemons.  Change the expect string for kadmind to be nearer the
	end of what it outputs.

	* krb-standalone/standalone.exp: Close the spawn_id after waiting
	for it.  This appears to be necessary to clear expects internal
	buffers.

Mon Nov 21 13:31:13 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/standalone.exp: Use catch to kill daemons even if
	there is a TCL error.

Fri Nov 18 14:47:31 1994  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* krb-standalone/standalone.exp: Add tests to run Kerberos against
	itself on the local system.

