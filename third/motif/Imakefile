XCOMM 
XCOMM @OSF_COPYRIGHT@
XCOMM (c) Copyright 1990, 1991, 1992, 1993, 1994 OPEN SOFTWARE FOUNDATION, INC.
XCOMM ALL RIGHTS RESERVED
XCOMM  
XCOMM 
XCOMM 
XCOMM HISTORY
XCOMM Motif Release 1.2.5
XCOMM 
XCOMM   $RCSfile: Imakefile,v $ $Revision: 1.1.1.1 $ $Date: 1999-01-30 03:16:26 $
#define IHaveSubdirs
#define PassCDebugFlags 'CDEBUGFLAGS=$(CDEBUGFLAGS)'

#ifndef DontBuildMotifDemos
      DEMOSDIRECTORY	= demos
#endif

      WORLDOPTS = -k
      SUBDIRS = config lib tools/wml clients $(DEMOSDIRECTORY) bitmaps bindings


MakeSubdirs($(SUBDIRS))

XCOMM
XCOMM Make sure you do make includes after removing X11....
XCOMM
clean::
	$(RM) -r X11

includes::
	$(RM) -r X11

XCOMM
XCOMM before depending, be sure to have run make includes
XCOMM

DependSubdirs($(SUBDIRS))


XCOMM 
XCOMM install; create the directories that we're going to need
XCOMM 

#ifdef UseInstalled
TESTS_IMAKE = $(IMAKE) -DUseInstalled
#else
TESTS_IMAKE = ../$(IMAKE)
#endif
DIRS_TO_CREATE = $(USRLIBDIR) $(BINDIR) $(INCDIR) $(USRINCDIR) $(LIBDIR) $(XAPPLOADDIR)

MakeDirectories(install, $(DIRS_TO_CREATE))

XCOMM don't name your log file make.log when you run this ...
World::
	@echo ""
	@echo "Building Release 1.2.5 of OSF/Motif"
	@echo ""
	@date
	cd $(IMAKESRC); $(MAKE) $(MFLAGS) -f Makefile.ini clean; $(MAKE) $(MFLAGS) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(MAKE) $(MFLAGS) -f Makefile.bak Makefile
	$(MAKE) $(MFLAGS) Makefiles
	$(MAKE) $(MFLAGS) testsMakefile
	$(MAKE) $(MFLAGS) clean
	$(MAKE) $(MFLAGS) includes
	$(MAKE) $(MFLAGS) depend
	$(MAKE) $(MFLAGS) $(WORLDOPTS)
	@echo ""
	@date
	@echo ""
	@echo "Full build of Release 1.2.5 of OSF/Motif complete."
	@echo ""


Everything::
	@echo ""
	@echo "Rebuilding Release 1.2.5 of OSF/Motif"
	@echo ""
	@date
	@echo ""
	cd $(IMAKESRC); $(MAKE) $(MFLAGS) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(MAKE) $(MFLAGS) -f Makefile.bak Makefile
	$(MAKE) $(MFLAGS) Makefiles
	$(MAKE) $(MFLAGS) testsMakefile
	$(MAKE) $(MFLAGS) includes
	$(MAKE) $(MFLAGS) depend
	$(MAKE) $(MFLAGS) $(WORLDOPTS)
	@echo ""
	@date
	@echo ""
	@echo "Rebuild of Release 1.2.5 of OSF/Motif complete."
	@echo ""

XCOMM Bootstrap the toplevel Makefile in tests subdirectory.

testsMakefile::
	-if [ -d tests ] ; then \
	cd tests; if [ -f Makefile ] ; then set -x; \
	$(RM) Makefile.bak; $(MV) Makefile Makefile.bak; \
	fi; \
	$(TESTS_IMAKE) -I../$(CONFIGSRC) $(IMAKE_DEFINES) -DTOPDIR=../. -DCURDIR=$(CURRENT_DIR)/tests ; fi
