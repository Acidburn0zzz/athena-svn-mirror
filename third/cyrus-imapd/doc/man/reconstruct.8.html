<html>
<head>
<meta name="Content-Style" content="text/css">
</head>
<body>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#/etc/imapd.conf">/etc/imapd.conf</a><br>
<!-- Creator     : groff version 1.15  -->
<!-- CreationDate: Fri Aug 30 14:41:54 2002
 -->
<!-- Total number of pages: 1 -->
<!-- Page: 1 -->
<!-- left  margin: 100 -->
<!-- right margin: 750 -->
<a name="NAME"></a><h2>NAME</h2><p><font size=3>reconstruct - reconstruct mailboxes</p>
<a name="SYNOPSIS"></a><h2>SYNOPSIS</h2><p><font size=3><B>reconstruct</B> <font size=3>[ <font size=3><B>-C</B> <font size=3><I>config-file</I> <font size=3>] [ <font size=3><B>-r</B> <font size=3>] [ <font size=3><B>-f</B> <font size=3>] <font size=3><I>mailbox</I><font size=3>...<br>
<B>reconstruct</B> <font size=3>[ <font size=3><B>-C</B> <font size=3><I>config-file</I> <font size=3>] <font size=3><B>-m</p>
</B><a name="DESCRIPTION"></a><h2>DESCRIPTION</h2><p><font size=3><I>Reconstruct</I> <font size=3>rebuilds one or more IMAP mailboxes. When invoked with the <font size=3><B>-m</B> <font size=3>switch, it rebuilds the master mailboxes file. It can be used to recover from almost any sort of data corruption.</p>
<p><font size=3>If <font size=3><I>Reconstruct</I> <font size=3>can find existing header and index files, it attempts to preserve any data in them that is not derivable from the message files themselves. The state <font size=3><I>reconstruct</I> <font size=3>attempts to preserve includes the flag names, flag state, and internaldate. <font size=3><I>Reconstruct</I> <font size=3>derives all other information from the message files.</p>
<p><font size=3><I>Reconstruct</I> <font size=3>reads its configuration options out of the <font size=3><I>imapd.conf</I><font size=3>(5) file unless specified otherwise by <font size=3><B>-C</B><font size=3>. Any mailbox directory underneath the path specified in the <font size=3><I>partition-news</I> <font size=3>configuration option is assumed to be in news format.</p>
<p><font size=3><I>Reconstruct</I> <font size=3>does not adjust the quota usage recorded in any quota root files. After running <font size=3><I>reconstruct</I><font size=3>, it is advis- able to run <font size=3><I>quota</I><font size=3>(8) with the <font size=3><I>-f</I> <font size=3>switch in order to fix the quota root files.</p>
<a name="OPTIONS"></a><h2>OPTIONS</h2>
<table width="100%"  rules="none"  frame="none"  cols="3">
<tr valign="top" align="left">
<td valign="top" align="left"  width="12.6154%">
<p><font size=3><B>-C</B> <font size=3><I>config-file</p>
</I><p><font size=3><B>-r</p>
</B></td>
<td valign="top" align="left"  width="7.3846%">
</td>
<td valign="top" align="left"  width="80.0000%">
<p><font size=3>Read configuration options from <font size=3><I>config-file</I><font size=3>.</p>
<p><font size=3>Recursively reconstruct all sub-mailboxes of the mailboxes or mailbox prefixes given as arguments.</p>
</td>
</tr>
<tr valign="top" align="left">
<td valign="top" align="left"  width="12.6154%">
<p><font size=3><B>-f</p>
</B></td>
<td valign="top" align="left"  width="7.3846%">
</td>
<td valign="top" align="left"  width="80.0000%">
<p><font size=3>Examine the filesystem underneath mailbox, adding all directories with a cyrus.header<br>
found there as new mailboxes. Useful for restoring mailboxes from backups.</p>
</td>
</tr>
<tr valign="top" align="left">
<td valign="top" align="left"  width="12.6154%">
</td>
<td valign="top" align="left"  width="7.3846%">
</td>
<td valign="top" align="left"  width="80.0000%">
</td>
</tr>
</table>
<p><font size=3><B>-m NOTE: CURRENTLY UNAVAILABLE</p>
</B>
<table width="100%"  rules="none"  frame="none"  cols="2">
<tr valign="top" align="left">
<td valign="top" align="left"  width="20.0000%">
</td>
<td valign="top" align="left"  width="80.0000%">
<p><font size=3>Rebuild the <font size=3><I>mailboxes</I> <font size=3>file. Use whatever data in the existing <font size=3><I>mailboxes</I> <font size=3>file it can scav-<br>
enge, then scans all partitions listed in the <font size=3><I>imapd.conf</I><font size=3>(5) file for additional mailboxes.</p>
</td>
</tr>
</table>
<br>
<a name="FILES"></a><h2>FILES</h2><a name="/etc/imapd.conf"></a><h2>/etc/imapd.conf</h2></body>
</html>
