<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>main</title><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="[Insert name here] Reference Manual"><link rel="up" href="ch01.html" title="[Insert title here]"><link rel="previous" href="gok-interface.html" title="interface"><link rel="next" href="gok-support.html" title="support"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><link rel="stylesheet" href="style.css" type="text/css"><link rel="chapter" href="ch01.html" title="[Insert title here]"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="gok-interface.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">[Insert name here] Reference Manual</th><td><a accesskey="n" href="gok-support.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="gok-main"></a><div class="titlepage"><div></div><div></div></div><div class="refnamediv"><table width="100%"><tr><td valign="top"><h2><span class="refentrytitle">main</span></h2><p>main &#8212; </p></td><td valign="top" align="right"></td></tr></table></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">



GtkWidget*  <a href="gok-main.html#gok-main-create-window">gok_main_create_window</a>          (gboolean is_dock);
gboolean    <a href="gok-main.html#gok-main-display-scan">gok_main_display_scan</a>           (GokKeyboard *pKeyboard,
                                             gchar *nameKeyboard,
                                             <a href="gok-gok-keyboard.html#KeyboardTypes">KeyboardTypes</a> typeKeyboard,
                                             <a href="gok-gok-keyboard.html#KeyboardLayouts">KeyboardLayouts</a> layout,
                                             KeyboardShape shape);
gboolean    <a href="gok-main.html#gok-main-display-scan-previous">gok_main_display_scan_previous</a>  (void);
gboolean    <a href="gok-main.html#gok-main-display-scan-previous-premade">gok_main_display_scan_previous_premade</a>
                                            (void);
gboolean    <a href="gok-main.html#gok-main-display-scan-reset">gok_main_display_scan_reset</a>     (void);
gboolean    <a href="gok-main.html#gok-main-ds">gok_main_ds</a>                     (GokKeyboard *pKeyboard);
GokKeyboard* <a href="gok-main.html#gok-main-get-first-keyboard">gok_main_get_first_keyboard</a>    (void);
void        <a href="gok-main.html#gok-main-set-first-keyboard">gok_main_set_first_keyboard</a>     (GokKeyboard *pKeyboard);
GokKeyboard* <a href="gok-main.html#gok-main-get-current-keyboard">gok_main_get_current_keyboard</a>  (void);
GtkWidget*  <a href="gok-main.html#gok-main-get-main-window">gok_main_get_main_window</a>        (void);
Accessible* <a href="gok-main.html#gok-main-get-foreground-accessible">gok_main_get_foreground_accessible</a>
                                            (void);
void        <a href="gok-main.html#gok-main-resize-window">gok_main_resize_window</a>          (GtkWidget *pWindow,
                                             GokKeyboard *pKeyboard,
                                             gint Width,
                                             gint Height);
void        <a href="gok-main.html#gok-main-store-window-center">gok_main_store_window_center</a>    (void);
Accessible* <a href="gok-main.html#gok-main-get-foreground-window-accessible">gok_main_get_foreground_window_accessible</a>
                                            (void);
void        <a href="gok-main.html#gok-main-read-keyboards">gok_main_read_keyboards</a>         (void);
GokKeyboard* <a href="gok-main.html#gok-main-read-keyboards-from-dir">gok_main_read_keyboards_from_dir</a>
                                            (const char *directory,
                                             GokKeyboard *first);
void        <a href="gok-main.html#gok-main-on-window-position-change">gok_main_on_window_position_change</a>
                                            (void);
void        <a href="gok-main.html#gok-main-get-our-window-size">gok_main_get_our_window_size</a>    (gint *pWidth,
                                             gint *pHeight);
void        <a href="gok-main.html#gok-main-close">gok_main_close</a>                  (void);
void        <a href="gok-main.html#gok-main-display-error">gok_main_display_error</a>          (gchar *ErrorString);
void        <a href="gok-main.html#gok-main-display-gconf-error">gok_main_display_gconf_error</a>    (void);
void        <a href="gok-main.html#gok-main-app-change-listener">gok_main_app_change_listener</a>    (Accessible *pAccessible);
void        <a href="gok-main.html#gok-main-window-change-listener">gok_main_window_change_listener</a> (Accessible *pAccessible);
</pre></div><div class="refsect1" lang="en"><a name="id2623644"></a><h2>Description</h2><p>

</p></div><div class="refsect1" lang="en"><a name="id2623654"></a><h2>Details</h2><div class="refsect2" lang="en"><a name="id2623660"></a><h3><a name="gok-main-create-window"></a>gok_main_create_window ()</h3><a class="indexterm" name="id2623671"></a><pre class="programlisting">GtkWidget*  gok_main_create_window          (gboolean is_dock);</pre><p>
Creates the window that holds the keyboards.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>is_dock</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to the window, NULL if it couldn't be created.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2623733"></a><h3><a name="gok-main-display-scan"></a>gok_main_display_scan ()</h3><a class="indexterm" name="id2623744"></a><pre class="programlisting">gboolean    gok_main_display_scan           (GokKeyboard *pKeyboard,
                                             gchar *nameKeyboard,
                                             <a href="gok-gok-keyboard.html#KeyboardTypes">KeyboardTypes</a> typeKeyboard,
                                             <a href="gok-gok-keyboard.html#KeyboardLayouts">KeyboardLayouts</a> layout,
                                             KeyboardShape shape);</pre><p>
Display a keyboard and allow the user to make selections from it.
The keyboard must have already been created and in the list of keyboards.
The keyboard is specified by name and keyboard type. A name of NULL means 
the first keyboard in the list. 
The previous keyboard is stored on the "branch back stack".</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pKeyboard</tt></i> :</span></td><td> If this is supplied it takes precedence over the name parameter (useful for dynamic keyboards with the same name)
</td></tr><tr><td><span class="term"><i class="parameter"><tt>nameKeyboard</tt></i> :</span></td><td> Name of the keyboard you want displayed (must be in the list of keyboards.)
# <i class="parameter"><tt>typeKeyboard</tt></i>: Can be used to describe a runtime keyboard type (e.g. a Menus keyboard)
</td></tr><tr><td><span class="term"><i class="parameter"><tt>typeKeyboard</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><i class="parameter"><tt>layout</tt></i> :</span></td><td> Can be used to specify a particular type of keyboard (Example: center-weighted or upper-left-weighted).
</td></tr><tr><td><span class="term"><i class="parameter"><tt>shape</tt></i> :</span></td><td> Can be used to specify a particular shape of keyboard (Example: square).
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> TRUE if keyboard is displayed, FALSE if not.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2623910"></a><h3><a name="gok-main-display-scan-previous"></a>gok_main_display_scan_previous ()</h3><a class="indexterm" name="id2623922"></a><pre class="programlisting">gboolean    gok_main_display_scan_previous  (void);</pre><p>
Display and scan the previous keyboard (pulled from the branch-back-stack).
Don't push the current keyboard on the branch-back-stack.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> TRUE if the previous keyboard was displayed, FALSE if not.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2623965"></a><h3><a name="gok-main-display-scan-previous-premade"></a>gok_main_display_scan_previous_premade ()</h3><a class="indexterm" name="id2623977"></a><pre class="programlisting">gboolean    gok_main_display_scan_previous_premade
                                            (void);</pre><p>
Display and scan the first keyboard pulled from the branch-back-stack
that is premade. Delete any dynamic keyboards that are on the stack 'along
the way'. Don't push the current keyboard on the branch-back-stack.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> TRUE if the previous keyboard was displayed, FALSE if not.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624022"></a><h3><a name="gok-main-display-scan-reset"></a>gok_main_display_scan_reset ()</h3><a class="indexterm" name="id2624035"></a><pre class="programlisting">gboolean    gok_main_display_scan_reset     (void);</pre><p>
Display and scan the current keyboard. This should be called after the user settings 
have been changed.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> TRUE if the keyboard was displayed, FALSE if not.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624076"></a><h3><a name="gok-main-ds"></a>gok_main_ds ()</h3><a class="indexterm" name="id2624087"></a><pre class="programlisting">gboolean    gok_main_ds                     (GokKeyboard *pKeyboard);</pre><p>
Does the actual work of displaying and scanning the keyboard.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pKeyboard</tt></i> :</span></td><td> Pointer to the keyboard that will be displayed and scanned.
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> TRUE if the keyboard was displayed, FALSE if not.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624149"></a><h3><a name="gok-main-get-first-keyboard"></a>gok_main_get_first_keyboard ()</h3><a class="indexterm" name="id2624161"></a><pre class="programlisting">GokKeyboard* gok_main_get_first_keyboard    (void);</pre><p>
Accessor function.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to the first keyboard in the list of keyboards.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624201"></a><h3><a name="gok-main-set-first-keyboard"></a>gok_main_set_first_keyboard ()</h3><a class="indexterm" name="id2624213"></a><pre class="programlisting">void        gok_main_set_first_keyboard     (GokKeyboard *pKeyboard);</pre><p>
Sets the first keyboard in the list of keyboards.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pKeyboard</tt></i> :</span></td><td> Pointer to the keyboard that will be set as the first keyboard.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624264"></a><h3><a name="gok-main-get-current-keyboard"></a>gok_main_get_current_keyboard ()</h3><a class="indexterm" name="id2624276"></a><pre class="programlisting">GokKeyboard* gok_main_get_current_keyboard  (void);</pre><p>
Accessor function.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to the keyboard that is currently displayed.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624317"></a><h3><a name="gok-main-get-main-window"></a>gok_main_get_main_window ()</h3><a class="indexterm" name="id2624329"></a><pre class="programlisting">GtkWidget*  gok_main_get_main_window        (void);</pre><p>
Accessor function.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to main GOK window.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624369"></a><h3><a name="gok-main-get-foreground-accessible"></a>gok_main_get_foreground_accessible ()</h3><a class="indexterm" name="id2624382"></a><pre class="programlisting">Accessible* gok_main_get_foreground_accessible
                                            (void);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td>


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624418"></a><h3><a name="gok-main-resize-window"></a>gok_main_resize_window ()</h3><a class="indexterm" name="id2624429"></a><pre class="programlisting">void        gok_main_resize_window          (GtkWidget *pWindow,
                                             GokKeyboard *pKeyboard,
                                             gint Width,
                                             gint Height);</pre><p>
Resizes the main window to the given width and height.
The main window is centered over the the center location in gok_data
The new window will not be resized so it appears off screen.
When the new window is resized it generates 2 calls (configure events)to 
gok_main_store_window_center. If the new window is not centered over the old 
window then m_countIgnoreConfigure will be set to 2 so that the window 
center is not changed.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pWindow</tt></i> :</span></td><td> Pointer to the main window.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>pKeyboard</tt></i> :</span></td><td> Pointer to the relevant (pending) keyboard (may be NULL).
</td></tr><tr><td><span class="term"><i class="parameter"><tt>Width</tt></i> :</span></td><td> Width of the new window.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>Height</tt></i> :</span></td><td> Height of the new window.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624552"></a><h3><a name="gok-main-store-window-center"></a>gok_main_store_window_center ()</h3><a class="indexterm" name="id2624564"></a><pre class="programlisting">void        gok_main_store_window_center    (void);</pre><p>
Stores in gok_data the center location of the current keyboard.</p><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id2624590"></a><h3><a name="gok-main-get-foreground-window-accessible"></a>gok_main_get_foreground_window_accessible ()</h3><a class="indexterm" name="id2624604"></a><pre class="programlisting">Accessible* gok_main_get_foreground_window_accessible
                                            (void);</pre><p>
Accessor function.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to foreground window's accessible interface.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624644"></a><h3><a name="gok-main-read-keyboards"></a>gok_main_read_keyboards ()</h3><a class="indexterm" name="id2624656"></a><pre class="programlisting">void        gok_main_read_keyboards         (void);</pre><p>
Retrieves the name of the directory containing keyboards from GConf.
Then loads the keyboards in that directory using
gok_main_read_keyboards_from_dir.</p><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id2624683"></a><h3><a name="gok-main-read-keyboards-from-dir"></a>gok_main_read_keyboards_from_dir ()</h3><a class="indexterm" name="id2624695"></a><pre class="programlisting">GokKeyboard* gok_main_read_keyboards_from_dir
                                            (const char *directory,
                                             GokKeyboard *first);</pre><p>
Reads all the keyboard files from the given directory or a subdirectory that
is a closer match based on user's language if it exists.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>directory</tt></i> :</span></td><td> The name of the keyboard root directory location.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>first</tt></i> :</span></td><td>
</td></tr><tr><td><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></td><td> A pointer to the first keyboard, NULL if no keyboards could be read.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624782"></a><h3><a name="gok-main-on-window-position-change"></a>gok_main_on_window_position_change ()</h3><a class="indexterm" name="id2624794"></a><pre class="programlisting">void        gok_main_on_window_position_change
                                            (void);</pre><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id2624816"></a><h3><a name="gok-main-get-our-window-size"></a>gok_main_get_our_window_size ()</h3><a class="indexterm" name="id2624828"></a><pre class="programlisting">void        gok_main_get_our_window_size    (gint *pWidth,
                                             gint *pHeight);</pre><p>
Retreives the width and height that we last resized the window to.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pWidth</tt></i> :</span></td><td> Pointer to a variable that will hold the window width.
</td></tr><tr><td><span class="term"><i class="parameter"><tt>pHeight</tt></i> :</span></td><td> Pointer to a variable that will hold the window height.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2624902"></a><h3><a name="gok-main-close"></a>gok_main_close ()</h3><a class="indexterm" name="id2624913"></a><pre class="programlisting">void        gok_main_close                  (void);</pre><p>
Delete any keyboards that were created.
This must be called at the end of the program.</p><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id2624939"></a><h3><a name="gok-main-display-error"></a>gok_main_display_error ()</h3><a class="indexterm" name="id2624951"></a><pre class="programlisting">void        gok_main_display_error          (gchar *ErrorString);</pre><p>
Displays a fatal error dialog (modal).</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>ErrorString</tt></i> :</span></td><td> Fatal error message.
</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2625001"></a><h3><a name="gok-main-display-gconf-error"></a>gok_main_display_gconf_error ()</h3><a class="indexterm" name="id2625014"></a><pre class="programlisting">void        gok_main_display_gconf_error    (void);</pre><p>
Displays a gconf error message.</p><p>

</p></div><hr><div class="refsect2" lang="en"><a name="id2625039"></a><h3><a name="gok-main-app-change-listener"></a>gok_main_app_change_listener ()</h3><a class="indexterm" name="id2625051"></a><pre class="programlisting">void        gok_main_app_change_listener    (Accessible *pAccessible);</pre><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pAccessible</tt></i> :</span></td><td>


</td></tr></tbody></table></div></div><hr><div class="refsect2" lang="en"><a name="id2625097"></a><h3><a name="gok-main-window-change-listener"></a>gok_main_window_change_listener ()</h3><a class="indexterm" name="id2625109"></a><pre class="programlisting">void        gok_main_window_change_listener (Accessible *pAccessible);</pre><p>
This function is called each time the foreground window changes.</p><p>

</p><div class="variablelist"><table border="0"><col align="left" valign="top"><tbody><tr><td><span class="term"><i class="parameter"><tt>pAccessible</tt></i> :</span></td><td> Pointer to the foreground window's accessible interface.
</td></tr></tbody></table></div></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="gok-interface.html"><b>&lt;&lt; interface</b></a></td><td align="right"><a accesskey="n" href="gok-support.html"><b>support &gt;&gt;</b></a></td></tr></table></body></html>
