2005-01-27  Martin Kretzschmar  <martink@gnome.org>

	* NEWS, configure.in: Version 2.8.3.

2005-01-26  Martin Kretzschmar  <martink@gnome.org>

	* configure.in: Test for freetype <= or > 2.1.7.

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): ifdef out Type1C
	cid-to-gid code which is no longer necessary/breaks with freetype
	> 2.1.7 (e.g. firefox ad). Ported from kpdf.

2005-01-26  Marco Pesenti Gritti  <marco@gnome.org>

	* xpdf/XRef.cc:
	
	Fix CAN-2005-0064

2005-01-07  Martin Kretzschmar  <martink@gnome.org>

	* configure.in: Version 2.8.2.

	* xpdf/gpdf-view.cc (gpdf_view_link_entered_cb): undo string
	freeze breakage.

	* NEWS: update.

	Backports from HEAD:
	
	2004-12-22  Martin Kretzschmar  <martink@gnome.org>

	* xpdf/gpdf-view.cc (gpdf_view_link_entered_cb): fix typos and add
	NULL-checks to fix crashes on link mouse-over. Fixes Bug #156784,
	Bug #159966, half of Bug #159386.

	2004-12-21  Martin Kretzschmar  <martink@gnome.org>

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): FoFiTrueType::make
	etc. can return NULL. Use the fallback in that case. Fixes crash
	part of Bug #161066.

	2004-12-21  Gordon Ingram  <ggi@btinternet.com>

	* shell/gpdf.c (gpdf_window_focus_in_event, gpdf_window_focus_out_event)
	(gpdf_window_class_init): Show the fullscreen button only when
	the window is active. Stolen from epiphany. Fixes #161225.

2005-01-07  Martin Kretzschmar  <martink@gnome.org>

	* xpdf/GfxState.cc (GfxDeviceNColorSpace::parse),
	xpdf/Gfx.cc (doImage): update to xpdf 3.00pl2. Check that the PDF
	file supplied color components count i within the allowed range.
	Fixes buffer overflow vulnerability.

	Fixes Bug #162084 and Bug #163026
	http://www.idefense.com/application/poi/display?id=172
	CAN-2004-1125
	
	Also thanks to Matthias Geerdsen <vorlon@gentoo.org> and Marco
	Pesenti Gritti <marco@gnome.org>.
	
2005-01-03  Marco Pesenti Gritti  <marco@gnome.org>

	* xpdf/gpdf-bookmarks-view.cc:

	Fix click on bookmarks bar items #276482

2004-12-06  Martin Kretzschmar  <martink@gnome.org>

	* configure.in, NEWS: Version 2.8.1.

	* COPYING: fix FSF address.
	
	* gpdf.desktop.in: change gpdf %U to gpdf %F because there are
	problems with most URI schemes.

2004-11-06  Martin Kretzschmar  <martink@gnome.org>

	* xpdf/gpdf-control.cc (gpdf_control_sidebar_page_changed_cb): if
	no known page id matches, use the bookmarks page.
	(gpdf_control_sidebar_page_changed_cb): remove annotations view
	special case (which would segfault if !page_id), obsolete with the
	change above.

	* xpdf/gpdf-sidebar.c (page_compare_func)
	(gpdf_sidebar_find_page_by_id): moved up in the file.
	(gpdf_sidebar_sanitize_page_id): sanitizes an untrusted, possibly
	NULL page_id value to a known page_id (with "bookmarks" as
	default).
	(gpdf_sidebar_show): pipe the gconf value for the page id through
	gpdf_sidebar_sanitize_page_id.

	Also fixes Bug #151172 ("segfaults if schema not
	installed"). Initial patch by Muktha <muktha.narayan@wipro.com>.

2004-11-06  Loic Minier  <lool@via.ecp.fr>

	* shell/gpdf.c (gpdf_window_close): if we don't have a
	BonoboWidget, don't try to work with its ControlFrame. Fixes
	asserts when starting gpdf and closing immediately. Patch from
	Bug #151364.

2004-11-05  Dan Williams  <dcbw@redhat.com>

	* xpdf/Catalog.cc, xpdf/XRef.cc: Fix for a number of integer
	overflow bugs discovered by Chris Evans. CAN-2004-0888,
	Bug #156729, Red Hat Bug #137420.

2004-09-20  Mark McLoughlin  <mark@skynet.ie>

	* xpdf/GnomeVFSStream.cc (reset, fillBuf): check gnome_vfs_foo
	return values.  Fixes crashes with gnome-vfs' http method.  Bug
	#153159, #151364, Red Hat Bug #132469, half of Debian Bug #268873.
	
2004-09-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 2.8.0.

	* README.GPdf: the font situation is a bit better now.

2004-09-07  Gora Mohanty  <gmohanty@cvs.gnome.org>
        
	* configure.in: Added 'or' to ALL_LINGUAS.

2004-09-04  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» to ALL_LINGUAS.

2004-08-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 2.7.91. Disable "development
	release" warning.

2004-08-28  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_update_bkvisual): 
	nodes without link actions have NULL outline items. Don't
	dereference them. Fixes bug #150269.

2004-08-28  Akagic Amila  <bono@linux.org.ba>

        * configure.in: Added 'bs' to ALL_LINGUAS.

2004-08-24  Dan Williams  <dcbw@redhat.com>

	* xpdf/gpdf-view.cc (gpdf_view_link_action_uri): don't dereference
	app if it's NULL (i.e. no app available for that uri).
	Fixes Bug #150476 (Red Hat Bug #127803).

2004-08-17  Mark McLoughlin  <mark@skynet.ie>

	* lib/recent-files/egg-recent-item.[ch],
	  lib/recent-files/egg-recent-model.c,
	  lib/recent-files/egg-recent-view-gtk.c: sync with
	latest libegg.

2004-08-15  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	Fix for #149954.  Based on patch by Vijaykumar Patwari
	<vijaykumar.patwari@wipro.com>
	
	* xpdf/gpdf-view.c, xpdf/gpdf-view.h (gpdf_view_save_as): Changed
	to return the result of PDFDoc::saveAs.

	* xpdf/gpdf-contol.cc (overwrite_existing_file): New function, ask
	user before overwriting existing file.
	(save_error_dialog): New function, Throws error dialog.
	(gpdf_control_get_filename): Morph it into
	gpdf_control_save_file(), Check if the file already exists.
	(verb_SaveAs_cb): Call new function to save a file.
 	
2004-08-12  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (getFontFace): prefer embedded fonts over
	base 14 fonts. Fixes/works around Bug #149952.

2004-08-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, README.GPdf: actually, we require libgnomeprint
	2.5.1 (for GNOME_PRINT_KEY_DUPLEX).
	Thanks {agriffis,foser}@gentoo.org. See also
	http://bugs.gentoo.org/show_bug.cgi?id=46913

2004-08-05  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	Fixes #126719 by Jeff Muizelaar  <jrmuizel@nit.ca>:

	* xpdf/gpdf-view.cc (gpdf_view_handle_drag_motion): 
	calculate (x,y) properly for the case where we get unhinted
	motion events that are relative to the actual canvas window,
	instead of the widget window.

2004-08-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 2.7.90.

2004-08-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (verb_FileExit_cb, gw_close_all): remove.

	* shell/gpdf-window-ui.xml: remove FileExit references.
	Fixes Bug 148681.

2004-08-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_set_pdf_doc),
	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_set_pdf_doc):
	Make the guint to pointer cast explicit.

	* xpdf/gpdf-control.cc (gpdf_control_print): keep the print dialog
	in a private member variable, don't destroy it unconditionally on
	when the BonoboControl is disconnected.
	(gpdf_control_get_filename): ditto for the file chooser.
	(properties_response_handler, properties_delete_handler)
	(verb_FileProperties_cb): and for the properties window.
	(gpdf_control_disconnected): destroy any left over dialogs.
	Fixes Bug #149062 (and lots of crash-on-exit bugs, I hope).

2004-07-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): rewrite, this time
	respect encoding information/CID-to-GID stuff etc. Fixes Bug #148362.
	(lookupGlyph): update for changes in getFontFaceEmbedded
	(drawString): ditto.

2004-07-20  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_zoom): add the hack Federico did
	for page changes for zooming as well. Still flashes when zooming,
	but only in the background color, better than flashing with the
	old content IMHO.

2004-07-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* gpdf.desktop.in: added X-GNOME-Bugzilla-foo entries. I hope that
	fixes Bug #147870.
	(MimeType): add, we understand application/pdf.

	* xpdf/gpdf-control.cc (gnome_vfs_uri_new): use just
	gnome_vfs_uri_extract_short_name (which returns the unescaped
	basename of a vfs_uri) as title. Fixes Bug #130611.

2004-07-19  Federico Mena Quintero  <federico@ximian.com>

	Fixes #126720:

	* xpdf/gpdf-view.cc (gpdf_view_goto_page_no_history): Don't render
	the page in an idle handler.
	(gpdf_view_render_page): Return void.
	(gpdf_view_scroll_to_top): As a hack to keep the canvas from
	scrolling-then-updating, set the background pixmap of the
	container window to null, then hide the bin_window, the scroll,
	then show the bin_window, and reset the background.
	(gpdf_view_scroll_to_bottom): Likewise.

2004-06-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (verb_HelpAbout_cb): Update copyright period to
	1996-2004.

2004-06-13  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-view.cc (gpdf_view_reset_link_status_cb): 
	Fixed indentation.
	Also added c-indent-level in emacs local vars.

	* xpdf/tests/test-gpdf-view.cc (TEST_NEW): Forgot to commit the 
	test. Added the pdf doc as a param for constructor.

	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_populate_idle): 
	Changed the way to get the gdk window on which the cursor 
	is set. Now use the treeview widget window instead of getting
	its parent.	

	* xpdf/gpdf-thumbnails-view.cc (GPDF_DEFAULT_THUMB_WIDTH): 
	Removed unused define for empty page thumbnail image.
	(gpdf_thumbnails_view_canvas_outline_event_cb)
	(gpdf_thumbnails_view_populate_idle): 
	Changed the way to get the gdk window on which the cursor 
	is set. Now use the canvas widget window instead of getting
	its parent.

2004-06-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 2.7.2.

2004-06-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_control_setup_view_widgets): set a
	step_increment for the gtk_scrolled_window's [hv]adjustments.
	Workaround for bug #132489 (see also bug #96546). (Makes the
	scrollbar buttons work.)

2004-06-06  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc: include gpdf-control-private.h for
	prototypes.
	(gpdf_control_private_error_dialog): add ref_parent parameter:
	whether to _ref the parent control.
	(destroy_widget_unref_control): signal handler for the alert's
	"response" signal: destroy the dialog, unref the parent control.
	(gpdf_control_private_display_help)
	(gpdf_control_no_postscript_printer_alert): update error_dialog
	calls.
	(persist_file_loading_failed_cb): ditto, with ref_parent = TRUE,
	thus the control never auto-exits before the user can ack the
	"Loading failed" message. Fixes bug #137262.

	* xpdf/gpdf-control-private.h: update prototype.

	* xpdf/gpdf-view.cc (gpdf_view_link_action_uri): update
	error_dialog argument list.

	* shell/gpdf.c (gw_control_load_pdf):
	s/error_stream:/error_persist_file:/

	* xpdf/tests/test-gpdf-view.cc (view_implements_ggv_document): fix
	build.

2004-06-06  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-control.cc (gpdf_control_setup_view_widgets): 
	Use new way to allocate a gpdf-view.

	* xpdf/gpdf-view.h: Removed gpdf_view_new proto.

	* xpdf/gpdf-view.cc (gpdf_view_set_pdf_doc) 
	(gpdf_view_get_property, gpdf_view_set_property) 
	(gpdf_view_constructor, gpdf_view_class_init): 
	Change the way view is allocated to use the g_object_new
	way. Added props for pdf doc and for parent control.
	(gpdf_view_link_entered_cb): Init some var to NULL.
	(gpdf_view_bookmark_selected): Added case for actionURI
	to handle bookmarks that are URIs.

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_class_init): 
	Removed params spec desc strings as a some translated ones.

	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_class_init): 
	Removed params spec desc strings as a some translated ones.
	(gpdf_bookmarks_view_construct): Loaded a new (network) stock 
	icon for bookmarks wearing an actionURI link.
	(gpdf_bookmarks_view_update_bkvisual): Got item object from
	tree model to be able to discriminate icons to update. actionURI
	associated icons and actionNamed associated icons need no update.
	(gpdf_bookmarks_view_flat_recurse_outlines): Added new LinkURI
	local instances. Init others to NULL to avoid warnings.
	Changed strings when action is unknown to make it more
	interpretable.
	Add code to handle LinkURI actions instances.

	* xpdf/gpdf-annots-view.cc (gpdf_annots_view_class_init): 
	Removed params spec desc strings as a some translated ones.

2004-06-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am: drop support for building xpdf, pdfto*.

	* configure.in: simplify more. Drop --enable-no-text-select
	and --enable-multithreaded options. Bug #111404.

2004-06-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: post release version bump.  Reorder a bit, add
	some section header comments. Remove OS/2 check. Remove checks
	that were only necessary for the Xpdf build system.

	* fofi/Makefile.dep, splash/Makefile.dep: cvs remove. Remainings
	of the Xpdf non-automake build system.

	* shell/gpdf.c (verb_HelpAbout_cb):
	s/translator_credits.../translator-credits/ as requested some
	months ago.

2004-06-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* NEWS, configure.in: Version 2.7.1.

2004-05-31  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: print Message Of Doom.

2004-05-23  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (drawImageMask): undo 2004-02-28 change and
	obey invert parameter instead (D'oh). Bug #142964.
	(drawImageMask): do mask color computations and some variable
	definitions outside of the loop. Swap if/else branches.
	(drawImage): move variable defns outside loop.

2004-05-21  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc: Changed current_gen_thumb
	type from gint to guint to avoid warnings.
	(gpdf_thumbnails_view_populate_idle): Init Thumb ptr
	to NULL to avoid warning.

	* xpdf/gpdf-view.cc (gpdf_view_link_entered_cb): 
	Add braces around each case to avoid warning about
	inits and/or cross case inits.
	(gpdf_view_render_page): Update displayPage call for
	annots view to new xpdf3 API.

2004-05-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_render_page): add missing crop
	argument.

	* fofi/Makefile.am, splash/Makefile.am: added.

	* Makefile.am: add fofi and splash subdirs.

	* ANNOUNCE:
	* CHANGES:
	* Makefile.am:
	* README:
	* aconf-win32.h:
	* configure.in:
	* dj_make.bat:
	* doc/pdffonts.1:
	* doc/pdffonts.cat:
	* doc/pdffonts.hlp:
	* doc/pdfimages.1:
	* doc/pdfimages.cat:
	* doc/pdfimages.hlp:
	* doc/pdfinfo.1:
	* doc/pdfinfo.cat:
	* doc/pdfinfo.hlp:
	* doc/pdftopbm.1:
	* doc/pdftopbm.cat:
	* doc/pdftopbm.hlp:
	* doc/pdftops.1:
	* doc/pdftops.cat:
	* doc/pdftops.hlp:
	* doc/pdftotext.1:
	* doc/pdftotext.cat:
	* doc/pdftotext.hlp:
	* doc/xpdf.1:
	* doc/xpdf.cat:
	* doc/xpdf.hlp:
	* doc/xpdfrc.5:
	* doc/xpdfrc.cat:
	* doc/xpdfrc.hlp:
	* fofi/Makefile.in:
	* goo/GHash.cc:
	* goo/GHash.h:
	* ms_make.bat:
	* splash/Makefile.in:
	* xpdf/DisplayFontTable.h:
	* xpdf/ErrorCodes.h:
	* xpdf/FTFont.cc:
	* xpdf/FTFont.h:
	* xpdf/FontFile.cc:
	* xpdf/FontFile.h:
	* xpdf/Function.h:
	* xpdf/GPOutputDev.cc:
	* xpdf/Gfx.cc:
	* xpdf/Gfx.h:
	* xpdf/GfxFont.cc:
	* xpdf/GfxFont.h:
	* xpdf/GfxState.cc:
	* xpdf/GfxState.h:
	* xpdf/GlobalParams.cc:
	* xpdf/GlobalParams.h:
	* xpdf/Makefile.am:
	* xpdf/Object.cc:
	* xpdf/Object.h:
	* xpdf/Outline.cc:
	* xpdf/OutputDev.cc:
	* xpdf/OutputDev.h:
	* xpdf/PBMOutputDev.cc:
	* xpdf/PBMOutputDev.h:
	* xpdf/PDFDoc.cc:
	* xpdf/PDFDoc.h:
	* xpdf/PSOutputDev.cc:
	* xpdf/PSOutputDev.h:
	* xpdf/Page.cc:
	* xpdf/Page.h:
	* xpdf/Parser.cc:
	* xpdf/SFont.cc:
	* xpdf/SFont.h:
	* xpdf/Stream.cc:
	* xpdf/Stream.h:
	* xpdf/T1Font.cc:
	* xpdf/T1Font.h:
	* xpdf/TTFont.cc:
	* xpdf/TTFont.h:
	* xpdf/TextOutputDev.cc:
	* xpdf/TextOutputDev.h:
	* xpdf/XOutputDev.cc:
	* xpdf/XOutputDev.h:
	* xpdf/XPixmapOutputDev.cc:
	* xpdf/XPixmapOutputDev.h:
	* xpdf/XRef.cc:
	* xpdf/XRef.h:
	* xpdf/config.h:
	* xpdf/gpdf-control.cc:
	* xpdf/pdffonts.cc:
	* xpdf/pdfimages.cc:
	* xpdf/pdfinfo.cc:
	* xpdf/pdftopbm.cc:
	* xpdf/pdftops.cc:
	* xpdf/pdftotext.cc:
	* xpdf/tests/Makefile.am:
	* xpdf/vms_make.com:
	* xpdf/xpdf.cc: Imported Xpdf 3.00 and fixed build.

2004-05-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* ANNOUNCE:
	* CHANGES:
	* README:
	* aconf2.h:
	* configure.in:
	* dj_make.bat:
	* doc/pdffonts.1:
	* doc/pdffonts.cat:
	* doc/pdffonts.hlp:
	* doc/pdfimages.1:
	* doc/pdfimages.cat:
	* doc/pdfimages.hlp:
	* doc/pdfinfo.1:
	* doc/pdfinfo.cat:
	* doc/pdfinfo.hlp:
	* doc/pdftopbm.1:
	* doc/pdftopbm.cat:
	* doc/pdftopbm.hlp:
	* doc/pdftops.1:
	* doc/pdftops.cat:
	* doc/pdftops.hlp:
	* doc/pdftotext.1:
	* doc/pdftotext.cat:
	* doc/pdftotext.hlp:
	* doc/xpdf.1:
	* doc/xpdf.cat:
	* doc/xpdf.hlp:
	* doc/xpdfrc.5:
	* doc/xpdfrc.cat:
	* doc/xpdfrc.hlp:
	* goo/gfile.cc:
	* ms_make.bat:
	* vms_make.com:
	* xpdf/Annot.cc:
	* xpdf/Array.cc:
	* xpdf/BuiltinFontTables.cc:
	* xpdf/CMap.cc:
	* xpdf/CMap.h:
	* xpdf/Catalog.cc:
	* xpdf/CharCodeToUnicode.cc:
	* xpdf/CharCodeToUnicode.h:
	* xpdf/Decrypt.cc:
	* xpdf/Dict.cc:
	* xpdf/ErrorCodes.h:
	* xpdf/FTFont.cc:
	* xpdf/FTFont.h:
	* xpdf/FontFile.cc:
	* xpdf/FontFile.h:
	* xpdf/Function.cc:
	* xpdf/Gfx.cc:
	* xpdf/Gfx.h:
	* xpdf/GfxFont.cc:
	* xpdf/GfxFont.h:
	* xpdf/GfxState.cc:
	* xpdf/GfxState.h:
	* xpdf/GlobalParams.cc:
	* xpdf/GlobalParams.h:
	* xpdf/JBIG2Stream.cc:
	* xpdf/Link.cc:
	* xpdf/Link.h:
	* xpdf/Makefile.am:
	* xpdf/OutputDev.h:
	* xpdf/PDFDoc.cc:
	* xpdf/PDFDoc.h:
	* xpdf/PSOutputDev.cc:
	* xpdf/PSOutputDev.h:
	* xpdf/Page.cc:
	* xpdf/Page.h:
	* xpdf/Parser.cc:
	* xpdf/Stream.cc:
	* xpdf/Stream.h:
	* xpdf/TTFont.cc:
	* xpdf/TTFont.h:
	* xpdf/TextOutputDev.cc:
	* xpdf/TextOutputDev.h:
	* xpdf/UnicodeMap.cc:
	* xpdf/UnicodeMap.h:
	* xpdf/UnicodeTypeTable.cc:
	* xpdf/UnicodeTypeTable.h:
	* xpdf/XOutputDev.cc:
	* xpdf/XOutputDev.h:
	* xpdf/XPDFApp.cc:
	* xpdf/XPDFCore.cc:
	* xpdf/XPDFCore.h:
	* xpdf/XPDFViewer.cc:
	* xpdf/XPDFViewer.h:
	* xpdf/XRef.cc:
	* xpdf/about-text.h:
	* xpdf/config.h:
	* xpdf/gpdf-control.cc:
	* xpdf/gpdf-link-canvas-item.cc:
	* xpdf/gpdf-links-canvas-layer.cc:
	* xpdf/pdffonts.cc:
	* xpdf/pdfimages.cc:
	* xpdf/pdfinfo.cc:
	* xpdf/pdftopbm.cc:
	* xpdf/pdftops.cc:
	* xpdf/pdftotext.cc:
	* xpdf/tests/test-links.cc:
	* xpdf/vms_make.com:
	* xpdf/xpdf.cc: Imported Xpdf 2.03 and fixed build.

2004-05-13  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc:
	Reverted some of the last commits.

	* xpdf/gpdf-annots-view.cc (gpdf_annots_view_class_init) 
	(gpdf_annots_view_set_property, gpdf_annots_view_new): 
	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_class_init) 
	(gpdf_thumbnails_view_set_property, gpdf_thumbnails_view_new) 
	(gpdf_thumbnails_view_dispose): 
	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_class_init): 
	(gpdf_bookmarks_view_set_property): 
	(gpdf_bookmarks_view_new): 
	Added set_property method. Changed param_spec_pointer in object.
	Changed get_pointer in get_object.
	Casted gpdf_view in GPdfView.

	* xpdf/gpdf-view.cc: Added timeout handler for status reset
	to view private struct.
	(gpdf_view_reset_link_status_cb): New callback for status 
	reset after timeout.
	(gpdf_view_link_entered_cb, gpdf_view_link_leaved_cb): 
	Added handler for displaying link action in app status
	bar when link enter/leave signal are received.
	(gpdf_view_render_page): Connect enter/leave handlers
	on links layer signals.

	* xpdf/gpdf-links-canvas-layer.h: Added LINK_ENTERED &
	LINK_LEAVED signals for displaying links in app bar status
	when mouse goes over them.

	* xpdf/gpdf-links-canvas-layer.cc: Added LINK_ENTERED &
	LINK_LEAVED signals for displaying links in app bar status
	when mouse goes over them.
	(link_entered_cb, link_leaved_cb): Added handler for link
	enter/leave signals to emit link_entered/link_leaved signals.
	(gpdf_links_canvas_layer_add_link): Connected enter/leave
	link signal handlers.
	(gpdf_links_canvas_layer_class_init): Declared new signals.

	* xpdf/gpdf-bookmarks-view.cc: 
	(gpdf_bookmarks_view_set_property) 
	(gpdf_bookmarks_view_class_init, gpdf_bookmarks_view_new): 
	(gpdf_thumbnails_view_dispose): 
	Cleaned up constructor and add control ref;
	Added constructor args as obj properties, added a ref on parent
	control and unref in dispose.
	(gpdf_bookmarks_view_update_popup_actions): 
	Check is bookmarks exists before changing tools menu (expand/
	collapse/expand all/collapse all) sensitivity.
	(gpdf_bookmarks_view_populate_idle): Remove control disconnect 
	handler IF had been registered.
	(gpdf_bookmarks_view_get_tools_menu): Changed order of tools popup
	menu items (to match real order).

	* xpdf/gpdf-annots-view.cc: 
	(gpdf_annots_view_set_property): 
	(gpdf_annots_view_class_init, gpdf_annots_view_new) 
	(gpdf_annots_view_dispose): 
	Cleaned up constructor;
	Added constructor args as obj properties, added a ref on parent
	control and unref in dispose.

2004-05-10  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc: Add gpdf-control-private header
	for using status & ratio.
	(gpdf_thumbnails_view_populate_idle): Set ratio & status to give
	feedback on the thumb generation.
	Clear ration & status, reset cursor when finished.

	* xpdf/gpdf-control.cc (gpdf_control_get_bookmarks_view): 
	Give control as first arg of gpdf_bookmarks_view_new.

	* xpdf/gpdf-bookmarks-view.h: Add parent control as new arg.

	* xpdf/gpdf-bookmarks-view.cc: Add gpdf-control-private header
	for using status & ratio.
	Adding parent control in private struct.
	(gpdf_bookmarks_view_new): Added control as first param to keep
	it in private struct.
	(gpdf_bookmarks_view_flat_recurse_outlines): Set status & advance
	bar to give feedback about bookmarks generation.
	(gpdf_bookmarks_view_populate_idle): Fix a problem when no bookmarks
	are available. The idle func were always called as 
	generation_terminated was never true.
	Set watch when generation goes on.
	Clear status, ration & cursor when generation terminated.
	(gpdf_bookmarks_view_set_pdf_doc): Connected remove idle
	on control disconnect signal instead of view destroy signal.

2004-05-13  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-view.cc (gpdf_view_link_action_uri): Fixed bug when
	launching uri. The Link string storing URI was freed with list.
	Now the string is duped before appending it to the list.
	Changed uri from GString * to gchar *.

2004-05-12  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_flat_recurse_outlines): 
	Fixed missing affectation when handling link_named bookmarks.
	The dynamic cast was just compared to NULLbut not stored in 
	link_named.	

2004-05-09  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_set_pdf_doc): 
	Changed priority for thumbs idle in order to do queue them at end
	and create bookmarks before.

	* xpdf/gpdf-bookmarks-view.cc 
	(gpdf_bookmarks_view_update_bookmarks_tree): 
	Changed init of idle to let user see bookmarks creation at idle.

	* xpdf/gpdf-view.cc (gpdf_view_bookmark_selected): 
	Handle case when title is selected and action is null.

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_set_pdf_doc): 
	Remove idle on parent control disconnect if killed while generating 
	bookmarks to avoid crash. 
	Set watch pointer.	

	* xpdf/gpdf-bookmarks-view.cc: Added struct GPdfBookmarksGenState
	for implementing flat recursion when creating bookmarks. This
	struct is used to store recursive generation state across idle func
	boundary.
	Also added necessary field in bookmarks view private struct to
	keep this state.
	(gpdf_bookmarks_view_row_expanded_cb) 
	(gpdf_bookmarks_view_row_collapsed_cb) 
	(gpdf_bookmarks_view_page_changed_cb): 
	(gpdf_bookmarks_view_selection_changed_cb): 
	Return if generation not yet finished.
	(gpdf_bookmarks_view_bookmark_select_func): 
	Fixed a bug when a title Outline item exists. Such an item have no
	action associated. We handle this case here and in gpdf-view.cc.
	(gpdf_bookmarks_view_flat_recurse_outlines): 
	(gpdf_bookmarks_view_update_bookmarks_tree): 
	(gpdf_bookmarks_view_populate_idle): 
	Changed recursive bookmarks generation in a flat call to be able to
	have it called several time as idle handler.
	(gpdf_bookmarks_view_set_pdf_doc): 
	Remove idle on view destroy if killed while generating bookmarks
	to avoid crash. 
	Set watch pointer.

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_page_box_coord): 
	Removed assert and add update of thumb size guess if it was wrong.

	First step for fixing Bug #137439

	* xpdf/gpdf-thumbnails-view.cc: 
	Add a counter for keeping track of current thumb generated.
	(gpdf_thumbnails_view_set_scroll_region): 
	While setting scroll region, the loop is now between page 1
	and last generated one (current_gen_thumb) to be able to relayout
	while generating thumbs.
	(gpdf_thumbnails_view_create_thumbnail): 
	Added thumb coords. Computation while creating is based on a guess.
	The layout may be not perfect but it will be correctly relayout
	as soon as finished.
	(gpdf_thumbnails_view_populate_idle): 
	Changed idle logic in order to only generate one thumb for each 
	call. This way we never freeze display.	
	(gpdf_thumbnails_view_set_pdf_doc): 
	Moved thumb generation inits from idle. Set guess for page
	width/height to have a semi correct layout.

2004-05-09  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_populate_idle): 
	Use Thumb method 'ok' to ensure Thumb data availability. It should
	avoid further crash if embed Thumb data not correctly
	parsed.

	* xpdf/Thumb.h: 
	* xpdf/Thumb.cc (Thumb::Thumb): Added a flag for keeping
	Thumb data validity and the method to access it.

2004-05-08  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* lib/recent-files: updated from egg:

	2004-04-15  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c: another unused function
	to comment when not using libgnomeui

	2004-04-10  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c: remove unused function
	when not using libgnomeui

	2004-04-05  Murray Cumming  <murrayc@murrayc.com>

	* libegg/recent-files/egg-recent-item.c: Use private_data instead
	of private, so it can compile with a C++ compiler.
	* libegg/recent-files/egg-recent-view.h: Add G_BEGIN_DECLS and 
	G_END_DECLS so we can use it with C++.

	2004-03-09  Bastien Nocera  <hadess@hadess.net>

	* libegg/recent-files/egg-recent-util.c:
	(egg_recent_util_get_icon): avoid warnings when the icon file
	isn't found

	2004-01-31  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_lock_file):

	Fix a locking bug, patch from
	Gustavo Giráldez <gustavo.giraldez@gmx.net>

	2004-01-22  James Willcox  <jwillcox@gnome.org>

	* libegg/recent-files/egg-recent-model.c:
	(egg_recent_model_lock_file):

	Make the file locking suck a little less for nfs home directories.
	Patch from Dan Williams <dcbw@redhat.com>.
	
	
	* libegg/recent-files/egg-recent-model.c: the 2004-01-31 change
	fixes bug #138817

	* shell/gpdf.c (gpdf_window_new): de-brand window title -> PDF
	Viewer. Bug #137167.

	* help/C/figures/gpdf_window.png, help/de/figures/gpdf_window.png:
	update for new window title.
	
	* configure.in: bump version number for GNOME 2.7.

	* xpdf/gpdf-thumbnails-view.cc
	(gpdf_thumbnails_view_render_thumbnail_image): gdk-pixbuf requires
	always 8 bits per component. And Thumb::getPixbufData always
	provides 8 bits per component. Fixes bug #141226.

	* xpdf/Thumb.cc (ThumbColorMap::ThumbColorMap): unused now, remove.

	* xpdf/Thumb.h: ditto.

	* xpdf/Thumb.cc (Thumb::Thumb): use a normal GfxImageColorMap.
	Use it not only for Indexed color spaces but always. Fixes crasher
	bugs #139211, #139477, #141725.

	* xpdf/Thumb.h: update for ColorMap changes.

	* xpdf/Thumb.cc (lookup): log to stderr because that's not
	buffered etc.

2004-05-03  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>
	Fix for Bug #137952:

	* xpdf/gpdf-control.cc (gpdf_control_get_filename): 
	* shell/gpdf.c (gw_ask_for_uri): 
	Added file filters 'application/pdf' and '*' to
	file choosers.

2004-04-09  Guntupalli Karunakar  <karunakar@freedomink.org>

        * configure.in: Added "gu" (Gujarati) to ALL_LINGUAS.

2004-03-31  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "af" to ALL_LINGUAS.

2004-03-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.131.

2004-03-22  Guntupalli Karunakar  <karunakar@freedomink.org>

        * configure.in: Added "pa" (Punjabi) to ALL_LINGUAS.

2004-03-21  Gareth Owen  <gowen72@yahoo.com>

	* configure.in: Added en_GB to ALL_LINGUAS

2004-03-21  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.130.

	* help/c/gpdf.xml, help/de/gpdf.xml: updated for 0.130 (no
	changes).

2004-03-18  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* help/Makefile.am (SUBDIRS), configure.in: add help/de directory.

	* help/de: added German help.
	
2004-03-15  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.125.

	* configure.in, README.GPdf: remove message of doom.

2004-03-15  Alexander Winston  <alexander.winston@comcast.net>

	* configure.in: Added en_CA to ALL_LINGUAS.

2004-03-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.124.

	* README.GPdf: Update.

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_on_dialog_response_cb): 
	* xpdf/gpdf-persist-stream.cc: update for changed help id of password section.

	* help/C/gpdf.xml: added comment that gpdf-password id cannot be changed freely.
	
2004-03-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gc_set_page_cb): focus the pdf view after
	setting the page. (Bug #136360)

	* shell/gpdf.c (gw_ask_for_uri): use gtk_dialog_run instead of a
	nested main loop plus connection to ::response.
	(file_dialog_response, file_dialog_delete_event): obsolete, no
	need to check if a folder was selected. (Bug #136233).

2004-03-09  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* shell/gpdf.c (gpdf_window_close): Added deactivation of control
	frame to avoid warning when setting frame ui container to null
	at bonobo-control-frame-dispose.

2004-03-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/bonobo-application-x-pdf.cc (gpdf_factory): use
	bonobo_control_life_instrument on controls to make the factory
	exit when the last control is destroyed. (For Bug #132703).

2004-03-04 Breda McColgan <breda.mccolgan@sun.com>

	* help/C/gpdf.xml: Implemented editorial review comments
	* help/C/gpdf-C.omf: Updated date and manual version number
	* help/C/l10n.txt: Updated date and manual version info

2004-02-28  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (drawString): handle horizontal scaling
	correctly (multiply with the x components of the text
	transformation matrix). Fixes Bug #134803.
	(drawImageMask): this function has always painted the mask in
	reverse video! Fixed it now. Part of Bug #122021.

2004-02-28  Julio M. Merino Vidal  <jmmv@menta.net>

	* Makefile.am: don't hardcode schema installation directory. Add
	dummy install-data-local target when GCONF_SCHEMAS_INSTALL is
	not set, fixes build for some make variants. (Bug #135524)

2004-02-26  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-util.h (E_MAKE_TYPE): kill this ancient macro.

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_destroy): unload
	the file, plugs file handle, PDFDoc, whatnot leak (Bug #135525,
	spotted by Ali Akcaagac).

2004-02-19  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>
	
	Fix for bug #134807
	
	* xpdf/gpdf-control.cc (gpdf_control_print): 
	Add handler for disconnected control to close print
	dialog when gpdf exists.
	(gpdf_control_get_filename): Add handler for disconnected
	control to close SaveAs file chooser when gpdf exists.
	(verb_FileProperties_cb): Add handler for disconnected
	control to close Properties dialog when gpdf exists.

2004-02-18  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	Bugzilla #134609
	
	* xpdf/gpdf-persist-stream.cc
	(gpdf_persist_stream_on_dialog_response_cb): 
	Replaced old gpdf_persist_stream_on_cancelbutton_clicked,
	gpdf_persist_stream_on_okbutton_clicked and 
	gpdf_persist_stream_on_helpbutton_clicked with 
	gpdf_persist_stream_on_dialog_response_cb. 
	(gpdf_persist_stream_create_password_dialog): 
	Changed handlers connected on dialog buttons with one
	handler connected on dialog's response.

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_on_dialog_response_cb): 
	Replaced old gpdf_persist_file_on_cancelbutton_clicked,
	gpdf_persist_file_on_okbutton_clicked and 
	gpdf_persist_file_on_helpbutton_clicked with 
	gpdf_persist_file_on_dialog_response_cb. 
	(gpdf_persist_file_create_password_dialog): 
	Changed handlers connected on dialog buttons with one
	handler connected on dialog's response.

	* xpdf/gpdf-control.cc (gpdf_control_private_destroy_dialog): 
	Removed.
	(gpdf_control_private_error_dialog) 
	(gpdf_control_private_warn_dialog) 
	(gpdf_control_private_info_dialog):
	Changed clicked handler set on button with response handler
	set on dialog itself. Original handler 
	gpdf_control_private_destroy_dialog have been replaced with 
	gtk_widget_dialog.
	(gpdf_control_no_postscript_printer_alert): Use the
	gpdf_control_private_error_dialog instead of managing its
	own dialog.
	(gpdf_control_properties_dialog_response_cb): Removed old
	dialog resp cb used for props dialog.
	(verb_FileProperties_cb): Changed dialog handler for resp
	with gtk_widget_destroy.
	(persist_file_loading_failed_cb): Replaced dialog managed
	with gpdf_control_private_error_dialog.

2004-02-16  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.123.

2004-02-16  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* autogen.sh: require automake 1.7 because of the way we use
	automake conditionals. Fixes distcheck.

2004-02-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-thumbnails-view.cc
	(gpdf_thumbnails_view_populate_idle): #if'ed out one code path
	that I missed on 2004-01-13 when commenting out thumbnail
	generation menus. Fixes a crasher.

2004-02-09 Breda McColgan <breda.mccolgan@sun.com>

	* help/C/gpdf.xml: Implemented technical review comments
	* help/C/gpdf-C.omf: Updated date

2004-02-08  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-persist-file.cc (impl_bonobo_persist_file_load): 
	Raise Bonobo exception when file opening fails in order
	to enable shell to catch it and discard window opening.
	Fix for Bug #133503

2004-02-08  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_control_setup_view_widgets):
	"Thumbnails"->"Pages" because many PDFs don't have thumbnails.

	* shell/gpdf.c (gpdf_window_init_fullscreen_popup): explicitly add
	F11 keybinding. 

	* shell/gpdf-window-ui.xml (keybindings): ViewFullScreen is not a
	verb, so F11 doesn't work when in fullscreen mode. Remove it.

	* xpdf/gpdf-control.cc (gpdf_print_job_prepare): use duplex
	setting supplied by gnome-print. Part of Bug #131979.

2004-02-07 Breda McColgan <breda.mccolgan@sun.com>

	* help/C/gpdf.xml: Updated for GNOME 2.6, technical review draft
	* help/C/gpdf-C.omf: Updated for GNOME 2.6
	* help/C/l10n.txt: Added for GNOME 2.6
	* help/C/figures/gpdf_window.png: Added for GNOME 2.6

2004-02-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (set_window_icon_default): simplify, based on patch
	by Frederic Crozat <fcrozat@mandrakesoft.com> and inline into main.

2004-02-06  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* shell/gpdf.c (gpdf_window_init_fullscreen_popup): 
	Added accel group for exit full screen view and
	ESC accel key.
	Fix for Bug #133595.

2004-02-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_control_print): no more need to
	process GNOME_PRINT_DIALOG_RESPONSE_PREVIEW.
	(gpdf_control_no_preview_alert): no longer necessary.	

2004-02-05  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* xpdf/gpdf-control.cc (gpdf_control_print_dialog_new): disable
	print preview the right way, instead of showing some alert dialog.
	(Bug #133326)

2004-02-05  Alexander Winston  <alexander.winston@comcast.net>

	* acinclude.m4: correctly quote macro definitions to silence
	aclocal-1.8 warnings and prevent future automake problems. (Bug
	#133226).

2004-01-29  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* configure.in: Fixed missing coma in AC_HELP_STRING.

2004-01-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-font-face.c: adapt to changes in libgnomeprint CVS.

2004-01-26  Andraz Tori  <Andraz.tori1@guest.arnes.si>

	* configure.in: Added "sl" (Slovenian) to ALL_LINGUAS.

2004-01-26  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc: Include GOutputDev.h.
	Added an embed boolean flag for thumbnails struct.
	Added a all_generated boolean flag.
	Removed CAN_GENERATE_THUMBNAILS define.
	(gpdf_thumbnails_view_set_selected_page): Check if is not
	current page before darkening thumbnail.
	Added tools menu item update.
	(gpdf_thumbnails_view_canvas_outline_event_cb): 
	Changed cursor when dragging in thumb.
	(gpdf_thumbnails_view_get_page_pixbuf): New func to gen
	pixbuf from a page with GOutputDev.
	(gpdf_thumbnails_view_create_thumbnail_pixbuf): Renamed
	gpdf_thumbnails_view_create_thumbnail_image that create
	white filled thumbs in ..._create_thumbnail_pixbuf.
	(gpdf_thumbnails_view_create_thumbnail_image): New func
	that get page pixbuf and scale it to make thumb.
	(gpdf_thumbnails_view_render_thumbnail_image): Added
	embed boolean flag and update all_generated flag.
	(gpdf_thumbnails_view_populate_idle): Moved PDF doc related
	local vars from func context to loop context.
	Changed gpdf_thumbnails_view_create_thumbnail_image in
	gpdf_thumbnails_view_create_thumbnail_pixbuf.
	Removed tools menu item update if no thumbs availables.
	Scroll to 0,0 to show first page thumb.
	(gpdf_thumbnails_view_popup_menu_item_generate_cb): 
	Added implem for current page thumb generation.
	(gpdf_thumbnails_view_popup_menu_item_generate_all_cb): 
	Added implem for all pages thumbs generation.
	(gpdf_thumbnails_view_get_tools_menu): If all thumb are
	generated the menu is removed. 
	Now set menu items sensitivity to TRUE. 

	* xpdf/gpdf-bookmarks-view.cc 
	(gpdf_bookmarks_view_update_popup_actions): Now only updates
	menu items sensitivity when some bookmarks are availables.
	(gpdf_bookmarks_view_bookmark_select_func): Test item to be
	sure not to select NULL bookmark (can occurs if some problem
	occurs while parsing PDF: should be fixed).
	(gpdf_bookmarks_view_get_tools_menu): Changed menu items init
	stmts layout to group the expand_all/collapse_all.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): Added again
	GOutputDev.cc/h and TextOutputDev.cc/h.

	* xpdf/GOutputDev.h: Added needFontUpdate boolean flag.

	* xpdf/GOutputDev.cc (GOutputDev::GOutputDev): Added 
	needFontUpdate init.
	(GOutputDev::startDoc):
	Removed TextPage::clear call.
	(GOutputDev::endPage):
	Added boolean flag as param for coalesce.
	(GOutputDev::restoreState):
	Added needFontUpdate flag set to true.
	(GOutputDev::updateAll):
	Set flag needFontUpdate instead of calling updateFont().
	(GOutputDev::updateFont):
	reset needFontUpdate flag and call TextPage::fontUpdate().
	(GOutputDev::beginString):
	(GOutputDev::endString):
	Changed calls to begin/end string in begin/end word.
	(GOutputDev::drawChar):
	Added updateFont() call if needed. Added code param to
	TextPage::addChar.
	(GOutputDev::beginType3Char):
	Added updateFont() call if needed.

	* xpdf/gpdf-thumbnails-view.cc 
	(gpdf_thumbnails_view_canvas_outline_event_cb): 
	Fixed a bug in thumb drag. A zoom mult coef wrongly added.
	It has been removed, as some useless commented out traces.

2004-01-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* Makefile.am: update for intltool 0.29, disable-schemas-install
	when distchecking.

2004-01-23  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control-ui.xml, shell/gpdf-window-ui.xml: add some
	explicit keybindings, menu keybindings are disabled when the
	menubar is hidden.

2004-01-22  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-sidebar.c (set_tools_button_sensitivity): 
	New func to set tools menu button sensitivity.
	(gpdf_sidebar_set_page_tools_menu): 
	(select_page): Now call set_tools_button_sensitivity.

	* xpdf/gpdf-thumbnails-view.cc 
	(gpdf_thumbnails_view_populate_idle): Added
	missing item var.

	* xpdf/gpdf-control.cc: Removed ifdef USE_ANNOTS
	around annots-view.h file. Ifdefs are now in the
	header that also defines sidebar page id.
	Removed Pages Ids from here to move them in
	their respective view header.
	(gpdf_control_private_reset_cursor): 
	(gpdf_control_private_set_wait_cursor): 
	(gpdf_control_private_set_cursor): Ensure window
	is a gdk_window.
	(gpdf_control_update_bookmarks_view_tools_menu) 
	(gpdf_control_bookmarks_view_ready) 
	(gpdf_control_update_thumbnails_view_tools_menu) 
	(gpdf_control_thumbnails_view_ready) 
	(gpdf_control_update_annots_view_tools_menu) 
	(gpdf_control_annots_view_ready): 
	Added funcs to deal with tools menu updates and
	Ready signals for views. They should be grouped
	in two funcs? To be fixed?...
	(gpdf_control_enable_ui): Added tools menu update
	in control enable UI func.
	(gpdf_control_get_bookmarks_view): Added connection
	to Ready signal instead of settings tools menu.
	This is to wait asynchronous bookmarks loads to be
	sure we have a tools menu to activate.
	(gpdf_control_get_thumbnails_view): Same for thumbnails
	view.
	(gpdf_control_get_annots_view): and for annots view.
	(gpdf_control_pdf_doc_changed): Moved control_enable_ui
	out of the if statement.

	* xpdf/gpdf-annots-view.h 
	(GPDF_ANNOTS_VIEW_PAGE_ID): 
	Sidebar Page id now defined in here.
	Added class func for Ready signal.

	* xpdf/gpdf-annots-view.cc: Removed unused private
	field annots. Replaced with the total number of annotations
	available inthe document.
	(gpdf_annots_view_class_init): 
	Added Ready signal telling control that annotations
	asynchronous load finished.
	(gpdf_annots_view_emit_ready): Ready signal emission func
	(gpdf_annots_view_have_annotations): Added a func using
	the total num of annots to tell if some are available.
	(gpdf_annots_view_update_annots_list): Here I count
	total number of annotations.
	(gpdf_annots_view_populate_idle): Moved some local
	vars from func context to the loop context where they
	are used.
	(gpdf_annots_view_populate_idle): Removed a leak, annots
	list was not deleted.
	(gpdf_annots_view_get_tools_menu): Use new have_annotations
	func to disable tools menu when no annotations are
	availables.

	* xpdf/gpdf-thumbnails-view.h 
	(GPDF_THUMBNAILS_VIEW_PAGE_ID): 
	Sidebar Page id now defined in here.
	Added class func for Ready signal.

	* xpdf/gpdf-thumbnails-view.cc: 
	(gpdf_thumbnails_view_class_init): 
	Added Ready signal to tell control that thumbnails
	asynchronous load finished.
	(gpdf_thumbnails_view_emit_ready): Ready signal
	emission func.
	(gpdf_thumbnails_view_populate_idle): Only 
	change tools menu item widget sensitivity if
	tools menu was created (widget actually exist).
	Changed brace position.
	(gpdf_thumbnails_view_populate_idle): Added
	ready signal emission.

	* xpdf/gpdf-bookmarks-view.h (GPDF_BOOKMARKS_VIEW_PAGE_ID): 
	Sidebar Page id now defined in here.
	Added class func for Ready signal.

	* xpdf/gpdf-bookmarks-view.cc: 
	(gpdf_bookmarks_view_class_init): 
	Added the READY signal that tell control that 
	asynchronous bookmarks load finished.
	(gpdf_bookmarks_view_emit_ready): Ready signal
	emission func.
	(gpdf_bookmarks_view_have_outline_items): 
	Added a func telling if some bookmarks are availables.
	(gpdf_bookmarks_view_update_popup_actions): 
	If no bookmarks availables, no need to browse the 
	tree.
	Set menu item widget sensitivity only if menu was
	created.
	(gpdf_bookmarks_view_populate_idle): 
	(gpdf_bookmarks_view_set_pdf_doc): 
	Now populate bookmarks tree in idle func.
	(gpdf_bookmarks_view_get_tools_menu): Used
	gpdf_bookmarks_view_have_outline_items to
	disable tools menu creation when no bookmarks
	availables.

2004-01-20  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/tests/test-pdf-loading.cc (TEST_NEW): 
	Removed unused pdf_doc var.

	* shell/tests/test-uri-input.c: Added decl for
	setup and reat_down to avoid gcc warnings.

	* xpdf/gpdf-stock-icons.c (GPDF_ADD_STOCK_ICON): 
	Add init value for icon_set vars to avoid warning.

	* xpdf/gpdf-persist-stream.cc 
	(gpdf_persist_stream_create_password_dialog): Added
	g_signal_connect for help button.

	* xpdf/gpdf-control.cc: Removed unused 
	gpdf_control_get_title method. Also removed some
	unused vars.

	* xpdf/gpdf-thumbnails-view.cc: 
	* xpdf/gpdf-bookmarks-view.cc: 
	* xpdf/gpdf-annots-view.cc: Removed undefined 
	class_finalize method decl, view_init unused method,
	and some unused vars.

	* xpdf/Thumb.cc (ThumbColorMap::ThumbColorMap): Changed
	field init order to match decl and to avoid warning.
	Removed several unused vars.
	(Thumb::Thumb): Removed unused vars. 
	(Thumb::getPixbufData): Removed unused vars. 

	* xpdf/TextOutputDev.cc (TextPage::coalesce): Init a var
	to avoid warning.

	* xpdf/GPOutputDev.cc (GPOFontMap::~GPOFontMap): Changed
	param named to avoid shadowing of the xref class field and
	the associated warning.

	* xpdf/Makefile.am (INCLUDES): 
	* shell/Makefile.am (INCLUDES): 
	* lib/ggv-sidebar/Makefile.am (INCLUDES): 
	* configure.in: Changed the way WARN_CFLAFS & WARN_CXXFLAGS
	were passed to compiler. Now use CFLAGS/CXXFLAGS in configure
	instead of INCLUDES in some Makefiles.

2004-01-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (MENU_FIT_WIDTH_PATH): one more "Zoom Items
	Placeholder" occurence. (see 2004-01-13)

	* gpdf.desktop.in (_Name, _Comment): short and sweet,
	by Ross Burton and Alexander Winston (Bug #131906).

2004-01-18  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-bookmarks-view.cc (gpdf_bookmarks_view_construct): 
	Complement for Bug #131798: Removed shadow from scrolled
	window to get the same look as nautilus.

	* xpdf/gpdf-annots-view.cc (gpdf_annots_view_construct): 
	Complement for Bug #131798: Removed shadow from scrolled
	window to get the same look as nautilus.

	* xpdf/gpdf-sidebar.c (gpdf_sidebar_instance_init): 
	Changed sidebar title frame shadow type. It was ETCHED_IN
	and it make it look slightly different than the Nautilus
	sidebar one. With GTK_SHADOW_NONE both looks the same.
	This fix bug #131798
	(gpdf_sidebar_instance_init): Also changed arrow box shadows
	as the ones in nautilus.

	* xpdf/gpdf-control.cc (gpdf_control_save_sidebar_state): 
	Changed the source for the CONF_WINDOWS_SHOW_SIDEBAR
	value. It was GTK_WIDGET_MAPPED, but it do not run anymore.
	Now use GTK_WIDGET_VISIBLE.
	Fix for Bug #131776.

2004-01-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_control_private_error_dialog)
	(gpdf_control_private_warn_dialog)
	(gpdf_control_private_info_dialog): Ok -> GTK_STOCK_OK, suggested
	by Christian Neumair.
	(gpdf_control_private_question_dialog): unused and might encourage
	use of Yes/No dialogs: remove
	(gpdf_control_private_display_help): use "%s", not <%s>.

	* xpdf/gpdf-control-private.h (gpdf_control_private_question_dialog):
	remove prototype.

	* gpdf.schemas.in: removed the not really long "long" descriptions
	to reduce string count. Suggested by Christian Neumair.

2004-01-17  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-control-ui.xml: Changed 'Side Pane' in 
	'Sidebar' to be	consistent with other designation for 
	this widget.
	This fix Bug #131733.

2004-01-16  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* configure.in: Add test to check enable_deprecation_errors
	value in [action-if-found] arg of AC_ARG_ENBALE in order
	to correctly handle --disable-deprecation-errors.
	Same changes for annotations_view AC_ARG_ENABLE.

	* xpdf/Makefile.am (EXTRA_DIST): Changed value according
	to USE_ANNOTS_VIEW cond in order to include annotations view
	icons in dist tarball (when annots-view disabled).

2004-01-15  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-view.cc (gpdf_view_link_action_uri) 
	(gpdf_view_link_action_uri): 
	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_popup_menu_item_generate_cb) 
	(gpdf_thumbnails_view_popup_menu_item_generate_all_cb): 
	* xpdf/gpdf-annots-view.cc (gpdf_annots_view_popup_menu_item_filter_cb) 
	(gpdf_annots_view_popup_menu_item_plugins_cb): 
	Fix for Bug #131501.
	Some messages punctuations were misplaced.
	A syntax error was also corrected in the word "notification".

2004-01-14  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_scroll_region_coord): 
	Changed abs with labs to remove ambiguity on Solaris
	Bug #131449

2004-01-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.122.

2004-01-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control-ui.xml: rename "View Items Placeholder" back
	to "Zoom Items Placeholder", put ViewSidebar outside the
	placeholder.

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): port Xpdf's support
	for embedded TrueType fonts.

	* xpdf/gpdf-thumbnails-view.cc
	(gpdf_thumbnails_view_get_tools_menu): we can't generate
	thumbnails yet, therefore disable the (empty) tools menu.

	* xpdf/gpdf-sidebar.c: disable remove button, because we don't
	have remove sidebar panes yet.

	* configure.in: --disable-annotations-view ->
	--enable-annotations-view for ui-freeze.

	* xpdf/gpdf-thumbnails-view.cc (gpdf_thumbnails_view_canvas_outline_event_cb):
	comment out debug spew.

	* xpdf/Makefile.am: fixes for USE_ANNOTS_VIEW conditional.

	* xpdf/gpdf-view.cc (gpdf_view_setup_page_transform)
	(gpdf_view_link_action_goto, gpdf_view_link_action_named)
	(gpdf_view_link_clicked_cb, gpdf_view_scroll_adjustments_changed_cb)
	(gpdf_view_set_pdf_doc): 	
	* xpdf/gpdf-control.cc (gpdf_control_class_init): 
	* xpdf/gpdf-control-ui.xml: 
	* xpdf/bonobo-application-x-pdf.cc: 
	* gpdf.spec.in (Requires): 
	* configure.in: Revert disapproved changes.

2004-01-13  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/Makefile.am (STOCK_ANNOTS_ICONS, ANNOTS_VIEW_SRCS): 
	Changed variables assignement to avoid undefined
	message from automake-1.4.

	* gpdf.spec.in:
	Removed junk help files in %files list.
	Added gnome--pdf.png icon.

	* xpdf/Page.cc (Page::displaySlice): 
	Changed the size of the statements
	enclosed in ifdef USE_ANNOTS_VIEW in order
	to disable annotations display when annots
	view is unused.

	* xpdf/gpdf-bookmarks-view.cc:
	* xpdf/gpdf-thumbnails-view.cc:
	* xpdf/gpdf-annots-view.cc:
	Changed the way to retrieve menu item widgets
	for popup menus. gnome_app_find_menu_pos always
	return the same widget ??? now use index in
	GnomeUIInfo struct.

	* xpdf/gpdf-stock-icons.h: Added aconf.h
	to get USE_ANNOTS_VIEW def.

	* xpdf/tests/test-gpdf-view.cc (TEST_NEW): 
	Added new param to gpdf-view constructor.
	NULL instead of control for the test.

	* xpdf/tests/.cvsignore: Add .libs & .deps

	* xpdf/Thumb.cc: 
	* xpdf/Thumb.h: Add implem for Thumb object 
	parsing.

	* xpdf/prefs-strings.h: Defines for gconf keys

	* xpdf/PDFDoc.h:
	* xpdf/PDFDoc.cc: Added annots display CB.

	* xpdf/Page.h: Added getThumb method. Added annots
	display CB decl. Added Thumb object field for
	thumbnails management.

	* xpdf/Page.cc (Page::Page): Added thumb object 
	parsing. 
	(Page::display) (Page::displaySlice): Add CB for
	annotations in Page display.
	(displaySlice): 
	Added conditional display of annotation in order to
	avoid them when USE_ANNOTS_VIEW is not defined.

	* xpdf/Outline.cc: Fixed Outline object parsing.

	* xpdf/Link.cc: Changed some error handling
	to make a difference between two parse actions
	and have a better report (needed for debug).

	* xpdf/Makefile.am: 
	Add conditional ANNOTS_VIEW_SRCS.
	Change eog-hig-dialog in gpdf-hig-dialog.
	Added new files (srcs & icons) for sidebar and views.

	* xpdf/gpdf-view.h: 
	* xpdf/gpdf-view.cc:
	Add sidebar views interface.

	* xpdf/gpdf-thumbnails-view.h: 
	* xpdf/gpdf-thumbnails-view.cc:
	Implementation of thumbnails view.

	* xpdf/gpdf-stock-icons.h: 
	* xpdf/gpdf-stock-icons.c: Add icons for
	sidebar views (bookmarks, thumbnails and
	annotations).

	* xpdf/gpdf-sidebar.h: 
	* xpdf/gpdf-sidebar.c: 
	Sidebar implem inspired from Galeon's one.
	Could remove soon the delete page button.

	* xpdf/gpdf-persist-stream.cc 
	(gpdf_persist_stream_on_helpbutton_clicked): 
	Added help button and its callback 
	for password dialog.
	(gpdf_persist_stream_create_password_dialog): 
	Merged from HEAD (one dialog for both password).

	* xpdf/gpdf-persist-file.cc 
	(gpdf_persist_file_on_helpbutton_clicked): 
	Added help button and its callback 
	for password dialog.
	(gpdf_persist_file_create_password_dialog): 
	Merged from HEAD (one dialog for both password).

	* xpdf/gpdf-marshal.list: Added marshalers
	VOID:POINTER,INT VOID:POINTER,INT,BOOLEAN and
	VOID:INT,INT,INT,INT,INT.

	* xpdf/gpdf-hig-dialog.c: 
	* xpdf/gpdf-hig-dialog.h: Reused eog HIG dialog
	in GPdf.

	* xpdf/gpdf-control.cc (gpdf_control_private_set_status) 
	(gpdf_control_private_status_timeout, gpdf_control_private_push) 
	(gpdf_control_private_pop, gpdf_control_private_clear_stack) 
	(gpdf_control_private_set_fraction) 
	(gpdf_control_private_set_pulse_step, gpdf_control_private_pulse) 
	(gpdf_control_private_refresh, gpdf_control_private_set_cursor) 
	(gpdf_control_private_set_wait_cursor) 
	(gpdf_control_private_reset_cursor) 
	(gpdf_control_private_get_bookmarks_view) 
	(gpdf_control_private_get_thumbnails_view) 
	(gpdf_control_private_get_annots_view) 
	(gpdf_control_private_destroy_dialog) 
	(gpdf_control_private_error_dialog) 
	(gpdf_control_private_warn_dialog) 
	(gpdf_control_private_info_dialog) 
	(gpdf_control_private_question_dialog) 
	(gpdf_control_private_display_help): 
	control-private funcs that temporary stay 
	in gpdf-control but will move to avoid
	dependency on gpdf-control.
	(gpdf_control_no_postscript_printer_alert): 
	Changed eog_hig_dialog to gpdf_hig_dialog.
	(gpdf_control_read_sidebar_state) 
	(gpdf_control_save_sidebar_state, gpdf_control_activate_sidebar): 
	Support for activating sidebar and saving
	restoring its state.
	(gpdf_control_get_title, gpdf_control_get_bookmarks_view) 
	(gpdf_control_get_thumbnails_view, gpdf_control_get_annots_view) :
	Sidebar internal accessors.
	(gpdf_control_update_toggles) 
	(gpdf_control_view_sidebar_changed_cb) 
	(gpdf_control_sidebar_close_requested_cb) 
	(gpdf_control_bookmark_selected_cb) 
	(gpdf_control_thumbnail_selected_cb) 
	(gpdf_control_annotation_selected_cb) 
	(gpdf_control_annotation_toggled_cb) 
	(gpdf_control_sidebar_page_changed_cb): 
	Sidebar events management.
	(gpdf_control_setup_view_widgets): 
	Setup sidebar and its pages. Add gnome app bar and
	necessary layout.
	(gpdf_control_disconnected): 
	Save sidebar state when component disconnect.
	(gpdf_control_dispose): 
	Dispose memory when component released.
	(gpdf_control_class_init): 
	Connect compnent methods. Added global params
	instanciation and stock icons init.

2004-01-12  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-control.cc: Added support for sidebar.
	Replaced misc string literal with defines. Added
	AppBar for status and advancement control.
	The Annots view is conditionned by configure var
	and define USE_ANNOTS_VIEW.

	* xpdf/gpdf-control-ui.xml: Add accelerator for
	Print (Ctrl-P). Changed 'Zoom Items Placeholder'
	in 'View Items Placeholder'.
	Added ViewSidebar menuitem (F9). This accel is
	a potential conflict with the nautilus one (when
	using gpdf nautilus view).
	Changed label of Print toolitem to "Print Document".

	* xpdf/gpdf-control-private.h: The funcs grouped
	in this header are for now in gpdf-control but 
	will move soon. They are utility funcs as
	status control, error/warning dialog control, etc.

	* xpdf/gpdf-bookmarks-view.h: 
	* xpdf/gpdf-bookmarks-view.cc: Implem for
	the bookmarks view embed in the sidebar.

	* xpdf/gpdf-annots-view.h: 
	* xpdf/gpdf-annots-view.cc: Implem for the
	annotations view embed in the sidebar. This view
	is experimental and may be disabled through
	the configure arg --disable-annotations-view.

	* xpdf/eel-gconf-extensions.h: 
	* xpdf/eel-gconf-extensions.c: Convinient
	funcs for gconf usage. These files will move to
	the lib directory in order for them to be used 
	by gnome-pdf-viewer and gpdf.

	* xpdf/bonobo-application-x-pdf.cc: Moved
	global params instanciation and stock icons 
	init from bonobo-application-x-pdf.cc to
	gpdf-control class init.

	* xpdf/Annot.h: Added getSubtype, getDict and
	getRefNum/Gen methods for easier annots 
	identification.
	Added dict & subtype fields.

	* xpdf/Annot.cc (Annot::Annot): Extended Annot
	object to read several kind of annotations.
	Some more work (in coord with xpdf) is needed...
	(Annots::Annots): Same extensions on annotations
	collection object.

	* po/.cvsignore: Added .intltool*

	* shell/tests/.cvsignore: 
	* lib/recent-files/.cvsignore: 
	* lib/ggv-sidebar/.cvsignore: Added .deps & .libs.

	* help/C/gpdf.xml: Added a placeholder for password
	dialog documentation (also usefull for testing help
	button in password dialog).

	* Makefile.am (EXTRA_DIST): Added schemas
	and spec files.
	(schemadir): Definition
	(schema_DATA): Definition
	Added schemas rules and local target if schemas
	have to be installed.
	(ACLOCAL_AMFLAGS): Added gnome2-macros to avoid
	failure when triggered from makefile (maintainers
	rules).
	(CLEANFILES): Added schemas file

	* .cvsignore: Added schemas & spec files.

	* configure.in: Updated required specs.
	Removed useless AC_CANONICAL_HOST.
	Made --enable-deprecation-errors arg the default
	for this dev version.
	Add statements for checking gconf commands availability.
	Updated PKG_CHECK_MODULES with new requirements.
	Added --disable-annotations-view arg for cond annots view
	in sidebar.
	Added gpdf.schemas & gpdf.spec in AC_OUPUT macros.

	* gpdf.spec.in: Creation of spec file.

	* gpdf.schemas.in: Creation of schemas file for GPdf.

2004-01-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_get_password):
	(gpdf_persist_file_get_owner_password)
	(gpdf_persist_file_get_user_password): merge, use only one passwd
	dialog.
	(impl_bonobo_persist_file_load): use it, ask for the passwd once.

	* xpdf/gpdf-persist-stream.cc (gpdf_persist_stream_get_password):
	(gpdf_persist_file_get_owner_password)
	(gpdf_persist_file_get_user_password)
	(impl_bonobo_persist_stream_load): ditto.

	* xpdf/gpdf-stock-icons.c (gpdf_stock_icons_init): if fit-width
	icon is not installed, use stock fit icon.

2004-01-10  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf-window-ui.xml: 
	* shell/gpdf.c (gpdf_window_open): desensitize full screen command
	until we have a pdf.

	* shell/gpdf.c (exit_fullscreen_button_clicked_cb)
	(update_exit_fullscreen_popup_position, screen_size_changed_cb)
	(gpdf_window_init_fullscreen_popup): exit full screen button,
	stolen from epipahny.
	(gpdf_window_window_state_changed): use it.

	* shell/gpdf-window-ui.xml: 
	* shell/gpdf.c: 
	(gpdf_window_set_fullscreen, gpdf_window_window_state_changed) 
	(listener_ViewFullScreen, gw_setup_toplevel_ui) 
	(gpdf_window_construct): implement simple full screen mode.

	* gpdf.applications: add startup_notify=true.

2004-01-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GNOME_PDF.server.in.in: more strings for more fine-grained
	translations. (cf. Bug #45462)

2003-01-03  Roozbeh Pournader  <roozbeh@sharif.edu>

	* configure.in: Added "fa" (Persian) to ALL_LINGUAS.

2004-01-03  Robert Sedak  <robert.sedak@sk.htnet.hr>

        * configure.in: Added "hr" in ALL_LINGUAS.

2003-12-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (main, gw_control_load_pdf): replace deprecated
	calls.

	* shell/gpdf-recent-view-toolitem.c
	(gpdf_recent_view_toolitem_popup): replace deprecated
	gnome_popup_menu_do_popup_modal with gtk_menu_popup, adjust
	parameter list. Suggested by Ali Akcaagac.
	(gpdf_recent_view_toolitem_button_press_event) 
	(gpdf_recent_view_toolitem_key_press_event): adjust param. list.

	* xpdf/gtkgesture.c (gesture_data_append_point)
	(gtk_gesture_handler_attach): don't use deprecated gdk_gc_unref or
	gtk_signal_connect.	

	* configure.in: add --enable-deprecation-errors option, inspired
	by ggv's configure.

	* xpdf/Makefile.am, shell/Makefile.am,
	lib/recent-files/Makefile.am, lib/ggv-sidebar/Makefile.am
	(INCLUDES): use GPDF_DEPRECATED_CFLAGS.

2003-12-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* .cvsignore: ignore depcomp, stamp-h1.

	* configure.in: post-release version bump.

	* xpdf/pdf-properties-display.c, xpdf/pdf-info-dict-util.cc,
	xpdf/page-control.c, xpdf/gpdf-view.cc,
	xpdf/gpdf-links-canvas-layer.cc, xpdf/gpdf-link-canvas-item.cc,
	shell/gpdf-recent-view-toolitem.c, shell/eel-vfs-extensions.c: 
	Use glib/gi18n.h instead of libgnome/gnome-i18n.h

2003-12-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: Version 0.121.

	* NEWS: upd.

2003-12-28  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: emit a warning if font embedding is disabled.

	* xpdf/GPOutputDev.cc (lookupGlyph): new, a little bit better than
	nothing.
	(drawString): use lookupGlyph. Fixes a part of bug #116772.

2003-12-23  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* lib/recent-files/Makefile.am (INCLUDES): eek, some
	_DISABLE_DEPRECATED defines were still here. Remove them.

	* shell/gpdf-recent-view-toolitem.c
	(gpdf_recent_view_toolitem_instance_init): unset CAN_FOCUS flag,
	for consistency with other toolbar button items. In response to
	bug #126191.

	* Makefile.am, help/C/Makefile.am, help/es/Makefile.am: fix
	distcheck for scrollkeeper stuff.

	* Makefile.am: delete intltool-* on distclean, not clean, fixes
	make clean; make.

2003-12-21  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	gcc 3.3.3 has better diagnostics :-)
	
	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_unload):
	add a missing ``= NULL''
	(gpdf_persist_file_on_cancelbutton_clicked) 
	(gpdf_persist_file_create_password_dialog) 
	(gpdf_persist_file_destroy): kill dead code.

	* xpdf/gpdf-persist-stream.cc
	(gpdf_persist_file_on_cancelbutton_clicked)
	(gpdf_persist_file_create_password_dialog): ditto.

	* xpdf/gpdf-control.cc (gpdf_control_get_filenam)
	(gc_ui_set_pixbufs, gpdf_control_constructor): kill unused
	variables.

	* xpdf/gpdf-view.cc (gpdf_view_save_as): ditto.

	* xpdf/bonobo-application-x-pdf.cc: kill unused factory global.

2003-12-20  Arafat Medini <lumina@silverpen.de>
                                                                                
        * configure.in: Added  Arabic Locale "ar" to ALL_LINGUAS

2003-12-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: drop libgnomeui-2.0 >= 2.4.0 requirement.

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_create_password_dialog),
	* xpdf/gpdf-persist-stream.cc (gpdf_persist_file_create_password_dialog): 
	use GTK_STOCK_DIALOG_AUTHENTICATION, not GNOME_STOCK_AUTHENTICATION.

	* help/es/.cvsignore: add.

	* .cvsignore, Makefile.am (inltool_extra): update for
	intltool 0.28.

	* shell/gpdf.c (set_window_icon_default, main): set the default
	window icon.

	* shell/Makefile.am (INCLUDES): define GNOMEICONDIR

	* shell/gpdf.c, xpdf/gpdf-control.cc: don't
	gtk_window_set_default_size (cf. #128636)

	* configure.in: GtkFileChooser requires gtk+ 2.3

2003-12-08  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* shell/gpdf.c: (file_dialog_response), (gw_ask_for_uri):
	* xpdf/gpdf-control.cc: Replace GtkFileSelection with
	GtkFileChooser.

2003-12-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* help/es/gpdf.xml, help/es/gpdf-es.omf: made them xmllint clean.

2003-12-11  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* help/es, configure.in, help/Makefile.am: Added Spanish help

2003-12-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/page-control.c (gpdf_page_control_expose)
	(gpdf_page_control_class_init): try to look better with some theme
	engines (bug and patch for similar problem pointed out by
	hk (Evandro)).

	* test-files/encrypted.pdf: an encrypted pdf, passwords are Foo
	and Bar.

	* test-files/Makefile.am (EXTRA_DIST): dist encrypted.pdf.

	* xpdf/gpdf-links-canvas-layer.cc: can't make canvas-item
	properties construct time-only. Fixes links with glib 2.3.

	* configure.in: post-release version bump.

2003-12-08  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: Version 0.120, add warning that this is not
	stable.

	* NEWS: merge news from stable, update.

	* README.GPdf: update.

	* xpdf/gpdf-properties-dialog.glade: declare some atk relations.

	* xpdf/page-control.c (gpdf_page_control_instance_init) 
	(gpdf_page_control_setup_at): set some atk names.

	* xpdf/gpdf-view.cc (gpdf_view_setup_at): set atk role and name
	for the GPdfView, fixes #127897.

	* configure.in: require libgnomeui-2.0 >= 2.4.0 for authentication
	stock icon.

	* xpdf/gpdf-persist-file.cc, xpdf/gpdf-persist-stream.cc
	(gpdf_persist_file_create_password_dialog)
	(gpdf_persist_file_get_password)
	(gpdf_persist_file_get_owner_password)
	(gpdf_persist_file_get_user_password): HIGgify a bit: remove
	window title, remove unused help button, rename OK button, add
	authentication stock icon, frob widget spacing.

	* xpdf/gpdf-control.cc (gpdf_control_enable_ui): enable print verb
	only if the document allows printing.

2003-12-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_control_enable_ui): handle FileSaveAs
	as well.

2003-12-06  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-file.cc (impl_bonobo_persist_file_load): if
	the uri looks like a local path (no uri scheme), transform to a
	uri, escaping special chars like '%'. Fixes #128171.

	* shell/gpdf-recent-view-toolitem.c
	(gpdf_recent_view_toolitem_instance_init): set atk name for the
	drop down arrow. Fixes #126190.
	Patch by Padraig O'Briain <padraig.obriain@sun.com>
	Fix copyright lines to include James Willcox (for the gedit code).
	
	* xpdf/gpdf-view.cc (gpdf_view_save_as): Comment that it expects
	the filename in on-disk encoding.

	* xpdf/gpdf-control.cc (gpdf_control_get_filename): comment why it
	doesn't return utf-8, remove FIXME; s/const gchar*/gchar*/ because
	we return g_strdupped memory. Fix fileselection title.
	(verb_SaveAs_cb): plug leak (s/const gchar*/gchar*/)

	* xpdf/gpdf-control-ui.xml: renamed "Save document as" to "Save a
	Copy" because we continue displaying the original file.

2003-12-01	Mohammad DAMT  <mdamt@bisnisweb.com>

	* configure.in: Added "id" to ALL_LINGUAS
	* po/id.po: Added Indonesian Translation by Ahmad Riza H Nst <ari@160c.afraid.org>

2003-11-18  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* shell/gpdf.c (gpdf_window_open): 
	Changed bonobo_object_unref with gtk_widget_destroy (more
	appropriate :-).

	* xpdf/gpdf-persist-stream.cc (impl_bonobo_persist_stream_load): 
	* xpdf/gpdf-persist-file.cc (impl_bonobo_persist_file_load): 
	Fixed for BUG# 116663.
	Raise exception for password failure to be able to cancel
	window opening when catched in gpdf window code.

	* shell/gpdf.c:
	Fixed for BUG# 116663.
	(open_request_handler): 
	Changed window creation flow to be able to correctly
	handle exceptions.
	Moved title update (removed here after) at this point
	just before window is mapped.
	(gw_add_control_to_ui): Removed activation of control
	widget (to do it later in creation flow).
	(gw_control_load_pdf): Removed update of title to do
	it later also.
	(gpdf_window_open): Changed window open flow to take
	into account exceptions. Added activation of control
	if no exception raised.

	* xpdf/gpdf-control.cc (gpdf_control_setup_persist): 
	Merged from gpdf-outlines branch.
	Give bonobo control to bonobo persistant
	objects for them to handle password dialogs as 
	transients.

	* xpdf/gpdf-persist-stream.h: 
	* xpdf/gpdf-persist-stream.cc: 
	(gpdf_persist_file_on_entry_activate) 
	(gpdf_persist_file_on_cancelbutton_clicked) 
	(gpdf_persist_file_on_okbutton_clicked) 
	(gpdf_persist_file_create_password_dialog) 
	(gpdf_persist_file_get_password) 
	(gpdf_persist_file_get_owner_password) 
	(impl_bonobo_persist_stream_load) 
	(gpdf_persist_stream_set_control): 
	Merged from gpdf-outlines branch.
	Add password protected documents support.
	Fix BUG# 116663

	* xpdf/gpdf-persist-file.h: 
	* xpdf/gpdf-persist-file.cc: 
	(gpdf_persist_file_on_entry_activate) 
	(gpdf_persist_file_on_cancelbutton_clicked) 
	(gpdf_persist_file_on_okbutton_clicked) 
	(gpdf_persist_file_create_password_dialog) 
	(gpdf_persist_file_get_password) 
	(gpdf_persist_file_get_owner_password) 
	(gpdf_persist_file_get_user_password) 
	(impl_bonobo_persist_file_load, gpdf_persist_file_set_control): 
	Merged from gpdf-outlines branch.
	Add password protected documents support.
	Fix BUG# 116663

2003-11-17  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-control-ui.xml: 
	* xpdf/gpdf-view.cc (gpdf_view_save_as): 
	* xpdf/gpdf-control.cc (gpdf_control_get_filename) 
	(verb_SaveAs_cb): 
	Merge SaveAs feature from gpdf-outlines branch.
	Fix for BUG# 117596

	* shell/gpdf.c (gw_ask_for_uri, gw_open_dialog): 
	Merged "Open multiple files" feature from 
	gpdf-outlines branch.
	Fix for BUG# 118942.

2003-11-11  Padraig O'Briain  <padraig.obriain@sun.com>

	* xpdf/bonobo-application-x-pdf.cc (main): call gnome_program_init
	( fixes #126516, ignored gconf a11y setting).

2003-11-03  Shakti  <shakti.sen@wipro.com>

	* gpdf.desktop.in:
	Added "%U" as a Exec parameter variable to handle dnd PDF files on launcher.
	Fixes the bug#126160
	  
2003-10-27  Sanlig Badral  <badral@openmn.org>

	* configure.in: Added "mn" to ALL_LINGUAS.

2003-10-14  Chee Bin HOH  <cbhoh@mimos.my>

	* help/C/gpdf.xml: upd.

	* shell/gpdf.c (verb_HelpAbout_cb): documentation
	credits.
	(verb_HelpContents_cb): new.	

2003-10-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	from stable branch:
	
	* xpdf/gpdf-control.cc (idle_print_handler): fix off-by-one bug
	(gpdf_control_print, print_to_file_workaround): make print-to-file
	work, needs investigation in gnome-print.

2003-10-03  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-control.cc (persist_file_loading_finished_cb): 
	Fix for BUG #123638.
	Add call to gnome_vfs_unescape_string_for_display to remove
	escaped chars in title.	

	* help/C/figures/gpdf_start_window.png:
	* help/C/legal.xml:
	* help/C/gpdf.xml:
	* help/C/Makefile.am:
	* help/C/gpdf-C.omf:
	* help/C/.cvsignore:
	* help/Makefile.am:
	* help/xmldocs.make:
	* help/.cvsignore:
	* help/omf.make: Added help written by Chee Bin HOH.

	* Makefile.am (SUBDIRS): Add help as a SUBDIR.

	* configure.in: Add help/Makefile and help/C/Makefile in
	AC_OUTPUT directive.

	=== this is HEAD === stable branch is gnome-2-4 ===
	
2003-09-30  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "eu" to ALL_LINGUAS.

2003-09-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: on HP-UX with gcc 3.3, define __STDC_EXT__ (#121730).

2003-09-26  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (idle_print_handler): forgot to mark one
	message for translation. Sorry.

2003-09-26  Christian Neumair  <chris@gnome-de.org>

	* xpdf/gpdf-control.cc (verb_FileProperties_cb):
	* xpdf/gpdf-properties-dialog.glade: HIGify document property dialog.

	* xpdf/gpdf-print-progress-dialog.glade: HIGify print progress dialog.

2003-09-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gpdf_print_job_prepare, idle_print_handler:
	(gpdf_control_print_job_print, using_postscript_printer)
	(gpdf_control_no_preview_alert, gpdf_control_no_postscript_printer_alert)
	(gpdf_control_get_range_page, gpdf_control_print_dialog_new)
	(gpdf_control_print, verb_FilePrint_cb): implement printing.
	(gpdf_control_set_property): disable PersistStream implementation.

	* xpdf/gpdf-print-progress-dialog.glade: add.

	* xpdf/gpdf-control-ui.xml: add Print verb, menu item, tool item.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): include PSOutputDev
	(glade_DATA): add gpdf-print-progress-dialog.glade.

	* xpdf/GNOME_PDF.server.in.in: don't advertise PersistStream

	* configure.in: bump version to 0.110.99; require libgnomeprint >=
	2.3.0.

2003-09-22  Taneem Ahmed  <taneem@bengalinux.org>

	* configure.in: Added "bn" to ALL_LINGUAS.

2003-09-08  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version 0.110.

	* README.GPdf: add note about HP-UX + gcc 3.3 build (#121730).

2003-09-08  Mugurel Tudor  <mugurelu@go.ro>

	* configure.in : Added "ro" to ALL_LINGUAS.

2003-09-04  Joël Brich  <joel.brich@laposte.net>

	* configure.in : Added "eo" to ALL_LINGUAS.

2003-09-02  Gediminas Paulauskas  <menesis@delfi.lt>

	* configure.in: Added lt to ALL_LINGUAS.

2003-08-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: Version 0.106.

	* NEWS: updated.

	* README: point to README.GPdf.

	* README.GPdf: new file.

	* gnome-pdf.png: icon from gnome-icon-theme by Jimmac (Jakub
	Steiner).

	* Makefile.am: dist the icon.

2003-08-25  Mark Finlay  <sisob@tuxfamily.org>

	* gpdf.desktop.in: use gnome-pdf (gnome-icon-theme) icon.

2003-08-19  Yanko Kaneti <yaneti@declera.com>

	* configure.in: (ALL_LINGUAS) Added Bulgarian (bg).

2003-08-18  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added "hi" to ALL_LINGUAS.

2003-08-12  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (ui_component_set_sensitive): move up.
	(gpdf_control_enable_ui): new.
	(gc_enable_go_back_verbs, gc_enable_go_forward_verbs)
	(gc_enable_history_back_verbs, gc_enable_history_forward_verbs):
	replaced by gpdf_control_enable_ui.
	(gc_page_changed_enable_page_buttons, gpdf_control_activate)
	(gpdf_control_pdf_doc_changed): use gpdf_control_enable_ui,
	disable ui if pdf_doc == NULL.

2003-08-09  Sajith V.K  <sajith_vk@linuxmail.org>

	* configure.in: Added "ml" (Malayalam) to ALL_LINGUAS.

2003-08-06  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/eog-hig-dialog.c (eog_hig_dialog_new): add terminating
	NULL in g_object_set.

2003-07-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* NEWS, configure.in: Version 0.105

	* shell/gpdf.c (verb_HelpAbout_cb): add Remi.

2003-07-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* test-files/Makefile.am (%.pdf): run pdftex in nonstopmode, let
	make ignore pdftex errors (we are only creating test files). Makes
	bug #114701 less severe.

2003-07-24  Dafydd Harries  <daf@parnassus.ath.cx>

	* configure.in: Added "cy" (Welsh) to ALL_LINGUAS.

2003-07-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-properties-dialog.glade: declared unused dialog title
	as not translatable. (Bug #118218).

2003-07-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-info-dict-util.cc (pdf_doc_process_properties): added a
	comment for translators in front of Yes/No (Bug #118214).

2003-07-18  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-file.cc (impl_bonobo_persist_file_load): use
	more informative error messages when emitting loading-failed. Kill
	gotos :-).
	Whitespace cleanups.

	* xpdf/gpdf-control.cc (persist_file_loading_failed_cb): kill
	redundancy in error message; unset PDF document.

	* xpdf/eog-hig-dialog.c (eog_hig_dialog_new): remove a newline

2003-07-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_class_init)
	(impl_bonobo_persist_file_load): emit (new) loading-failed signal
	if something goes wrong during load.

	* xpdf/gpdf-persist-file.h: add slot for loading-failed.

	* xpdf/gpdf-marshal.list: add VOID:STRING.

	* xpdf/gpdf-links-canvas-layer.cc: fix include (thanks Remi).

	* xpdf/gpdf-control.cc (gpdf_control_setup_persist)
	(gpdf_control_destroy): on loading-failed signal, display error
	alert.

	* xpdf/eog-hig-dialog.h, xpdf/eog-hig-dialog.c: copied from eog;
	HIG conforming alert dialog.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): build eog-hig-dialog

	* NEWS: updated.
	
2003-07-17  Remi Cohen-Scali  <rcoscali@cvs.gnome.org>

	* xpdf/gpdf-marshal.list (VOID:POINTER,INT)
	(VOID:INT,INT,INT,INT,INT): removed wrongly
	commited new marshalers. Should have gone to
	gpdf-outlines.

2003-07-06  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-file.cc (gpdf_persist_file_class_init): 
	rename set_pdf signal to loading_finished.
	
	* xpdf/gpdf-control.cc (persist_file_loading_finished_cb) 
	(gpdf_control_setup_persist): ditto.

	* xpdf/tests/test-pdf-loading.cc: ditto.

	* xpdf/gpdf-persist-file.h: ditto.

2003-07-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (file_dialog_ok): if selected filename does not
	exist, try to do completion, never try to open.

2003-07-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (file_dialog_ok): don't try to open a
	directory. Code stolen from Gnumeric (gui-util.c).
	(file_dialog_cancel, file_dialog_delete_event, gw_ask_for_uri):
	hide the file selector before destroying it.
	
2003-07-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_clear_history): implement.
	(gpdf_view_set_pdf_doc): clear history on set_pdf_doc (for
	nautilus).

2003-07-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.h: add scroll_to prototypes

	* xpdf/gpdf-view.cc (gpdf_view_key_press_event): use
	gpdf_view_scroll_to_top and _bottom, kill superfluous/wrong
	do_scroll = TRUE statement (twice).
	(gpdf_view_scroll_to_top, gpdf_view_scroll_to_bottom): move above
	gpdf_view_page_prev.
	(gpdf_view_link_action_goto, gpdf_view_page_prev)
	(gpdf_view_page_next, gpdf_view_page_first, gpdf_view_page_last)
	(gpdf_view_back_history, gpdf_view_forward_history)
	(gpdf_view_key_press_event, gpdf_view_key_press_event): when
	jumping to another page, scroll to top of the page, except when
	browsing backwards with Backspace. Fixes #115173.

	* xpdf/gpdf-control.cc (gc_set_page_cb): #115173 fix.

2003-07-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_scroll_to_top) 
	(gpdf_view_scroll_to_bottom): implement.

	* configure.in: bump version to 0.104.99.

2003-07-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in, NEWS: Version: 0.104.

2003-07-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-gpdf-control.cc (control_property_title): make
	it pass again.

	* xpdf/GPOutputDev.cc: fix name of Dingbats font.

2003-07-01  Laurent Dhima  <laurenti@alblinux.net>

	* configure.in: Added "sq" to ALL_LINGUAS.

2003-06-30  Alessio Frusciante  <algol@firenze.linux.it>

	* configure.in (ALL_LINGUAS): added "it" (Italian).

2003-06-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (persist_stream_set_pdf_cb)
	(persist_file_set_pdf_cb, persist_file_set_pdf_cb)
	(gpdf_control_get_title, gpdf_control_constructor)
	(property_bag_get_prop): Plug leak. Don't recompute the title
	everytime it is needed.  Silly Martin told Remi the wrong place
	for his change.

2003-06-28  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-font-face.h: change license from GPL v2 to GPL v2 or
	later.  (with Filip's permission)

	* xpdf/gpdf-font-face.c: ditto.

	* configure.in (ALL_LINGUAS): Added "mk" and "he".
	(EXTRA_GNOME_CFLAGS) Do not check for freetype explicitly.  Build
	fix suggested by Ali Akcaagac.

	* NEWS: updated.

2003-06-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-font-face.c: GnomeFontFace wrapper class for embedded
	fonts. Originally by me, this class is from Filip Van Raemdonck.

	* xpdf/gpdf-font-face.h: header for GPdfFontFace.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): build gpdf-font-face.[hc].
	(INCLUDES): propagate cflags for private gnome-print headers.

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded):
	s/gnome_font_face_download/gpdf_font_face_download/.

	* configure.in (HAVE_FONT_EMBEDDING): compile with font-embedding
	if complete private gnome-print headers are installed.

	* NEWS: updated.

2003-06-21  Remi Cohen-Scali  <remi@cohen-scali.com>

	* xpdf/gpdf-control.cc (gpdf_control_get_title): Added
	URI manipulation stuff for removing file:// for title
	property.

	* shell/gpdf.c (gpdf_window_update_window_title): 
	Add handling for exception if PB cannot be retrieved.
	Also fix a typo about last bonobo_pbclient_get_string_with_default
	arg.

2003-06-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-gpdf-control.cc (control_property_title): 
	* xpdf/gpdf-control.cc (gpdf_control_setup_property_bag):	
	* shell/gpdf.c (gpdf_window_update_window_title): plug property
	bag leak.

	* configure.in: fix typo.

2003-06-15  Remi Cohen-Scali  <remi@cohen-scali.com>

	* xpdf/gpdf-view.h: 
	* xpdf/gpdf-view.cc: Add support for history navigation.
	(gpdf_free_history_node, gpdf_view_history_stack_page)
	(gpdf_view_back_history, gpdf_view_forward_history)
	(gpdf_view_is_first_history, gpdf_view_is_last_history): impl.
	(gpdf_view_goto_page_no_history): renamed from
	gpdf_view_goto_page, made static
	(gpdf_view_goto_page): new, history-aware.
	
	* xpdf/gpdf-control-ui.xml: Add UI controls for history 
	navigation.

	* xpdf/gpdf-control.cc (gc_page_changed_enable_page_buttons)
	(gc_enable_history_forward_verbs, gc_enable_history_back_verbs):
	Add update for history controls.
	(verb_GoHistoryPrev_cb, verb_GoHistoryNext_cb): Add callbacks and
	bonobo verbs for history controls.
	(gpdf_control_activate): pretend page change to update commands
	sensitivity.
	(gc_page_changed_enable_page_buttons): handle history buttons.

2003-06-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (drawString): don't draw glyphs for
	non-printing characters. Fixes #114939.

2003-06-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (gpdf_window_update_window_title)
	(gw_control_load_pdf): set window title according to control's
	title property.

	* xpdf/tests/test-pdf-loading.cc: add test for getCurrentFile.

	* xpdf/tests/test-gpdf-control.cc: add test for title property.

	* xpdf/gpdf-persist-file.cc
	(impl_bonobo_persist_file_getCurrentFile): implement.
	(gpdf_persist_file_get_current_uri): implement.

	* xpdf/gpdf-persist-file.h: declare
	gpdf_persist_file_get_current_uri

	* xpdf/gpdf-control.cc (gc_page_changed_enable_page_buttons): do
	nothing unless activated.
	(gpdf_control_constructor, gpdf_control_setup_property_bag)
	(property_bag_get_prop): add a property bag to the control.
	(gpdf_control_get_title, persist_file_set_pdf_cb)
	(gpdf_control_destroy, persist_stream_set_pdf_cb): impl. title
	property (only an URI ATM).

	* NEWS: update

	* configure.in: bump version to 0.103.99.

2003-06-06  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: Version 0.103.

	* NEWS: update.

	* lib/ggv-sidebar/Makefile.am (libggv_sidebar_a_SOURCES): include
	only files that are already needed.

2003-06-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: generate lib/ggv-sidebar/Makefile.

	* lib/Makefile.am (SUBDIRS): add ggv-sidebar.

	* lib/ggv-sidebar/ggvutils.h, lib/ggv-sidebar/ggv-prefs.h:
	everything we need from the ggv files of the same name.
	
	* lib/ggv-sidebar/ggvutils.c: plus their implementation.

	* lib/ggv-sidebar/Makefile.am: add ggvutils.[hc], ggv-prefs.h.

	* xpdf/Makefile.am: link with ggv-sidebar.

	* xpdf/gpdf-view.cc: implement GgvDocument interface.
	(gpdf_view_get_type): cannot use CLASS_BOILERPLATE with interfaces.
	(gpdf_view_get_page_count, gpdf_view_get_page_names) 
	(gpdf_view_instance_init): for the interface.

	* xpdf/tests/test-gpdf-view.cc: add tests for GPdfView.

	* xpdf/tests/.cvsignore: ignore test-gpdf-view.

	* xpdf/tests/Makefile.am: add new test, link with ggv-sidebar.

2003-05-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: define HAVE_FONT_EMBEDDING if gnome-print has the
	gnome_font_face_download function

	* xpdf/GPOutputDev.cc: use HAVE_FONT_EMBEDDING from aconf.h

2003-05-29  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-gpdf-control.cc: add tests for GPdfControl

	* xpdf/tests/Makefile.am, xpdf/tests/.cvsignore: add
	test-gpdf-control

	* xpdf/gpdf-control.cc: use BONOBO_CLASS_BOILERPLATE.
	(gpdf_control_new, gpdf_control_construct): kill, use construct
	time properties.
	(gpdf_control_class_init): install constructor, properties
	persist-stream and persist-file.
	(gpdf_control_constructor): constructor impl.
	(gpdf_control_setup_page_control, gpdf_control_setup_zoomable)
	(gpdf_control_setup_view_widgets): renamed from gc_setup_foo.
	(gpdf_control_setup_persist): ditto, connect to PersistFile, too.
	(gpdf_control_set_property): impl.
	(persist_file_set_pdf_cb): signal callback.
	(persist_stream_set_pdf_cb): renamed from gc_set_pdf_cb.
	(gpdf_control_pdf_doc_changed): factored out from gc_set_pdf_cb.
	(verb_FileProperties_cb): get PDFDoc from priv.

	* xpdf/gpdf-control.h: kill gpdf_control_new and _construct, 

	* xpdf/bonobo-application-x-pdf.cc (gpdf_factory): also give the
	control a PersistFile implementation

	* xpdf/Makefile.am: moved more code into libgpdf.a.

	* xpdf/GNOME_PDF.server.in.in: state that we implement
	Bonobo/PersistFile.

	* shell/gpdf.c (bonobo_stream_for_uri): kill.
	(gw_control_load_pdf): changed to load through PersistFile.

2003-05-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-pdf-loading.cc: add tests for GPdfPersistFile.

	* xpdf/gpdf-persist-stream.h: no need to include BonoboStream.h.

	* xpdf/gpdf-persist-file.h, xpdf/gpdf-persist-file.cc: new class,
	implements the PersistFile interface.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): add gpdf-persist-file.cc,
	gpdf-persist-file.h.

	* xpdf/gpdf-control.cc: reorder includes.

2003-05-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-links-canvas-layer.cc (gnome_canvas_item_new): 
	
	* xpdf/gpdf-link-canvas-item.cc (gpdf_link_canvas_item_set_link): 

	* xpdf/tests/test-links.cc: refactoring: the LinkItem gets its
	directly coordinates from the Link

2003-05-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-persist-stream.cc:
	(impl_bonobo_persist_stream_load)
	(impl_bonobo_persist_stream_save, impl_get_content_types)
	(gpdf_persist_stream_class_init, gpdf_persist_stream_construct):
	implement the PersistStream interface on top of BonoboPersist
	instead of the deprecated BonoboPersistStream GObject class.
	(gpdf_persist_stream_class_init, gpdf_persist_stream_construct):
	changes for BONOBO_CLASS_BOILERPLATE_FULL.

	* xpdf/gpdf-persist-stream.h: derive directly from BonoboPersist.

	* xpdf/tests/test-pdf-loading.cc (persist_stream_content_types)
	(persist_stream_no_load): test ::getContentTypes and ::save
	implementation in GPdfPersistStream.

2003-05-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-pdf-loading.cc: new test.

	* xpdf/tests/Makefile.am (TESTS_NEEDING_PDFTEX): add
	test-pdf-loading.

	* xpdf/Makefile.am (libgpdf_a_SOURCES): move more files to the lib.

	* xpdf/gpdf-persist-stream.cc (gpdf_persist_stream_get_length):
	kill.
	(gpdf_persist_stream_delete_doc_and_stream): rename from
	delete_pdf_doc_full, simplify.
	(load_pdf_from_stream): make priv->pdf_stream local to this method,
	kill redundant test for catalog.

	* xpdf/gpdf-persist-stream.h (gpdf_persist_stream_get_length):
	kill.

	* xpdf/gpdf-control.cc (verb_FileProperties_cb): remove file size
	argument.

	* xpdf/nautilus-pdf-property-page.cc
	(gpdf_nautilus_property_page_set_uri): ditto.

	* xpdf/pdf-info-dict-util.cc (pdf_doc_process_properties): kill
	file size parameter.

	* xpdf/pdf-info-dict-util.h: ditto.

	* xpdf/pdf-properties-display.c: kill traces of the file size
	label.

2003-05-23  Christian Neumair  <chris@gnome-de.org>

	* shell/gpdf.c: (verb_HelpAbout_cb): Splitted copyright string.

2003-05-20  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-links.cc (link_item_click)
	(link_item_enter_leave): more tests

	* xpdf/gpdf-link-canvas-item.cc (gpdf_link_canvas_item_click)
	(gpdf_link_canvas_item_enter, gpdf_link_canvas_item_leave)
	(gpdf_link_canvas_item_clicked, gpdf_link_canvas_item_event)
	(gpdf_link_canvas_item_set_property)
	(gpdf_link_canvas_item_class_init): refactor to make it more
	better testable

	* xpdf/gpdf-link-canvas-item.h: ditto

2003-05-20  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-link-canvas-item.cc
	(gpdf_link_canvas_item_mouse_enter)
	(gpdf_link_canvas_item_mouse_leave)
	(gpdf_link_canvas_item_class_init): add (mouse) enter and leave
	signals

	* xpdf/gpdf-link-canvas-item.h: add signal slots for enter and
	leave

	* xpdf/tests/test-links.cc (link_item_enter_leave): test for the
	signals

	* xpdf/Makefile.am: now the marshallers sources are not shipped
	with the dist and correctly build when needed, finally

	* configure.in: version 0.102.99

2003-05-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: Version 0.102

	* xpdf/Makefile.am: don't do the DONT_DIST_SOURCE thing, breaks
	the distcheck

2003-05-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_render_page): properly destroy the
	links layer when switching pages

2003-05-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am: don't distribute generated marshallers

2003-05-19  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-links-canvas-layer.cc
	(gpdf_links_canvas_layer_dispose): plug leak

	* xpdf/tests/.cvsignore, test-files/.cvsignore: update

	* NEWS: update

2003-05-18  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/tests/test-page-setup.cc, xpdf/tests/test-links.cc:
	tests/experiments

	* xpdf/tests/Makefile.am, xpdf/tests/.cvsignore: infrastructure

	* xpdf/gpdf-view.h: signal slots for close and quit requests

	* xpdf/gpdf-view.cc (gpdf_view_link_action_named, link_clicked_cb)
	(gpdf_view_class_init): implement some named action links:
	NextPage, PrevPage, FirstPage, LastPage, signals for Close and Quit

	* xpdf/Makefile.am (SUBDIRS): add tests

	* test-files/simple-links.tex: test file, simple pdf links

	* test-files/.cvsignore, test-files/Makefile.am: infrastructure

	* configure.in: check for pdftex (not a hard requirement)
	add test-files/Makefile and xpdf/tests/Makefile

	* NEWS: update

	* Makefile.am (SUBDIRS): add test-files

2003-05-18  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_motion_notify_event)
	(gpdf_view_handle_drag_motion): chain up to parent implementation
	of motion-notify, factor out dragging
	(gpdf_view_button_press_event): chain up to parent
	(gpdf_view_render_page): use GPdfLinksCanvasLayer to draw links
	(link_clicked_cb, gpdf_view_link_action_goto): implement simple
	GoTo links
	(gpdf_view_dispose): unref the links_layer

	* xpdf/gpdf-persist-stream.cc: store bonoboStream as BaseStream

	* xpdf/gpdf-marshal.list: add VOID:POINTER

	* xpdf/gpdf-links-canvas-layer.cc, xpdf/gpdf-links-canvas-layer.h:
	new class, links are grouped in such layers

	* xpdf/gpdf-link-canvas-item.cc, xpdf/gpdf-link-canvas-item.h: new
	class, representing links in the GPdfView

	* xpdf/Makefile.am: move away from $common_sources to convenience
	libraries, add gpdf-link-canvas-item.{cc,h},
	gpdf-links-canvas-layer.{cc,h}

	* xpdf/BonoboStream.cc (bfread, bfseek): fix debug messages

2003-05-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* lib/recent-files/egg-recent-model.c: update from egg

	* lib/recent-files/Makefile.am: fix update target

	* lib/ggv-sidebar/update-from-ggv.sh: fix

	* lib/ggv-sidebar/ggv-document.c, lib/ggv-sidebar/ggv-document.h:
	new interfaces from GGV
	
	* lib/ggv-sidebar: update from ggv

	* lib/ggv-sidebar/Makefile.am: add ggv-document.[ch], fix update
	target, define GNOMEICONDIR

2003-05-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: bump version to 0.101.99

	* xpdf/gpdf-view.cc (setup_page_transform, gpdf_view_render_page):
	respect offsets from a page's CropBox/MediaBox (fixes second part
	of Bug #112884).

2003-05-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* lib/ggv-sidebar/update-from-ggv.sh,
	lib/ggv-sidebar/gtkchecklist.h, lib/ggv-sidebar/gtkchecklist.c,
	lib/ggv-sidebar/ggv-sidebar.h, lib/ggv-sidebar/ggv-sidebar.c,
	lib/ggv-sidebar/config.h, lib/ggv-sidebar/Makefile.am,
	lib/ggv-sidebar/.cvsignore, lib/ggv-sidebar: sidebar code from
	ggv, no changes allowed here, is not in the build yet, only
	checked in for convenient diffing.

2003-05-06  Danilo Šegan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* NEWS, configure.in: Version 0.101

2003-05-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-g-switch.h: add GMutex,

	* shell/gpdf.c (gpdf_window_new): s/gtk_type_new/g_object_new/,
	use construction time properties
	(gw_setup_window): kill (replaced by constr. time props)
	(gpdf_window_construct): don't call gw_setup_window
	(gw_add_control_to_ui, gpdf_window_open): more simplifications due
	to BonoboWidget
	(gw_activate_control): ditto -> kill
	(gw_control_load_pdf, bonobo_stream_for_uri): extract the latter
	from the former
	(gw_setup_local_contents, gw_setup_toplevel_ui)
	(gw_setup_recent_menu, gw_setup_recent_toolitem): slot and
	ui_component moved to priv

	* shell/gpdf-window.h (struct _GPdfWindow): move away remaining
	public fields

2003-05-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-info-dict-util.cc (pdf_info_dict_get_date): don't hand
	out invalid times; work around Distiller 3.0 y2k bug.

2003-05-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_key_press_event): really set
	do_scroll when we want to scroll; on PageUp/Down move by whole
	pages instead of screenfuls, leave Backspace/Space for that (fixes
	Bug #112140)

2003-05-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c:
	(gpdf_window_has_contents, gw_add_control_to_ui)
	(gw_control_load_pdf, gw_control_load_pdf, gw_destroy)
	(gpdf_window_construct): refactor towards using BonoboWidget
	(gw_setup_control_frame): kill

2003-05-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (gw_control_load_pdf): use a vfs: moniker; check
	for exceptions

2003-05-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (gw_control_load_pdf): don't free uri

2003-05-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/tests/test-uri-input.c (setup, tear_down): extract uri
	request logging foo from tests
	(open_shell_arg, open_shell_arg_relative): new tests

	* shell/gpdf.c (create_window): use ::open_shell_arg
	(gw_control_load_pdf): only accept uris
	(gw_ask_for_uri, gw_ask_for_uri, gw_open_dialog):
	variable/function renamings

	* shell/gpdf-uri-input.h (gpdf_uri_input_open_shell_arg): add
	prototype

	* shell/gpdf-uri-input.c (gpdf_uri_input_open_shell_arg): new
	function

	* shell/eel-string.c, shell/eel-string.h,
	shell/eel-vfs-extensions.c, shell/eel-vfs-extensions.h: frome eel

	* shell/Makefile.am (libgpdfshell_a_SOURCES): add eel-string and
	eel-vfs-extensions

2003-05-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-info-dict-util.cc (pdf_info_dict_get_string): kill
	unused variable

	* xpdf/gpdf-view.cc (gpdf_view_construct): kill unused variables

	* xpdf/gpdf-control.cc (gc_zoom_to_fit_width_cb): kill (unused)
	(gc_ui_set_pixbufs): kill unused variables

	* shell/tests/test-uri-input.c: include headers for exit, strcmp

	* lib/recent-files/Makefile.am (INCLUDES): fix distcheck

	* gpdf.desktop.in (Icon): use the icon for pdf documents until we
	have a nice gpdf icon

	* NEWS: more antinews

	* Makefile.am (CLEANFILES): more cleaning

2003-04-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf-recent-view-toolitem.c: add tooltip to recent files
	drop down

2003-04-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (menu_position_under_widget)
	(open_button_pressed_cb, open_button_key_pressed_cb)
	(gw_setup_recent_tool_item, gw_setup_recent_toolitem): factored
	out the toolitem with the recent files list

	* shell/gpdf-recent-view-toolitem.c,
	shell/gpdf-recent-view-toolitem.h: new class: button with dropdown
	menu of recent files

	* shell/Makefile.am (libgpdfshell_a_SOURCES): compile
	gpdf-recent-view-toolitem.c

2003-04-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	Gotta love compiler warnings.
	
	* xpdf/pdf-properties-display.c (gpdf_gtk_label_make_bold): make static
	(gpdf_properties_display_class_init): install dispose implementation

	* xpdf/pdf-info-dict-util.cc (pdf_doc_process_properties): format
	file size with %ld, not %d

	* xpdf/page-control.c: #include stdlib.h for strtol

	* xpdf/gpdf-view.cc (canonical_multiple_of_90): return statement
	was missing, I wonder why it worked
	(gpdf_view_key_press_event): silence warning
	(gpdf_view_key_press_event): ditto

	* xpdf/GPOutputDev.cc (initBase14Fonts): use guint as array index

	* xpdf/BonoboStream.cc (bfseek): silence warning

	* shell/gpdf.c (open_request_logger): don't define if not debugging

	* shell/gpdf-uri-input.h: add missing prototypes

	* shell/gpdf-uri-input.c (gpdf_uri_input_open_uri_list): add
	missing return type

	* xpdf/Makefile.am, shell/Makefile.am, configure.in: use maximum
	compiler warnings

2003-04-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* NEWS: updated.

	* shell/gpdf.c (gpdf_window_construct, gw_setup_recent_tool_item)
	(open_button_key_pressed_cb, open_button_pressed_cb)
	(menu_position_under_widget): implement recent files drop-down
	tool item (taken from gedit)
	(verb_HelpAbout_cb): updated (c)
	(gw_setup_recent_menu): renamed from gw_setup_recent_files_ui

	* shell/gpdf-window-ui.xml: added recent files drop-down control

	* shell/gpdf-recent-facade.c (gpdf_recent_facade_get_model): added
	missing return.

2003-04-27  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* NEWS: added news and anti-news.

	* xpdf/gpdf-view.cc (gpdf_view_render_page): honor Rotate info
	of the page object. Don't set page layout in print config object,
	we handle the page format with calls to the canvas.
	(setup_page_transform): renamed from setup_upside_down_transform,
	take rotation angle argument.
	(canonical_multiple_of_90): new function.

2003-04-23  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am (CLEANFILES): rm GNOME_PDF.server.in on clean,
	not on distclean (fixes Bug #111404)

2003-04-19  Hasbullah Bin Pit  <sebol@ikhlas.com>

	* configure.in (ALL_LINGUAS): Added "ms".

2003-04-14  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (main, gw_open_recent_file, gw_destroy)
	(gw_setup_recent_files_ui, gpdf_window_construct): implement
	recent files menu items

	* shell/gpdf-window-ui.xml: add placeholder for recent files menu
	items

	* shell/gpdf-recent-facade.h (gpdf_recent_facade_get_model): add
	prototype, slot for virtual

	* shell/gpdf-recent-facade.c (gpdf_recent_facade_get_model): new
	(gpdf_recent_facade_instance_init): set limit to list of recent
	files

2003-04-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c (no_contents, find_empty_or_create_new_window)
	(open_request_handler, open_request_logger): new functions
	(create_window, main, gw_control_load_pdf, gw_drag_data_received)
	(gw_open_dialog): use GPdfUriInput
	(gpdf_window_has_contents): rename from gw_has_contents, no longer
	static
	(gpdf_window_open): s/gw_has_contents/gpdf_window_has_contents/

	* shell/gpdf-window.h: add prototype for gpdf_window_has_contents

	* shell/gpdf-recent-facade.h, shell/gpdf-recent-facade.c,
	shell/mock-recent-facade.c: new class, plus a mock of it

	* shell/gpdf-uri-input.h, shell/gpdf-uri-input.c: new class
	
	* shell/tests/test-uri-input.c, shell/tests/Makefile.am: unit
	tests for gpdf-uri-input

	* shell/Makefile.am: add new files, compile them into a
	convenience library for testing, link gpdf with that lib and with
	recent files stuff

	* lib/recent-files: copy of egg recent files stuff

	* lib, lib/unit-test.h, lib/Makefile.am, lib/.cvsignore: new

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): fix bad C++, detected
	by Sun compilers. Thanks to Rich Burridge / Sun (Bug: #110402)

	* xpdf/gpdf-view.cc (gpdf_view_button_press_event): ditto

	* xpdf/gpdf-util.h (GPDF_BOILERPLATE): kill, identical with
	BONOBO_BOILERPLATE since libbonobo 2.2.1

	* xpdf/nautilus-pdf-property-page.cc (BONOBO_ARG_GET_STRING):
	ditto

	* configure.in: bumped version to 0.100.99, require libbonobo 2.2.1
	generate Makefiles in lib, lib/recent-files, shell/tests

	* Makefile.am (SUBDIRS): add lib dir

	* .cvsignore: ignore release tarballs

2003-04-08  Michael Meeks  <michael@ximian.com>

	* Version 0.100.0

2003-04-05  Samúel Jón Gunnarsson  <sammi@techattack.nu>

	* configure.in:  Added "is" in ALL_LINGUAS

2003-04-03  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/Makefile.am (ui_DATA): no need for
	bonobo-application-x-pdf-ui.xml.

2003-04-03  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): use
	getFontFaceFallback

	* xpdf/page-control.c (gpdf_page_control_setup_tooltips): fix
	tooltip string.
	(gpdf_page_control_setup_tooltips): ref the tooltips object

	* xpdf/gpdf-properties-dialog.glade, xpdf/pdf-properties-display.c
	(gpdf_properties_display_set_property): disable file size label.

2003-04-03  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/page-control.c (gpdf_page_control_instance_init) 
	(gpdf_page_control_setup_tooltips, gpdf_page_control_class_init) 
	(gpdf_page_control_destroy): add tooltips to the widget

	* xpdf/pdf-info-dict-util.cc: there are PDFs without
	info-dictionary (e.g. OpenOffice.org's), don't crash on them

	* Makefile.am (EXTRA_DIST): distribute gpdf.applications

2003-04-02  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf.applications: add

	* Makefile.am install gpdf.applications

	* gpdf.keys.in: update.

	* goo/Makefile.am, shell/Makefile.am, xpdf/Makefile.am: add
	top_srcdir to include path for aconf2.h.

	* goo/Makefile.am, xpdf/Makefile.am: rename libgoo.a to libGoo.a
	for consistency with Xpdf, don't install this library;
	makefile.w32 is no more.

	* README: added note that this does not describe the GNOME version.

	* Makefile.am: don't distribute README.CVS, ANNOUNCE,
	makefile.w32, distribute aconf2.h.

	* CHANGES: added reference to ChangeLog and NEWS.

	* AUTHORS, NEWS: updated.

	* configure.in: add bugzilla url to AC_INIT.

	* xpdf/gpdf-view.cc, xpdf/gpdf-persist-stream.cc,
	xpdf/gpdf-control.cc, xpdf/GPOutputDev.cc: consistently wrap debug
	messages.

2003-04-02  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* configure.in: added tests from Xpdf's configure.in

	* CHANGES: added note that this describes only Xpdf upstream
	changes

2003-04-01  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	Merge with Xpdf 2.02 and make it build
	
	* aconf2.h, aconf-dj.h, aconf-win32.h, ANNOUNCE, CHANGES, README,
	vms_make.com: update.

	* xpdf/about-text.h, xpdf/Annot.cc, xpdf/Annot.h, xpdf/Array.cc,
	xpdf/Array.h, xpdf/BuiltinFont.cc, xpdf/BuiltinFont.h,
	xpdf/BuiltinFontTables.cc, xpdf/BuiltinFontTables.h,
	xpdf/Catalog.cc, xpdf/Catalog.h, xpdf/CharCodeToUnicode.cc,
	xpdf/CharCodeToUnicode.h, xpdf/CharTypes.h, xpdf/CMap.cc,
	xpdf/CMap.h, xpdf/CompactFontTables.h, xpdf/config.h,
	xpdf/Decrypt.cc, xpdf/Decrypt.h, xpdf/Dict.cc, xpdf/Dict.h,
	xpdf/DisplayFontTable.h, xpdf/Error.cc, xpdf/ErrorCodes.h,
	xpdf/Error.h, xpdf/FontEncodingTables.cc,
	xpdf/FontEncodingTables.h, xpdf/FontFile.cc, xpdf/FontFile.h,
	xpdf/FTFont.cc, xpdf/FTFont.h, xpdf/Function.cc, xpdf/Function.h,
	xpdf/Gfx.cc, xpdf/GfxFont.cc, xpdf/GfxFont.h, xpdf/Gfx.h,
	xpdf/GfxState.cc, xpdf/GfxState.h, xpdf/GlobalParams.cc,
	xpdf/GlobalParams.h, xpdf/ImageOutputDev.cc,
	xpdf/ImageOutputDev.h, xpdf/JBIG2Stream.cc, xpdf/JBIG2Stream.h,
	xpdf/Lexer.cc, xpdf/Lexer.h, xpdf/Link.cc, xpdf/Link.h,
	xpdf/NameToCharCode.cc, xpdf/NameToCharCode.h,
	xpdf/NameToUnicodeTable.h, xpdf/Object.cc, xpdf/Object.h,
	xpdf/Outline.cc, xpdf/Outline.h, xpdf/OutputDev.cc,
	xpdf/OutputDev.h, xpdf/Page.cc, xpdf/Page.h, xpdf/Parser.cc,
	xpdf/Parser.h, xpdf/PBMOutputDev.cc, xpdf/PBMOutputDev.h,
	xpdf/PDFDoc.cc, xpdf/PDFDocEncoding.cc, xpdf/PDFDocEncoding.h,
	xpdf/PDFDoc.h, xpdf/pdffonts.cc, xpdf/pdfimages.cc,
	xpdf/pdfinfo.cc, xpdf/pdftopbm.cc, xpdf/pdftops.cc,
	xpdf/pdftotext.cc, xpdf/PSOutputDev.cc, xpdf/PSOutputDev.h,
	xpdf/PSTokenizer.cc, xpdf/PSTokenizer.h, xpdf/SFont.cc,
	xpdf/SFont.h, xpdf/Stream.cc, xpdf/Stream-CCITT.h, xpdf/Stream.h,
	xpdf/T1Font.cc, xpdf/T1Font.h, xpdf/TextOutputDev.cc,
	xpdf/TextOutputDev.h, xpdf/TTFont.cc, xpdf/TTFont.h,
	xpdf/UnicodeMap.cc, xpdf/UnicodeMap.h, xpdf/UnicodeMapTables.h,
	xpdf/UTF8.h, xpdf/vms_make.com, xpdf/XOutputDev.cc,
	xpdf/XOutputDev.h, xpdf/XPDFApp.cc, xpdf/XPDFApp.h, xpdf/xpdf.cc,
	xpdf/XPDFCore.cc, xpdf/XPDFCore.h, xpdf/XPDFTree.cc,
	xpdf/XPDFTree.h, xpdf/XPDFTreeP.h, xpdf/XPDFViewer.cc,
	xpdf/XPDFViewer.h, xpdf/XPixmapOutputDev.cc,
	xpdf/XPixmapOutputDev.h, xpdf/XRef.cc, xpdf/XRef.h: update

	* goo/gfile.cc, goo/gfile.h, goo/GHash.cc, goo/GHash.h,
	goo/GList.cc, goo/GList.h, goo/gmem.c, goo/gmem.h, goo/gmempp.cc,
	goo/GMutex.h, goo/GString.cc, goo/GString.h, goo/gtypes.h,
	goo/parseargs.c, goo/parseargs.h, goo/vms_make.com: update.

	* doc/pdffonts.1, doc/pdffonts.cat, doc/pdffonts.hlp,
	doc/pdfimages.1, doc/pdfimages.cat, doc/pdfimages.hlp,
	doc/pdfinfo.1, doc/pdfinfo.cat, doc/pdfinfo.hlp, doc/pdftopbm.1,
	doc/pdftopbm.cat, doc/pdftopbm.hlp, doc/pdftops.1,
	doc/pdftops.cat, doc/pdftops.hlp, doc/pdftotext.1,
	doc/pdftotext.cat, doc/pdftotext.hlp, doc/xpdf.1, doc/xpdf.cat,
	doc/xpdf.hlp, doc/xpdfrc.5, doc/xpdfrc.cat, doc/xpdfrc.hlp:
	update.

2003-04-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	Merge with Xpdf 2.01 and make it build
	
	* ANNOUNCE, CHANGES, README, aconf-win32.h: update

	* xpdf/CharCodeToUnicode.cc, xpdf/Decrypt.cc, xpdf/FTFont.cc,
	xpdf/FTFont.h, xpdf/FontEncodingTables.cc, xpdf/Gfx.cc,
	xpdf/GfxFont.cc, xpdf/GfxState.cc, xpdf/GfxState.h,
	xpdf/GlobalParams.cc, xpdf/GlobalParams.h, xpdf/Link.cc,
	xpdf/NameToUnicodeTable.h, xpdf/Stream.cc, xpdf/TextOutputDev.cc,
	xpdf/TextOutputDev.h, xpdf/XOutputDev.cc, xpdf/config.h,
	xpdf/pdftotext.cc, xpdf/xpdf.cc, xpdf/Outline.cc, xpdf/XPDFApp.cc,
	xpdf/XPDFApp.h, xpdf/XPDFCore.cc, xpdf/XPDFCore.h,
	xpdf/XPDFViewer.cc, xpdf/XPDFViewer.h: update.

	* goo/GMutex.h: new file

	* goo/gfile.cc: update.

	* goo/Makefile.am: use GMutex.h

	* doc/pdffonts.1, doc/pdffonts.cat, doc/pdfimages.1,
	doc/pdfimages.cat, doc/pdfinfo.1, doc/pdfinfo.cat, doc/pdftopbm.1,
	doc/pdftopbm.cat, doc/pdftops.1, doc/pdftops.cat, doc/pdftotext.1,
	doc/pdftotext.cat, doc/pdftotext.hlp, doc/xpdf.1, doc/xpdf.cat,
	doc/xpdf.hlp, doc/xpdfrc.5, doc/xpdfrc.cat, doc/xpdfrc.hlp: update
	
2003-03-31  Martin Kretzschmar  <m_kretzschmar@gmx.net>

        Merge with Xpdf 2.00 and make it build
	
	* xpdf/Makefile.am: kill traces of ltk, incorporate new sources

	* Makefile.am, configure.in: don't build the ltk subdir

	* ANNOUNCE, CHANGES, ChangeLog, README, aconf-dj.h, aconf-win32.h,
	dj_make.bat, ms_make.bat, vms_make.com: update

	* xpdf/LTKOutputDev.cc, xpdf/LTKOutputDev.h, xpdf/postscript.xbm,
	xpdf/xpdf-flip.ltk, xpdf/xpdf-ltk.h, xpdf/xpdf-top.ltk,
	xpdf/xpdf.ltk: remove.

	* xpdf/Annot.cc, xpdf/Annot.h, xpdf/Array.cc, xpdf/Array.h,
	xpdf/BuiltinFont.cc, xpdf/BuiltinFont.h,
	xpdf/BuiltinFontTables.cc, xpdf/CMap.cc, xpdf/CMap.h,
	xpdf/Catalog.cc, xpdf/Catalog.h, xpdf/CharCodeToUnicode.cc,
	xpdf/CharCodeToUnicode.h, xpdf/Decrypt.cc, xpdf/Decrypt.h,
	xpdf/Dict.cc, xpdf/Dict.h, xpdf/Error.cc, xpdf/Error.h,
	xpdf/FTFont.cc, xpdf/FTFont.h, xpdf/FontFile.cc, xpdf/FontFile.h,
	xpdf/Function.cc, xpdf/Function.h, xpdf/Gfx.cc, xpdf/Gfx.h,
	xpdf/GfxFont.cc, xpdf/GfxFont.h, xpdf/GfxState.cc,
	xpdf/GfxState.h, xpdf/GlobalParams.cc, xpdf/GlobalParams.h,
	xpdf/ImageOutputDev.cc, xpdf/ImageOutputDev.h, xpdf/Lexer.cc,
	xpdf/Lexer.h, xpdf/Link.cc, xpdf/Link.h, xpdf/NameToCharCode.cc,
	xpdf/NameToCharCode.h, xpdf/NameToUnicodeTable.h, xpdf/Object.cc,
	xpdf/Object.h, xpdf/OutputDev.cc, xpdf/OutputDev.h,
	xpdf/PBMOutputDev.cc, xpdf/PBMOutputDev.h, xpdf/PDFDoc.cc,
	xpdf/PDFDoc.h, xpdf/PSOutputDev.cc, xpdf/PSOutputDev.h,
	xpdf/PSTokenizer.cc, xpdf/PSTokenizer.h, xpdf/Page.cc,
	xpdf/Page.h, xpdf/Parser.cc, xpdf/Parser.h, xpdf/SFont.cc,
	xpdf/SFont.h, xpdf/Stream.cc, xpdf/Stream.h, xpdf/T1Font.cc,
	xpdf/T1Font.h, xpdf/TTFont.cc, xpdf/TTFont.h,
	xpdf/TextOutputDev.cc, xpdf/TextOutputDev.h, xpdf/UnicodeMap.cc,
	xpdf/UnicodeMap.h, xpdf/XOutputDev.cc, xpdf/XOutputDev.h,
	xpdf/XRef.cc, xpdf/XRef.h, xpdf/config.h, xpdf/pdffonts.cc,
	xpdf/pdfimages.cc, xpdf/pdfinfo.cc, xpdf/pdftopbm.cc,
	xpdf/pdftops.cc, xpdf/pdftotext.cc, xpdf/vms_make.com,
	xpdf/xpdf.cc: update.

	* goo/GHash.cc, goo/GHash.h, goo/GList.cc, goo/GList.h,
	goo/GString.cc, goo/GString.h: mostly Mac OS X gcc fixage.
	
	* doc/pdffonts.1, doc/pdffonts.cat, doc/pdffonts.hlp,
	doc/pdfimages.1, doc/pdfimages.cat, doc/pdfimages.hlp,
	doc/pdfinfo.1, doc/pdfinfo.cat, doc/pdfinfo.hlp, doc/pdftopbm.1,
	doc/pdftopbm.cat, doc/pdftopbm.hlp, doc/pdftops.1,
	doc/pdftops.cat, doc/pdftops.hlp, doc/pdftotext.1,
	doc/pdftotext.cat, doc/pdftotext.hlp, doc/xpdf.1, doc/xpdf.cat,
	doc/xpdf.hlp, doc/xpdfrc.5, doc/xpdfrc.cat, doc/xpdfrc.hlp:
	update docs.

	* ltk: remove this directory, Xpdf has switched to Lesstif.

	* aconf2.h, xpdf/JBIG2Stream.cc, xpdf/JBIG2Stream.h,
	xpdf/Outline.cc, xpdf/Outline.h, xpdf/PDFDocEncoding.cc,
	xpdf/PDFDocEncoding.h, xpdf/XPDFApp.cc, xpdf/XPDFApp.h,
	xpdf/XPDFCore.cc, xpdf/XPDFCore.h, xpdf/XPDFTree.cc,
	xpdf/XPDFTree.h, xpdf/XPDFTreeP.h, xpdf/XPDFViewer.cc,
	xpdf/XPDFViewer.h, xpdf/XPixmapOutputDev.cc,
	xpdf/XPixmapOutputDev.h, xpdf/about-text.h, xpdf/backArrowDis.xbm,
	xpdf/dblLeftArrowDis.xbm, xpdf/dblRightArrowDis.xbm,
	xpdf/findDis.xbm, xpdf/forwardArrowDis.xbm, xpdf/leftArrowDis.xbm,
	xpdf/print.xbm, xpdf/printDis.xbm, xpdf/rightArrowDis.xbm: new
	files.

2003-03-31  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/zoomOut.xbm, xpdf/zoomIn.xbm, xpdf/makefile.w32,
	xpdf/Makefile.in, goo/makefile.w32, makefile.w32: remove, they are
	neither in Xpdf 1.01 nor necessary for GPdf

2003-03-11  Paul Duffy  <dubhthach@frink.nuigalway.ie>

	* configure.in: Added Irish (ga) to ALL_LINGUAS

2003-03-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc: undo accidental commit (thanks for telling
	me, Ross)

2003-03-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc, xpdf/nautilus-pdf-property-page.cc:
	extract common pdf properties code:

	* xpdf/pdf-info-dict-util.cc, xpdf/pdf-info-dict-util.h: the
	common code.

	* xpdf/Makefile.am: compile pdf-info-dict-util.{cc,h}.

	* xpdf/gpdf-control.cc (verb_FileProperties_cb): make the dialog
	transient for the control's parent.

2003-03-03  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/nautilus-pdf-property-page.cc
	(gpdf_nautilus_property_page_set_uri): plug leaks

2003-03-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/nautilus-pdf-property-page.cc,
	xpdf/nautilus-pdf-property-page.h: new class, just what the name
	says, uses GnomeVFSStream for loading PDFDocs.

	* xpdf/GnomeVFSStream.cc, xpdf/GnomeVFSStream.h: BaseStream
	implementation based on (synchronous) gnome-vfs calls.

	* xpdf/BonoboStream.cc, xpdf/BonoboStream.h: coding style fixage,
	include only what's needed.

	* xpdf/Makefile.am (gnome_pdf_viewer_SOURCES): also compile
	GnomeVFSStream.{cc,h}, nautilus-pdf-property-page.{cc,h}

	* xpdf/GNOME_PDF.server.in.in: add stanza for the Property Page.

	* xpdf/bonobo-application-x-pdf.cc: clean up a bit
	(gpdf_factory): now we produce the Property Page, too.

	* xpdf/gpdf-control.cc: include time.h for strftime, mktime.

2003-03-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	I've run intltool-prepare to make the desktop file translatable
	
	* gpdf.desktop.in: added

	* gpdf.desktop: removed

	* Makefile.am: make gpdf.desktop from gpdf.desktop.in

	* .cvsignore: ignore gpdf.desktop

2003-02-26  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-properties-display.c
	(gpdf_properties_display_setup_glade): get glade file from its
	installed location. Martin, repeat after me: I Will Test The
	Installed Program.

	* xpdf/Makefile.am: Added the Glade file to the dist. (Originally
	by Ross, thanks)

2003-02-26  Ross Burton  <ross@burtonini.com>

	* gpdf.desktop: Fix so that it validates.

	* Makefile.am: Install the .desktop file into the correct
	folder. Also remove intltool-*, which are generated.

2003-02-23  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-properties-display.c, xpdf/pdf-properties-display.h,
	xpdf/gpdf-properties-dialog.glade:
	new widget: table with labels displaying properties of PDFs

	* xpdf/gpdf-control.cc (has_unicode_marker)
	(utf16_big_endian_to_utf8, info_dict_get_string)
	(info_dict_get_date, gpdf_control_process_string_property) 
	(gpdf_control_process_date_property) 
	(gpdf_control_process_properties) 
	(gpdf_control_properties_dialog_response_cb) 
	(verb_FileProperties_cb): new: a PDF properties command

	* xpdf/Makefile.am: build pdf-properties-display.[ch], install
	glade file

	* xpdf/.cvsignore: ignore gpdf-properties-dialog.gladep

	* xpdf/gpdf-persist-stream.h, xpdf/gpdf-persist-stream.cc
	(gpdf_persist_stream_get_length): new function

	* xpdf/gpdf-control-ui.xml: add FileProperties command and menu
	item inside a "File Items Placeholder"

	* shell/gpdf-window-ui.xml: add "File Items Placeholder"

	* configure.in: check for libglade-2.0

	* Makefile.am (EXTRA_DIST): don't dist gpdf.mime

	* xpdf/PDFDoc.cc, xpdf/Function.cc, xpdf/FontFile.cc,
	goo/parseargs.c: call atof only in the "C" locale

2003-02-20  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GfxState.cc: Applied a patch to fix buffer overflow (CVE:
	CAN-2002-1384, Redhat: RHSA-2003:037-09, Debian: DSA-222)
	Reminder by Michael

2003-02-20  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-02-18  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: remove GNOME2_X_CHECKS check (currently unused,
	will be removed from gnome-common)

2003-02-16  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/page-control.c, xpdf/page-control.h: show label " of n
	pages" next to the text entry
	(gpdf_page_control_set_total_pages): new

	* xpdf/gpdf-control.cc (gc_set_pdf_cb): notify page toolitem
	about page-count

2003-02-15  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.h, xpdf/gpdf-view.cc (gpdf_view_first_page)
	(gpdf_view_last_page): new
	(gpdf_view_goto_page): kill #if'ed out debug message

	* xpdf/gpdf-control.cc (gc_setup_page_control, gc_setup_zoomable)
	(gc_setup_view_widgets): move signal connect calls to places where
	they belong
	(gc_zoom_changed_report_to_zoomable)
	(gc_page_changed_update_page_control): renamed from
	gc_zoom_changed_cb resp. gc_page_changed_cb
	(ui_component_set_sensitive, gc_enable_go_back_verbs)
	(gc_enable_go_forward_verbs, gc_page_changed_enable_page_buttons)
	(gc_set_ui_container): new, disable some page navigation commands
	on first/last page
	(gc_set_zoom_items_visibility): do nothing if we can't find a
	ui-component (don't g_assert that it's !=NULL)

2003-02-15  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-stock-icons.h, xpdf/gpdf-stock-icons.c: new. register
	gpdf-zoom-fit-width stock icon with a GtkIconFactory

	* xpdf/fitwidth.png: redone in 24x24pix instead of 26x26, based on
	gtk's zoom-out stock icon and the original fitwidth.png
	
	* xpdf/gpdf-control.cc (gc_set_ui_container): s/gc_set_ui_pixbufs/
	gc_ui_set_pixbufs/
	(gc_ui_set_pixbufs): rewrite to use stock icon machinery, let it
	do the correct scaling

	* xpdf/bonobo-application-x-pdf.cc (main): init our stock icons

	* xpdf/Makefile.am (gnome_pdf_viewer_SOURCES): add
	gpdf-stock-icons.[ch]

2003-02-15  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (getFontFaceEmbedded): change (disabled)
	font embedding code

	* shell/gpdf.c (gw_setup_window): set window title

	* xpdf/GNOME_PDF.server.in.in, shell/gpdf.c: s/Gnome/GNOME/ in
	strings

	* xpdf/page-control.c, xpdf/gpdf-view.cc,
	xpdf/gpdf-persist-stream.cc: use our own marshallers

	* configure.in, xpdf/Makefile.am, xpdf/gpdf-marshal.list: check
	for and use glib-genmarshal

	* xpdf/.cvsignore: ignore generated marshallers

	* xpdf/Makefile.am: clean up server.in, server files

	* Makefile.am, gpdf.mime: remove gpdf.mime, application/pdf is
	provided by gnome-vfs.mime

2003-02-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/page-control.c (gpdf_page_control_realize): make page
	number entry 5 chars wide
	
	* xpdf/gpdf-control.cc (gc_setup_page_control): don't set width of
	page-control here

	* xpdf/gpdf-control-ui.xml, xpdf/gpdf-control.cc
	(gc_set_ui_pixbufs): scale down Fit Width icon for the View menu

2003-02-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (getFontFaceFallback): use the system
	aliases for fallback

2003-02-11  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gc_setup_page_control)
	(gc_page_changed_cb): handle set_page of the page-control

	* xpdf/gpdf-view.h: make gpdf_view_goto_page public

	* xpdf/page-control.c (gpdf_page_control_return_pressed)
	(gpdf_page_control_key_press_event, gpdf_page_control_class_init):
	add a set_page signal, emit when <RET> is pressed.

	* xpdf/page-control.h: fix indentation, add set_page signal.

2003-02-10  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/page-control.c, xpdf/page-control.h: page number entry
	widget (for the toolbar)

	* xpdf/gpdf-control.cc (gc_page_changed_cb)
	(gc_ui_add_page_control, gc_setup_page_control): add a
	page-control to the toolbar (currently displays page number only)
	(gc_set_ui_pixbufs): extracted from gc_set_ui_container
	(gc_setup_view_widgets): renamed from gc_setup_widgets

	* xpdf/gpdf-view.cc, xpdf/gpdf-view.h: add a page_changed signal,
	wrap g_signal_emit calls for improved readability

	* xpdf/Makefile.am (gnome_pdf_viewer_SOURCES): add page-control.c,
	page-control.h

	* xpdf/gpdf-control-ui.xml: add placeholder for page-control

2003-02-09  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "kn" to ALL_LINGUAS.

2003-02-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am: fix a comment that prevented definition of
	gnome_pdf_viewer_LDADD
	Patch by Benjamin Dauvergne <feanor@tol-eressea.org>

2003-01-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc, xpdf/Makefile.am: disable font embedding
	hack introduced on 2002-12-09 to fix build with current,
	extra-clean gnome-print

2003-01-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc: change list of fonts even more to work with
	URW fonts on my system FIXME
	(~GPOFontMap, startDoc, getFontFaceEmbedded): cache the fonts
	extracted from the PDF and downloaded to the print context. 
	(~GPOutputDev): plug a leak

	* xpdf/GPOutputDev.h: update class declarations

2003-01-06  Pablo Gonzalo del Campo  <pablodc@bigfoot.com>

	* configure.in: Added Spanish (es) to ALL_LINGUAS.

2003-01-05  Artis Trops  <hornet@navigator.lv>

	* configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-12-20  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc (GPOFontMap, ~GPOFontMap): add c'tor, d'tor
	(initBase14Fonts, getFontFaceBase14, getFontFaceFallback)
	(getFontFace): refactor getFontFace, default to URW fonts for Base
	14 fonts, keep these font faces in a hash

2002-12-17  Miloslav Trmac  <mitr@volny.cz>

	* configure.in (ALL_LINGUAS): Add Czech (cs)

2002-12-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* fitwidth.png: copy from ggv.

	* xpdf/Makefile.am, xpdf/gpdf-control-ui.xml, xpdf/gpdf-control.cc
	(gc_set_ui_container): use it.

	* stock-zoom-fit-tall.xpm, stock-zoom-fit-wide.xpm,
	stock-zoom-fit.xpm, stock-zoom-in.xpm, stock-zoom-out.xpm: kill
	Gnome 1 style pixmaps.

2002-12-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	Using the ``nobody is using this code, just break it'' joker: This
	adds some kind of support for embedded Type1 fonts.  Doesn't
	respect gnome-print's privacy.  No caching of extracted fonts.
	
	* xpdf/GPOutputDev.cc (GPOutputDev::startDoc, setPrintContext):
	hand through to the font map
	(getStreamContents): adapted from glib
	(getFontFaceEmbedded): new, uses experimental
	gpdf_gnome_print_add_font
	(getFontFace): use getFontFaceEmbedded for fonts with embedded
	font files

	* xpdf/GPOutputDev.h: update declarations,
	(GPOFontMap::startDoc, setPrintContext): implemented inline

	* xpdf/gpdf-view.cc (gpdf_view_set_pdf_doc): call startDoc

	* xpdf/gpdf-gnome-font.h, xpdf/gpdf-gnome-font.c: new files;
	hackish implementation of gnome_print_add_font

	* xpdf/Makefile.am (gnome_pdf_viewer_SOURCES): add
	gpdf-gnome-font.[hc]

2002-11-27  Michael Meeks  <michael@ximian.com>

	* xpdf/gpdf-control.cc,
	* xpdf/gpdf-view.cc: add math.h includes.

2002-11-24  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/GPOutputDev.cc: remove unused includes
	(drawImageMask): implement

	* xpdf/GPOutputDev.h (drawImageMask): uncomment declaration

	* xpdf/gpdf-persist-stream.cc (load_pdf_from_stream): allow reuse
	of a GPdfPersistStream: delete its old contents, go on as usual

2002-11-21  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_render_page): kill page parameter,
	get it from priv->requested_page, change return type from void to
	gboolean for use as idle handler, always return FALSE
	(priv): new field requested_page, rename page => current_page
	(gpdf_view_goto_page): don't call ::render_page directly,
	g_idle_add it instead
	(gpdf_view_page_prev, gpdf_view_page_next): interprete prev and
	next relative to requested_page
	(gpdf_view_key_press_event): s/page/current_page/
	(gpdf_view_set_pdf_doc): don't ::render_page, ::goto_page instead

2002-11-17  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/gpdf.c: include aconf.h before gpdf-window.h to
	enable translation of the shell
	
2002-11-15  Martin Kretzschmar  <mk793652@mail.inf.tu-dresden.de>

	* configure.in: require libgnomeprint(ui)-2.2

2002-11-10  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gc_set_zoom_items_visibility)
	(ui_component_set_hidden): hide zoom commands if we have a
	zoomable frame

2002-11-10  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gc_zoom_changed_cb): report gpdf_view's
	changed zoom level to bonobo zoomable
	(gc_setup_widgets): install zoom_changed handler

	* xpdf/gpdf-view.cc (gpdf_view_class_init): install zoom_changed
	signal
	(gpdf_view_zoom): emit zoom_changed signal

	* xpdf/gpdf-view.h (GPdfViewClass): add zoom_changed signal slot

	* configure.in: yacob Added am to ALL_LINGUAS without change log
	entry
	
2002-11-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am: don't build pdf_view.o, GOutputDev.o

2002-11-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc: remove all references to old PdfView class
	(preferred_zoom_levels, preferred_zoom_level_names): add more zoom
	levels
	(gc_zoom_level_from_index): kill
	(gpdf_control_zoom_in, gpdf_control_zoom_out)
	(gpdf_control_zoom_fit_width, gpdf_control_zoom_fit)
	(gpdf_control_zoom_default, gc_zoomable_set_zoom_level_cb):
	rewrite using GPdfView methods

	* xpdf/gpdf-view.cc (gpdf_view_zoom_in, gpdf_view_zoom_fit) 
	(gpdf_view_zoom_fit_width): implement

	* xpdf/gpdf-view.h: add zoom function prototypes

	* xpdf/bonobo-application-x-pdf.cc (main):
	* shell/gpdf.c (main): s/PACKAGE/GETTEXT_PACKAGE/ in *textdomain
	functions

	* xpdf/Makefile.am, goo/Makefile.am: fix distcheck

2002-11-09  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-view.cc (gpdf_view_key_press_event): xpdf page
	numbering is not zero-based!

	* xpdf/GfxState.cc (GfxDeviceCMYKColorSpace::getRGB): special case
	cmyk k-only colors

	* xpdf/GPOutputDev.h: declare drawImage

	* xpdf/GPOutputDev.cc (getFontFace): forgot to rename one
	font_name to gfont_name; cleanup whitespace in the source
	(drawImage): implement. (Does not render output on
	GnomePrintPreview older than 2002-06-14)

	* shell/gpdf.c (gw_control_load_pdf): s|file://|file:|

2002-11-05  Martin Kretzschmar  <mk793652@mail.inf.tu-dresden.de>

	* xpdf/GPOutputDev.cc (updateFont): extract GfxFont->GnomeFont
	mapping into its own class: GPOFontMap
	(getFontFace): I'm cheating. This first implementation makes only
	some Basic-14-PostScript fonts look nice
	
	* xpdf/GPOutputDev.h: add GPOFontMap class
	(GPOutputDev): add GPOFontMap member

2002-11-03  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/GPOutputDev.cc (GPOutputDev): kill one-arg constructor,
	more initializations in zero-arg constructor
	(startPage, restoreState, updateFillColor)
	(updateFillColorIfNecessary, updateStrokeColor)
	(updateStrokeColorIfNecessary, stroke, fill, eoFill): remember if
	the last color set was for stroking or for non-stroking
	operations, set the color again IfNecessary
	(updateLineDash, updateFillColor, updateStrokeColor, updateFont)
	(doPath): this is C++, so move declarations of variables to their
	first use and initialize them there
	(updateFillColor, updateStrokeColor, updateFillOpacity)
	(updateStrokeOpacity): hande opacity, always set color and opacity
	together
	(updateFont): store the GnomeFont we want to use later; font
	handling still non-existant
	(updateTextPos): store the text position
	(updateTextShift): new, updates text position
	(getFillColorRGBA): new, creates a RRGGBBAA gint from a GfxState
	(drawString): rewritten to use Glyphlist machinery, quite okay
	( for western locales) now
	
	* xpdf/GPOutputDev.h: update prototypes, new private members	

	* xpdf/gpdf-control.cc (gc_key_press_event_cb): kill, GPdfView
	handles all its key events
	(gc_setup_widgets): don't connect killed handler; gpdf_view, grab
	focus!
	
	* xpdf/gpdf-view.cc (gpdf_view_construct): factor out:
	(gpdf_view_setup_page_background): and add:
	(gpdf_view_setup_gesture_handler): guess what it does
	(gesture_page_next_event_cb, gesture_page_prev_event_cb)
	(gesture_page_first_event_cb, gesture_page_last_event_cb)
	(gesture_zoom_in_event_cb, gesture_zoom_out_event_cb): add gesture
	handling
	(gpdf_view_dispose): destroy gesture handler
	(gpdf_view_render_page): improve readability, split out:
	(setup_upside_down_transform): 
	(gpdf_view_zoom, gpdf_view_zoom_in, gpdf_view_zoom_out): new
	(gpdf_view_key_press_event): new
	(gpdf_view_button_press_event, gpdf_view_button_release_event) 
	(gpdf_view_motion_notify_event): for dragging the page
	(gpdf_view_class_init): install signal handlers

2002-10-31  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	The work on a Gnome Print Output Device starts here. The last
	version of the old pixmap based rendering code is tagged
	BEFORE_GNOME_PRINT.
	
	* xpdf/gpdf-control.cc (_GpdfControlPrivate): add field for
	GPdfView
	(gc_setup_widgets, gc_set_pdf_cb, verb_GoPageLast_cb)
	(verb_GoPageFirst_cb, verb_GoPageNext_cb, verb_GoPagePrev_cb): use
	GPdfView instead of PdfView

	* xpdf/gpdf-view.cc, xpdf/gpdf-view.h: widget for for GPOutputDev
	to draw on. Using GnomePrintPreview.

	* xpdf/GPOutputDev.cc, xpdf/GPOutputDev.h: new Gnome Print Output
	Device class, strokes and fills look (surprisingly) quite okay,
	font and text handling is throw-away code

	* xpdf/gpdf-util.h (BEGIN_C_DECLS, END_C_DECLS): remove macros,
	use those from glib
	(GPDF_BOILERPLATE, GPDF_CLASS_BOILERPLATE, GPDF_REGISTER_TYPE):
	macros from bonobo-macros.h and gnome-macros.h compatible with
	c++ type system rules

	* xpdf/OutputDev.h: declare class Object

	* xpdf/Gfx.h: include Object.h

	* configure.in: check for libgnomeprint(ui)-2.0

2002-10-23  Martin Kretzschmar  <mk793652@mail.inf.tu-dresden.de>

	* xpdf/gpdf-persist-stream.cc (PARENT_TYPE): that last s/// was
	obviously scrambling too many words, make that
	BONOBO_TYPE_PERSIST_STREAM

2002-10-16  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-persist-stream.cc: use gpdf-g-switch.h,
	s/BONOBO_PERSIST_STREAM_TYPE/BONOBO_TYPE_STREAM_PERSIST/

	* xpdf/gpdf-control.cc (gpdf_control_zoom_fit_width) 
	(gpdf_control_zoom_fit): s/gtk_idle_add/g_idle_add/
	(gpdf_control_activate): use BONOBO_CALL_PARENT macro
	(gc_setup_widgets): use g_signal_connect, not gtk_signal_connect

	* xpdf/gpdf-control.h, gpdf-persist-stream.h: replace GTK_CHECK
	macros with G_TYPE_CHECK, GtkType with GType

2002-10-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (gw_open, gw_close): rename to gpdf_window_open,
	gpdf_window_close and make them public
	(handle_cmdline_args): s/gtk_idle_add/g_idle_add/
	(gw_control_load_pdf): fix leaks for error cases
	(gpdf_window_open): simplify
	(gw_ask_for_filename): use g_signal_connect, not gtk_signal_connect

	* shell/gpdf-window.h: replace GTK_CHECK macros with G_TYPE_CHECK,
	s/bonobo.h/libbonoboui.h/, declare gpdf_window_open, gpdf_window_close

2002-10-13  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/Makefile.am (-DGNOMELOCALEDIR): define as everybody does

	* shell/gpdf-window.h: godf_window_get_type returns GType

	* shell/gpdf.c: use GNOME_CLASS_BOILERPLATE, no need for
	gpdf-util.h, GPDF_EMBEDDABLE_IID
	(gpdf_window_class_init, gpdf_window_instance_init): rename from
	class_init, init
	(verb_HelpAbout_cb): gnome_about_new doesn't return a GnomeDialog,
	modify to allow only one about dialog
	(raise_and_focus): for verb_HelpAbout_cb, from EogWindow
	(gw_close): bonobo_main_quit is correct here
	(gw_open): release and unref control after adding it to the
	control frame. Refcounting seems to work! The server autoexits :-)
	
	* xpdf/gpdf-control-ui.xml: add accelerator to View menu

2002-10-12  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control-ui.xml: hide ZoomFitWidth toolbar button

	* xpdf/gpdf-control.cc (struct _GPdfControlPrivate): don't store a
	GPdfPersistStream
	(gc_setup_persist): ditto
	(gpdf_control_destroy): don't unref GPdfPersistStream, we
	add_interface'd it
	(gc_setup_zoomable): setup a BonoboZoomable, add_interface
	(gc_zoomable_set_zoom_level_cb, gc_zoomable_set_frame_cb):
	Callbacks for the zoomable
	(gpdf_control_construct): use gc_setup_zoomable

	* xpdf/GNOME_PDF.server.in.in: add Zoomable repo id

	* configure.in: don't create intl/Makefile

2002-10-12  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/.cvsignore: add GNOME_PDF.server, GNOME_PDF.server.in

	* xpdf/pdf-view.cc: don't #include bonobo_application_x_pdf.h,
	update for new GObject, GSignal, Bonobo signatures
	(setup_pixmap): don't use double buffering

	* xpdf/gtkgesture.h: s/BEGIN_GNOME_DECLS/G_BEGIN_DECLS/

	* xpdf/gpdf-persist-stream.h, xpdf/gpdf-control.h, pdf-view.h
	(#includes): update, use gpdf-g-switch.h,
	s/BEGIN_GNOME_DECLS/G_BEGIN_DECLS/

	* xpdf/gpdf-persist-stream.cc (#includes): update
	(load_pdf_from_stream): Bonobo_Unknown_ref our stream
	(delete_pdf_doc_full): unref our stream
	(all around) update for new GObject, GSignal, Bonobo signatures
	(gpdf_persist_stream_new, gpdf_persist_stream_construct): take iid
	parameter to be passed on to bonobo_persist_stream_construct
	
	* xpdf/gpdf-embeddable-view.cc: don't include
	bonobo-application-x-pdf.h

	* xpdf/gpdf-control.cc: PARENT_TYPE is BONOBO_TYPE_CONTROL;
	update for new GObject, GtkWidget, Bonobo signatures

	* xpdf/gpdf-control-ui.xml: use gtk-stock-pixmaps

	* xpdf/bonobo-application-x-pdf.cc (#includes): use
	gpdf-g-switch.h, update
	(gpdf_factory): don't create embeddable, gpdf_persist_stream_new
	takes iid parameter
	(init_gpdf_factory, init_corba, init_bonobo): kill
	(main): no need to init gdk_rgb; use BONOBO_FACTORY_INIT,
	bonobo_generic_factory_main

	* xpdf/Makefile.am (INCLUDES, LDADD): update
	(bin_PROGRAMS): move gnome-pdf-viewer to libexec_PROGRAMS
	(gnome_pdf_viewer_SOURCES): nobody needs
	bonobo-application-x-pdf.h, don't build embeddable stuff
	(oafdir, oaf_DATA): kill
	(server_in_files, serverdir): add, do libexec sed job on
	.server.in.in file, add @INTLTOOL_SERVER_RULE@
	(uidir): s/gnome/gnome-2.0/

	* xpdf/GOutputDev.cc (#includes): use gpdf-g-switch.h
	(GOutputDev::GOutputDev): get size and depth of pixmap with
	gdk_drawable_get_foo background color to white
	(all around): gdk_region_foo now destructively update their first
	argument, use gdk_rgb to find colors
	(drawImageMask): don't gdk_image_new_bitmap
	
	* xpdf/gpdf-g-switch.h: new file, include it when switching
	between goo and glib headers

	* xpdf/GNOME_PDF.server.in.in: factory is in @LIBEXECDIR@
	s|GNOME/GenericFactory|Bonobo/GenericFactory|, make it
	translatable, kill embeddable stanza

	* xpdf/GNOME_PDF.oafinfo: remove

	* xpdf/BonoboStream.cc:
	s/Bonobo_Stream_SEEK_SET/Bonobo_Stream_SeekSet/ et al. (see
	libbonobo/ChangeLog#2002-03-31)

	* shell/gpdf.c (#includes): use G2 headers
	(main): copy from eog
	(struct _Component): kill (was embeddable code)
	(USE_CONTROL): kill #define, kill all code surrounded by #if
	!USE_CONTROL (i.e. embeddable code)
	(all around): add Corba_Environment argument where it's needed now
	(gw_control_load_pdf): s/BonoboStream \*stream/Bonobo_Stream
	stream/.  get the stream using monikers, unref it later
	(gw_drag_data_received): use uri handling code from gnome-vfs
	(verb_HelpAbout_cb): update for new gnome_about_new
	(verb_DebugDumpXml_cb): kill
	(gw_destroy): may be called more than once, so update assertions
	(gw_finalize): is a GObject method now, chain up to parent
	(class_init): update for GObject methods
	(gw_setup_window): blend of bonobo_window_construct and old
	gw_setup_geometry
	(gw_setup_geometry): kill
	(gw_setup_toplevel_ui): use BonoboUIContainer from BonoboWindow
	(gpdf_window_construct): use gw_setup_window, not
	bonobo_window_construct, not gw_setup_geometry

	* shell/gpdf-window.h: s/BEGIN_GNOME_DECLS/G_BEGIN_DECLS/, kill
	struct _Component decl (was used for embeddable)

	* shell/gpdf-window-ui.xml: kill DebugDumpXml verb

	* shell/Makefile.am: update INCLUDES, LD_ADD;
	(gpdf_SOURCES): add missing gpdf-window.h
	(uidir): s/gnome/gnome-2.0/

	* configure.in: clean it a bit; set version to 0.100 (version was
	at 0.90.1 for ever and I don't want to call it 1.01.1, this is not
	1.something quality code); use GNOME2 macros;
	(i18n): update according to G2 porting guide
	(gnome-lib-checks): use PKG_CHECK
	
	
	* autogen.sh: PKG_NAME="gpdf:", USE_GNOME2_MACROS

	* .cvsignore: add intltool-... files

	Initial port to GNOME 2

2002-10-08  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-view.cc: access private fields through priv field,
	don't use view_data_t
	(pv_realize): calls render_page if we already have a pdf_doc;
	install as realize default handler
	(redraw_on_realize_cb): kill
	(pdf_view_set_pdf_doc): if we're not realized yet, just don't
	render page
	
	* xpdf/pdf-view.h: kill view_data_t typedef, move PdfView's fields
	to PdfViewPrivate
	
	* configure.in: check for gdk-pixbuf

	* xpdf/GOutputDev.cc (drawImage): replace bogus GdkImage code with
	GdkPixbuf code. I don't have any PDFs here which use
	drawImageMask, so drawImageMask I haven't rewritten drawImageMask.

2002-10-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-view.cc (first_page, last_page, next_page, prev_page): 
	inline into pdf_view_page_first and friends
	(render_page): static again

2002-10-07  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/xpdfsrc.txt, xpdf/xpdfobj.txt: kill 

	* xpdf/gpdf-embeddable-view.cc (gev_set_pdf_cb) 
	(gpdf_embeddable_view_construct): see gc_set_pdf_cb entry below

	* xpdf/gpdf-control.cc (GPdfControlPrivate: store persist_stream
	(gpdf_control_destroy): write, install
	(gc_setup_persist, gc_set_pdf_cb): pdf_view_set_pdf_doc on set_pdf
	signal from persist_stream (used to be done in PdfView)
	(gc_setup_widgets): pdf_view_new takes no parameter

	* xpdf/pdf-view.h: s/extern "C" {// around headers
	update declarations

	* xpdf/pdf-view.cc (PdfViewPrivate): store only a PDFDoc, not a
	GPdfPersistStream
	(view_is_good): replace with IS_PDF_VIEW_WITH_DOC macro, use that
	(last_page, next_page): get pdf_doc from priv
	(setup_size): ditto, add parameter assertion
	(render_page, pdf_view_get_page_width): get pdf_doc from priv
	(pdf_view_set_zoom): only render_page if pdf_poc != NULL
	(set_pdf_cb): inline into:
	(pdf_view_set_pdf_doc): new method, eventually we can switch the
	pdf to be displayed
	(pv_destroy, pdf_view_construct, pdf_view_new): don't store a
	GPdfPersistStream

	* xpdf/gtkgesture.h: include gtk.h, protect with BEGIN_GNOME_DECLS

	* xpdf/gpdf-persist-stream.h: move GPdfPersistStreamPrivate to
	gpdf-persist-stream.cc
	(gpdf_persist_stream_get_pdf_doc): declare

	* xpdf/gpdf-persist-stream.cc (gpdf_persist_stream_get_pdf_doc):
	new accessor method

	* MAINTAINERS: mail your questions to me

2002-10-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control.cc (gc_key_press_event_cb): add _cb suffix
	(gc_zoom_level_from_index, gc_set_policy_idle_cb): add gc_ prefix
	(gpdf_control_zoom_in, gpdf_control_zoom_out)
	(gpdf_control_zoom_fit_width, gpdf_control_zoom_fit): extract from
	verb implementations
	(gc_zoom_in_cb, gc_zoom_out_cb, gc_zoom_to_fit_cb)
	(gc_zoom_to_fit_width_cb, gc_zoom_to_default_cb): callbacks for
	PdfView zoom signals

	* xpdf/pdf-view.h (PdfViewClass): add signal slots
	(PdfView): kill unused mainbox field

	* xpdf/pdf-view.cc: kill old zooming code, when we want to zoom,
	we just emit signals. Our container can connect to these and make
	the right calls (i.e. pdf_view_set_zoom).
	(pv_key_press_event): emit zoom signals instead of setting our
	zoom level directly
	(class_init): install signals
	(zoom_to_fit): kill
	(pdf_view_construct): connect each gesture to its own callback
	(gesture_page_event_cb, gesture_zoom_event_cb, view_zoom_verb)
	(view_switch_page): kill old gesture callbacks and helpers
	(gesture_page_next_event_cb, gesture_page_prev_event_cb)
	(gesture_page_first_event_cb, gesture_page_last_event_cb)
	(gesture_zoom_in_event_cb, gesture_zoom_out_event_cb): new gesture
	callbacks
	
	* xpdf/bonobo-application-x-pdf-ui.xml: kill zooming verbs from
	embeddable view ui

 	* xpdf/gpdf-embeddable-view.cc (view_zoom_verb)
	(page_zoom_fit_width_cb, page_zoom_fit_height_cb)
	(page_enlarge_cb, page_shrink_cb, view_zoom_query): kill zooming
	machinery in embeddable view

	* xpdf/pdf-view.cc (view_zoom_query): kill unused method

2002-10-05  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-control-ui.xml: rename ZoomFitHeight back (2001-08-12)
	to ZoomFit, label it Best Fit as seen in HIG; it was never really
	ZoomFitHeight

	* xpdf/gpdf-control.cc (zoom_level_from_index, verb_ZoomIn_cb)
	(verb_ZoomOut_cb, set_policy_idle_cb, verb_ZoomFitWidth_cb)
	(verb_ZoomFit_cb): reimplement zooming (no BonoboZoomable yet;
	zoom-on-key-press still uses old code), rename ZoomFitHeight back
	to ZoomFit
	(gpdf_control_class_init): kill local variables

	* xpdf/pdf-view.h: add prototypes

	* xpdf/pdf-view.cc (configure_size): kill this empty function
	(setup_pixmap): don't call configure_size
	(pdf_view_get_zoom, pdf_view_set_zoom, MIN_ZOOM_FACTOR) 
	(MAX_ZOOM_FACTOR): add nice, short zooming methods
	(pdf_view_get_page_width, pdf_view_get_page_height): add

	* shell/gpdf.c (gw_control_load_pdf, gw_open, verb_HelpAbout_cb)
	(gpdf_window_construct): make it compile again. The wonders of
	emacs dabbrev-expand and me only recompiling half of the
	directories.

	* AUTHORS: update Xpdf copyright notice

	* .cvsignore: ignore more automake generated files

2002-10-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-view.cc (setup_pixmap): get our GdkWindow directly from
	our parent window, not from the win field
	(mainbox_realize): kill, (it only assigns to the win field)
	(pdf_view_construct): don't connect to "realize" to killed
	mainbox_realize
	(real_redraw_view): don't call realize_mainbox (which would assign
	to win, render_page, configure_size which is empty),
	redraw_view_all does already render page
	(realize_mainbox): kill, its only caller doesn't use it anymore
	(real_redraw_view): rename to redraw_on_realize_cb to reflect its
	only use
	(redraw_view): rename to set_pdf_cb for same reason, clean if
	else, call redraw_view_all instead of real_redraw_view
	(key_press_event_cb): rename to pv_key_press_event, make it the
	default handler for our key_press_event, use pdf_view_page bla,
	not view_switch_page
	(button_press_event_cb): rename to pv_button_press_event, make it
	the default handler, check if we already have focus
	(class_init): install pv_key_press_event, pv_button_press_event
	(pdf_view_construct): don't connect key_press_event_cb, 
	button_press_event_cb
	(redraw_view_all): fuse with render_page, use that in all places

	* xpdf/pdf-view.h: kill win field

	* xpdf/gpdf-embeddable-view.cc: s/redraw_view_all/render_page/g

	I don't know how to write a GtkWidget, but the code for the
	PdfView widget had a lot of artificial complexity, in my eyes.
	Is this from the time before it used GtkPixmap (1999-09-01)?

2002-10-04  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* shell/Makefile.am (EXTRA_DIST): distribute gpdf-window-ui.xml

	* shell/gpdf-window-ui.xml: new file, based on xpdf/gpdf-ui.xml

	* shell/gpdf.c (GPDF_IS_NON_NULL_WINDOW): add macro
	(GW_RETURN_UNLESS_GW, GW_RETURN_VAL_UNLESS_GW): kill macros, use
	GPDF_IS_NON_NULL_WINDOW with g_return_bla instead, this looks 
	more G'ish to me

	* xpdf/.cvsignore: ignore gnome-pdf-viewer binary

	* xpdf/Makefile.am (XML_FILES): don't distribute gpdf-ui.xml
	(EXTRA_DIST): no ChangeLog here

	* xpdf/gpdf-ui.xml: remove

	* xpdf/gpdf-control-ui.xml: new file, based on
	bonobo-application-x-pdf-ui.xml, half-hearted attempts to be
	HIG-compliant

	* xpdf/gpdf-control.cc (GPDF_IS_NON_NULL_CONTROL): add, use it
	(gc_key_press_event): keyhandling mostly copied from embeddable
	(verb_GoPagePrev_cb, verb_GoPageNext_cb, verb_GoPageFirst_cb)
	(verb_GoPageLast_cb, gc_verbs []): add page verbs
	(gc_set_ui_container, gc_unset_ui_container)
	(gpdf_control_activate): install UI merging
	(gc_set_zoom_items_visibility): only a dummy
	(gpdf_control_construct): decompose into:
	(gc_setup_persist, gc_setup_widgets): construct helpers

	* xpdf/gpdf-embeddable-view.cc: use pdf_view_page_bla

	* xpdf/gpdf-embeddable.h (bed_t): kill already unused typedef

	* xpdf/pdf-view.h (pdf_view_page_prev, pdf_view_page_next)
	(pdf_view_page_first, pdf_view_page_last): export

	* xpdf/pdf-view.cc (first_page, last_page, next_page, prev_page):
	static again
	(pdf_view_page_prev, pdf_view_page_next, pdf_view_page_first)
	(pdf_view_page_last): methods to be called by the control (and the
	embeddable view) to do what their names say
	(IS_NON_NULL_PDF_VIEW): like IS_PDF_VIEW with obvious extra check

2002-10-02  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/Makefile.am: factory file name is gnome-pdf-viewer,
	s/GNOME_XPDF.oafinfo/GNOME_PDF.oafinfo/

	* xpdf/GNOME_PDF.oafinfo: s/XPDF/PDF/g, the factory file name
	is now gnome-pdf-viewer, add oaf_server entry for the control

	* xpdf/bonobo-application-x-pdf.cc (gpdf_factory): multi factory
	function, replaces embeddable_factory, creates controls, too

	* xpdf/gpdf-control.cc, xpdf/gpdf-control.h: new files, first code
	for PDF viewer bonobo control.

	* shell/gpdf.c: handle priv field in GPdfWindow, add code for using
	a control instead of an embeddable (use it when USE_CONTROL != 0)

	* shell/gpdf-window.h (GPdfWindow): add priv field, kill app field
	(struct _Component) is private, moved back to gpdf.c
	
	* configure.in: PACKAGE and VERSION are set by AM_INIT_AUTOMAKE,
	kill explicit assignments

	* xpdf/GNOME_XPDF.oafinfo: remove

2002-10-01  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-embeddable-view.cc (gpdf_embeddable_view_construct): 
	pdf_view_new takes persist_stream, not embeddable

	* xpdf/pdf-view.cc: add priv struct, use it to get persist_stream,
	not bed field
	(pdf_view_new): take persist_stream, not embeddable
	(pdf_view_construct): ditto, store it in priv
	(init): g_new0 priv
	(class_init): we need finalize:
	(pv_finalize): for priv
	(pv_destroy): unref priv->persist_stream

	* xpdf/pdf-view.h: use BEGIN_GNOME_DECLS, we have a priv field now,
	kill bed field, new and construct take a GPdfPersistStream now, not
	GPdfEmbeddable (of course, this is still ugly)

	Various source files: remove \n from g_message calls,
	update Michael's email address, s/Helix Code/Ximian/
	
2002-09-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/gpdf-embeddable.h (GPdfEmbeddable): kill already commented
	out fields
	(GPdfEmbeddableClass): kill pdf_changed signal slot
	
2002-09-30  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* xpdf/pdf-view.cc: get PDFDoc from GPdfPersistStream, not
	directly from our embeddable (various places).

	* xpdf/Makefile.am: fix gui variable, add gpdf-persist-stream
	files

	* xpdf/bonobo-application-x-pdf.cc: include GlobalParams.h,
	(embeddable_factory): create a GPdfPersistStream first, then
	create an embeddable.

	* xpdf/gpdf-embeddable.cc (bed_free_data): move to
	gpdf-persist-stream.cc as delete_pdf_doc_full
	(load_pdf_from_stream): move to gpdf-persist-stream.cc
	(finalize): free priv field
	(class_init): kill pdf_changed signal, GPdfPersistStream has
	set_pdf signal, use finalize
	(gpdf_embeddable_add_interfaces): kill
	(gpdf_embeddable_construct): take GPdfPersistStream param,
	use bonobo_object_add_interface not gpdf_embeddable_add_intf
	(gpdf_embeddable_new): take GPdfPersistStream param

	* xpdf/gpdf-embeddable.h: remove extern "C" around bonobo
	includes, they protect themselves. Introduce private struct,
	still public. Use GPdfPersistStream

	
	* xpdf/gpdf-persist-stream.cc, xpdf/gpdf-persist-stream.h:
	files for new GPdfPersistStream class. Contains PDF loading code

	* xpdf/BonoboStream.h: hide GList before including gnome headers

2002-09-25  Martin Kretzschmar  <m_kretzschmar@gmx.net>

	* configure.in: don't use macro dir, don't call AC_ARG_PROGRAM
	( AM_INIT_AUTOMAKE does this), inline autoheader templates from
	acconfig.h, use AC_HELP_STRING where appropriate.

	* acconfig.h: Remove.

	* autogen.sh: switch from macro dir to gnome-common.

2002-09-24  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf-window.h: kill the Container typedef, everybody uses
	GPdfWindow now.
	(Component): rename container field to gpdf_window

	* shell/gpdf.c (gw_has_contents): ``readability function'', use it
	instead of testing gpdf_window->view_widget
	(gw_drag_data_received): inline code from container_new, clean it
	(gw_open_dialog): ditto
	(main): moe gpdf_popt_options, poptContext globals here, make
	command line handling an idle handler -- again, shamelessly stolen
	from eog:
	(handle_cmdline_args, create_window): command line handlers
	(container_new): not needed anymore, kill

2002-09-24  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c: s/containers/window_list/g and move definition
	down to GPdfWindowClass
	(GW_RETURN_NULL_UNLESS_GW): kill this macro, use
	GW_RETURN_VAL_UNLESS_GW
	(gw_close_all): write while loop with less ink

2002-09-23  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/bonobo-application-x-pdf-ui.xml: kill HelpAbout verb,
	only the shell implements it.

2002-09-23  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (gw_setup_dnd): use TARGET_URI_LIST enum constant
	in GtkTargetEntry drag_types[]
	(component_destroy): rename to gw_component_destroy, move down to
	its only caller gw_destroy, add != NULL assertion
	(gw_destroy): call it with new name
	(container_set_view): rename to gw_add_component_view_to_ui, add
	parameter asserts, use bonobo_client_site_new_view_full, don't
	call bonobo_wrapper_set_visibility, bonobo_view_frame_set_covered
	(container_launch_component): s/container/gw/, add gpdf_window
	parameter, get BonoboItemContainer from it, kill goad_id
	parameter, always use GPDF_EMBEDDABLE_IID (new #define)
	(container_activate_component): s/container/gw/, kill goad_id
	param, check gpdf_window param, use gw_launch_component
	(open_pdf): rename to gw_open, factor out PersistStream loading
	into gw_component_load_pdf
	(container_destroy): kill,
	(container_new): use gw_close instead

	Kill some prototype declarations.
	
2002-09-18  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* ChangeLog: merge in xpdf/ChangeLog and shell/ChangeLog using
	the excellent MergeLog.awk and Emacs ediff tools.

	* shell/ChangeLog: remove

	* xpdf/ChangeLog: remove
	
2002-09-17  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable.cc (load_pdf_from_stream): don't try to
	check for catalog after having discovered that !pdf->isOk and
	having already deleted it. I introduced my first goto to this
	code.  Edsger Dijkstra in memoriam

2002-09-17  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (container_exit_cmd): => (verb_FileExit_cb)
	(gw_close_all): close all windows, causing the program to exit
	(verb_FileExit_cb): use gw_close_all
	(container_open_cmd): => (verb_FileOpen_cb) which calls the new
	(gw_open_dialog): extract file selection code into
	(gw_ask_for_filename):
	(file_dialog_delete_event): move down to gw_ask_for_filename
	(set_ok): ditto, rename to file_dialog_ok

2002-09-17  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (container_close_cmd): turn into
	(verb_FileCloseWindow_cb) with BonoboUIVerbFn prototype
	(container_dump_cmd): ditto (verb_DebugDumpXml_cb)
	(container_about_cmd): ditto (verb_HelpAbout_cv), Michael says I
	maintain gpdf now, added Ravi Pratap, Xpdf copyright holder is
	Glyph & Cog, LLC, Derek B. Noonburg's pdf consulting business
	(verbs []) rename: gw_verbs, make static, move to where it is
	needed: right before gw_setup_toplevel_ui, use new verb callback
	names

2002-09-17  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (filenames_dropped): turn into
	(gw_drag_data_received) use for for (ed.'s note: not a typo)
	iterating the list, not while, free list after use
	(class_init): install gw_drag_data_received as default handler for
	drag_data_received
	(gw_setup_dnd): don't connect filenames_dropped to
	drag_data_received
	(gw_delete_event): renamed from (gw_delete) for consistency with
	signal name

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/Makefile.am: don't build gpdf here

	* xpdf/gpdf.cc: move to shell/gpdf.c

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c (gw_destroy): destructor (code from container_destroy)
	(gw_delete): delete_event default handler
	(gw_close): other half of container_destroy
	(gpdf_window_construct): no need to gtk_object_set_data
	"container_data", don't connect to delete_event
	(class_init): init parent_class, install destroy and delete_event
	default handler
	(container_close): kill, just use gw_close
	(container_close_cmd): call gw_close

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/gpdf.c: include gpdf-window.h, pull out struct defns,
	implement GPdfWindow class here for now (let's see if it's more
	convenient)
	(gpdf_window_new, gpdf_window_construct): new (with helper
	functions)
	(container_new): mostly moved to gpdf_window_construct, use that
	(container_destroy): don't explicitly destroy and free the
	toplevel widget

	* shell/gpdf-window.h: new file, new class GPdfWindow (was
	Container struct)

	* shell/gpdf.c: M-x mark-whole-buffer, M-x indent-region

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* shell/Makefile.am: create, bin_PROGRAMS = gpdf and friends

	* shell/gpdf.c: cvs copy of xpdf/gpdf.cc, Code was plain C except
	some extern "C" declarations :-), removed them and it compiled,
	don't include xpdf/config.h, bonobo-application-x-pdf.h
	(container_about_cmd): s/xpdfVersion/VERSION/ so we really don't
	need xpdf/config.h (FIXME: unify aconf.h and config.h?)
	
	New directory. Start ChangeLog

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* configure.in, Makefile.am: add subdirectory

	* shell: new directory

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable-view.cc (destroy_view): kill already commented
	out, previously unused destructor
	(gev_destroy): set mainbox member = NULL

	* xpdf/pdf-view.cc (pv_destroy): new destructor
	(class_init): use it, init parent_class
	(pdf_view_construct): reindent

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable-view.h (GPdfEmbeddableView): kill bed member

	* xpdf/gpdf-embeddable-view.cc: removed newlines from g_message calls
	(class_init): use checked casts, we now have destroy, no need to
	keep a ref to our embeddable here
	(gev_destroy): new destructor

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable-view.cc (gpdf_embeddable_view_new):
	s/printf/g_message/
	(view_create_menus, view_remove_menus): rename to
	(gev_set_ui_container, gev_unset_ui_container): and rewrite in EOG
	style

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable-view.cc (gev_activate): chain up to parent's
	activate handler, not to grand parent's

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/bonobo-application-x-pdf.cc (embeddable_factory): don't
	initialize embeddable (where did that come from?)

	* xpdf/gpdf-embeddable-view.cc (gpdf_embeddable_view_construct): don't
	handle "activate" by connecting...
	(class_init): ...install a default signal handler...
	(gev_activate): cleaned up "activate" handler, renamed from 
	(view_activate)

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/Makefile.am: add pdf-view.cc, pdf-view.h

	* xpdf/gpdf-embeddable-view.cc (view_is_good, first_page, last_page)
	(next_page, prev_page, configure_size, setup_size, setup_pixmap)
	(render_page, realize_mainbox, redraw_view_all, real_redraw_view)
	(redraw_view): kill
	(first_page, last_page, next_page, prev_page, redraw_view_all):
	only declare here, use definitions from pdf-view.cc
	(page_first_cb, page_next_cb, page_prev_cb, page_last_cb):
	s/view_data_t/PdfView/ etc.
	(view_switch_page): kill
	(zoom_to_fit): leave only declaration
	(view_zoom_verb, page_zoom_fit_width_cb, page_zoom_fit_height_cb) 
	(page_enlarge_cb, page_shrink_cb, view_zoom_query): s///
	(verbs[]): make static
	(view_create_menus, view_remove_menus, view_activate): s///
	(button_press_event_cb, gesture_page_event_cb) 
	(gesture_zoom_event_cb): kill
	(key_press_event_cb): s///, only handle scrolling here
	(mainbox_realize): kill
	(destroy_view): comment out for now
	(init): empty
	(gpdf_embeddable_view_construct): mainbox = pdf_view_new,
	remove mainbox construction code

	* xpdf/pdf-view.cc (view_is_good): s/view_data_t/PdfView/
	(first_page, last_page, next_page, prev_page): non-static
	(setup_pixmap): view_data is our mainbox now
	(render_page): s/view_data_t/PdfView/ s/view_data/view/
	(redraw_view_all): ditto
	(realize_mainbox): /GPdfEmbeddableView/PdfView/ etc.
	(real_redraw_view): ditto
	(redraw_view): ditto, view is our mainbox now
	(page_first_cb, page_next_cb, page_prev_cb, page_last_cb): kill
	here (verb implementations)
	(view_switch_page): s/// as above
	(zoom_to_fit): non-static, commented out for now
	(view_zoom_verb, view_zoom_query): s/// as above
	(page_zoom_fit_width_cb, page_zoom_fit_height_cb)
	(page_enlarge_cb, page_shrink_cb): kill here (verb impl)
	(verbs[], view_create_menus, view_remove_menus, view_activate):
	kill here (bonobo stuff)
	(gesture_page_event_cb, gesture_zoom_event_cb): s///
	(key_press_event_cb): don't handle scrolling here, s///
	(destroy_view): kill here
	(pdf_view_construct): kill everything except mainbox construction
	

	* xpdf/gpdf-embeddable-view.h: view_data_t is no longer a typedef'd
	GPdfEmbeddableView. Remove PdfView related members from
	GPdfEmbeddableView

	* xpdf/pdf-view.h: s/GPdfEmbeddableView/PdfView/ with some AI ;)
	GPdfEmbeddableView still typedef'd view_data_t. Super class
	is GtkEventBox

	Split bonobo / non-bonobo parts of GPdfEmbeddableView:
	
	* xpdf/pdf-view.h: new file (cvs copy of gpdf-embeddable.h)

	* xpdf/pdf-view.c: ditto. These will contain non-bonobo parts

2002-09-08  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/GOutputDev.h: add missing gdk include

	* xpdf/GOutputDev.cc (GOutputDev::drawLink): don't #if 0, just don't
	use it
	(GOutputDev::drawImage, GOutputDev::drawImageMask): use Michael's
	broken image handling code from gpdf 0.90.1 instead of my even
	more broken code

	* xpdf/gpdf-embeddable-view.cc (render_page): disable links here.
	(realize_mainbox): view == view_data now. Don't have to
	gtk_object_get_data anymore
	(real_redraw_view): ditto
	(redraw_view): ditto, make it static again
	(gpdf_embeddable_view_construct): connect redraw_view to
	pdf_changed signal, don't gtk_object_set_data "view_data"
	(view_switch_page, view_zoom_verb, view_activate)
	(button_press_event_cb, gesture_page_event_cb)
	(gesture_zoom_event_cb, key_press_event_cb, mainbox_realize): make
	them static again

	* xpdf/gpdf-embeddable.cc (class_init): add "pdf_changed" signal
	(load_pdf_from_stream): emit it, don't redraw_view explicitly

	* xpdf/gpdf-embeddable.h: add signal to class struct

2002-09-01  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable.cc (gpdf_embeddable_view_factory): move here
	from bonobo-application-x-pdf.cc

	* xpdf/GOutputDev.cc (GOutputDev::drawLink): comment out for
	now. Segfaults. I don't understand this.

	* xpdf/bonobo-application-x-pdf.cc: move view_data_t related code
	( except view_factory) to gpdf-embeddable-view.cc, remove lots of
	includes

	* xpdf/gpdf-embeddable-view.h: new files with new GPdfEmbeddableView
	class

	* xpdf/gpdf-embeddable-view.cc: 

	* xpdf/gtkgesture.h: double include protection

	* xpdf/XOutputDev.h: add missing include "Object.h"

	* xpdf/GOutputDev.h: add missing include "Object.h"

2002-08-31  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/gpdf-embeddable.cc: 

	* xpdf/gpdf-embeddable.h: bed_t: Replace Data Value with Object
	[Fowler] i.e.  turn it into the GPdf::Embeddable class.

	* xpdf/bonobo-application-x-pdf.cc: temporarily make some functions
	non-static
	(view_is_good): move up in file, use it in more places.
	(setup_pixmap): remove window parameter, get it from view_data
	(destroy_embed): move to GPdfEmbeddable::destroy
	(embeddable_factory): drastically simplify, work is done in
	GPdfEmbeddable::new and friends
	remove count of running_objects.
	
	* xpdf/gpdf-util.h: new file
	(E_MAKE_TYPE): copied from gal

2002-08-29  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/bonobo-application-x-pdf.cc: move struct bed_t to
	gpdf-embeddable.{cc,h}
	(setup_pixmap) remove doc parameter. (Get it from view_data param)
	
	* xpdf/gpdf-embeddable.cc: New files to contain the embeddable class

	* xpdf/gpdf-embeddable.h:  

	* xpdf/gpdf.cc (main): remove call to setlocale (done in
	gnome_init...), ignore return value of oaf_init, let bonobo_init
	figure out which orb to use.
	
	* xpdf/Link.h: declare some methods as const.
	* xpdf/Link.cc:

2002-08-12  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/GOutputDev.cc: make it compile (without Type 3 support for now)

	* xpdf/bonobo-application-x-pdf.cc: Derek has removed the global xref
	variable. Remove the ``Ugly global xref fix''

2002-08-09  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/BonoboStream.h: ditto.

	* xpdf/BonoboStream.cc: sync with FileStream.

	Merge in Xpdf 1.01 files

	* xpdf/GOutputDev.cc (drawImage), (drawImageMask): use gdk_image_get
	as XGetSubImage 

2002-08-09  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* goo/Makefile.am: ditto.

	* configure.in: merged in Xpdf 1.01 changes.

2002-08-05  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/GOutputDev.h: ditto. 

	* xpdf/GOutputDev.cc: sync with XOutputDev.cc.

	* xpdf/bonobo-application-x-pdf.cc (printCommands): is in Gfx.cc now

2002-08-04  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* xpdf/BonoboStream.cc: merge in decryption code from FileStream 0.92
	(close): new method, from FileStream,
	(~bonoboStream): use close

	* xpdf/BonoboStream.h: #define bonoboStreamBufSize as in FileStream
	0.92, 
	(bonoboStream): use it.

2002-05-31  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in: Added Vietnamese (vi) and Walloon (wa) to All_LINGUAS.

2002-02-17  Duarte Loreto <happyguy_pt@hotmail.com>

	* configure.in: Added pt to All_LINGUAS.

2001-10-30  Roy-Magne Mo <rmo@sunnmore.net>

	* configure.in: Added nn to All_LINGUAS.

2001-09-26  Abel Cheung <maddog@linux.org.hk>

	* configure.in: Added zh_TW to ALL_LINGUAS.

2001-09-09  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Renamed zh_CN.GB2312 to zh_CN.

2001-08-20  Ravi Pratap  <ravi@che.iitm.ac.in>

	* MAINTAINERS :  Create and add Michael and myself to it.

2001-08-19  Zbigniew Chyla  <cyba@gnome.pl>

	* Makefile.am (SUBDIRS): Added po.

	* configure.in (AC_OUTPUT): Added intl/Makefile po/Makefile.in.

	* xpdf/Makefile.am (INCLUDES): Added -DGNOMELOCALEDIR.

	* xpdf/bonobo-application-x-pdf.cc (main): Set textdomain and locale.

	* xpdf/gpdf.cc (main): ditto.
	Marked a few strings for translation.

2001-08-12  Ravi Pratap  <ravi@che.iitm.ac.in>

	* xpdf/bonobo-application-x-pdf-ui.xml : Add ZoomFitHeight verb and toolbar
	item.

	* xpdf/bonobo-application-x-pdf.h (VERB_Z_FIT): Rename to VERB_Z_FIT_WIDTH
	(VERB_Z_FIT_HEIGHT): Add
	
	* xpdf/bonobo-application-x-pdf.cc (verbs): Update to use the new
	verbs and names.
	(view_zoom_verb): update accordingly
	(zoom_to_fit): Modify to take an extra argument determining type of fit. Use
	the scrolled_window to determine allocation height and width.

	* xpdf/Makefile.am : Comment out unnecessary targets

2001-08-10  Ravi Pratap  <ravi@che.iitm.ac.in>

	* xpdf/stock-zoom-in.xpm : Add

	* xpdf/stock-zoom-out.xpm : Add

	* xpdf/stock-zoom-fit.xpm : Add

	* xpdf/stock-zoom-fit-wide.xpm : Add

	* xpdf/stock-zoom-fit-tall.xpm : Add

	* xpdf/Makefile.am : Update, add targets etc.

	* xpdf/bonobo-application-x-pdf.cc (view_zoom_verb): Change zoom
	factor to 1.2 which is more correct
	(zoom_to_fit): Small tweak to enable better approximation

	* xpdf/bonobo-application-x-pdf-ui.xml : Change ZoomFit to ZoomFitWidth.

	* xpdf/bonobo-application-x-pdf.cc : Update to use the new name.

2001-08-09  Ravi Pratap  <ravi@che.iitm.ac.in>

	* xpdf/bonobo-application-pdf-ui.xml: Add Zoom items to the
	toolbar

2001-07-10  Ravi Pratap  <ravi@che.iitm.ac.in>

	* xpdf/gpdf.cc (main): Make indentation consistent with the
	rest of the source

2001-07-01  Ravi Pratap  <ravi@che.iitm.ac.in>

	* xpdf/gpdf-ui.xml: Make the print menu item visible.

2001-06-22  Ravi Pratap  <ravi@che.iitm.ac.in>

	* configure.in: Fix a daft error of mine; ask for cflags
	and libs of bonobox instead

2001-06-16  Ravi Pratap  <ravi@che.iitm.ac.in>

	* configure.in: Fix logic for bonobo checking to stop if
	bonobo is not found.

2001-03-17  Ravi Pratap  <ravi@che.iitm.ac.in>

	* configure.in : Fixed logic to determine bonobo
	version. 

	* gpdf.desktop : Exec=gpdf and not xpdf.

2001-02-03  Simos Xenitellis  <simos@hellug.gr>

	* gpdf.desktop: Added Greek messages.

	* configure.in: Added el to ALL_LINGUAS.

2001-01-24  Stanislav Visnovsky	<visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added sk to ALL_LINGUAS.
	* gpdf.desktop: Added Slovak messages

2001-01-21  Fatih Demir	<kabalak@gmx.net>

	* configure.in: Added tr to ALL_LINGUAS.

2001-01-11  Michael Meeks  <michael@helixcode.com>

	* xpdf/gpdf.cc (container_launch_component): don't add the client
	site to the item container.

2000-12-21  Michael Meeks  <michael@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc: Kill mutex / thread init code,
	it screws gtk.

	* xpdf/gpdf.cc: update the IID naming scheme.

	* xpdf/bonobo-application-x-pdf.cc (init_bonobo_application_x_pdf_factory): ditto. (init_server_factory): setup ORB properly.

	* xpdf/Makefile.am: De-goadize; update oafinfo fnames.

2000-12-21  Michael Meeks  <michael@helixcode.com>

	* configure.in (xpdf_cv_func_select_arg): remove oaf
	checking cruft.

2000-12-08  Fatih Demir	<kabalak@gmx.net>

	* configure.in: Added "ko" to ALL_LINGUAS.

2000-12-04  Darin Adler  <darin@eazel.com>

	* xpdf/bonobo-application-x-pdf.cc:
	s/bonobo_embeddable_factory_new/bonobo_generic_factory_new/.

2000-11-16  Ramiro Estrugo  <ramiro@eazel.com>

	* xpdf/bonobo-application-x-pdf.cc:
	Make the signatures of callbacks match the declaraed types to
	avoid compiler warnings.
	
2000-11-16  Darin Adler  <darin@eazel.com>

	* xpdf/.cvsignore:
	* xpdf/Makefile.am:
	Remove remnants of old ui translation scheme
	now that we have Kenneth's new one (see po).

2000-11-15  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-11-10  Robert Brady  <robert@suse.co.uk>

	* configure.in: Added Tamil translation.

2000-11-07  Fatih Demir	<kabalak@gmx.net>

	* xpdf/.cvsignore: Added bonobo-application-x-pdf-ui.h and
		gpdf-ui.h to the ignores.

2000-11-05  Pablo Saratxaga <pablo@mandrakesoft.com>

	* po/da.po,configure.in: Added Danish translation.
	
2000-11-02  Michael Meeks  <michael@helixcode.com>

	* configure.in: check for Bonobo >= 0.27

2000-10-27  Szabolcs Ban <shooby@gnome.hu>

	* configure.in: Added Hungarian (hu) entry (ALL_LINGUAS)
	* gpdf.desktop: Added Hungarian entries.

2000-10-20  Darin Adler  <darin@eazel.com>

	* .cvsignore: Add aclocal.m4.
	* xpdf/bonobo-application-x-pdf.cc:
	Change BonoboUIHandler to BonoboUIComponent.

2000-10-19  Michael Meeks  <michael@helixcode.com>

	* xpdf/gpdf.cc: update for Dietmer internal changes.

2000-10-19  Jarkko Ranta  <jjranta@cc.joensuu.fi>

	* configure.in: Added Finnish (fi) entry (ALL_LINGUAS).
	* gpdf.desktop: Added Finnish entries.

2000-10-18  Christophe Merlet  <christophe@merlet.net>

	* configure.in: Added French (fr) to ALL_LINGUAS.
	* gpdf.desktop: Added French strings.

2000-10-17  Michael Meeks  <michael@helixcode.com>

	* xpdf/gpdf.xml: add.

	* xpdf/Makefile.am: sort out xml files.

	* xpdf/gpdf.cc: Re-engineer to the new UI handler.

	* xpdf/bonobo-application-x-pdf.cc: update to new UI handler

	* xpdf/bonobo-appliation-x-pdf-ui.xml: create.

	* xpdf/gpdf-ui.xml: create.

2000-10-17  Michael Meeks  <michael@helixcode.com>

	* Makefile.am (WIN32_EXTRA): remove cruft so we distcheck.

2000-10-17  Almer S. Tigelaar  <almer1@dds.nl>

	* configure.in: Added Dutch (nl) to ALL_LINGUAS.

2000-10-09  Darin Adler  <darin@eazel.com>

	* aclocal.m4: Removed this file which is generated 
	* xpdf/bonobo-application-x-pdf.cc: Ifdef'd out code that doesn't
	compile with the latest verb changes.

2000-10-07  Michael Meeks  <michael@helixcode.com>

	* xpdf/gpdf.cc (main): cut out stale gnorba fat.

	* xpdf/bonobo-application-x-pdf.cc (init_server_factory),
	(init_bonobo_application_x_pdf_factory): ditto.

	* xpdf/bonobo-application-x-pdf.cc (embeddable_factory): remove the
	sizeable interface.

2000-10-07  Michael Meeks  <michael@helixcode.com>

	* configure.in: check for Bonobo >= 0.20

2000-10-07  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added Galician (gl) to ALL_LINGUAS

2000-10-04  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* configure.in: Add Japanese to ALL_LINGUAS

2000-10-04  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* gpdf.desktop: Add Japanese translation.

2000-10-04  Michael Meeks  <michael@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc (view_create_menus): upd.

	* xpdf/gpdf.cc (container_launch_component): update for ItemContainer
	rename. (container_new): update to bonobo-win stuff.
	(container_set_view): use compat_get_container.

2000-10-04  Michael Meeks  <michael@helixcode.com>

	* configure.in (xpdf_cv_func_select_arg): check for bonobo 0.19

2000-10-04  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added ALL_LINGUAS and all current languages.
	
2000-09-15  Mathieu Lacage  <mathieu@eazel.com>

	* gpdf.keys.in: fix evil evil buggy: mime types DO NOT HAVE 
	a ":" after them
	* gpdf.mime: idem

2000-08-13  Arik Devens  <arik@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc (view_create_menus): Switched
	page_enlarge_cb and page_shrink_cb to get zooming in and out
	workin correctly in the menu.

2000-08-02  Michael Meeks  <michael@helixcode.com>

	* xpdf/Makefile.am (gpdf_LDADD): kill ghastly hack adding -lbonobo.
	(bonobo_application_x_pdf_LDADD): add EXTRA_GNOME_LIBS

2000-08-02  Michael Meeks  <michael@helixcode.com>

	* configure.in: set '$bonobo' for EXTRA_GNOME_LIBS, use bonobox

	* po/POTFILES.in: add.

2000-07-25  Michael Meeks  <michael@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc (embeddable_factory): s/gtk/bonobo/
	on unref. Junk 2 stop tabs throught, Derek can have my kittens.
	(view_create_menus): create the pdf toolbar before using it.
	(button_press_event_cb): return a value.

2000-07-04  Michael Meeks  <michael@helixcode.com>

	* xpdf/GOutputDev.cc (drawImage): kill double free.

	* xpdf/BonoboStream.cc (bfread): update for new API.

2000-06-11  Fatih Demir	<kabalak@gmx.net>
	
	* gpdf.desktop: Corrected a stupid [tr]-entry.	

2000-06-07  Pavel Cisler  <pavel@eazel.com>

	* xpdf/bonobo-application-x-pdf.cc:
	Renamed BonoboUIHandlerCallbackFunc to BonoboUIHandlerCallback
	to match new naming.

2000-06-01  Darin Adler  <darin@eazel.com>

	* xpdf/application-x-pdf.oafinfo:
	* xpdf/gpdf.cc:
	Fixed spelling of component in IID.

2000-05-26  Darin Adler  <darin@eazel.com>

	* xpdf/bonobo-application-x-pdf.cc (load_pdf_from_stream),
	(embeddable_factory):
	* xpdf/gpdf.cc: (open_pdf):
	Updated for new PersistStream interface. I mostly just passed
	NULLs. Not 100% sure that's correct.

2000-05-26  Dan Winship  <danw@helixcode.com>

	* xpdf/gpdf.cc (open_pdf): Note that the data passed to the
	PersistStream is "application/pdf".

2000-05-24  Darin Adler  <darin@eazel.com>

	* .cvsignore:
	* goo/.cvsignore:
	* ltk/.cvsignore:
	* xpdf/.cvsignore:
	Added a bunch of generated files.
	
	* xpdf/GOutputDev.cc: (GOutputDev::updateLineAttrs):
	Fixed a type to avoid a warning.

2000-05-07  Maciej Stachowiak  <mjs@eazel.com>

	Work with OAF and fix various bugs:
	
	* configure.in, aclocal.m4: Detect when Bonobo is built with OAF
	support, and if so use OAF.
	* xpdf/Makefile.am: When using OAF, link against OAF and install
	oafinfo file.
	* xpdf/gpdf.cc: Include oaf headers when using OAF.
	(openpdf): Use OAFIID to activate the component when using OAF.
	(container_set_view), (container_launch_component),
	(container_new): Put the view in an EventBox, not a
	ScrolledWindow; the component now handles scrolling itself.
	(key_press_event_cb): Removed; key press handling moved to
	component.
	(main): Initialize OAF instead of GOAD when using OAF.
	* xpdf/bonobo-application-x-pdf.cc: Include OAF headers when using
	OAF.
	(redraw_view): Handle the case where we are loading before the
	view is realized by connecting to the "realize" signal handler
	and deferring redrawing until then in that case.
	(real_redraw_view): Function to do the real redrawing.
	(load_pdf_from_stream): Don't call `realize_mainbox' directly, let
	`real_redraw_view' do it.
	(key_press_event_cb): In response to various key bindings, scroll
	the view, navigate pages, or zoom in/out.
	(button_press_event_cb): Grab the keyboard focus on a press of
	button 1.
	(view_create_menus): Rename menus to be more standard, and provide
	accelerators for menus and items.
	(realize_mainbox): Get window ourselves if we have to.
	(view_factory): Put the view in a scrolled window so scrolling can
	be handled by the component itself. Connect to "key_press" and
	"button_press" for keyboard and focus handling. Set the
	GTK_CAN_FOCUS flag for the main view widget.
	(init_bonobo_application_x_pdf_factory, init_server_factory): Use
	OAF when appropriate.

	* xpdf/application-x-pdf.oafinfo: New file, OAF activation record.

2000-04-10  Fatih Demir	<kabalak@gmx.net>

	* gpdf.desktop : Added [tr] ..

2000-03-10  Michael Meeks  <michael@helixcode.com>

	* xpdf/gpdf.cc: s/GNOME/Bonobo/

	* xpdf/application-x-pdf.gnorba: s/GNOME/Bonobo/

2000-02-28  Michael Meeks  <michael@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc (view_factory): kill spurious
	UI handler creation.

	* xpdf/gpdf.cc (container_set_view): update to new bonobo api.

2000-02-25  NotZed  <NotZed@HelixCode.com>

	* xpdf/Makefile.am: Fixed up lists of sources so that distcheck
	works.  Also, only build gpdf if with gnome (otherwise distcheck
	fails).

	* xpdf/gpdf.cc (container_about_cmd): Define it if we are going to
	be using it.

2000-02-25  NotZed  <NotZed@HelixCode.com>

	* configure.in: Do AM_GNOME_GETTEXT for INTLLIBS def.

	* Makefile.am: Dont include gjgppcf by default, can this
	be done in an automatic way?

	* ltk/Makefile.am (libltk_a_SOURCES): Add missing sources.

2000-02-09  Michael Meeks  <michael@helixcode.com>

	xpdf/ Clean unused & lack of casting all round the place.
	
2000-02-08  Michael Meeks  <michael@helixcode.com>

	* configure.in: update bonobo check for latest ver.

2000-02-07  Michael Meeks  <michael@helixcode.com>

	* xpdf/bonobo-application-x-pdf.cc: fix typo.

2000-02-07  Michael Meeks  <michael@helixcode.com>

	* configure.in (VERSION): bump.

1999-12-17  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/gpdf.cc (container_set_view): make wrapper invisible.

	* xpdf/bonobo-application-x-pdf.cc (embeddable_factory): kill
	diff id string. + constify lots of paths.
	(view_factory): kill size query. (view_size_query): kill.

1999-11-06  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/gtkgesture.c (gesture_data_append_point): fix leak.

	* xpdf/bonobo-application-x-pdf.c (setup_pixmap): Fix leak +
	flicker.

	* xpdf/GOutputDev.cc (~GOutputDev): Add clear of state stack +
	clear text page + delete font. (startPage): fic gdkGC leaks.
	(findColor): clean.

1999-10-11  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/GOutputDev.cc: Re-enable stroke color setting.

1999-10-08  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/gpdf.cc (container_new): add to list before possibly removing.

	* xpdf/bonobo-application-x-pdf.cc (destroy_embed): Quit on last
	component close.
	(load_pdf_from_stream): inline redraw-all with new API.
	(redraw_view): implement (redraw_all): remove. (realize_mainbox):
	remould.
	(destroy_view): Fix serious memory corruption freeing pixmap
	twice.
	(view_activate): kill debug.

1999-10-06  Peter Teichman  <pat4@acpub.duke.edu>

	* xpdf/GOutputDev.cc: add return type for GOutputServerFont::isOk()

	* xpdf/bonobo-application-x-pdf.cc: casting fixes, for compiling
	with recent gcc

	* xpdf/PSOutputDev.cc: same, more casting fixes
	
1999-10-06  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/BonoboStream.cc (bfseek): Add debug case.
	(bfread): nail immense leak.

	* xpdf/gpdf.cc (container_set_view): Activate the component to
	allow gestures to work.

1999-10-05  Michael Meeks  <mmeeks@gnu.org>

	* xpdf/bonobo-application-x-pdf.cc (setup_pixmap): Connect
	gestures + add event mask.

	* xpdf/gpdf.cc (container_close): Created. (container_close_cmd):
	Use it.  Huge header clean.

	* xpdf/gtkgesture.[ch]: Create.

1999-09-11  Michael Meeks  <michael@nuclecu.unam.mx>

	* xpdf/bonobo-application-x-pdf.cc (destroy_view): destroy don't
	unref, make more paranoid add debug. (destroy_embed): Clean.

	* xpdf/gpdf.cc (key_press_event_cb): Added all manner of
	shortcuts.
	(container_new): Add key stuff (container_destroy_cb): Implement.
	(container_destroy): Add paranoid check.

1999-09-07  Michael Meeks  <michael@imaginator.com>

	* xpdf/gpdf.cc (container_new): Fiddled with scrollpane

1999-09-01  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-application-x-pdf.cc: Fix a massive leak :-).
	Considerably simplified with GtkPixmap. Fixed location problems.

1999-08-27  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-application-x-pdf.cc: Remove count of embeddable
	servers: seems to be handled inside Bonobo now.

1999-08-26  Michael Meeks  <michael@imaginator.com>

	* xpdf/gpdf.cc (component_destroy): Improved clean up.

	* xpdf/bonobo-application-x-pdf.cc (bed_free_data): Expand, and
	clean; remove redundant pdf_stream delete.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* xpdf/application-x-pdf.gnorba: Update to new mime type.

	* xpdf/Makefile.am (gnorba_DATA): Rename mime type.
	Remove glade.

	* xpdf/gpdf.cc (main): File up a container if we fail to load any
	of the command line files.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* xpdf/Makefile.am: Cleaned + added thread bits.

	* xpdf/bonobo-image-x-pdf.cc: Add locking round 'xref' global.
	Remove CORBA_Environment global.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-image-x-pdf.cc (bed_free_data): Rationalised Stream
	duplicate / release, and scoped BonoboFile correctly.

	* xpdf/BonoboStream.cc (bfseek): Add init / free to all corba
	exceptions, ( stupidly lost this code somehow ).

	* xpdf/bonobo-image-x-pdf.cc (render_page): Add startDoc.
	(main): Add freeParams.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* configure.in: Removed check for Glade.

	* Makefile.am (gpdf.*): Renamed from xpdf.*

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* configure.in: Add EXTRA_GLIB_LIBS/CFLAGS to include thread
	support.

1999-08-23  Miguel de Icaza  <miguel@gnu.org>

	* xpdf/bonobo-image-x-pdf.cc: Replace exit() with gtk_main_quit()

1999-08-23  Michael Meeks  <michael@imaginator.com>

	* xpdf/gpdf.cc (container_launch_component): Fix flags.
	(container_create_toolbar): Fix for new Bonobo.

1999-08-23  Michael Meeks  <michael@imaginator.com>

	* xpdf/Makefile.am: Added helper programs back in.

	* xpdf/bonobo-image-x-pdf.cc (view_create_menus): Toolbars.

1999-08-22  Miguel de Icaza  <miguel@gnu.org>

	* xpdf/bonobo-image-x-pdf.cc (main): Add error checking for
	factory registration.

1999-08-22  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-image-x-pdf.cc: Add zoom.

1999-08-19  Michael Meeks  <michael@imaginator.com>

	* xpdf/PDFDoc.cc: Altered to read / write lines.

	* xpdf/PDFDoc.cc: Move FileStream::checkHeader so its called in
	FileStream constructor.

1999-08-18  Michael Meeks  <michael@imaginator.com>

	* xpdf/gpdf.cc: cloned from test-container.
	(launch_server): use GOAD_ACTIVATE_SHLIB not '0'

1999-08-16  Michael Meeks  <michael@imaginator.com>

	* xpdf/Makefile.am (bin_PROGRAMS): Hack to only make bonobo
	component.

	* xpdf/bonobo-image-x-pdf.cc (view_factory): Init all members.

1999-08-15  Michael Meeks  <michael@imaginator.com>

	* xpdf/Now bonobo-image-x-pdf works, but everything else is
	broken: use

		make bonobo-image-xpdf to compile...

1999-08-11  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-image-x-pdf.cc: Fixed innumerable bugs, some in
	bonobo :-)
	(load_image_from_stream): Try closing the file to let its contents
	hit disk before reading from it :-)
	(configure_size): Don't get scared by configure_size.
	(redraw_view): Get the parameters in some sort of order.

1999-08-11  Michael Meeks  <michael@imaginator.com>

	* xpdf/bonobo-image-x-pdf.cc: Added.

	* xpdf/Makefile.am: added bonobo-image-x-pdf.c

1999-08-03  Michael Meeks  <michael@imaginator.com>

	* xpdf/gpdf.cc: Lots of updates, gives up on logging changes
	( for a bit. )

1999-08-02  Michael Meeks  <michael@edenproject.org>

	* xpdf/GOutputDev.cc: Fix more silly region merging bugs.

1999-08-01  Michael Meeks  <michael@edenproject.org>

	* xpdf/Makefile.in: Added -lglade, -lglade-gnome & Added -Wall
	
	* xpdf/gpdf.glade: Added.
	
	* xpdf/gpdf.cc (loadFile): Add typecast.
	Remove all DOC_ROOT's magic numbers.
	Add glade GUI,
	Lots of other bits ...
	
1999-07-29  Michael Meeks  <michael@edenproject.org>

	* xpdf/GOutputDev.cc: Hahaaa... the bug ! :-) A difference in how
	GDK / X deal with merging rectangles and regions. Good.

	* xpdf/gpdf.cc (doc_redraw_event): Messing around.

	* xpdf/GOutputDev.cc (drawChar): Fix char printed as string.

1999-06-09  Michael Meeks  <michael@edenproject.org>

	* xpdf/gpdf.cc (main): Add error init.

1999-06-03  Michael Meeks  <michael@edenproject.org>

	* xpdf/GOutputDev.cc (GOutputDev): Actually set up pixmapW & H
	(GOutputDev): Setup 'depth' correctly.

	* xpdf/gpdf.cc (main): Moved freeParams() to after the main loop !

	* xpdf/Params.cc (initParams): Added assert on fontPathLen.
	(freeParams): Clean global pointers on free.

	* xpdf/Makefile.in (CXXFLAGS): Added LTKSRCDIR and Xpm_CFLAGS to
	CXXFLAGS.

1999-05-29  Michael Meeks  <michael@edenproject.org>

	* xpdf/Makefile.in (GPDF_OBJS): Remove XOutputDev
	(all): Remove all but gpdf.

	* xpdf/gpdf.cc: Add define GString / undef.
	(main): Argc not Argv :)

	* xpdf/GOutputDev.cc (findColor): Made pigs ear of colour
	mappings.

1999-05-28  Michael Meeks  <michael@imaginator.com>

	* xpdf/GOutputDev.cc (drawChar16): XChar2b -> GdkWChar

1999-05-27  Michael Meeks  <michael@imaginator.com>

	* xpdf/GOutputDev.cc (GOutputFont): Hacks.
	(GOutputFont): Renamed.
	(getFont): killed redundant 'display'
	getGdkFont not getXFont.
	(GOutputDev): NB. colormap -> gtk_widget_get_default_colormap ()
	which returns GdkColormap *, killed colormap & depth1 in prototype.
	Removed redundant assigns.
	NB. Miguel says 'miguel> michael: a GdkPixmap is a GdkWindow'
	Many misc. fixes upto convertSubPath.

	* xpdf/GOutputDev.h: Comments 'G'd and GOutputDev updated.
	XPoint -> GdkPoint

	* xpdf/Makefile.in (CXXFLAGS): Add GOOSRCDIR.

1999-05-27  Michael Meeks  <michael@imaginator.com>

	* README.CVS: Elucidated the GPL nature of xpdf.
